;------------------------------------------------------------------------------
;
;	Elrond.ini
;
;------------------------------------------------------------------------------
Object RivendellElrond

	; *** ART Parameters ***
	SelectPortrait                     = HPrivElrond
	ButtonImage 		                   = HIrivElrond
		
	Draw                               = W3DScriptedModelDraw ModuleTag_DRAW

		OkToChangeModelColor	           = Yes
		StaticModelLODMode		           = No

		DefaultModelConditionState
			Model							             = auelrond_light
			Skeleton                       = RUElfWar_SKL
			WeaponLaunchBone				       = PRIMARY ARROW
		End
		
		ModelConditionState              = WEAPONSET_HERO_MODE RIDER2
			Model							             = auelrond_ha
			ParticleSysBone                = BAT_RIBS SkilloftheElvesFX FollowBone:Yes
			ParticleSysBone                = BAT_FARMR ElrondSwordTrailFX FollowBone:Yes
			ParticleSysBone                = BAT_FARML ElrondSwordTrailFX FollowBone:Yes
			ParticleSysBone                = B_SWORDBONE ElrondSwordTrailFX FollowBone:Yes
		End
		
 		ModelConditionState              = WEAPONSET_HERO_MODE
			Model							             = auelrond_light
			ParticleSysBone                = BAT_RIBS SkilloftheElvesFX FollowBone:Yes
			ParticleSysBone                = BAT_FARMR ElrondSwordTrailFX FollowBone:Yes
			ParticleSysBone                = BAT_FARML ElrondSwordTrailFX FollowBone:Yes
			ParticleSysBone                = B_SWORDBONE ElrondSwordTrailFX FollowBone:Yes
		End
		
		ModelConditionState			         = RIDER2
			Model                          = auelrond_ha
		End
		
		; ModelConditionState            = MOUNTED
			; Model	                       =	RUHHs_Theo_SKN
			; Skeleton                     = RUHHs_Theo_SKL
			; WeaponLaunchBone             = PRIMARY PASSENGERBONE
		; End
		
		; -- Animations
		AnimationState			             = MOUNTED DEBUG
			Animation
				AnimationName                = RUHHs_Theo_IDLA      
				AnimationMode                = ONCE
			End
			;ParticleSysBone               = BAT_HHEAD glowHorseGold FollowBone:Yes			
			;ParticleSysBone               = B_HHIPL glowHorseRearGold FollowBone:Yes
			;ParticleSysBone               = BAT_SPINE2 glowGold FollowBone:Yes			
		End
		AnimationState				           =	MOUNTED FREEFALL 
			Animation				               =	freefall
				AnimationName		             =	RUHHs_Theo_FLYC
				AnimationMode		             =	LOOP
			End
			Flags					                 =	RANDOMSTART
		End
		AnimationState				           =	MOUNTED STUNNED_FLAILING 
			Animation				               =	JustDie
				AnimationName		             =	RUHHs_Theo_FLYC
				AnimationMode		             =	LOOP
			End
			Flags					                 =	RANDOMSTART
		End
		AnimationState				           =	MOUNTED PASSENGER
			Animation				               =	grabbed
				AnimationName		             =	RUHHs_Theo_GBDA
				AnimationMode		             =	LOOP
			End
			Flags					                 =	RANDOMSTART
		End
		AnimationState				           =	MOUNTED DYING SPLATTED
			Animation				               =	Land
				AnimationName		             =	RUHHs_Theo_LNDA
				AnimationMode		             =	ONCE
				AnimationBlendTime           =   2
			End
			;FXEvent	                     = Frame:2 Name:FX_SplatDust
		End
		AnimationState				           =	MOUNTED DYING
			Animation				               =	JustDie
				AnimationName		             =	RUHHs_Theo_DIEA
				AnimationMode		             =	ONCE
			End
		End
		AnimationState				           =	MOUNTED STUNNED_STANDING_UP
			Animation				               =	StandUp
				AnimationName		             =	RUHHs_Theo_GTPA
				AnimationMode		             =	ONCE
				AnimationSpeedFactorRange    = 3.5 3.5
			End
		End
		AnimationState				           =	MOUNTED STUNNED
			Animation				               =	Land
				AnimationName		             =	RUHHs_Theo_LNDA
				AnimationMode		             =	ONCE
			End
		End
		AnimationState                   = MOUNTED MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		             = Yes
			Animation                      = RunAndFire
				AnimationName                = RUHHs_Theo_ATRA
				AnimationMode                = LOOP
			End
			Flags                          = RANDOMSTART 
		End
		AnimationState				           =	MOUNTED MOVING USING_SPECIAL_ABILITY
			Animation				               =	RousingSpeech
				AnimationName		             =	RUHHs_Theo_WLKB
				AnimationMode		             =	LOOP
			End
		End
		AnimationState				           =	MOUNTED TURN_LEFT_HIGH_SPEED
			Animation				               =	TurnLeft
				AnimationName		             =	RUHHs_Theo_TNL1
				AnimationMode		             =	LOOP
				AnimationSpeedFactorRange    = 1.2 1.2
				AnimationBlendTime	         =	20
			End
		End
		AnimationState				           =	MOUNTED TURN_RIGHT_HIGH_SPEED
			Animation				               =	TurnLeft
				AnimationName		             =	RUHHs_Theo_TNR1
				AnimationMode		             =	LOOP
				AnimationSpeedFactorRange    = 1.2 1.2
				AnimationBlendTime	         =	20
			End
		End
		AnimationState				           =	MOUNTED MOVING TURN_LEFT 
			Animation				               =	TurnLeft
				AnimationName		             =	RUHHs_Theo_TRNL
				AnimationMode		             =	LOOP
			End
		End
		AnimationState				           =	MOUNTED MOVING TURN_RIGHT 
			Animation				               =	TurnRight
				AnimationName		             =	RUHHs_Theo_TRNR
				AnimationMode		             =	LOOP
			End
		End
		AnimationState				           =	MOUNTED MOVING ACCELERATE
			Animation				               =	Accelerate
				AnimationName		             =	RUHHs_Theo_ACCL
				AnimationMode		             =	LOOP
			End
		End
		AnimationState				           =	MOUNTED MOVING DECELERATE
			Animation				               =	Decelerate
				AnimationName		             =	RUHHs_Theo_DECL
				AnimationMode		             =	ONCE
				AnimationSpeedFactorRange    = 0.6 0.6
			End
		End
		AnimationState				           =	MOUNTED MOVING WALKING
			Animation				               =	Walk
				AnimationName		             =	RUHHs_Theo_WLKA
				AnimationMode		             =	LOOP
			End
		End
		AnimationState				           =	MOUNTED MOVING BACKING_UP
			Animation				               =	BackingUp
				AnimationName		             =	RUHHs_Theo_BAKA
				AnimationMode		             =	LOOP
			End
		End
		AnimationState				           =	MOUNTED MOVING
			Animation				               =	RunA
				AnimationName		             =	RUHHs_Theo_RUNA
				AnimationMode		             =	LOOP
			End
		End
		AnimationState						       =	PACKING_TYPE_2 MOUNTED
			StateName						           =	SPELL
			Animation						           =	SPCC
				AnimationName				         =	RUHHs_Theo_SPCA
				AnimationMode				         =	ONCE
				AnimationBlendTime	         =	20
			End
		End
		AnimationState						       =	PACKING_TYPE_1 MOUNTED
			StateName						           =	SPELL
			Animation						           =	SPCC
				AnimationName				         =	RUHHs_Theo_IDLC
				AnimationSpeedFactorRange	   =	0.842 0.842
				AnimationMode				         =	ONCE
			End		
		End
		AnimationState				           =	MOUNTED FIRING_OR_PREATTACK_A
			Animation				               =	AttackA
				AnimationName		             =	RUHHs_Theo_ATKA
				AnimationMode		             =	ONCE
				UseWeaponTiming		           =	Yes
			End
			Animation				               =	AttackB
				AnimationName		             =	RUHHs_Theo_ATKB
				AnimationMode		             =	ONCE
				UseWeaponTiming		           =	Yes
			End
			Flags					                 =	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState				           =	MOUNTED ATTACKING
			Animation				               =	AttackA
				AnimationName		             =	RUHHs_Theo_ATKA
				AnimationMode		             =	MANUAL
			End
		End
		AnimationState				           = MOUNTED LEVELED
			StateName				               = Idle
			Animation				               = LevelUp
				AnimationName		             = RUHHs_Theo_IDLC
				AnimationMode		             = ONCE
				AnimationSpeedFactorRange	   =	0.666 0.666
			End
		End
		AnimationState				           =	EMOTION_TAUNTING MOUNTED
				Animation                    =	CHRA
					AnimationName              =	RUHHs_Theo_CHRA
					AnimationMode              =	LOOP
				End
		End
		AnimationState				           = MOUNTED EMOTION_CELEBRATING
			Animation				               = LevelUp
				AnimationName		             = RUHHs_Theo_IDLC
				AnimationMode		             = LOOP
			End
		End
		AnimationState				           =	MOUNTED SELECTED
			SimilarRestart			           =   Yes			
			StateName				               =	AtAttentionIdle
			Animation				               =	ATNB
				AnimationName		             =	RUHHs_Theo_IDLH
				AnimationMode		             =	LOOP
			End
			BeginScript
				Prev                         = CurDrawablePrevAnimationState()
				if Prev                      == "Idle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
				if Prev                      == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
			EndScript
		End
		TransitionState				           =	TRANS_MountedSelect
			Animation				               =	ATNA
				AnimationName		             =	RUHHs_Theo_ATNA
				AnimationMode		             =	ONCE
			End
		End
		AnimationState			             = MOUNTED
			StateName                      = Idle
			Animation	                     =	IdleA
				AnimationName		             =	RUHHs_Theo_IDLA
				AnimationPriority	           =	20
				AnimationMode		             =	ONCE
				AnimationBlendTime	         =	15
			End
			Animation				               =	IdleB
				AnimationName		             =	RUHHs_Theo_IDLB
				AnimationMode		             =	ONCE
				AnimationBlendTime	         =	15
			End
			Animation				               =	IdleC
				AnimationName		             =	RUHHs_Theo_IDLC
				AnimationMode		             =	ONCE
				AnimationBlendTime	         =	15
			End
			Flags					                 =	RESTART_ANIM_WHEN_COMPLETE
		End

;; -- ANIMATIONS 
		; ------ Flying ------- ;
		
		AnimationState					         = PASSENGER
			StateName				               = STATE_Grabbed
			Animation           		       = Sword
				AnimationName       	       = RUElfWar_FLLA
				AnimationMode       	       = LOOP
			End
		End
		
		
		AnimationState					         = FREEFALL
			StateName				               = STATE_Falling
			Animation           		       = Sword
				AnimationName       	       = RUElfWar_FLYB
				AnimationMode       	       = LOOP
			End
		End
		
		AnimationState					         = FREEFALL
			StateName				               = STATE_Falling
			Animation           		       = Sword
				AnimationName       	       = RUElfWar_FLYB
				AnimationMode       	       = LOOP
			End
		End
		
		AnimationState        				   = STUNNED_FLAILING
			StateName				               = STATE_Fly
			Animation           		       = Sword
				AnimationName       	       = RUElfWar_FLYB
				AnimationMode       	       = LOOP
			End
			Flags					                 = MAINTAIN_FRAME_ACROSS_STATES2
		End

		AnimationState        				   = STUNNED_FLAILING
			StateName				               = STATE_Fly
			Animation           		       = Sword
				AnimationName       	       = RUElfWar_FLYB
				AnimationMode       	       = LOOP
			End
			Flags					                 = MAINTAIN_FRAME_ACROSS_STATES2
		End
		
		AnimationState					         = DYING SPLATTED ;DEATH_1 
			StateName				               = STATE_Dead
			Animation				               = Sword
				AnimationName			           = RUElfWar_LNDB
				AnimationMode			           = ONCE
			End
		End
		
		
				; ------ Dying ------- ;
		AnimationState        			     = DYING ;DEATH_1 
			Animation           		       = Sword1
				AnimationName       	       = RUElfWar_DIESv5
				AnimationMode       	       = ONCE
			End
			Animation           		       = Sword2
				AnimationName       	       = RUElfWar_DIESV4
				AnimationMode       	       = ONCE
			End
			
		End
		
		; AnimationState        			   = DYING DEATH_2
			; Animation				             = Alert_1
				; AnimationName			         = RUElfWar_IDLST1
				; AnimationMode			         = LOOP
			; End
		; End

		AnimationState        			     = STUNNED_STANDING_UP
			StateName			                 = STATE_GetUp
			Animation           		       = Sword
				AnimationName       	       = RUElfWar_GTPSX1
				AnimationMode       	       = ONCE
			End
			Flags				                   = MAINTAIN_FRAME_ACROSS_STATES4
		End

		AnimationState        			     = STUNNED
			StateName			                 = STATE_Land
			Animation           		       = Sword
				AnimationName       	       = RUElfWar_LNDB
				AnimationMode       	       = ONCE
			End
		End

				
;;                                   ======== TERROR

		AnimationState					         = MOVING EMOTION_TERROR
			StateName				               = Moving_Sword
			Animation			                 = Terror
				AnimationName		             = RUElfWar_RUNN
				AnimationMode		             = LOOP
			End
		End



		; ------ Attacking ------- ;
		
		AnimationState        			     = FIRING_OR_PREATTACK_A
			StateName					             = Ready_Sword
			Animation           		       = AttackWithSwordA
				AnimationName       	       = RUElfWar_ATKSV2
				AnimationMode       	       = ONCE
				UseWeaponTiming			         = Yes
			End
			Animation           		       = AttackWithSwordB
				AnimationName       	       = RUElfWar_ATKS
				AnimationMode       	       = ONCE
				UseWeaponTiming		           = Yes
			End
			Animation           		       = AttackWithSwordD
				AnimationName       	       = RUElfWar_ATKSV4
				AnimationMode       	       = ONCE
				UseWeaponTiming		           = Yes
			End
		End

		
;;------------------------- BACKUP --------------------------------------------------------------------


		AnimationState					         = MOVING BACKING_UP
			StateName				               = STATE_BackingUp
			Animation				               = Sword
				AnimationName			           = RUElfWar_BAKS
				AnimationMode			           = LOOP
			End
			Flags					                 = MAINTAIN_FRAME_ACROSS_STATES4
		End

	
		; ------------ Moving ------------- ;

		AnimationState        				   = MOVING ATTACKING
			StateName				               = Moving_Sword
			SimilarRestart				         = Yes
			Animation           		       = run_s
				AnimationName       	       = RUElfWar_RUNS
				AnimationMode       	       = LOOP
			End
		End
				
		AnimationState        				   = MOVING ALTERNATE_FORMATION
			StateName				               = Moving_Sword
			SimilarRestart				         = Yes
			Animation           		       = run_s
				AnimationName       	       = RUElfWar_RUNS
				AnimationMode       	       = LOOP
			End
		End				
		
		AnimationState        				   = MOVING
			StateName				               = Moving_Sword
			SimilarRestart				         = Yes
			Animation           		       = run_s
				AnimationName       	       = RUElfWar_RUNS
				AnimationMode       	       = LOOP
			End
		End

		AnimationState					         = EMOTION_UNCONTROLLABLY_AFRAID
			StateName				               = STATE_Emotion_Sword
			Animation				               = Sword
				AnimationName			           = RUElfWar_FERS
				AnimationMode			           = ONCE
			End
			Flags					                 = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
		End

		; -------- Alert ------- ;

		AnimationState					         = EMOTION_AFRAID
			StateName					             = STATE_Emotion_Sword
			Animation				               = Sword
				AnimationName			           = RUElfWar_FERS
				AnimationMode			           = ONCE
			End
			Flags						               = RANDOMSTART
		End
		
		AnimationState					         = EMOTION_ALERT
			StateName					             = Ready_Sword
			Animation				               = Alert_1
				AnimationName			           = RUElfWar_IDLST1
				AnimationMode			           = LOOP
			End
			Flags						               = RANDOMSTART
		End		
		
		AnimationState					         = ALTERNATE_FORMATION
			StateName					             = Ready_Sword
			Animation				               = Alert_1
				AnimationName			           = RUElfWar_IDLST1
				AnimationMode			           = LOOP
			End
			Flags						               = RANDOMSTART
		End

		AnimationState					         = ENGAGED
			StateName					             = Ready_Sword
			Animation				               = Alert_1
				AnimationName			           = RUElfWar_IDLST1
				AnimationMode			           = LOOP
			End
		End

		AnimationState					         = ATTACKING
			StateName					             = Ready_Sword
			Animation				               = Alert_1
				AnimationName			           = RUElfWar_IDLST1
				AnimationMode			           = LOOP
			End
		End
		
;;------------ EMOTIONS ------------------------------------------------------------------
;;                                   ======= AFRAID


		
;;                                   ====== CELEBRATING		

		AnimationState					         = EMOTION_CELEBRATING
			StateName					             = STATE_Emotion_Sword
			Animation					             = Sword
				AnimationName			           = RUElfWar_CHRST2
				AnimationMode			           = ONCE
			End
			Flags						               = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
		End


;;                                   ====== TAUNTING

		AnimationState					         = EMOTION_TAUNTING
			StateName					             = STATE_Emotion_Sword
			Animation					             = Sword
				AnimationName			           = RUElfWar_TNTSV1
				AnimationMode			           = ONCE
			End
			Animation					             = Sword
				AnimationName			           = RUElfWar_CHRST2
				AnimationMode			           = ONCE
			End
			Flags						               = RESTART_ANIM_WHEN_COMPLETE ;MAINTAIN_FRAME_ACROSS_STATES
		End


;;                                   ====== POINTING

		AnimationState					         = EMOTION_POINTING
			StateName					             = STATE_Emotion_Sword
			Animation					             = Sword
				AnimationName			           = RUElfWar_PNTB
				AnimationMode			           = ONCE
			End
			Flags						               = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
		End
		
		; AnimationState					       = RAISING_FLAG
			; StateName					           = STATE_Emotion_Sword
			; Animation					           = Sword
				; AnimationName			         = RUElfWar_CHRST2
				; AnimationMode			         = ONCE
			; End
			; Flags						             = RESTART_ANIM_WHEN_COMPLETE
		; End
		; ------ Selected ------ ;

		AnimationState				           =	SELECTED
			StateName				               =	STATE_Selected
			Animation
				AnimationName		             =	RUElfWar_ATNS
				AnimationMode		             =	LOOP
			End
			BeginScript
				Prev                         = CurDrawablePrevAnimationState()
				if Prev                      == "STATE_Idle" then
					CurDrawableSetTransitionAnimState("TRANS_IdleToSelected")
				end
			EndScript
		End

		
		; --------- Hit Reactions ---------- ;
		
;		AnimationState						       = HIT_REACTION HIT_LEVEL_1
;			StateName						           = Bored_Sword
;			Animation						           = Hit_Level_1_a
;				AnimationName				         = RUElfWar_HITE
;				AnimationMode				         = ONCE
;			End
;		End
		
		
		; ------- Bored -------- ;
		
		IdleAnimationState
			StateName					             = STATE_Idle
			Animation           		       = Idle_Sword1
				AnimationName       	       = RUElfWar_IDLG
				AnimationMode       	       = ONCE
			End
			Animation           		       = Idle_Sword2
				AnimationName       	       = RUElfWar_IDLCT1
				AnimationMode       	       = ONCE
			End
			Animation           		       = Idle_Sword3
				AnimationName       	       = RUElfWar_IDLCT3
				AnimationMode       	       = ONCE
			End
			Animation			                 = IdleNoFidget
				AnimationName		             = RUElfWar_IDLF
				AnimationMode		             = ONCE
				AnimationPriority	           = 20
			End
			Animation			                 = IdleNoFidget2
				AnimationName		             = RUElfWar_IDLF
				AnimationMode		             = ONCE
				AnimationPriority	           = 0
			End
			Flags						               = RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev                         = CurDrawablePrevAnimationState()
				if Prev                      == "STATE_Selected" then
					CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle")
				end
			EndScript
		End
		
		TransitionState                  = TRANS_IdleToSelected
			Animation
				AnimationName                = RUElfWar_ATNA
				AnimationMode                = ONCE
				AnimationSpeedFactorRange    = 0.8 0.8
			End
		End
		TransitionState                  = TRANS_SelectedToIdle
			Flags                          = START_FRAME_LAST		
			Animation
				AnimationName	               = RUElfWar_ATNA
				AnimationMode	               = ONCE_BACKWARDS
				AnimationSpeedFactorRange    = 0.8 0.8
			End
		End		
		
	End
	
	Draw                               = W3DScriptedModelDraw DustEffects
	    DefaultModelConditionState
	      Model                        = None
	    End
	    IdleAnimationState
	    End
	    AnimationState                 = MOUNTED MOVING WADING
			ParticleSysBone                = None FootstepSlash
	    End
	    AnimationState                 = MOUNTED MOVING ACCELERATE
			ParticleSysBone                = None GenericSiegeTrailDust
	    End
	    AnimationState                 = MOUNTED MOVING ACCELERATE
			ParticleSysBone                = None GenericSiegeTrailDust
	    End
	    AnimationState                 = MOUNTED MOVING
			ParticleSysBone                = None GenericSiegeTrailDust
	    End
	End	

	; ***DESIGN parameters ***
	Side                               = Rivendell
	EditorSorting                      = UNIT
	ThreatLevel                        = 4.0
	ThingClass                         = CHARACTER_UNIT
	TransportSlotCount                 = 1
	BuildCost                          = ELROND_BUILDCOST				
	BuildTime                          = ELROND_BUILDTIME				
	
	WeaponSet
		Conditions        	             = None 
		Weapon            	             = PRIMARY    ElrondSword           
		AutoChooseSources 	             = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	
	WeaponSet
		Conditions					             = WEAPONSET_HERO_MODE
		Weapon							             = PRIMARY   ElrondHeroSword
	End
	
	ArmorSet
		Conditions      		             = None
		Armor           		             = HeroArmor
		DamageFX        		             = NormalDamageFX
	End
	
	VisionRange                        = M_VISION_HERO_RANGED
	BountyValue                        = M_ELVEN_ELROND_BOUNTY_VALUE
	DisplayName                        = OBJECT:ElvenElrond
	RecruitText                        = CONTROLBAR:ElrondRecruit
	ReviveText                         = CONTROLBAR:ElrondRevive
	Hotkey                             = CONTROLBAR:ElrondHotkey
	CrushableLevel                     = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

	CommandSet                         = ElrondCommandSet 

	; *** AUDIO Parameters ***;
	VoiceAttack                        = ElrondVoiceAttack
	VoiceAttackCharge                  = ElrondVoiceAttackCharge
	VoiceAttackMachine                 = ElrondVoiceAttack
	VoiceAttackStructure               = ElrondVoiceAttackBuilding
	VoiceFear                          = ElrondVoiceHelpMe
	VoiceMove                          = ElrondVoiceMove
	VoiceMoveToCamp                    = ElrondVoiceMoveCamp ;ElrondVoiceJoinAnybody
	VoiceMoveWhileAttacking            = ElrondVoiceDisengage
	VoicePriority                      = 78
	VoiceGuard                         = ElrondVoiceMove
	VoiceSelect                        = ElrondVoiceSelect
	VoiceSelect2                       = HeroVoiceSelect2
	VoiceSelectBattle                  = ElrondVoiceSelectBattle

	SoundImpact                        = ImpactHorse

	EvaEventDamagedOwner               = UnitUnderAttack     ;Eva event to trigger when unit is damaged
	EvaEventDieOwner                   = ElrondDie        ;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
	
	ClientBehavior                     = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		AnimationSound                   = Sound:FootstepDirtA			Animation:RUElrond_SKL.RUElrond_RUNS		Frames:3 12
		AnimationSound                   = Sound:FootstepDirtA			Animation:EUHaldir_SKL.EUHaldir_RUNB		Frames:3 13	;;,;; ;;;
		AnimationSound                   = Sound:FootstepDirtA			Animation:EUHaldir_SKL.EUHaldir_RUNS		Frames:3 12	;;,;; ;;;
		AnimationSound                   = Sound:HorseMoveFootsteps		Animation:RUHHs_Theo_SKL.RUHHs_Theo_ACCL	Frames:14 32
		AnimationSound                   = Sound:HorseMoveFootsteps		Animation:RUHHs_Theo_SKL.RUHHs_Theo_RUNA	Frames:0
		AnimationSound                   = Sound:HorseMoveFootsteps		Animation:RUHHs_Theo_SKL.RUHHs_Theo_TNL1	Frames:0
		AnimationSound                   = Sound:HorseMoveFootsteps		Animation:RUHHs_Theo_SKL.RUHHs_Theo_TNR1	Frames:0
		AnimationSound                   = Sound:HorseWhinny			Animation:RUHHs_Theo_SKL.RUHHs_Theo_IDLC	Frames:3
		AnimationSound                   = Sound:HorseDieForHero		Animation:RUHHs_Theo_SKL.RUHHs_Theo_LNDA	Frames:0
		AnimationSound                   = Sound:BodyFallSoldier		Animation:RUHHs_Theo_SKL.RUHHs_Theo_LNDA	Frames:1 9
		AnimationSound                   = Sound:HorseDieForHero		Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA	Frames:0
		AnimationSound                   = Sound:BodyFallGenericNoArmor	Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA	Frames:4
		AnimationSound                   = Sound:BodyFallSoldier		Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA	Frames:42		
	End
	
	; *** ENGINEERING Parameters ***
	RadarPriority                      = UNIT
	KindOf                             = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ARMY_SUMMARY HERO
	PathfindDiameter                   = 40.0

	Body                               = RespawnBody ModuleTag_RespawnBody
		CheerRadius 				             = EMOTION_CHEER_RADIUS
		MaxHealth         			         = M_ELROND_HEALTH ; balance
		PermanentlyKilledByFilter	       = NONE
   	DodgePercent      			  	     = HERO_DODGE_PERCENT
	End
	
	Behavior                           = RespawnUpdate ModuleTag_RespawnUpdate
		DeathAnim					               = DYING
		DeathFX						               = FX_GenericGoodDieToRespawn ;FX_ElrondDieToRespawn
		DeathAnimationTime			         = 4000
		InitialSpawnFX				           = FX_ElrondInitialSpawn
		RespawnAnim					             = LEVELED
		RespawnFX					               = FX_ElrondRespawn
		RespawnAnimationTime		         = 2000
		AutoRespawnAtObjectFilter	       = NONE +CASTLE_KEEP
		ButtonImage					             = HIRivElrond
		
    RespawnRules                     =	AutoSpawn:No	Cost:1200		Time:90000	Health:100% ;Cost:1200
		RespawnEntry                     =	Level:2				Cost:1400		Time:90000	
		RespawnEntry                     =	Level:3				Cost:1600		Time:90000	
		RespawnEntry                     =	Level:4				Cost:1800		Time:120000
		RespawnEntry                     =	Level:5				Cost:2000		Time:120000
		RespawnEntry                     =	Level:6				Cost:2200		Time:120000
		RespawnEntry                     =	Level:7				Cost:2400		Time:120000
		RespawnEntry                     =	Level:8				Cost:2600		Time:120000
		RespawnEntry                     =	Level:9				Cost:2800		Time:120000
		RespawnEntry                     =	Level:10			Cost:3000		Time:120000
	End
	
	Behavior                           = AutoHealBehavior ModuleTag_ElrondHealing
		StartsActive						         = Yes
		HealingAmount						         = HERO_HEAL_AMOUNT
		HealingDelay						         = 1000
		StartHealingDelay				         = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat		         = Yes
	End	
	
	Behavior                           = AIUpdateInterface ModuleTag_031
		AutoAcquireEnemiesWhenIdle       = Yes ATTACK_BUILDINGS
		MoodAttackCheckRate              = 500
	End
	
	Behavior                           = EmotionTrackerUpdate    Module_EmotionTracker1
		TauntAndPointDistance            = 250        ; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay         = 1000    ; how often scan (milliseconds)
		AddEmotion                       = Alert_Base
	End
	
	Behavior                           = AttributeModifierAuraUpdate ModuleTag_HeroRadiateFear1
		StartsActive                     = No ;If no, requires upgrade to turn on.
		BonusName                        = HeroRadiateFear
		TriggeredBy                      = Upgrade_HeroRadiateFear
		RefreshDelay                     = 2000
		Range                            = 120
		TargetEnemy                      = Yes
		ObjectFilter                     = ANY +ORC
	End    

	LocomotorSet
		Locomotor                        = IsildurHumanLocomotor
		Condition                        = SET_NORMAL 
		Speed                            = M_NORMAL_GOOD_HERO_SPEED
	End

	Behavior                           = PhysicsBehavior ModuleTag_041
		GravityMult                      = 1.0
		ShockStandingTime                = 3000
		ShockStunnedTimeLow              = 1000
		ShockStunnedTimeHigh             = 1200
	End
	
	Behavior                           = SlowDeathBehavior ModuleTag_051
		DeathTypes                       = ALL 
		SinkDelay                        = 3000
		SinkRate                         = 0.40     ; in Dist/Sec
		DestructionDelay                 = 4000
		Sound                            = INITIAL    ElrondVoiceDie
	End
	
	Behavior                           = SquishCollide ModuleTag_061
			;nothing
	End
	
	; Tie into LargeGroupAudio system
	Behavior                           = LargeGroupAudioUpdate ModuleTag_LGAU1
		Key                              = Human Unit Infantry
		UnitWeight                       = 2   ; Boromir counts as 2 infantry
	End
	
	Behavior                           = HitReactionBehavior HitReactionBehaviorModuleTag1
		HitReactionLifeTimer1            = 7 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer2            = 15 ; level 2 (medium damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer3            = 10 ; level 3 (heavy  damage)  hit reaction animations in frames (5 per sec)

		HitReactionThreshold1            = 0.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2            = 25.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3            = 50.0  ; level 3 (heavy  damage) threshold trigger
	End

  ; -- Rank 1: Lord of Rivendell: Leadership to nearby elven units
	Behavior                           = AttributeModifierAuraUpdate ModuleTag_Leadership
		StartsActive			               = No
		BonusName				                 = ElrondPassiveLeadership
		TriggeredBy				               = Upgrade_GenericUpgrade1
		RefreshDelay			               = 2000
		Range					                   = 200
		ObjectFilter 										 = ANY +RivendellReveler +RivendellVeteran +RivendellKnight +RivendellGuardian +RohanElvenWarrior -CAVALRY -INFANTRY -STRUCTURE -BASE_FOUNDATION -HERO
	End
	
	; -- Rank 3:  Skill of the Elves: Elrond's attack temporarily deals splash and knockback damage. Left click to activate.
	Behavior                           = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
		SpecialPowerTemplate             = SpecialAbilityElrondSkillOfElves
		TriggeredBy                      = Upgrade_GenericUpgrade3
	End
	
  Behavior                           = SpecialPowerModule ModuleTag_AragornBladeMasterStarter
		SpecialPowerTemplate             = SpecialAbilityElrondSkillOfElves
		StartsPaused			               = Yes
		SetModelCondition		             = ModelConditionState:USER_4
		SetModelConditionTime		         = 1.9
		DisableDuringAnimDuration	       = Yes
	End
	
	Behavior                           = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate
		SpecialPowerTemplate             = SpecialAbilityElrondSkillOfElves
		;HeroAttributeModifier	         = AragornBladeMaster
		HeroEffectDuration		           = 30000
		UnpackTime                       = 1
		TriggerSound			               = ElrondSkilloftheElves
	End
	
	; -- Rank 6: Herald of Gil-Galad: Elrond dons his armor. Gains +50% armor	
	Behavior                           = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership2
		SpecialPowerTemplate             = SpecialAbilityFakeLeadership2
		TriggeredBy                      = Upgrade_GenericUpgrade6
	End
	
	Behavior                           = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate2   
		SpecialPowerTemplate             = SpecialAbilityFakeLeadership2
		UpdateModuleStartsAttack         = No
		StartsPaused                     = Yes
	End	
	
	Behavior                           = ModelConditionUpgrade ModuleTag_ArmorUpgrade
		TriggeredBy			                 = Upgrade_GenericUpgrade6
		AddConditionFlags	               = RIDER2
	End
	
	Behavior                           = AttributeModifierUpgrade ModuleTag_ArmorBonus
		TriggeredBy                      = Upgrade_GenericUpgrade6
		AttributeModifier                = ElrondHeavyArmorBuff
	End

	; -- Rank 7: The Last Homely House: Targeted heal
	; Behavior                         = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership3
		; SpecialPowerTemplate           = SpecialAbilityFakeLeadership3
		; TriggeredBy                    = Upgrade_GenericUpgrade7
	; End
	
	Behavior                           = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate3   
		SpecialPowerTemplate             = SpecialAbilityFakeLeadership3
		UpdateModuleStartsAttack         = No
		StartsPaused                     = Yes
	End	
	
	Behavior                           = CommandSetUpgrade ModuleTag_commandSetUpgrade1
		TriggeredBy 					           = Upgrade_GenericUpgrade7
		CommandSet 						           = ElrondHomelyHouseCommandSet
	End
	
	Behavior                           = PlayerHealSpecialPower ModuleTag_Heal
		SpecialPowerTemplate             = SpecialAbilityElrondHeal
		HealAffects			                 = INFANTRY CAVALRY MONSTER MACHINE
		HealAmount			                 = 0.8 ; 1.0	; 0.5 = 50% of maximum health
		HealRadius			                 = M_SPELL_HEAL_RADIUS_UNIT_SCAN
		HealFX				                   = FX_ElrondHomelyHouseHeal
		; To replenish hordes a bit
		HealOCL                          = OCL_HealSpellHordeReplenishPing
		AvailableAtStart	               = Yes
	End	
	
	; -- Rank 10: The Ring of Air: Creates a circular sanctuary in which friendly troops are buffed	; 
	Behavior                           = UnpauseSpecialPowerUpgrade ModuleTag_RingOfAirEnabler
	  SpecialPowerTemplate 				     = SpecialAbilityElrondRingOfAir
		TriggeredBy				               = Upgrade_GenericUpgrade10
	End
	
	Behavior                           = OCLSpecialPower		ModuleTag_RingOfAir
		SpecialPowerTemplate		         = SpecialAbilityElrondRingOfAir
		TriggerFX					               = FX_ElrondRingOfAir
		OCL							                 = OCL_ElrondRingOfAir
		CreateLocation				           = CREATE_AT_LOCATION
		UpdateModuleStartsAttack	       = No
		StartsPaused				             = Yes
	End	

	Scale                              = 1.13

	Geometry                           = CYLINDER
	GeometryMajorRadius                = 8.0
	GeometryMinorRadius                = 8.0
	GeometryHeight                     = 19.2
	GeometryIsSmall                    = Yes
	Shadow                             = SHADOW_DECAL
	ShadowSizeX                        = 20;
	ShadowSizeY                        = 20;
	ShadowTexture                      = ShadowI;
End
;------------------------------------------------------------------------------
Object RingofAir

	; ***DESIGN parameters ***
	VisionRange                        = 0.0
	EditorSorting                      = SYSTEM
	KindOf			                       = NO_COLLIDE IMMOBILE UNATTACKABLE IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION MOVE_ONLY
	ThreatLevel		                     = 0
	
	SoundAmbient 			                 = ElrondRingAmbientWind
	
	; *** ENGINEERING Parameters ***
	Body                               = ActiveBody ModuleTag_01
		MaxHealth		                     = 999999
		InitialHealth	                   = 999999
	End

	Behavior                           = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		                   = 30000								; 60 seconds
		MaxLifetime		                   = 30000
	End	
	
	Behavior                           = AttributeModifierAuraUpdate ModuleTag_ElvenGroveOne
		StartsActive		                 = Yes											; If no, requires upgrade to turn on.
		BonusName			                   = ElrondRingAirBuff
		RefreshDelay		                 = 2000
		Range				                     = 200
		TargetEnemy			                 = No
		ObjectFilter		                 = NONE +INFANTRY +CAVALRY
	End
	
	Behavior                           = AttributeModifierAuraUpdate ModuleTag_ElvenGroveTwo
		StartsActive		                 = Yes											
		BonusName			                   = FearlessForever
		RefreshDelay		                 = 2000
		Range				                     = 200
		TargetEnemy			                 = No
		ObjectFilter		                 = NONE +INFANTRY +CAVALRY
	End	
End
