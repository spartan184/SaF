;;------------------------------------------------------------------------------
ChildObject RivendellWallBallista IsengardBallista
	ButtonImage        									 = BIRivendellBallista
	SelectPortrait    									 = BPRivendellBallista

	Draw                                 = W3DTruckDraw ModuleTag_01
		
		DefaultModelConditionState
			Model				                     = auFlance_skn
			Skeleton			                   = IUFBllsta_SKL
			WeaponLaunchBone                 = PRIMARY ARROW
		End

		IdleAnimationState
			Animation                        = IDLES
				AnimationName	                 = IUFBllsta_IDLA
				AnimationMode	                 = ONCE
			End
			Flags		                         = RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState                     = DYING
			Animation
				AnimationName                  =  IUFBllsta_DIEA
				AnimationMode                  = ONCE
			End
		End		

		AnimationState                     = FIRING_OR_PREATTACK_A 
			Animation
				AnimationName		               = IUFBllsta_ATKA
				AnimationMode		               = ONCE
				UseWeaponTiming		             = Yes
				AnimationBlendTime	           = 0
			End			
			FrameForPristineBonePositions    = 0
			StateName                        = Attack
		End	
	End
	
	; No command points for this as it's free.
	Side	                               = Rivendell
	DisplayName           							 = OBJECT:RivendellWallBallista
	CommandPoints                        = 0
	
	WeaponSet
		Conditions                         = None 
		Weapon                             = PRIMARY     RivendellBallistaWeapon
	End
	
	; *** AUDIO Parameters ***;
	VoiceAttack                          = RivendellElfBowVoiceAttack 
	VoiceAttack2                         = RivendellElfVoiceAttackBuilding
	VoiceMoveWhileAttacking              = RivendellElfVoiceDisengage
	VoiceMove                            = NoSound
	VoiceMove2                           = NoSound
	VoicePriority                        = 26
	VoiceCreated                         = NoSound ;CampOrcCreateBallista
	VoiceFullyCreated                    = NoSound ;CampOrcCreateBallista
	VoiceSelect                          = RivendellElfVoiceSelect
	VoiceSelect2                         = RivendellElfBowVoiceSalute
	VoiceGuard                           = NoSound

	VoiceEnterStateAttack                = RivendellElfBowVoiceEnterStateAttack
	VoiceEnterStateMoveWhileAttacking    = RivendellElfVoiceEnterStateDisengage
	VoiceEnterStateMove                  = NoSound
	
	SoundMoveLoop                        = CatapultMoveLoop
	SoundMoveStart                       = BallistaMoveStart
	
	; Should be the same as GondorTrebuchet but with IGNORES_SELECT_ALL
	KindOf                               = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MACHINE SCORE CAN_ATTACK CAN_ATTACK_WALLS IGNORES_SELECT_ALL

	; Needs a specialised command set without move based commands.
	CommandSet                           = GondorTrebuchetWallCommandSet

	Behavior                             = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle         = Yes
		AILuaEventsList				             = TrebuchetFunctions
	End
	
	LocomotorSet
		Locomotor                          = CatapultLocomotor
		Condition                          = SET_NORMAL
		Speed                              = 0
	End
	
	Behavior                             = SlowDeathBehavior ModuleTag_05
		DeathTypes                         = NONE +EXPLODED +BURNED
		SinkDelay                          = 6000
		SinkRate                           = 1.0     ; in Dist/Sec
		DestructionDelay                   = 8000 ;22000
		FX                                 = INITIAL FX_CatapultDieExplosion
		Sound                              = INITIAL    RivendellElfVoiceDie
	End

	Behavior                             = SlowDeathBehavior ModuleTag_06 
		DeathTypes                         = ALL -EXPLODED -BURNED
		SinkDelay                          = 5000
		SinkRate                           = 1.0     ; in Dist/Sec
		DestructionDelay                   = 8000 ;18000
		FX                                 = INITIAL FX_CatapultDie
		Sound                              = INITIAL    RivendellElfVoiceDie
	End
	
	Behavior                             = TransitionDamageFX ModuleTag_8
		DamagedFXList1                     = Loc: X:0 Y:0 Z:5 FXList:FX_TrebDamage

	;	ReallyDamagedParticleSystem1       = Bone:None RandomBone:No PSys:FireBuildingLarge
		ReallyDamagedFXList1               = Loc: X:0 Y:0 Z:5 FXList:FX_TrebDamage

	;	RubbleParticleSystem1              = Bone:None RandomBone:No PSys:FireBuildingLarge
		RubbleFXList1                      = Loc: X:0 Y:0 Z:5 FXList:FX_TrebDamage
	End
	
	Scale																 = 1.1
	Geometry                             = BOX
	GeometryMajorRadius                  = 16.0
	GeometryMinorRadius                  = 16.0
	GeometryHeight                       = 16.0
	GeometryIsSmall                      = No
	Shadow                               = SHADOW_DECAL
  ShadowSizeX                          = 25;
  ShadowSizeY                          = 25;
  ShadowTexture                        = ShadowI;
End