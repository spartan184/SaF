;------------------------------------------------------------------------------
;
;	Elrohir.ini
;
;------------------------------------------------------------------------------
Object RivendellElrohir
	; *** ART Parameters ***
	Scale = 1.03
    ; SelectPortrait for Heros is portrait behind skill buttons. HP = HeroPortrait.
	SelectPortrait = hprivelrohir
    
    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage = hirivelrohir
    
	Draw = W3DScriptedModelDraw ModuleTag_DRAW
	OkToChangeModelColor = Yes
    StaticModelLODMode = No ; Will append M or L to the skin name depending on GameLOD
	

	ExtraPublicBone = arrow
	ExtraPublicBone = PASSENGERBONE
		
	 DependencySharedModelFlags = TURN_LEFT_HIGH_SPEED TURN_RIGHT_HIGH_SPEED MOVING ACCELERATE DECELERATE TURN_LEFT TURN_RIGHT ATTACKING BACKING_UP

;;====================== MODELS ================================================================
		DefaultModelConditionState
			Model               = auelrohir
			WeaponLaunchBone    = PRIMARY arrow
		End
		
		ModelConditionState		= MOUNTED WEAPONSET_HERO_MODE
			Model               = auelrohir_mtd
			WeaponLaunchBone    = PRIMARY PASSENGERBONE
			ParticleSysBone 		= SWORDELRO03 SwiftStrikesTrailFX FollowBone:Yes
		End			
		
		ModelConditionState = WEAPONSET_HERO_MODE
			Model             	= auelrohir
			ParticleSysBone 	= BAT_FARMR SwiftStrikesTrailFX FollowBone:Yes
			ParticleSysBone 	= BAT_FARML SwiftStrikesTrailFX FollowBone:Yes
		End
		
		ModelConditionState		= MOUNTED
			Model               = auelrohir_mtd
			WeaponLaunchBone    = PRIMARY PASSENGERBONE
		End
		
		; ===================================================== ;
		; ================== ANIMATIONS ======================= ;
		; ===================================================== ;		
			
; --------- MOUNTED  ------------		

; --- Dying Anims
		AnimationState				=	MOUNTED FREEFALL 
			Animation				=	freefall
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_FLYC
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End

		AnimationState				=	MOUNTED STUNNED_FLAILING 
			Animation				=	JustDie
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_FLYC
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		
		AnimationState				=	MOUNTED DYING SPLATTED
			Animation				=	Land
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_LNDA
				AnimationMode		=	ONCE
			End
		End
		
		AnimationState				=	MOUNTED DYING
			Animation				=	JustDie
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_DIEA
				AnimationMode		=	ONCE
			End
		End
		
		AnimationState				=	MOUNTED STUNNED_STANDING_UP
			Animation				=	StandUp
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_GTPA
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End

		AnimationState				=	MOUNTED STUNNED
			Animation				=	Land
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_LNDA
				AnimationMode		=	ONCE
			End
		End
		

; --- Attacking Anims		
		AnimationState        =  MOUNTED FIRING_OR_PREATTACK_A ATTACKING_STRUCTURE
			StateName = Attacking
			Animation = attackinga  building while mounted.
				AnimationName           = RUHHs_Theo_SKL.RUHHs_Theo_ATKA  ;ATKB looked pretty silly.
				AnimationMode       = ONCE
				UseWeaponTiming = Yes
			End
		End
		
		
		
		AnimationState        = MOUNTED MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = MountedRunAndFire
				AnimationName       = RUHHs_Theo_SKL.RUHHs_Theo_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART  
		End

		AnimationState				=	MOUNTED FIRING_OR_PREATTACK_A
			Animation				=	AttackA
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATKA
				AnimationMode		=	ONCE
				UseWeaponTiming		= Yes
			End
			Animation				=	AttackB
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATKB
				AnimationMode		=	ONCE
				UseWeaponTiming		= Yes
			End
		End

; --- Moving Anims
		AnimationState				=	MOUNTED TURN_LEFT_HIGH_SPEED
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TNL1
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= 1.2 1.2
				AnimationBlendTime	=	20
			End
		End
		
		AnimationState				=	MOUNTED TURN_RIGHT_HIGH_SPEED
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TNR1
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= 1.2 1.2
				AnimationBlendTime	=	20
			End
		End

		AnimationState				=	MOUNTED MOVING TURN_LEFT 
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TRNL
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= 1.5 1.5
			End
		End

		AnimationState				=	MOUNTED MOVING TURN_RIGHT 
			Animation				=	TurnRight
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TRNR
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= 1.5 1.5
			End
		End

		AnimationState				=	MOUNTED MOVING ACCELERATE
			Animation				=	Accelerate
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ACCL
				AnimationMode		=	LOOP
			End
		End

		AnimationState				=	MOUNTED MOVING DECELERATE
			Animation				=	Decelerate
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_DECL
				AnimationMode		=	ONCE
			End
		End

		AnimationState				=	MOUNTED MOVING WALKING
			Animation				=	Walk
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_WLKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		
		AnimationState				=	MOUNTED MOVING BACKING_UP
			Animation				=	BackingUp
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_BAKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End


		AnimationState				=	MOUNTED MOVING
			Animation				=	RunA
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_RUNA
				AnimationMode		=	LOOP
			End
 			Flags					=	RANDOMSTART
		End

; --- Selected Anims		
		AnimationState				=	MOUNTED SELECTED
			SimilarRestart			=   Yes			
			StateName				=	AtAttentionIdle
			Animation				=	ATNB
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLH
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
				if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
				if Prev == "STATE_CaptainMounted" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
			EndScript
		End

		TransitionState				=	TRANS_MountedSelect
			Animation				=	ATNA
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATNA
				AnimationMode		=	ONCE
			End
		End

; --- Idle Anims		
		AnimationState = MOUNTED
			StateName = Idle
			Animation	=	IdleA
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLA
				AnimationPriority	=	30
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Animation				=	IdleC
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLC
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
	;--------------------------------------------------------------------------------------------	
		
		AnimationState        = PACKING_TYPE_2 MOUNTED
			StateName		  =	STATE_CaptainMounted
			Animation           = GUFaramir_IDLC
				AnimationName     = RUHHs_Theo_SKL.RUHHs_Theo_IDLC
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.5 0.5
			End
		End
		AnimationState        = PACKING_TYPE_2
			StateName		  =	CaptainPower
			Animation           = GUFaramir_CHRC
				AnimationName     = GUFaramir_SKL.GUFaramir_CHRC
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.2 1.2
			End
		End
		AnimationState        = PACKING_TYPE_2
			StateName		  =	STATE_CaptainBow
			Animation           = GUFaramir_CHRD
				AnimationName     = GUFaramir_SKL.GUFaramir_CHRD
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.75 0.75
			End
		End
		AnimationState        = STUNNED_FLAILING 
			StateName           = STATE_Sword
			Animation           = GUFaramir_FLYB
				AnimationName     = GUFaramir_SKL.GUFaramir_FLYB
				AnimationMode     = LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Flags               = RANDOMSTART
		End
		AnimationState        = DYING SPLATTED 
			StateName           = STATE_Sword
			Animation           = GUFaramir_LNDB
				AnimationName     = GUFaramir_SKL.GUFaramir_LNDB
				AnimationMode     = ONCE
			End
		End
		AnimationState        = DYING 
			StateName           = STATE_Sword
			Animation           = GUFaramir_DIEA
				AnimationName     = GUFaramir_SKL.GUFaramir_DIEA
				AnimationMode     = ONCE
			End
			Animation           = GUFaramir_DIEB
				AnimationName     = GUFaramir_SKL.GUFaramir_DIEB
				AnimationMode     = ONCE
			End
		End
		; AnimationState						= PARALYZED
			; Animation
				; AnimationName				= GUFaramir_IDLC
				; AnimationMode				= LOOP
			; End
		; End
		AnimationState        = STUNNED_STANDING_UP 
			StateName           = STATE_Sword
			Animation           = GUFaramir_GTPB
				AnimationName     = GUFaramir_SKL.GUFaramir_GTPB
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		AnimationState        = STUNNED 
			StateName           = STATE_Sword
			Animation           = GUFaramir_LNDB
				AnimationName     = GUFaramir_SKL.GUFaramir_LNDB
				AnimationMode     = ONCE
			End
		End			
		AnimationState        = USER_1
			Animation           = GUFaramir_POSA
				AnimationName     = GUFaramir_SKL.GUFaramir_POSA
				AnimationMode     = ONCE
			End
		End
		AnimationState        =  SPECIAL_WEAPON_ONE
			StateName = STATE_Bow
			Animation
				AnimationName           = GUFaramir_SKL.GUFaramir_ATKC
				AnimationMode       = ONCE
			End
			FrameForPristineBonePositions = 59
			BeginScript
				CurDrawableShowSubObject("arrow")
			EndScript
		End
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			Animation           = TrotAndFire
				AnimationName       = GUFaramir_SKL.GUFaramir_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART
			StateName = RunAndSwing
		End
		AnimationState        = FIRING_OR_PREATTACK_A
			StateName           = STATE_Sword
			Animation           = ATKD
				AnimationName     = GUFaramir_SKL.GUFaramirA_SPCA
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 1.149 1.149
			End
			Animation           = ATKE
				AnimationName    = GUFaramir_SKL.GUFaramirA_SPCB
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 1.149 1.149
			End
			Animation           = ATKF
				AnimationName    = GUFaramir_SKL.GUFaramirA_SPCB
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.47 1.47
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
			EndScript
		End
		AnimationState        = MOVING USER_4
			StateName           = Slaughter
			Flags               = RANDOMSTART
			Animation           = GUFaramir_ATKE
				AnimationName     = GUFaramir_SKL.GUFaramir_ATKE
				AnimationMode     = LOOP
			End
			StateName           = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
			EndScript
		End
		AnimationState			= MOVING 
			StateName           = STATE_RunningSword
			Flags               = RANDOMSTART
			Animation           = auelrohir_runa
				AnimationName   = GUFaramir_SKL.auelrohir_runa
				AnimationSpeedFactorRange = 1.2 1.2
				;Distance		= 28
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
				if Prev == "STATE_RunningBow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword_Running") end
			EndScript
		End
		AnimationState        = ATTACKING 
			StateName           = STATE_Sword
			Animation           = ATKD
				AnimationName     = GUFaramir_SKL.GUFaramir_IDLA
				AnimationMode     = MANUAL
			End			
		End
		AnimationState = EMOTION_ALERT HIT_REACTION 
			Animation = Hit_Level_1_d
				AnimationName = GUFaramir_SKL.GUFaramir_HITD
				AnimationMode = ONCE
			End
		End
		AnimationState = HIT_REACTION 
			Animation = Hit_Level_1_b
				AnimationName = GUFaramir_SKL.GUFaramir_HITB
				AnimationMode = ONCE
			End
		End
		AnimationState				= LEVELED
			Animation				= LevelUp
				AnimationName		= GUFaramir_SKL.GUFaramir_CHRC
				AnimationMode		= ONCE
			End
		End
		AnimationState				=	EMOTION_CELEBRATING
			Animation
				AnimationName		=	GUFaramir_SKL.GUFaramir_CHRC
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	EMOTION_TAUNTING 
			Animation
				AnimationName		=	GUFaramir_SKL.GUFaramir_TNTC
				AnimationMode		=	ONCE
			End
			Animation
				AnimationName		=	GUFaramir_SKL.GUFaramir_TNTD
				AnimationMode		=	ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState					= SELECTED
			StateName					= STATE_Selected_Sword
			Animation					= ATNE
				AnimationName			= GUFaramir_SKL.GUFaramir_ATNE
				AnimationMode			= LOOP
				AnimationBlendTime		= 15
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				CurDrawableHideSubObject("arrow")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_BoredToSelectedSword") return end
			EndScript
		End
		AnimationState				=	EMOTION_ALERT
			StateName				=	STATE_READY
			Animation				=	ready
				AnimationName		=	GUFaramir_SKL.GUFaramir_IDLA
				AnimationMode		=	LOOP
				AnimationBlendTime	=	20
			End
		End
		
		; AnimationState				=	RAISING_FLAG
			; Animation
				; AnimationName		=	GUFaramir_SKL.GUFaramir_CHRC
				; AnimationMode		=	LOOP
			; End
		; End
		
		IdleAnimationState
			StateName					= STATE_Idle_Sword	
			Animation           		= IDLE
				AnimationName       	= GUFaramir_SKL.GUFaramir_IDLE
				AnimationMode       	= LOOP
				AnimationPriority	    = 20
				AnimationBlendTime  = 15
			End
			Animation           		= IDLF
				AnimationName       	= GUFaramir_SKL.GUFaramir_IDLF
				AnimationMode       	= LOOP
				AnimationPriority	    = 1
			End
			Animation           		= IDLG
				AnimationName       	= GUFaramir_SKL.GUFaramir_IDLG
				AnimationMode       	= LOOP
				AnimationPriority	    = 1
			End
			BeginScript
				CurDrawableHideSubObject("arrow")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
				if Prev == "STATE_Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoredSword") end
			EndScript
		End
		TransitionState = TRANS_BoredToSelectedSword
			Animation = ANTD
				AnimationName		= GUFaramir_SKL.GUFaramir_ANTD
				AnimationMode		= ONCE
			End		
		End
		TransitionState = TRANS_SelectedToBoredSword
			Animation			= ATNF
				AnimationName	= GUFaramir_SKL.GUFaramir_ATNF
				AnimationMode	= ONCE
			End		
		End	
		TransitionState = TRANS_BoredToSelectedBow
			Animation = ATNC
				AnimationName		= GUFaramir_SKL.GUFaramir_ATNC
				AnimationMode		= ONCE
			End		
		End
	End
	Draw = W3DScriptedModelDraw DustEffects
	    DefaultModelConditionState
	      Model = None
	    End
	    IdleAnimationState
	    End
	    AnimationState = MOUNTED MOVING WADING
			ParticleSysBone = None FootstepSlash
	    End
	    AnimationState = MOUNTED MOVING ACCELERATE
			ParticleSysBone = None InfantryDustTrails
	    End
	    AnimationState = MOUNTED MOVING ACCELERATE
			ParticleSysBone = None InfantryDustTrails
	    End
	    AnimationState = MOUNTED MOVING
			ParticleSysBone = None InfantryDustTrails
	    End
	End

	; ***DESIGN parameters ***
	Side                                    = Rivendell
	EditorSorting                           = UNIT
	ThreatLevel                             = 4.0
	ThingClass                              = CHARACTER_UNIT
	BuildCost                               = DUN_ELROHIR_BUILDCOST				
	BuildTime                               = DUN_ELROHIR_BUILDTIME				
	TransportSlotCount                      = 1
	DisplayMeleeDamage                      = DUN_ELLADAN_DAMAGE

	WeaponSet
		Conditions                            = None 
		Weapon                                = PRIMARY    ElrohirSwords
		AutoChooseSources                     = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	
	WeaponSet
		Conditions                            = MOUNTED 
		Weapon                                = PRIMARY    ElrohirSwords
		AutoChooseSources                     = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	
	WeaponSet
		Conditions                            = WEAPONSET_HERO_MODE
		Weapon                                = PRIMARY    ElrohirSwiftSwords
		AutoChooseSources                     = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End
	
	WeaponSet
		Conditions                            = WEAPONSET_HERO_MODE MOUNTED
		Weapon                                = PRIMARY    ElrohirSwiftSwords
		AutoChooseSources                     = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End
				
	ArmorSet
		Conditions                            = None
		Armor                                 = HeroArmor
		DamageFX                              = NormalDamageFX
	End
	
	ArmorSet
		Conditions                            = MOUNTED
		Armor                                 = HeroArmorMounted
		DamageFX                              = NormalDamageFX
	End
	
	VisionRange                             = VISION_HERO_RANGED
	ShroudClearingRange                     = SHROUD_CLEAR_RANGED_HERO

	BountyValue                             = GONDOR_FARAMIR_BOUNTY_VALUE
	DisplayName                             = OBJECT:Elrohir
	RecruitText                             = CONTROLBAR:ElrohirRecruit
	ReviveText	                            = CONTROLBAR:GenericHeroRevive
	Hotkey		                              = CONTROLBAR:ElrohirHotkey
	
	CrusherLevel                            = 0			;Can I crush anything?
	MountedCrusherLevel                     = 1		;Crush level when mounted.
	CrushableLevel                          = 2			;What am I?:        0 = for infantry, 1 = for trees, 2 = cavalry/heroes
	MountedCrushableLevel                   = 2	;Crusable level when mounted.

	CrushWeapon		                          = HeroCrush  

	MinCrushVelocityPercent                 = 50 ; Has to be moving at at least 50% of full speed.
	CrushDecelerationPercent                = 30 ; Lose xx percent of max velocity when crushing.
	
	CrushKnockback                          = 40
	CrushZFactor                            = 1.0

	CommandSet                              = ElrohirCommandset
	CommandPoints                           = 0


	; *** AUDIO Parameters ***;

	VoiceAttack				                      = ElrohirVoiceAttack
	VoiceAttackAir			                    = ElrohirVoiceAttack
	VoiceAttackCharge		                    = ElrohirVoiceAttackCharge
	VoiceAttackMachine		                  = ElrohirVoiceAttack
	VoiceAttackStructure	                  = ElrohirVoiceAttackBuilding
	;VoiceCreated			                      = FaramirRangerVoiceSalute	;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	;VoiceFullyCreated 		                  = FaramirRangerVoiceSalute	;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	VoiceFear 				                      = ElrohirVoiceHelpMe
	VoiceMove				                        = ElrohirVoiceMove
	VoiceMoveToCamp			                    = ElrohirVoiceMoveCamp
	VoiceMoveWhileAttacking	                = ElrohirVoiceDisengage
	VoicePriority			                      = 82
	VoiceRetreatToCastle	                  = ElrohirVoiceRetreat
	VoiceSelect				                      = ElrohirVoiceSelect
	VoiceSelect2			                      = HeroVoiceSelect2
	VoiceSelectBattle 		                  = ElrohirVoiceSelectBattle
	VoiceGuard				                      = ElrohirVoiceMove
	
	SoundCrushing        									  = RohirrimCrushing        ; Sound made when crushing another unit underhoof
	SoundImpact				                      = ImpactHorse

	UnitSpecificSounds
		VoiceGarrison		                      = ElrohirVoiceGarrison              
	End

	EvaEventDamagedOwner				            = UnitUnderAttack ;Eva event to trigger when unit is damaged
	EvaEventDieOwner					              = ElrohirDie	;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths

	Behavior                                = LargeGroupAudioUpdate ModuleTag_LGAU			; Tie into LargeGroupAudio system
		Key                                   = Human Unit Infantry Hero
		UnitWeight                            = 2
	End
	
	ClientBehavior                          = ModelConditionSoundSelectorClientBehavior ModuleTag_MCSoundSelector
		SoundState                            = MOUNTED
			VoiceMove                           = ElladanVoiceMove
			VoiceSelect2                        = BannerRiderVoiceSelect2
		End
	End
	
	ClientBehavior                          = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap                     = 800
		AnimationSound                        = Sound:FootstepDirtA          Animation:GUFaramir_SKL.GUFaramir_RUNA        Frames:2 12
		AnimationSound                        = Sound:FootstepDirtA       	  Animation:GUFaramir_SKL.GUFaramir_RUNB        Frames:2 12
		AnimationSound                        = Sound:WeaponSwitchBow        Animation:GUFaramir_SKL.GUFaramir_ATKC        Frames:18
		AnimationSound                        = Sound:SwordShingClean1 			Animation:GUFaramir_SKL.GUFaramir_STHA        Frames:21
		AnimationSound                        = Sound:SwordIntoScabbard1 		Animation:GUFaramir_SKL.GUFaramir_STHB        Frames:11
		AnimationSound                        = Sound:WeaponSwitchBow        Animation:GUFaramir_SKL.GUFaramir_STHB        Frames:28
		AnimationSound                        = Sound:SwordIntoScabbard1 		Animation:GUFaramir_SKL.GUFaramir_STHC        Frames:2
		AnimationSound                        = Sound:WeaponSwitchBow        Animation:GUFaramir_SKL.GUFaramir_STHC        Frames:3
		AnimationSound                        = Sound:SwordShingClean1 			Animation:GUFaramir_SKL.GUFaramir_STHD        Frames:6
		AnimationSound                        = Sound:BodyFallGenericNoArmor Animation:GUFaramir_SKL.GUFaramir_DIEA        Frames:88
		AnimationSound                        = Sound:BodyFallGenericNoArmor Animation:GUFaramir_SKL.GUFaramir_DIEB        Frames:85
		AnimationSound                        = Sound:BodyFallGenericNoArmor Animation:GUFaramir_SKL.GUFaramir_DIEC        Frames:49
		AnimationSound                        = Sound:BodyFallSoldier        Animation:GUFaramir_SKL.GUFaramir_LNDA        Frames:3
		AnimationSound                        = Sound:BodyFallSoldier        Animation:GUFaramir_SKL.GUFaramir_LNDB        Frames:2
		AnimationSound                        = Sound:HorseMoveFootsteps 		Animation:RUHHs_Theo_SKL.RUHHs_Theo_ACCL      Frames:14 32
		AnimationSound                        = Sound:HorseMoveFootsteps 		Animation:RUHHs_Theo_SKL.RUHHs_Theo_RUNA      Frames:0
		AnimationSound                        = Sound:HorseMoveFootsteps 		Animation:RUHHs_Theo_SKL.RUHHs_Theo_TNL1      Frames:0
		AnimationSound                        = Sound:HorseMoveFootsteps 		Animation:RUHHs_Theo_SKL.RUHHs_Theo_TNR1      Frames:0
		AnimationSound                        = Sound:HorseWhinny50Percent 	Animation:RUHHs_Theo_SKL.RUHHs_Theo_IDLC      Frames:0
		AnimationSound                        = Sound:HorseDieForHero        Animation:RUHHs_Theo_SKL.RUHHs_Theo_LNDA      Frames:0
		AnimationSound                        = Sound:BodyFallSoldier        Animation:RUHHs_Theo_SKL.RUHHs_Theo_LNDA      Frames:1 9
		AnimationSound                        = Sound:HorseDieForHero        Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA      Frames:0
		AnimationSound                        = Sound:BodyFallGenericNoArmor Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA      Frames:4
		AnimationSound                        = Sound:BodyFallSoldier        Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA      Frames:42
	End

	; *** ENGINEERING Parameters ***

	RadarPriority                           = UNIT
	KindOf                                  = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ARMY_SUMMARY ATTACK_NEEDS_LINE_OF_SIGHT
	PathfindDiameter                        = 40.0

	Body                                    = RespawnBody ModuleTag_RespawnBody
		CheerRadius 			                    = EMOTION_CHEER_RADIUS
		MaxHealth         		                = DUN_ELROHIR_HEALTH
		;MaxHealthReallyDamaged               = 50
		PermanentlyKilledByFilter	            = NONE		;Who kills me permanently?
   	DodgePercent      		  	            = HERO_DODGE_PERCENT
	End
	
	Behavior                                = RespawnUpdate ModuleTag_RespawnUpdate
		DeathAnim				                      = DYING				;Model condition to play when killed-to-respawn
		DeathFX				      	                = FX_GenericGoodDieToRespawn	;FXList to play when killed-to-respawn
		DeathAnimationTime			              = 5000				;How long DeathAnim will take.
		InitialSpawnFX				                = FX_ElrohirInitialSpawn
		RespawnAnim				  	                = LEVELED				;Animation to play when respawning.
		RespawnFX				                      = FX_ElrohirRespawn		;FXList to play when respawning.
		RespawnAnimationTime		              = 2000				;Time it takes for respawn to play.
		AutoRespawnAtObjectFilter	            = NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
		ButtonImage				  	                = hirivelrohir
		
		;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
		;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
		RespawnRules                          =			AutoSpawn:No	Cost:600		Time:90000		Health:100%		;DEFAULT VALUES
		RespawnEntry                          =	Level:2				Cost:700		Time:90000		;For other levels, only override what is different.
		RespawnEntry                          =	Level:3				Cost:800		Time:90000		
		RespawnEntry                          =	Level:4				Cost:900		Time:90000		
		RespawnEntry                          =	Level:5				Cost:1000		Time:120000		
		RespawnEntry                          =	Level:6				Cost:1100		Time:120000		
		RespawnEntry                          =	Level:7				Cost:1200		Time:120000		
		RespawnEntry                          =	Level:8				Cost:1300		Time:120000		
		RespawnEntry                          =	Level:9				Cost:1400		Time:120000		
		RespawnEntry                          =	Level:10			Cost:1500		Time:120000		
	End
	
	Behavior                                = AutoHealBehavior ModuleTag_FaramirHealing
		StartsActive                          = Yes
		HealingAmount                         = HERO_HEAL_AMOUNT
		HealingDelay                          = 1000
		StartHealingDelay                     = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat                 = Yes
	End

	Behavior                                = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle            = Yes ATTACK_BUILDINGS STEALTHED
		MoodAttackCheckRate                   = 500
		HoldGroundCloseRangeDistance          = 41
		AILuaEventsList			                  = TwinFunctions
	End
	

	
	; -- Death Behaviors
	Behavior                                = SlowDeathBehavior ModuleTag_05
		DeathTypes                            = ALL 
		SinkDelay                             = 30000
		SinkRate                              = 0.40     ; in Dist/Sec
		DestructionDelay                      = 8000
		Sound                                 = INITIAL ElrohirVoiceDie
	End	
	
	Behavior                                = SlowDeathBehavior ModuleTag_99
		SinkDelay                             = 3000 ; Should be >= DestructionDelay; spawned objects are responsible for sinking
		SinkRate                              = 0.60     ; in Dist/Sec
		DestructionDelay                      = 10000 ; MUST BE EQUAL TO LENGTH OF DIED ANIMATION
		DeathTypes                            = NONE +SPLATTED
	End
    
	Behavior                                = SlowDeathBehavior ModuleTag_08
		; Die and don't spawn horse
		DeathTypes                            = ALL -SPLATTED
		SinkDelay                             = 3000
		SinkRate                              = 0.40     ; in Dist/Sec
		DestructionDelay                      = 10000
		ProbabilityModifier                   = 33
		;DeathFlags                            = DEATH_2 ; Tell model which death animation to play. Sets BOTH model condition and object status bits.
	End
	
	; -- Locomotors
	LocomotorSet
		Locomotor                             = HeroHumanLocomotor
		Condition                             = SET_NORMAL 
		Speed                                 = M_NORMAL_GOOD_LEGOLAS_SPEED
	End
	
	LocomotorSet
		Locomotor                             = HeroHorseLocomotor
		Condition                             = SET_MOUNTED
		Speed                                 = M_NORMAL_CAVALRY_HORDE_SPEED
	End		
	
	Behavior                                = PhysicsBehavior ModuleTag_04
		GravityMult                           = 1.0
		ShockStandingTime		                  = 4000	;msec
	End
	
	Behavior                                = SquishCollide ModuleTag_06
	End
	
	Behavior                                = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1                 = 7 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer2                 = 15 ; level 2 (medium damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer3                 = 10 ; level 3 (heavy  damage)  hit reaction animations in frames (5 per sec)
		HitReactionThreshold1                 = 0.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2                 = 25.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3                 = 50.0  ; level 3 (heavy  damage) threshold trigger
	End
	
	Behavior                                = AttributeModifierAuraUpdate ModuleTag_HeroRadiateFear
		StartsActive	                        = No ;If no, requires upgrade to turn on.
		BonusName		                          = HeroRadiateFear
		TriggeredBy		                        = Upgrade_HeroRadiateFear
		RefreshDelay	                        = 2000
		Range			                            = 120
		TargetEnemy		                        = Yes
		ObjectFilter	                        = ANY +ORC
	End	
	
	Behavior                                = AutoAbilityBehavior ModuleTag_AutoAbilityBehavior
	End		
		
	; -- Twin Gwenyn
	Behavior                                = AttributeModifierAuraUpdate ModuleTag_LeadershipBrothers
		StartsActive	                        = Yes
		BonusName		                          = TwinsGwenyn
		RefreshDelay	                        = 2000
		Range			                            = 200	
		ObjectFilter	                        = NONE +RivendellElladan
	End	
	
	Behavior                                = CreateObjectDie ModuleTag_07
		DeathTypes                            = ALL
		CreationList                          = OCL_ElrohirDeathGwenynBuffEgg
	End
	
	; -- Hatred of Orcs
	Behavior                                = UnpauseSpecialPowerUpgrade ModuleTag_WordEnabler
		SpecialPowerTemplate                  = SpecialAbilityEomerStandGround
		TriggeredBy                           = Upgrade_GenericUpgrade1
	End
	
	Behavior                                = SpecialPowerModule ModuleTag_WordStarter
		SpecialPowerTemplate                  = SpecialAbilityEomerStandGround
		UpdateModuleStartsAttack              = Yes
		StartsPaused                          = Yes
	End
	
	Behavior                                = WeaponFireSpecialAbilityUpdate ModuleTag_WordWeaponFireUpdate   
		SpecialPowerTemplate                  = SpecialAbilityEomerStandGround
		WhichSpecialWeapon                    = 1
		SkipContinue                          = Yes

		UnpackTime                            = 3000 
		PackTime                              = 1        
		FreezeAfterTriggerDuration            = 1 ; Hold AI for this long after we fire.
		
		AwardXPForTriggering                  = 0        
		StartAbilityRange                     = 80.0
		
		SpecialWeapon                         = ElrohirHatredOfOrcs
	End
		
	; -- Swift Strikes
	Behavior                                = UnpauseSpecialPowerUpgrade ModuleTag_HaldirQuickDrawEnabler
		SpecialPowerTemplate                  = SpecialAbilityHaldirQuickDraw
		TriggeredBy                           = Upgrade_GenericUpgrade3
	End
	
	Behavior                                = SpecialPowerModule ModuleTag_HaldirQuickDrawStarter                ; SpecialAbility is a SpecialPower, SpecialPower is anyting special
		SpecialPowerTemplate                  = SpecialAbilityHaldirQuickDraw
		StartsPaused                          = Yes
		SetModelCondition		                  = ModelConditionState:USER_4
		SetModelConditionTime		              = 1.4
		DisableDuringAnimDuration	            = Yes
		;InitiateSound            	          = ElrohirVoiceSwiftStrikes
	End
	
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_HaldirQuickDrawUpdate   ; So the difference in SpecialAbility is that it takes timing from this Update, instead of simply firing.
		SpecialPowerTemplate                  = SpecialAbilityHaldirQuickDraw
		HeroAttributeModifier                 = ElrohirSwiftSwords ; For Duration
		HeroEffectDuration                    = 25000 ; this should sync with the auto ability delay re-fire time in commandButtons.ini
		UnpackTime                            = 1 ; insant unpack
		TriggerSound                          = AragornBladeMaster
	End	
	
	; -- Mount Toggle
	Behavior = SpecialPowerModule ModuleTag_HorseToggleStarter1
		SpecialPowerTemplate      = SpecialAbilityToggleMounted
		UpdateModuleStartsAttack  = Yes
		StartsPaused = No
	End

	Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_HorseToggle1
		SpecialPowerTemplate    = SpecialAbilityToggleMounted
		UnpackTime              = 1200
		PreparationTime         = 1  
		PersistentPrepTime      = 250
		PackTime                = 1200
		OpacityTarget            = .3
		AwardXPForTriggering    = 0
	End
	
	; -- Stealth
	Behavior                                = StealthUpdate ModuleTag_Stealth
		StealthDelay                          = 0 ; msec
		StealthForbiddenConditions            = MOUNTED ATTACKING AWAY_FROM_TREES
		HintDetectableConditions              = IS_FIRING_WEAPON 
		FriendlyOpacityMin					          = STEALTH_FRIENDLY_OPACITY_MIN ;10
		FriendlyOpacityMax					          = STEALTH_FRIENDLY_OPACITY_MAX ;60
		DetectedByAnyoneRange		              = 120
		PulseFrequency                        = 750   ; msec
		OrderIdleEnemiesToAttackMeUponReveal  = Yes
	End

	Geometry                                = CYLINDER
	GeometryMajorRadius                     = 8.0
	GeometryMinorRadius                     = 8.0
	GeometryHeight                          = 19.2
	GeometryIsSmall                         = No
	Shadow                                  = SHADOW_DECAL
	ShadowSizeX                             = 20;
	ShadowSizeY                             = 20;
	ShadowTexture                           = ShadowI;
End
; ------------------------------------------------------------- ;
Object ElrohirDeathGwenynBuffEgg

	Draw                          = W3DScriptedModelDraw ModuleTag_Draw
		DefaultModelConditionState
			Model                     = None
		End
	End

	KindOf                        = IMMOBILE UNATTACKABLE

	Body                          = ActiveBody ModuleTag_MakesKillWork
		MaxHealth                   = 1
	End

	Behavior                      = AIUpdateInterface ModuleTag_03
		AILuaEventsList             = TwinsDeathEggFunctions
	End

	Behavior                      = LifetimeUpdate ModuleTag_HatchTrigger
		MinLifetime                 = 30000
		MaxLifetime                 = 30000
	End

	Behavior                      = SpecialPowerModule ModuleTag_LibraryDisabled ;,;
		SpecialPowerTemplate    	  = SpecialAbilityWargHowl
		AttributeModifier           = TwinsGwenynDie
		AttributeModifierRange      = 99999999
		AttributeModifierAffects    = NONE +RivendellElladan
		AttributeModifierFX 	 	    = FX_ElrohirBrotherDeath
		TargetEnemy 				        = No
		AffectAllies                = No
		InitiateSound             	= ElladanVoiceEnrage
  End

End