;------------------------------------------------------------------------------
;
;	Elrohir.ini
;
;------------------------------------------------------------------------------
Object RivendellElrohir
	; *** ART Parameters ***
	Scale = 1.03
    ; SelectPortrait for Heros is portrait behind skill buttons. HP = HeroPortrait.
	SelectPortrait = hprivelrohir
    
    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage = hirivelrohir
    
	Draw = W3DScriptedModelDraw ModuleTag_DRAW
	OkToChangeModelColor = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
	

	ExtraPublicBone = arrow
	ExtraPublicBone = PASSENGERBONE
		
	 DependencySharedModelFlags = TURN_LEFT_HIGH_SPEED TURN_RIGHT_HIGH_SPEED MOVING ACCELERATE DECELERATE TURN_LEFT TURN_RIGHT ATTACKING BACKING_UP

;;====================== MODELS ================================================================
		DefaultModelConditionState
			Model               = auelrohir
			WeaponLaunchBone    = PRIMARY arrow
		End
		
		ModelConditionState = WEAPONSET_HERO_MODE
			Model             	= auelrohir
			ParticleSysBone 	= BAT_FARMR SwiftStrikesTrailFX FollowBone:Yes
			ParticleSysBone 	= BAT_FARML SwiftStrikesTrailFX FollowBone:Yes
		End

;;================== ANIMATIONS =================================================================

		AnimationState        = PACKING_TYPE_2
			StateName		  =	CaptainPower
			Animation           = GUFaramir_CHRC
				AnimationName     = GUFaramir_SKL.GUFaramir_CHRC
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.2 1.2
			End
		End

		; AnimationState        = PACKING_TYPE_2
			; StateName		  =	STATE_CaptainBow
			; Animation           = GUFaramir_CHRD
				; AnimationName     = GUFaramir_SKL.GUFaramir_CHRD
				; AnimationMode     = ONCE
				; AnimationSpeedFactorRange = 0.75 0.75
			; End
		; End

		AnimationState        = STUNNED_FLAILING 
			StateName           = STATE_Sword
			Animation           = GUFaramir_FLYB
				AnimationName     = GUFaramir_SKL.GUFaramir_FLYB
				AnimationMode     = LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Flags               = RANDOMSTART
		End

		AnimationState        = DYING SPLATTED 
			StateName           = STATE_Sword
			Animation           = GUFaramir_LNDB
				AnimationName     = GUFaramir_SKL.GUFaramir_LNDB
				AnimationMode     = ONCE
			End
		End
		
		AnimationState        = DYING 
			StateName           = STATE_Sword
			Animation           = GUFaramir_DIEA
				AnimationName     = GUFaramir_SKL.GUFaramir_DIEA
				AnimationMode     = ONCE
			End
			Animation           = GUFaramir_DIEB
				AnimationName     = GUFaramir_SKL.GUFaramir_DIEB
				AnimationMode     = ONCE
			End
		End

		AnimationState        = STUNNED_STANDING_UP 
			StateName           = STATE_Sword
			Animation           = GUFaramir_GTPB
				AnimationName     = GUFaramir_SKL.GUFaramir_GTPB
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End

		AnimationState        = STUNNED 
			StateName           = STATE_Sword
			Animation           = GUFaramir_LNDB
				AnimationName     = GUFaramir_SKL.GUFaramir_LNDB
				AnimationMode     = ONCE
			End
		End	

		AnimationState        = USER_1
			Animation           = GUFaramir_POSA
				AnimationName     = GUFaramir_SKL.GUFaramir_POSA
				AnimationMode     = ONCE
			End
		End

		; AnimationState        =  SPECIAL_WEAPON_ONE
			; StateName = STATE_Bow
			; Animation
				; AnimationName           = GUFaramir_SKL.GUFaramir_ATKC
				; AnimationMode       = ONCE
			; End
			; FrameForPristineBonePositions = 59
			; BeginScript
				; CurDrawableShowSubObject("arrow")
			; EndScript
		; End
		AnimationState        = SPECIAL_WEAPON_ONE
			StateName		  =	CaptainPower
			Animation           = GUFaramir_CHRC
				AnimationName     = GUFaramir_SKL.GUFaramir_CHRC
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.2 1.2
			End
		End
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			Animation           = TrotAndFire
				AnimationName       = GUFaramir_SKL.GUFaramir_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART
			StateName = RunAndSwing
		End

		AnimationState        = FIRING_OR_PREATTACK_A
			StateName           = STATE_Sword
			Animation           = ATKD
				AnimationName     = GUFaramir_SKL.GUFaramirA_SPCA
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 1.149 1.149
			End
			Animation           = ATKE
				AnimationName    = GUFaramir_SKL.GUFaramirA_SPCB
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 1.149 1.149
			End
			Animation           = ATKF
				AnimationName    = GUFaramir_SKL.GUFaramirA_SPCB
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.47 1.47
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
			EndScript
		End

		AnimationState        = MOVING USER_4
			StateName           = Slaughter
			Flags               = RANDOMSTART
			Animation           = GUFaramir_ATKE
				AnimationName     = GUFaramir_SKL.GUFaramir_ATKE
				AnimationMode     = LOOP
			End
			StateName           = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
			EndScript
		End

		AnimationState			= MOVING 
			StateName           = STATE_RunningSword
			Flags               = RANDOMSTART
			Animation           = auelrohir_runa
				AnimationName   = GUFaramir_SKL.auelrohir_runa
				AnimationSpeedFactorRange = 1.2 1.2
				;Distance		= 28
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
				if Prev == "STATE_RunningBow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword_Running") end
			EndScript
		End

		AnimationState        = ATTACKING 
			StateName           = STATE_Sword
			Animation           = ATKD
				AnimationName     = GUFaramir_SKL.GUFaramir_IDLA
				AnimationMode     = MANUAL
			End			
		End

		AnimationState = EMOTION_ALERT HIT_REACTION 
			Animation = Hit_Level_1_d
				AnimationName = GUFaramir_SKL.GUFaramir_HITD
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION 
			Animation = Hit_Level_1_b
				AnimationName = GUFaramir_SKL.GUFaramir_HITB
				AnimationMode = ONCE
			End
		End

		AnimationState				= LEVELED
			Animation				= LevelUp
				AnimationName		= GUFaramir_SKL.GUFaramir_CHRC
				AnimationMode		= ONCE
			End
		End

		AnimationState				=	EMOTION_CELEBRATING
			Animation
				AnimationName		=	GUFaramir_SKL.GUFaramir_CHRC
				AnimationMode		=	LOOP
			End
		End

		AnimationState				=	EMOTION_TAUNTING 
			Animation
				AnimationName		=	GUFaramir_SKL.GUFaramir_TNTC
				AnimationMode		=	ONCE
			End
			Animation
				AnimationName		=	GUFaramir_SKL.GUFaramir_TNTD
				AnimationMode		=	ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState					= SELECTED
			StateName					= STATE_Selected_Sword
			Animation					= ATNE
				AnimationName			= GUFaramir_SKL.GUFaramir_ATNE
				AnimationMode			= LOOP
				AnimationBlendTime		= 15
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				CurDrawableHideSubObject("arrow")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_BoredToSelectedSword") return end
			EndScript
		End

		AnimationState				=	EMOTION_ALERT
			StateName				=	STATE_READY
			Animation				=	ready
				AnimationName		=	GUFaramir_SKL.GUFaramir_IDLA
				AnimationMode		=	LOOP
				AnimationBlendTime	=	20
			End
		End

		AnimationState				=	RAISING_FLAG
			Animation
				AnimationName		=	GUFaramir_SKL.GUFaramir_CHRC
				AnimationMode		=	LOOP
			End
		End

		IdleAnimationState
			StateName					= STATE_Idle_Sword	
			Animation           		= IDLE
				AnimationName       	= GUFaramir_SKL.GUFaramir_IDLE
				AnimationMode       	= LOOP
				AnimationPriority	    = 20
				AnimationBlendTime  = 15
			End

			Animation           		= IDLF
				AnimationName       	= GUFaramir_SKL.GUFaramir_IDLF
				AnimationMode       	= LOOP
				AnimationPriority	    = 1
			End

			Animation           		= IDLG
				AnimationName       	= GUFaramir_SKL.GUFaramir_IDLG
				AnimationMode       	= LOOP
				AnimationPriority	    = 1
			End

			BeginScript
				CurDrawableHideSubObject("arrow")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
				if Prev == "STATE_Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoredSword") end
			EndScript
		End

		TransitionState = TRANS_BoredToSelectedSword
			Animation = ANTD
				AnimationName		= GUFaramir_SKL.GUFaramir_ANTD
				AnimationMode		= ONCE
			End		
		End

		TransitionState = TRANS_SelectedToBoredSword
			Animation			= ATNF
				AnimationName	= GUFaramir_SKL.GUFaramir_ATNF
				AnimationMode	= ONCE
			End		
		End	

		TransitionState = TRANS_BoredToSelectedBow
			Animation = ATNC
				AnimationName		= GUFaramir_SKL.GUFaramir_ATNC
				AnimationMode		= ONCE
			End		
		End

	End

	Draw = W3DScriptedModelDraw DustEffects
	    DefaultModelConditionState
	      Model = None
	    End
	    IdleAnimationState
	    End
	    AnimationState = MOUNTED MOVING WADING
			ParticleSysBone = None FootstepSlash
	    End
	    AnimationState = MOUNTED MOVING ACCELERATE
			ParticleSysBone = None GenericSiegeTrailDust
	    End
	    AnimationState = MOUNTED MOVING ACCELERATE
			ParticleSysBone = None GenericSiegeTrailDust
	    End
	    AnimationState = MOUNTED MOVING
			ParticleSysBone = None GenericSiegeTrailDust
	    End
	End

	; ***DESIGN parameters ***
	Side                                    = Rivendell
	EditorSorting                           = UNIT
	ThreatLevel                             = 4.0
	ThingClass                              = CHARACTER_UNIT
	BuildCost                               = DUN_ELROHIR_BUILDCOST				
	BuildTime                               = DUN_ELROHIR_BUILDTIME				
	TransportSlotCount                      = 1
	DisplayMeleeDamage                      = DUN_ELLADAN_DAMAGE

	WeaponSet
		Conditions                            = None 
		Weapon                                = PRIMARY    ElrohirSwords
		AutoChooseSources                     = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	
	WeaponSet
		Conditions                            = WEAPONSET_HERO_MODE
		Weapon                                = PRIMARY    ElrohirSwiftSwords
		AutoChooseSources                     = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End
		
	ArmorSet
		Conditions                            = None
		Armor                                 = HeroArmor
		DamageFX                              = NormalDamageFX
	End

	VisionRange                             = VISION_HERO_RANGED
	ShroudClearingRange                     = SHROUD_CLEAR_RANGED_HERO

	BountyValue                             = GONDOR_FARAMIR_BOUNTY_VALUE
	DisplayName                             = OBJECT:Elrohir
	RecruitText                             = CONTROLBAR:ElrohirRecruit
	ReviveText	                            = CONTROLBAR:GenericHeroRevive
	Hotkey		                              = CONTROLBAR:ElrohirHotkey
	CrusherLevel                            = 0			;Can I crush anything?
	MountedCrusherLevel                     = 1		;Crush level when mounted.
	CrushableLevel                          = 2			;What am I?:        0 = for infantry, 1 = for trees, 2 = cavalry/heroes
	MountedCrushableLevel                   = 2	;Crusable level when mounted.

	CrushWeapon		                          = HeroCrush  

	MinCrushVelocityPercent                 = 50 ; Has to be moving at at least 50% of full speed.
	CrushDecelerationPercent                = 30 ; Lose xx percent of max velocity when crushing.
	
	CrushKnockback                          = 40
	CrushZFactor                            = 1.0

	CommandSet                              = ElrohirCommandset
	CommandPoints                           = 0


	; *** AUDIO Parameters ***;

	VoiceAttack				                      = ElrohirVoiceAttack
	VoiceAttackAir			                    = ElrohirVoiceAttack
	VoiceAttackCharge		                    = ElrohirVoiceAttackCharge
	VoiceAttackMachine		                  = ElrohirVoiceAttack
	VoiceAttackStructure	                  = ElrohirVoiceAttackBuilding
	;VoiceCreated			                      = FaramirRangerVoiceSalute	;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	;VoiceFullyCreated 		                  = FaramirRangerVoiceSalute	;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	VoiceFear 				                      = ElrohirVoiceHelpMe
	VoiceMove				                        = ElrohirVoiceMove
	VoiceMoveToCamp			                    = ElrohirVoiceMoveCamp
	VoiceMoveWhileAttacking	                = ElrohirVoiceDisengage
	VoicePriority			                      = 82
	VoiceRetreatToCastle	                  = ElrohirVoiceRetreat
	VoiceSelect				                      = ElrohirVoiceSelect
	VoiceSelect2			                      = HeroVoiceSelect2
	VoiceSelectBattle 		                  = ElrohirVoiceSelectBattle
	VoiceGuard				                      = ElrohirVoiceMove

	SoundImpact				                      = ImpactHorse

	UnitSpecificSounds
		VoiceGarrison		                      = ElrohirVoiceGarrison              
	End

	EvaEventDamagedOwner				            = UnitUnderAttack ;Eva event to trigger when unit is damaged
	EvaEventDieOwner					              = ElrohirDie	;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths

	Behavior                                = LargeGroupAudioUpdate ModuleTag_LGAU			; Tie into LargeGroupAudio system
		Key                                   = Human Unit Infantry Hero
		UnitWeight                            = 2
	End

	ClientBehavior                          = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap                     = 800
		AnimationSound                        = Sound:ArrowDrawBow					Animation:RUElfWar_SKL.RUElfWar_ATKA1	Frames:6
		AnimationSound                        = Sound:ArrowDrawBow					Animation:RUElfWar_SKL.RUElfWar_ATKA2	Frames:18

		AnimationSound                        = Sound:SwordShingClean1ForHordes 		Animation:RUElfWar_SKL.RUElfWar_STHA 	Frames:24
		AnimationSound                        = Sound:SwordIntoScabbard1ForHordes		Animation:RUElfWar_SKL.RUElfWar_STHB 	Frames:9
		AnimationSound                        = Sound:WeaponSwitchBowForHordes		 	Animation:RUElfWar_SKL.RUElfWar_STHB 	Frames:15

		AnimationSound                        = Sound:SwordShingClean1ForHordes 		Animation:RUElfWar_SKL.RUElfWar_STHC 	Frames:20
		AnimationSound                        = Sound:SwordIntoScabbard1ForHordes		Animation:RUElfWar_SKL.RUElfWar_STHD 	Frames:5
		AnimationSound                        = Sound:WeaponSwitchBowForHordes 		Animation:RUElfWar_SKL.RUElfWar_STHD 	Frames:8

		AnimationSound                        = Sound:SwordShingClean1ForHordes 		Animation:RUElfWar_SKL.RUElfWar_RUNC 	Frames:14
		AnimationSound                        = Sound:SwordIntoScabbard1ForHordes 		Animation:RUElfWar_SKL.RUElfWar_RUNT 	Frames:4
		AnimationSound                        = Sound:WeaponSwitchBowForHordes 		Animation:RUElfWar_SKL.RUElfWar_RUNT 	Frames:16

		AnimationSound                        = Sound:BodyFallSoldier				Animation:RUElfWar_SKL.RUElfWar_LNDA	Frames:9
		AnimationSound                        = Sound:BodyFallSoldier				Animation:RUElfWar_SKL.RUElfWar_LNDB	Frames:1

		AnimationSound                        = Sound:BodyFallGenericNoArmor			Animation:RUElfWar_SKL.RUElfWar_DIEB 	Frames:82
		AnimationSound                        = Sound:BodyFallSoldier				Animation:RUElfWar_SKL.RUElfWar_DIEBV5 	Frames:25
		AnimationSound                        = Sound:BodyFallSoldier				Animation:RUElfWar_SKL.RUElfWar_DIESV4 	Frames:26
		AnimationSound                        = Sound:BodyFallGenericNoArmor			Animation:RUElfWar_SKL.RUElfWar_DIESV5	Frames:100
	End

	; *** ENGINEERING Parameters ***

	RadarPriority                           = UNIT
	KindOf                                  = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ARMY_SUMMARY ATTACK_NEEDS_LINE_OF_SIGHT
	PathfindDiameter                        = 40.0

	Body                                    = RespawnBody ModuleTag_RespawnBody
		CheerRadius 			                    = EMOTION_CHEER_RADIUS
		MaxHealth         		                = DUN_ELROHIR_HEALTH
		;MaxHealthReallyDamaged               = 50
		PermanentlyKilledByFilter	            = NONE		;Who kills me permanently?
   	DodgePercent      		  	            = HERO_DODGE_PERCENT
	End
	
	Behavior                                = RespawnUpdate ModuleTag_RespawnUpdate
		DeathAnim				                      = DYING				;Model condition to play when killed-to-respawn
		DeathFX				      	                = FX_GenericGoodDieToRespawn	;FXList to play when killed-to-respawn
		DeathAnimationTime			              = 5000				;How long DeathAnim will take.
		InitialSpawnFX				                = FX_ElrohirInitialSpawn
		RespawnAnim				  	                = LEVELED				;Animation to play when respawning.
		RespawnFX				                      = FX_ElrohirRespawn		;FXList to play when respawning.
		RespawnAnimationTime		              = 2000				;Time it takes for respawn to play.
		AutoRespawnAtObjectFilter	            = NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
		ButtonImage				  	                = hirivelrohir
		
		;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
		;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
		RespawnRules                          =			AutoSpawn:No	Cost:600		Time:90000		Health:100%		;DEFAULT VALUES
		RespawnEntry                          =	Level:2				Cost:700		Time:90000		;For other levels, only override what is different.
		RespawnEntry                          =	Level:3				Cost:800		Time:90000		
		RespawnEntry                          =	Level:4				Cost:900		Time:90000		
		RespawnEntry                          =	Level:5				Cost:1000		Time:120000		
		RespawnEntry                          =	Level:6				Cost:1100		Time:120000		
		RespawnEntry                          =	Level:7				Cost:1200		Time:120000		
		RespawnEntry                          =	Level:8				Cost:1300		Time:120000		
		RespawnEntry                          =	Level:9				Cost:1400		Time:120000		
		RespawnEntry                          =	Level:10			Cost:1500		Time:120000		
	End
	
	Behavior                                = AutoHealBehavior ModuleTag_FaramirHealing
		StartsActive                          = Yes
		HealingAmount                         = HERO_HEAL_AMOUNT
		HealingDelay                          = 1000
		StartHealingDelay                     = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat                 = Yes
	End

	Behavior                                = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle            = Yes ATTACK_BUILDINGS STEALTHED
		MoodAttackCheckRate                   = 500
		HoldGroundCloseRangeDistance          = 41
		AILuaEventsList			                  = TwinFunctions
	End

	LocomotorSet
		Locomotor                             = HeroHumanLocomotor
		Condition                             = SET_NORMAL 
		Speed                                 = M_NORMAL_GOOD_LEGOLAS_SPEED
	End
	
	; -- Twin Gwenyn
	Behavior                                = AttributeModifierAuraUpdate ModuleTag_LeadershipBrothers
		StartsActive	                        = Yes
		BonusName		                          = TwinsGwenyn
		RefreshDelay	                        = 2000
		Range			                            = 200	
		ObjectFilter	                        = NONE +RivendellElladan
	End	
	
	Behavior                                = CreateObjectDie ModuleTag_07
		DeathTypes                            = ALL
		CreationList                          = OCL_ElrohirDeathGwenynBuffEgg
	End
	
	; -- Hatred of Orcs
	Behavior                                = UnpauseSpecialPowerUpgrade ModuleTag_WordEnabler
		SpecialPowerTemplate                  = SpecialAbilityEomerStandGround
		TriggeredBy                           = Upgrade_GenericUpgrade1
	End
	
	Behavior                                = SpecialPowerModule ModuleTag_WordStarter
		SpecialPowerTemplate                  = SpecialAbilityEomerStandGround
		UpdateModuleStartsAttack              = Yes
		StartsPaused                          = Yes
	End
	
	Behavior                                = WeaponFireSpecialAbilityUpdate ModuleTag_WordWeaponFireUpdate   
		SpecialPowerTemplate                  = SpecialAbilityEomerStandGround
		WhichSpecialWeapon                    = 1
		SkipContinue                          = Yes

		UnpackTime                            = 3000 
		PackTime                              = 1        
		FreezeAfterTriggerDuration            = 1 ; Hold AI for this long after we fire.
		
		AwardXPForTriggering                  = 0        
		StartAbilityRange                     = 80.0
		
		SpecialWeapon                         = ElrohirHatredOfOrcs
	End
		
	; -- Swift Strikes
	Behavior                                = UnpauseSpecialPowerUpgrade ModuleTag_HaldirQuickDrawEnabler
		SpecialPowerTemplate                  = SpecialAbilityHaldirQuickDraw
		TriggeredBy                           = Upgrade_GenericUpgrade3
	End
	
	Behavior                                = SpecialPowerModule ModuleTag_HaldirQuickDrawStarter                ; SpecialAbility is a SpecialPower, SpecialPower is anyting special
		SpecialPowerTemplate                  = SpecialAbilityHaldirQuickDraw
		StartsPaused                          = Yes
		SetModelCondition		                  = ModelConditionState:USER_4
		SetModelConditionTime		              = 1.4
		DisableDuringAnimDuration	            = Yes
		;InitiateSound            	          = ElrohirVoiceSwiftStrikes
	End
	
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_HaldirQuickDrawUpdate   ; So the difference in SpecialAbility is that it takes timing from this Update, instead of simply firing.
		SpecialPowerTemplate                  = SpecialAbilityHaldirQuickDraw
		HeroAttributeModifier                 = ElrohirSwiftSwords ; For Duration
		HeroEffectDuration                    = 25000 ; this should sync with the auto ability delay re-fire time in commandButtons.ini
		UnpackTime                            = 1 ; insant unpack
		TriggerSound                          = AragornBladeMaster
	End	
	
	; --------------------------------------------------------------------------------------------- ;
	
	Behavior                                = AutoAbilityBehavior ModuleTag_AutoAbilityBehavior
	End

  Behavior                                = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		              =	300		; max distance to taunted/pointed objet
 		TauntAndPointUpdateDelay	            =	1000	; how often scan (milliseconds)
		AddEmotion	                          =	Alert_Base
 	End

	Behavior                                = PhysicsBehavior ModuleTag_04
		GravityMult                           = 1.0
		ShockStandingTime		                  = 2533	;msec
	End
	 
	Behavior                                = SlowDeathBehavior ModuleTag_05
		DeathTypes                            = ALL 
		SinkDelay                             = 30000
		SinkRate                              = 0.40     ; in Dist/Sec
		DestructionDelay                      = 8000
		Sound                                 = INITIAL ElrohirVoiceDie
	End
	
	Behavior                                = SquishCollide ModuleTag_06
		;nothing
	End
	
	Behavior                                = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1                 = 1500 ; level 1 (light  damage)  hit reaction animations in ms
		HitReactionLifeTimer2                 = 1500 ; level 2 (medium damage)  hit reaction animations in ms
		HitReactionLifeTimer3                 = 1500 ; level 3 (heavy  damage)  hit reaction animations in ms

		HitReactionThreshold1                 = 5.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2                 = 25.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3                 = 50.0  ; level 3 (heavy  damage) threshold trigger
		
		FastHitsResetReaction                 = Yes    If set -- when hits occur faster than the reaction animations, it will reset the animation. (like getting riddled with machine gun bullets)
	End

	Behavior                                = StealthUpdate ModuleTag_Stealth
		StealthDelay                          = 0 ; msec
		StealthForbiddenConditions            = MOUNTED ATTACKING AWAY_FROM_TREES
		HintDetectableConditions              = IS_FIRING_WEAPON 
		FriendlyOpacityMin					          = STEALTH_FRIENDLY_OPACITY_MIN ;10
		FriendlyOpacityMax					          = STEALTH_FRIENDLY_OPACITY_MAX ;60
		DetectedByAnyoneRange		              = 120
		PulseFrequency                        = 750   ; msec
		OrderIdleEnemiesToAttackMeUponReveal  = Yes
	End

	Geometry                                = CYLINDER
	GeometryMajorRadius                     = 8.0
	GeometryMinorRadius                     = 8.0
	GeometryHeight                          = 19.2
	GeometryIsSmall                         = No
	Shadow                                  = SHADOW_DECAL
	ShadowSizeX                             = 20;
	ShadowSizeY                             = 20;
	ShadowTexture                           = ShadowI;
End
; ------------------------------------------------------------- ;
Object ElrohirDeathGwenynBuffEgg

	Draw                          = W3DScriptedModelDraw ModuleTag_Draw
		DefaultModelConditionState
			Model                     = None
		End
	End

	KindOf                        = IMMOBILE UNATTACKABLE

	Body                          = ActiveBody ModuleTag_MakesKillWork
		MaxHealth                   = 1
	End

	Behavior                      = AIUpdateInterface ModuleTag_03
		AILuaEventsList             = TwinsDeathEggFunctions
	End

	Behavior                      = LifetimeUpdate ModuleTag_HatchTrigger
		MinLifetime                 = 30000
		MaxLifetime                 = 30000
	End

	Behavior                      = SpecialPowerModule ModuleTag_LibraryDisabled ;,;
		SpecialPowerTemplate    	  = SpecialAbilityWargHowl
		AttributeModifier           = TwinsGwenynDie
		AttributeModifierRange      = 99999999
		AttributeModifierAffects    = NONE +RivendellElladan
		AttributeModifierFX 	 	    = FX_ElrohirBrotherDeath
		TargetEnemy 				        = No
		AffectAllies                = No
		InitiateSound             	= ElladanVoiceEnrage
  End

End