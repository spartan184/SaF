;------------------------------------------------------------------------------
;
;	Glorfindel.ini
;
;------------------------------------------------------------------------------
Object RivendellGlorfindel
	SelectPortrait 	                  = HPrivGlorfindel
	ButtonImage 	                    = HIrivGlorfindel
	Draw                              = W3DScriptedModelDraw ModuleTag_DRAW
		StaticModelLODMode              = No
		OkToChangeModelColor            = Yes

		DefaultModelConditionState
			Model					                = auNglorf_skn
			Skeleton				              = EUGlrfdl_SKL
		End
		
		ModelConditionState			        = MOUNTED WEAPONSET_HERO_MODE
			Model					                = auNglorf_mnt
			Skeleton				              = RUHHs_Theo_SKL
			; ParticleSysBone             = BAT_SPINE2 GlorfindelMountedGlow FollowBone:Yes
		End
		
		ModelConditionState			        = MOUNTED
			Model					                = auNglorf_mnt
			Skeleton				              = RUHHs_Theo_SKL
		End
		
		ModelConditionState			        = WEAPONSET_HERO_MODE
		End
		
		;                               ================ Animations ===================== 
		TransitionState				          =	TRANS_MountedSelect
			Animation				              =	ATNA
				AnimationName		            =	RUHHs_Theo_ATNA
				AnimationMode		            =	ONCE
			End
		End
		AnimationState				          =	MOUNTED FREEFALL 
			Animation				              =	freefall
				AnimationName		            =	RUHHs_Theo_FLYC
				AnimationMode		            =	LOOP
			End
			Flags					                =	RANDOMSTART
		End
		AnimationState				          =	MOUNTED STUNNED_FLAILING 
			Animation				              =	JustDie
				AnimationName		            =	RUHHs_Theo_FLYA
				AnimationMode		            =	LOOP
				AnimationSpeedFactorRange	  = 0.2 0.3
			End
			Flags					                =	RANDOMSTART
		End
		AnimationState				          =	MOUNTED DYING SPLATTED
			Animation				              =	Land
				AnimationName		            =	RUHHs_Theo_LNDA
				AnimationMode		            =	ONCE
			End
		End
		AnimationState				          =	MOUNTED DYING
			Animation				              =	DieA
				AnimationName		            =	RUHHs_Theo_DIEA
				AnimationMode		            =	ONCE
			End
		End
		AnimationState				          =	MOUNTED STUNNED_STANDING_UP
			Animation				              =	StandUp
				AnimationName		            =	RUHHs_Theo_GTPA
				AnimationMode		            =	ONCE
				AnimationSpeedFactorRange   = 1.3 1.3
			End
		End
		AnimationState				          =	MOUNTED STUNNED
			Animation				              =	Land
				AnimationName		            =	RUHHs_Theo_LNDA
				AnimationMode		            =	ONCE
			End
		End
		AnimationState                  = MOUNTED MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		            = Yes
			Animation                     = MountedRunAndFire
				AnimationName               = RUHHs_Theo_ATRB
				AnimationMode               = LOOP
			End
			Flags                         = RANDOMSTART  
		End
		AnimationState				          =	MOUNTED FIRING_OR_PREATTACK_A
			Animation				              =	AttackA
				AnimationName		            =	RUHHs_Theo_ATKA
				AnimationMode		            =	LOOP
				UseWeaponTiming		          =	Yes
			End
			Animation				              =	AttackB
				AnimationName		            =	RUHHs_Theo_ATKB
				AnimationMode		            =	LOOP
				UseWeaponTiming		          =	Yes
			End
		End
		AnimationState				          =	MOUNTED TURN_LEFT_HIGH_SPEED
			Animation				              =	TurnLeft
				AnimationName		            =	RUHHs_Theo_TNL1
				AnimationMode		            =	LOOP
			End
		End
		AnimationState				          =	MOUNTED TURN_RIGHT_HIGH_SPEED
			Animation				              =	TurnRight
				AnimationName		            =	RUHHs_Theo_TNR1
				AnimationMode		            =	LOOP
			End
		End
		AnimationState				          =	MOUNTED MOVING ACCELERATE
			Animation				              =	Accelerate
				AnimationName		            =	RUHHs_Theo_ACCL
				AnimationMode		            =	LOOP
			End
		End
		AnimationState				          =	MOUNTED MOVING DECELERATE
			Animation				              =	Decelerate
				AnimationName		            =	RUHHs_Theo_DECL
				AnimationMode		            =	ONCE
				AnimationSpeedFactorRange   = 0.6 0.6	
			End
		End
		AnimationState				          =	MOUNTED TURN_LEFT 
			Animation				              =	TurnLeft
				AnimationName		            =	RUHHs_Theo_TRNL
				AnimationMode		            =	LOOP
			End
		End
		AnimationState				          =	MOUNTED TURN_RIGHT 
			Animation				              =	TurnRight
				AnimationName		            =	RUHHs_Theo_TRNR
				AnimationMode		            =	LOOP
			End
		End
		AnimationState				          =	MOUNTED MOVING WALKING
			Animation				              =	Walk
				AnimationName		            =	RUHHs_Theo_WLKA
				AnimationMode		            =	LOOP
			End
			Flags					                =	RANDOMSTART
		End
		AnimationState				          =	MOUNTED MOVING BACKING_UP
			Animation				              =	BackingUp
				AnimationName		            =	RUHHs_Theo_BAKA
				AnimationMode		            =	LOOP
			End
			Flags					                =	RANDOMSTART
		End
		AnimationState				          =	MOUNTED MOVING
			Animation				              =	RunA
				AnimationName		            =	RUHHs_Theo_RUNA
				AnimationMode		            =	LOOP
			End
 			Flags					                =	RANDOMSTART
		End
		AnimationState                  = MOUNTED USER_1
			Animation
				AnimationName				        = EUGlrfnMnt_SPCA
				AnimationMode				        = ONCE
				AnimationSpeedFactorRange	  = 0.7 0.7
			End
		End
		AnimationState                  = MOUNTED USER_2 
			Animation
				AnimationName				        = EUGlrfnMnt_SPCB
				AnimationMode				        = ONCE
				AnimationSpeedFactorRange	  = 0.8 0.8
			End
			FXEvent	                      = Frame:10 Name: FX_LightofAman
		End
		AnimationState                  = MOUNTED SPECIAL_WEAPON_ONE
			Animation
				AnimationName				        = EUGlrfnMnt_SPCC
				AnimationMode				        = LOOP ;ONCE
				AnimationSpeedFactorRange	  = 0.8 0.8
			End
			FXEvent	                      = Frame:10 Name: FX_GlorfindelInitialSlayer
		End
		; AnimationState                = PACKING_TYPE_2 MOUNTED 
			; Animation
				; AnimationName				      = EUGlrfnMnt_SPCB
				; AnimationMode				      = ONCE
				; AnimationSpeedFactorRange	= 0.8 0.8
			; End
		; End
		AnimationState				          =	MOUNTED SELECTED
			SimilarRestart			          =   Yes			
			StateName				              =	AtAttentionIdle
			Animation				              =	ATNB
				AnimationName		            =	RUHHs_Theo_IDLH
				AnimationMode		            =	LOOP
			End
			BeginScript
				Prev                        = CurDrawablePrevAnimationState()
				if Prev                     == "Idle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
			EndScript
		End
		TransitionState				          =	TRANS_MountedSelect
			Animation				              =	ATNA
				AnimationName		            =	RUHHs_Theo_ATNA
				AnimationMode		            =	ONCE
			End
		End
		AnimationState				          = MOUNTED LEVELED
			Animation				              = LevelUp
				AnimationName		            = RUHHs_Theo_CHRA
				AnimationMode		            = ONCE
			End
		End
		AnimationState                  = MOUNTED
			StateName                     = Idle
			Animation				              =	IdleA
				AnimationName		            =	RUHHs_Theo_IDLA
				AnimationPriority	          =	30
				AnimationMode		            =	ONCE
				AnimationBlendTime	        =	15
			End			
			Animation	                    =	IDLB
				AnimationName		            =	RUHHs_Theo_IDLB
				AnimationPriority	          =	15
				AnimationMode		            =	ONCE
				AnimationBlendTime	        =	30
			End
			Animation	                    =	IDLC
				AnimationName		            =	RUHHs_Theo_IDLC
				AnimationPriority	          =	15
				AnimationMode		            =	ONCE
				AnimationBlendTime	        =	30
			End
			Flags					                =	RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState			            = STUNNED_FLAILING 
			Flags                         = RANDOMSTART
			Animation
				AnimationName               = EUGlrfdl_FLYA
				AnimationMode               = LOOP
				AnimationSpeedFactorRange	  = 0.4 0.6
			End
			StateName                     = NoSword
			BeginScript
				Prev                        = CurDrawablePrevAnimationState()
				if Prev                     == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SheatheSword") end
			EndScript
		End
		AnimationState			            = STUNNED_STANDING_UP
			Animation
				AnimationName               = EUGlrfdl_GTPA
				AnimationMode               = ONCE
				AnimationSpeedFactorRange   = 1.5 1.5
			End
		End
		AnimationState			            = STUNNED 
			Animation
				AnimationName               = EUGlrfdl_LNDA
				AnimationMode               = ONCE
			End
			StateName                     = NoSword
			BeginScript
				Prev                        = CurDrawablePrevAnimationState()
				if Prev                     == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SheatheSword") end
			EndScript
		End
		AnimationState				          =	DYING SPLATTED
			Animation
				AnimationName		            =	EUGlrfdl_LNDA
				AnimationMode		            =	ONCE
			End
			StateName				              =	NoSword
			BeginScript
				Prev                        = CurDrawablePrevAnimationState()
				if Prev                     == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SheatheSword") end
			EndScript
		End
		AnimationState                  = DYING AFLAME
			Animation                     = DieAflame
				AnimationName               = EUGlrfdl_MFDA
				AnimationMode               = LOOP
			End
		End
		AnimationState				          =	DYING
			Animation
				AnimationName		            =	EUGlrfdl_DTHA
				AnimationMode		            =	ONCE
				AnimationPriority           =   10
			End
		End
		AnimationState                  = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		            = Yes
			Animation                     = RunAndFire
				AnimationName               = EUGlrfdl_ATKSV2
				AnimationMode               = LOOP
			End
			Flags                         = RANDOMSTART 
			BeginScript
				CurDrawableHideSubObject("spear")
			EndScript
		End
		AnimationState				          =	MOVING ATTACKING
			Flags					                =	RANDOMSTART
			Animation				              =	RUNB
				AnimationName		            =	EUGlrfdl_RUNB
				AnimationMode		            =	LOOP
			End
			StateName				              =	NoSword
			BeginScript
				CurDrawableHideSubObject("spear")
				Prev                        = CurDrawablePrevAnimationState()
				if Prev                     == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SheatheSword") end
			EndScript
		End
		AnimationState				          =	MOVING
			Flags					                =	RANDOMSTART
			Animation				              =	RUNA
				AnimationName		            =	EUGlrfdl_RUNA
				AnimationMode		            =	LOOP
			End
			StateName				              =	NoSword
			BeginScript
				CurDrawableHideSubObject("spear")
				Prev                        = CurDrawablePrevAnimationState()
				if Prev                     == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SheatheSword") end
			EndScript
		End
		AnimationState                  = USER_1
			Animation
				AnimationName				        = EUGlrfdl_SPCA
				AnimationMode				        = ONCE
				AnimationSpeedFactorRange	  = 0.75 0.75
			End
		End
		AnimationState                  = USER_2
			Animation
				AnimationName				        = EUGlrfdl_SPCB
				AnimationMode				        = ONCE
				AnimationSpeedFactorRange	  = 0.8 0.8
			End
			FXEvent	                      = Frame:10 Name: FX_LightofAman
		End
		AnimationState                  = SPECIAL_WEAPON_ONE
			Animation
				AnimationName				        = EUGlrfdl_SPCC
				AnimationMode				        = LOOP ;ONCE
				AnimationSpeedFactorRange	  = 0.8 0.8
			End
			FXEvent	                      = Frame:10 Name: FX_GlorfindelInitialSlayer
		End
		; AnimationState                = PACKING_TYPE_2
			; Animation
				; AnimationName				      = EUGlrfdl_SPCB
				; AnimationMode				      = ONCE
				; AnimationSpeedFactorRange	= 0.8 0.8
			; End
		; End
		AnimationState				          =	FIRING_OR_PREATTACK_A
			StateName				              =	Sword
			Animation				              =	ATKA
				AnimationName		            =	EUGlrfdl_ATKA
				AnimationMode		            =	ONCE
				UseWeaponTiming		          =	Yes
			End
			Animation				              =	ATKB
				AnimationName		            =	EUGlrfdl_ATKB
				AnimationMode		            =	ONCE
				UseWeaponTiming		          =	Yes
			End
			Animation				              =	ATKC
				AnimationName		            =	EUGlrfdl_ATKC
				AnimationMode		            =	ONCE
				UseWeaponTiming		          =	Yes
			End
			Flags					                =	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				CurDrawableHideSubObject("spear")
			EndScript
		End
		AnimationState                  = ATTACKING
			Animation                     = ALERT_1
				AnimationName               = EUGlrfdl_IDLA
				AnimationMode               = ONCE
			End
			Flags                         = RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState			            = HIT_REACTION HIT_LEVEL_1
			StateName			                = STATE_Bored_Sword
			Animation			                = Hit_Level_1_A
				AnimationName	              = EUGlrfdl_HITA
				AnimationMode	              = ONCE
			End
		End
		AnimationState			            = HIT_REACTION HIT_LEVEL_2
			StateName			                = STATE_Bored_Sword
			Animation			                = Hit_Level_1_A
				AnimationName	              = EUGlrfdl_HITA
				AnimationMode	              = ONCE
			End
		End
		AnimationState			            = HIT_REACTION HIT_LEVEL_3
			StateName			                = STATE_Bored_Sword
			Animation			                = Hit_Level_1_A
				AnimationName	              = EUGlrfdl_HITA
				AnimationMode	              = ONCE
			End
		End
		TransitionState					        =	TRANS_Idle_to_Selected
			Animation					            =	ATNA
				AnimationName			          =	EUGlrfdl_ATNA
				AnimationMode			          =	ONCE
			End
		End
		TransitionState					        =	TRANS_Selected_To_Idle
			Animation					            =	ATNC
				AnimationName			          =	EUGlrfdl_ATNC
				AnimationMode			          =	ONCE
			End
		End
		AnimationState						      = LEVELED
			Animation						          = LevelUp
				AnimationName				        = EUGlrfdl_LVLA
				AnimationMode				        = ONCE
				AnimationSpeedFactorRange	  = 0.75 0.75
			End
		End
		AnimationState				          =	SELECTED
			StateName				              =	Selected
			SimilarRestart			          =   Yes			
			Animation				              =	ATNB
				AnimationName		            =	EUGlrfdl_ATNB
				AnimationMode		            =	LOOP
			End
			BeginScript
				CurDrawableHideSubObject("spear")
				Prev                        = CurDrawablePrevAnimationState()
				if Prev                     == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
			EndScript
		End
		AnimationState				          =	EMOTION_CELEBRATING
			Animation				              =	CHRA
				AnimationName		            =	EUGlrfdl_CHRA
				AnimationMode		            =	ONCE
				AnimationPriority	          =	10
			End
			Flags					                =	RESTART_ANIM_WHEN_COMPLETE				
		End
		AnimationState					        = EMOTION_TAUNTING
			Animation
				AnimationName			          = EUGlrfdl_TNTA
				AnimationMode			          = LOOP
			End
		End
		AnimationState					        = EMOTION_ALERT EMOTION_MORALE_HIGH
			Animation					            = Taunting
				AnimationName			          = EUGlrfdl_TNTA
				AnimationMode			          = ONCE
			End
			Flags						              = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState                  = EMOTION_ALERT
			Animation                     = ALERT_1
				AnimationName               = EUGlrfdl_IDLA
				AnimationMode               = ONCE
			End
			Flags                         = RESTART_ANIM_WHEN_COMPLETE
		End
		IdleAnimationState
			Animation				              = IDLB
				AnimationName		            = EUGlrfdl_IDLB
				AnimationMode		            = ONCE
			End
			Animation				              = IDLC
				AnimationName		            = EUGlrfdl_IDLC
				AnimationMode		            = ONCE
			End
			Animation				              = IDLD
				AnimationName		            = EUGlrfdl_IDLD
				AnimationMode		            = ONCE
			End
			Animation				              = IDLE
				AnimationName		            = EUGlrfdl_IDLE
				AnimationMode		            = ONCE
			End
			StateName				              = Idle
			BeginScript
				CurDrawableHideSubObject("spear")
				Prev                        = CurDrawablePrevAnimationState()
				if Prev                     == "Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
			EndScript
		End		
	End
	Draw                              = W3DScriptedModelDraw DustEffects
	    DefaultModelConditionState
	      Model                       = None
	    End
	    IdleAnimationState
	    End
	    AnimationState                = MOUNTED MOVING WADING
			ParticleSysBone               = None FootstepSlash
	    End
	    AnimationState                = MOUNTED MOVING ACCELERATE
			ParticleSysBone               = None GenericSiegeTrailDust
	    End
	    AnimationState                = MOUNTED MOVING ACCELERATE
			ParticleSysBone               = None GenericSiegeTrailDust
	    End
	    AnimationState                = MOUNTED MOVING
	    End
	End
	
	;                                 ============== Unit Behaviors and Stuff =============== ;
	Side				                      = Rivendell
	EditorSorting		                  = UNIT
	ThreatLevel			                  = 20.0
	ThingClass			                  = CHARACTER_UNIT
	BuildCost                         = GLORFINDEL_BUILDCOST   
	BuildTime                         = GLORFINDEL_BUILDTIME
	BountyValue                       = GLORFINDEL_BOUNTY_VALUE
	MaxSimultaneousOfType             = 1

	WeaponSet
		Conditions			                = None 
		Weapon				                  = PRIMARY   GlorfindelSword
		AutoChooseSources	              = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	
	WeaponSet
		Conditions		                  = WEAPONSET_HERO_MODE
		Weapon			                    = PRIMARY    GlorfindelHeroSword
	End
	
	WeaponSet
		Conditions			                = MOUNTED
		Weapon				                  = PRIMARY   GlorfindelSword
		AutoChooseSources	              = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	
	WeaponSet
		Conditions			                = MOUNTED WEAPONSET_HERO_MODE
		Weapon				                  = PRIMARY   GlorfindelHeroSword
		AutoChooseSources	              = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	
	ArmorSet
		Conditions                      = None
		Armor                           = GlorfindelHeroArmor
		DamageFX                        = NormalDamageFX
	End
	
	ArmorSet
		Conditions                      = MOUNTED
		Armor                           = GlorfindelHeroArmorMounted
		DamageFX                        = NormalDamageFX
	End
	
  VisionRange 				              = M_VISION_STANDARD_MELEE                
  ShroudClearingRange 		          = M_SHROUD_CLEAR_STANDARD
	DisplayName 				              = OBJECT:Glorfindel
	RecruitText 				              = CONTROLBAR:GlorfindelRecruit
	ReviveText					              = CONTROLBAR:GlorfindelRevive
	Hotkey						                = CONTROLBAR:GlorfindelHotkey

  MinCrushVelocityPercent 	        = 50 ; Has to be moving at at least 50% of full speed.
  CrushDecelerationPercent 	        = 30 ; Lose xx percent of max velocity when crushing.
    
	CrusherLevel				              = 0
	CrushableLevel				            = 2
	MountedCrusherLevel			          = 1
	MountedCrushableLevel 		        = 2
	CrushWeapon					              = RohirrimCrush
	CrushKnockback				            = 40
	CrushZFactor				              = 1.0
	CommandSet					              = GlorfindelCommandSet

	VoiceAttack 				              = GlorfindelVoiceAttack
	VoiceAttackAir				            = GlorfindelVoiceAttack
	VoiceAttackCharge 			          = GlorfindelVoiceAttackCharge
	VoiceAttackMachine 			          = GlorfindelVoiceAttack
	VoiceAttackStructure 		          = GlorfindelVoiceAttackBuilding
	VoiceFear					                = GlorfindelVoiceHelpMe
	VoiceGuard					              = GlorfindelVoiceMove
	VoiceMove 					              = GlorfindelVoiceMove
	VoiceMoveToCamp 			            = GlorfindelVoiceMoveCamp
	VoiceMoveWhileAttacking 	        = GlorfindelVoiceDisengage
	VoicePriority				              = 90
	VoiceRetreatToCastle 		          = GlorfindelVoiceRetreat
	VoiceSelect 				              = GlorfindelVoiceSelect
	VoiceSelectBattle  			          = GlorfindelVoiceSelectBattle
	SoundImpact 				              = ImpactHorse
	
	UnitSpecificSounds
		VoiceGarrison						        = GlorfindelVoiceMoveGarrison
		VoiceAttackUnitMordorBalrog			= GlorfindelVoiceAttackBalrog
	End

  ClientBehavior                    = ModelConditionSoundSelectorClientBehavior ModuleTag_MCSoundSelector
    SoundState                      = MOUNTED
      VoiceMove                     = GlorfindelVoiceMoveMounted
      VoiceSelect2                  = GlorfindelVoiceSelect
    End
  End

  EvaEventDamagedOwner              = UnitUnderAttack         ;Eva event to trigger when unit is damaged
	EvaEventDieOwner		              = GlorfindelDie
	
  Behavior                          = LargeGroupAudioUpdate ModuleTag_LGAU            ; Tie into LargeGroupAudio system
    Key                             = Human Unit Infantry Hero
    UnitWeight                      = 2
  End
	
	ClientBehavior                    = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap               = 800
		AnimationSound                  = Sound:BodyFallSoldier			Animation:EUGLRFDL_SKL.EUGLRFDL_LNDA		Frames:5
		AnimationSound                  = Sound:BodyFallSoldier			Animation:EUGLRFDL_SKL.EUGLRFDL_DTHA		Frames:34
		AnimationSound                  = Sound:FootstepDirtA			Animation:EUGlrfdl_SKL.EUGlrfdl_RUNA		Frames:9 18 28 38 48 58
		AnimationSound                  = Sound:FootstepDirtA			Animation:EUGlrfdl_SKL.EUGlrfdl_RUNB		Frames:9 18 28 38 48 58
		AnimationSound                  = Sound:HorseMoveFootsteps		Animation:RUHHs_Theo_SKL.RUHHs_Theo_ACCL	Frames:16 
		AnimationSound                  = Sound:HorseMoveFootsteps		Animation:RUHHs_Theo_SKL.RUHHs_Theo_RUNA	Frames:8
		AnimationSound                  = Sound:HorseMoveFootsteps		Animation:RUHHs_Theo_SKL.RUHHs_Theo_TNL1	Frames:8
		AnimationSound                  = Sound:HorseMoveFootsteps		Animation:RUHHs_Theo_SKL.RUHHs_Theo_TNR1	Frames:8
		AnimationSound                  = Sound:HorseWhinny				Animation:RUHHs_Theo_SKL.RUHHs_Theo_IDLC	Frames:3
		AnimationSound                  = Sound:HorseDieForHero			Animation:RUHHs_Theo_SKL.RUHHs_Theo_LNDA	Frames:0
		AnimationSound                  = Sound:BodyFallSoldier			Animation:RUHHs_Theo_SKL.RUHHs_Theo_LNDA	Frames:2 10
		AnimationSound                  = Sound:HorseDieForHero			Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA	Frames:0
		AnimationSound                  = Sound:BodyFallGenericNoArmor	Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA	Frames:6
		AnimationSound                  = Sound:BodyFallSoldier			Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA	Frames:45
	End
	
	RadarPriority                     = UNIT
	KindOf                            = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ATTACK_NEEDS_LINE_OF_SIGHT NOTIFY_OF_PREATTACK ARMY_SUMMARY SCARY GANDALF	
	PathfindDiameter                  = 40.0
	
	Body                              = ActiveBody ModuleTag_ActiveBody
			CheerRadius                   = M_EMOTION_CHEER_RADIUS
			MaxHealth                     = GLORFINDEL_HEALTH
	End
	
	Behavior                          = AutoHealBehavior ModuleTag_GlorfindelHealing
		StartsActive			              = Yes
		HealingAmount			              = HERO_HEAL_AMOUNT
		HealingDelay			              = 1000
		StartHealingDelay		            = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat	          = Yes
	End

	Behavior                          = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle 	    = Yes ATTACK_BUILDINGS STEALTHED
		AILuaEventsList 			          = GlorfindelFunctions
	End
	
	LocomotorSet
			Locomotor                     = HeroHumanLocomotor
			Condition                     = SET_NORMAL 
			Speed                         = M_NORMAL_GOOD_HERO_SPEED
	End

	LocomotorSet
			Locomotor                     = HeroHorseLocomotor
			Condition                     = SET_MOUNTED 
			Speed                         = 90
	End
    
	Behavior                          = PhysicsBehavior ModuleTag_04
		GravityMult                     = 1.0
		ShockStandingTime               = 2000
	End
	
	Behavior                          = SlowDeathBehavior ModuleTag_05
		DeathTypes                      = ALL 
		SinkDelay                       = 3000
		SinkRate                        = 1.40
		DestructionDelay                = 8000
		Sound                           = INITIAL GlorfindelVoiceDie
	End
	
	Behavior                          = SquishCollide ModuleTag_06
	End

	Behavior                          = HitReactionBehavior HitReactionBehaviorModuleTag
			HitReactionLifeTimer1         = 3000    ; level 1 (light  damage)  hit reaction animations in ms
			HitReactionThreshold1         = 5.0        ; level 1 (light  damage) threshold trigger
	End
	
	;                                 == Radiate Fear
	Behavior                          = AttributeModifierAuraUpdate ModuleTag_HeroRadiateFear
        StartsActive    	          = No ;If no, requires upgrade to turn on.
        BonusName        	          = HeroRadiateFear
        TriggeredBy        	        = Upgrade_HeroRadiateFear
        RefreshDelay    	          = 2000
        Range            	          = 120
        TargetEnemy        	        = Yes
        ObjectFilter    	          = ANY +ORC
    End
	
	;                                 == Hack to get spawn FX
    Behavior                        = ObjectCreationUpgrade ModuleTag_GrantSpawnFX
        TriggeredBy        	        = Upgrade_GenericUpgrade1
        Delay            	          = 0.1
        GrantUpgrade    	          = Upgrade_SpawnHeroFX
    End

    Behavior                        = LevelUpUpgrade ModuleTag_TriggerLevelUp
        TriggeredBy 		            = Upgrade_SpawnHeroFX
        LevelsToGain 		            = 9
        LevelCap 			              = 10
    End
	;                                 == Leadership
    Behavior                        = AttributeModifierAuraUpdate ModuleTag_GlorfindelLeadership1
        StartsActive                = Yes
        BonusName                   = GlorfindelPassiveLeadership
        RefreshDelay                = 2500
        Range                       = 150
        ObjectFilter                = ANY +INFANTRY +CAVALRY  -STRUCTURE -BASE_FOUNDATION -HERO
    End    
    Behavior                        = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate1
        SpecialPowerTemplate        = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = No
    End  
	
	;                                 == Noro Lim
    Behavior                        = UnpauseSpecialPowerUpgrade ModuleTag_RelentlessPursuitEnabler
        SpecialPowerTemplate        = SpecialAbilityTheodenGloriousCharge
        TriggeredBy                 = Upgrade_GenericUpgrade1
    End

    Behavior                        = SpecialPowerModule ModuleTag_RelentlessPursuitUpdate   
			SpecialPowerTemplate      	  = SpecialAbilityTheodenGloriousCharge
			UpdateModuleStartsAttack  	  = Yes
			StartsPaused 				          = Yes
			AttributeModifier 			      = GlorfindelNoroLim
			AttributeModifierAffectsSelf  = Yes
			AttributeModifierFX 		      = FX_GlorfindelNoroLim
			SetModelCondition			        = ModelConditionState:USER_1
			SetModelConditionTime		      = 3.0
			DisableDuringAnimDuration	    = Yes
    End

    Behavior                        = SpecialAbilityUpdate ModuleTag_RelentlessPursuitAnimation
        UnpackTime              	  = 1000
        UnpackingVariation          = 1
        SpecialPowerTemplate    	  = SpecialAbilityTheodenGloriousCharge
        PreparationTime         	  = 0  
        PersistentPrepTime      	  = 0
        PackTime                	  = 1330
    End	
		
	;                                 == Revealed in Wrath
	Behavior                          = UnpauseSpecialPowerUpgrade ModuleTag_HaldirQuickDrawEnabler
		SpecialPowerTemplate            = SpecialAbilityHaldirQuickDraw
		TriggeredBy                     = Upgrade_GenericUpgrade1
	End
	Behavior                          = SpecialPowerModule ModuleTag_HaldirQuickDrawStarter                ; SpecialAbility is a SpecialPower, SpecialPower is anyting special
		SpecialPowerTemplate            = SpecialAbilityHaldirQuickDraw
		StartsPaused                    = Yes
	End
	
	Behavior                          = HeroModeSpecialAbilityUpdate ModuleTag_HaldirQuickDrawUpdate   ; So the difference in SpecialAbility is that it takes timing from this Update, instead of simply firing.
		SpecialPowerTemplate            = SpecialAbilityHaldirQuickDraw
		HeroAttributeModifier           = GlorfindelWrath ; For Duration
		HeroEffectDuration              = 25000 ; this should sync with the auto ability delay re-fire time in commandButtons.ini
		UnpackTime                      = 1 ; insant unpack
		TriggerSound                    = AragornBladeMaster
	End	
	
	;                                 == Light of Aman
	Behavior                          = SpecialPowerModule ModuleTag_HornStarter1
		SpecialPowerTemplate            = SpecialAbilityHornOfGondor
		UpdateModuleStartsAttack        = No
		AntiCategory                    = LEADERSHIP
		AttributeModifier               = BoromirGondorHornAntiCategory
		AttributeModifierRange          = 100.0
		StartsPaused                    = No
		SetModelCondition			          = ModelConditionState:USER_2
		SetModelConditionTime		        = 3.0
		DisableDuringAnimDuration	      = Yes
  End
  Behavior                          = SpecialPowerModule ModuleTag_HornStarter2
		SpecialPowerTemplate            = SpecialAbilityHornOfGondor
		UpdateModuleStartsAttack        = No
		AntiCategory                    = LEADERSHIP
		AttributeModifier               = BoromirGondorHorn
		AttributeModifierRange          = 100.0
		StartsPaused                    = No
  End
	
	;                                 == Slayer of Demons
	; this triggers the blast around him
    Behavior                        = UnpauseSpecialPowerUpgrade ModuleTag_WordEnabler
        SpecialPowerTemplate        = SpecialAbilityEomerStandGround
        TriggeredBy 		            = Upgrade_GenericUpgrade1
    End
    Behavior                        = SpecialPowerModule ModuleTag_WordStarter
        SpecialPowerTemplate        = SpecialAbilityEomerStandGround
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = Yes
    End
    Behavior                        = WeaponFireSpecialAbilityUpdate ModuleTag_WordWeaponFireUpdate   
        SpecialPowerTemplate        = SpecialAbilityEomerStandGround
        WhichSpecialWeapon          = 1 
        SkipContinue                = Yes
        UnpackTime                  = 1000 
        PackTime                    = 1        
        FreezeAfterTriggerDuration  = 1500 ; Hold AI for this long after we fire.
        AwardXPForTriggering        = 0        
        StartAbilityRange           = 80.0
        SpecialWeapon               = GlorfindelSlayerBlast
    End

	;                                 == Horse Toggle
 	Behavior                          = SpecialPowerModule ModuleTag_HorseToggleStarter
 		SpecialPowerTemplate		        = SpecialAbilityToggleMounted
 		UpdateModuleStartsAttack	      = Yes
 		StartsPaused				            = No
 	End
	
	Behavior                          = ToggleMountedSpecialAbilityUpdate ModuleTag_HorseToggle
 		SpecialPowerTemplate    	      = SpecialAbilityToggleMounted
 		TriggerInstantlyOnCreate 	      = Yes
 		UnpackTime              	      = 2000
 		PreparationTime         	      = 1  
 		PersistentPrepTime      	      = 250
 		PackTime                	      = 2000	
 		OpacityTarget				            = 0.4
 		AwardXPForTriggering    	      = 0
	End
	
	Geometry			                    = CYLINDER
	GeometryMajorRadius               = 8.0
	GeometryHeight		                = 25
	GeometryIsSmall		                = Yes
	Shadow				                    = SHADOW_DECAL
	ShadowSizeX			                  = 20
	ShadowSizeY			                  = 20
	ShadowTexture		                  = ShadowI
End