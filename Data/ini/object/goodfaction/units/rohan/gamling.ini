;------------------------------------------------------------------------------
;
;	Gamling.ini
;
;------------------------------------------------------------------------------
; Hama
Object RohanGamling
	SelectPortrait = HPRohanGamling
	ButtonImage = HIRohanGamling
	
	Draw = W3DScriptedModelDraw ModuleTag_DRAW
	  OkToChangeModelColor = Yes
	    StaticModelLODMode = yes

		DefaultModelConditionState
			Model = rugamling
			Skeleton = RUTheoden_SKL
		End

		ModelConditionState = WORLD_BUILDER
			Model = rugamling
			Skeleton = RUTheoden_SKL
		End

		ModelConditionState = MOUNTED
			Model	=	rugamlingmt
			Skeleton = rurohrm_SKL
			WeaponLaunchBone    = PRIMARY PASSENGERBONE
		End

		AnimationState			    = MOUNTED DEBUG
			Animation
				AnimationName       = rurohrm_idla      
				AnimationMode       = ONCE
			End
			ParticleSysBone = BAT_HHEAD glowHorseGold FollowBone:Yes			
			ParticleSysBone = B_HHIPL glowHorseRearGold FollowBone:Yes
			ParticleSysBone = BAT_SPINE2 glowGold FollowBone:Yes			
		End
		AnimationState				=	MOUNTED FREEFALL 
			Animation				=	freefall
				AnimationName		=	rurohrm_flyb
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	MOUNTED STUNNED_FLAILING 
			Animation				=	JustDie
				AnimationName		=	rurohrm_flyb
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	MOUNTED PASSENGER
			Animation				=	grabbed
				AnimationName		=	rurohrm_gbda
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	MOUNTED DYING DEATH_2
			Animation				=	RUHHs_Theo_IDLA
				AnimationName		=	rurohrm_idla
				AnimationMode		=	ONCE
			End
		End		
		AnimationState				=	MOUNTED DYING SPLATTED
			Animation				=	Land
				AnimationName		=	rurohrm_lnda
				AnimationMode		=	ONCE
				AnimationBlendTime  =   2
			End
			FXEvent	= Frame:2 Name:FX_SplatDust
		End
		AnimationState				=	MOUNTED DYING
			Animation				=	JustDie
				AnimationName		=	rurohrm_diea
				AnimationMode		=	ONCE
			End
		End
		AnimationState				=	MOUNTED STUNNED_STANDING_UP
			Animation				=	StandUp
				AnimationName		=	rurohrm_gtpa
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 3.5 3.5
			End
		End
		AnimationState				=	MOUNTED STUNNED
			Animation				=	Land
				AnimationName		=	rurohrm_lnda
				AnimationMode		=	ONCE
			End
		End
		; AnimationState						= PARALYZED MOUNTED
		; 	Animation
		; 		AnimationName				= rurohrm_idla
		; 		AnimationMode				= LOOP
		; 	End
		; End
		AnimationState        = MOUNTED MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = rurohrm_atra
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End
		; AnimationState				=	MOUNTED MOVING USING_SPECIAL_ABILITY
			; Animation				=	RousingSpeech
				; AnimationName		=	RUHHs_Theo_WLKB
				; AnimationMode		=	LOOP
			; End
		; End
		AnimationState				=	MOUNTED TURN_LEFT_HIGH_SPEED
			Animation				=	TurnLeft
				AnimationName		=	rurohrm_tnl1
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= 1.2 1.2
				AnimationBlendTime	=	20
			End
		End
		AnimationState				=	MOUNTED TURN_RIGHT_HIGH_SPEED
			Animation				=	TurnLeft
				AnimationName		=	rurohrm_tnr1
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= 1.2 1.2
				AnimationBlendTime	=	20
			End
		End
		AnimationState				=	MOUNTED MOVING TURN_LEFT 
			Animation				=	TurnLeft
				AnimationName		=	rurohrm_trnl
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOUNTED MOVING TURN_RIGHT 
			Animation				=	TurnRight
				AnimationName		=	rurohrm_trnr
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOUNTED MOVING ACCELERATE
			Animation				=	Accelerate
				AnimationName		=	rurohrm_accl
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOUNTED MOVING DECELERATE
			Animation				=	Decelerate
				AnimationName		=	rurohrm_decl
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 0.6 0.6
			End
		End
		AnimationState				=	MOUNTED MOVING WALKING
			Animation				=	Walk
				AnimationName		=	rurohrm_wlka
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOUNTED MOVING BACKING_UP
			Animation				=	BackingUp
				AnimationName		=	rurohrm_baka
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOUNTED MOVING
			Animation				=	RunA
				AnimationName		=	rurohrm_runa
				AnimationMode		=	LOOP
			End
		End
		; AnimationState						=	PACKING_TYPE_2 MOUNTED
			; StateName						=	SPELL
			; Animation						=	SPCC
				; AnimationName				=	RUHHs_Theo_SPCA
				; AnimationMode				=	ONCE
				; AnimationBlendTime	=	20
			; End
		; End
		; AnimationState						=	PACKING_TYPE_1 MOUNTED
			; StateName						=	SPELL
			; Animation						=	SPCC
				; AnimationName				=	RUHHs_Theo_IDLC
				; AnimationSpeedFactorRange	=	0.842 0.842
				; AnimationMode				=	ONCE
			; End		
		; End
		AnimationState				=	MOUNTED FIRING_OR_PREATTACK_A
			Animation				=	AttackA
				AnimationName		=	rurohrm_atka
				AnimationMode		=	ONCE
				UseWeaponTiming		=	Yes
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState				=	MOUNTED ATTACKING
			Animation				=	AttackA
				AnimationName		=	rurohrm_atka
				AnimationMode		=	MANUAL
			End
		End
		AnimationState				= MOUNTED LEVELED
			StateName				= Idle
			Animation				= LevelUp
				AnimationName		= RUHHs_Theo_IDLC
				AnimationMode		= ONCE
				AnimationSpeedFactorRange	=	0.666 0.666
			End
		End
		; AnimationState				=	RAISING_FLAG MOUNTED
		; 		Animation           =	CHRA
		; 			AnimationName   =	rurohrm_chra
		; 			AnimationMode   =	LOOP
		; 		End
		; End
		AnimationState				=	EMOTION_TAUNTING MOUNTED
				Animation           =	CHRA
					AnimationName   =	rurohrm_tntb
					AnimationMode   =	LOOP
				End
		End
		AnimationState				= MOUNTED EMOTION_CELEBRATING
			Animation				= LevelUp
				AnimationName		= rurohrm_chra
				AnimationMode		= LOOP
			End
		End
		AnimationState				=	MOUNTED SELECTED
			SimilarRestart			=   Yes			
			StateName				=	AtAttentionIdle
			Animation				=	ATNB
				AnimationName		=	rurohrm_idla
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
				if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
			EndScript
		End
		TransitionState				=	TRANS_MountedSelect
			Animation				=	ATNA
				AnimationName		=	rurohrm_atna
				AnimationMode		=	ONCE
			End
		End
		AnimationState			= MOUNTED
			StateName = Idle
			Animation	=	IdleA
				AnimationName		=	rurohrm_idla
				AnimationPriority	=	20
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		IdleAnimationState
			StateName				=	BORED
			Animation				=	IDLB
				AnimationName		=	RUTheoden_IDLB
				AnimationMode		=	ONCE
				AnimationPriority	=	1
			End
			Animation				=	IDLC
				AnimationName		=	RUTheoden_IDLC
				AnimationMode		=	ONCE
				AnimationPriority	=	10
			End
			Animation				=	IDLD
				AnimationName		=	RUTheoden_IDLD
				AnimationMode		=	ONCE
				AnimationPriority	=	1
			End
			Animation				=	IDLE
				AnimationName		=	RUTheoden_IDLE
				AnimationMode		=	ONCE
				AnimationPriority	=	1
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "SELECTED"	then CurDrawableSetTransitionAnimState("Transition_SelectedToBored") end
				if Prev == "READY"		then CurDrawableSetTransitionAnimState("Transition_ReadyToBored") end
			EndScript
		End
		AnimationState				=	FREEFALL 
			Animation				=	freefall
				AnimationName		=	RUTheoden_FLYA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState						=	STUNNED_FLAILING 
			Flags							=	RANDOMSTART
			Animation						=	RUTheoden_FLYA
				AnimationName				=	RUTheoden_FLYA
				AnimationMode				=	LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
		End
		AnimationState						=	DYING DEATH_2
			Animation						=	RUTheoden_IDLA
				AnimationName				=	RUTheoden_IDLA
				AnimationMode				=	ONCE
			End
		End
		AnimationState						=	DYING SPLATTED
			Animation						=	RUTheoden_LNDA
				AnimationName				=	RUTheoden_LNDA
				AnimationMode				=	ONCE
			End
		End
		AnimationState						=	DYING
			Animation						=	RUTheoden_DIEA
				AnimationName				=	RUTheoden_DIEA
				AnimationMode				=	ONCE
			End
			Animation						=	RUTheoden_DIEB
				AnimationName				=	RUTheoden_DIEB
				AnimationMode				=	ONCE
			End
		End
		; AnimationState						= PARALYZED
		; 	Animation
		; 		AnimationName				= RUTheoden_IDLB
		; 		AnimationMode				= ONCE_BACKWARDS
		; 	End
		; 	Flags							= START_FRAME_FIRST
		; End
		AnimationState						=	STUNNED_STANDING_UP
			Animation						=	RUTheoden_GTPA
				AnimationName				=	RUTheoden_GTPA
				AnimationMode				=	ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		AnimationState						=	STUNNED 
			Animation						=	RUTheoden_LNDA
				AnimationName				=	RUTheoden_LNDA
				AnimationMode				=	ONCE
			End
		End
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = RUTheoden_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End
		AnimationState						=	FIRING_OR_PREATTACK_A
			Animation						=	ATKA
				AnimationName				=	RUTheoden_ATKA
				AnimationMode				=	ONCE
				UseWeaponTiming				=	Yes
			End
			Animation						=	ATKB
				AnimationName				=	RUTheoden_ATKB
				AnimationMode				=	ONCE
			End
			Animation						=	ATKC
				AnimationName				=	RUTheoden_ATKC
				AnimationMode				=	ONCE
				UseWeaponTiming				=	Yes
			End
			Animation						=	ATKD
				AnimationName				=	RUTheoden_ATKD
				AnimationMode				=	ONCE
				UseWeaponTiming				=	Yes
			End
		End
		AnimationState						=	MOVING ATTACKING
			Animation						=	RUTheoden_RUNB
				AnimationName				=	RUTheoden_RUNB
				AnimationSpeedFactorRange	=	0.4 0.4
				AnimationMode				=	LOOP
				AnimationBlendTime			=   10
				Distance					=	30
			End
		End	
		AnimationState						=	MOVING 
			Animation						=	RUTheoden_RUNA
				AnimationName				=	RUTheoden_RUNA
				AnimationMode				=	LOOP
				Distance					=	30
			End
		End
		AnimationState						=	PACKING_TYPE_2
			StateName						=	SPELL
			Animation						=	SPCC
				AnimationName				=	RUTheoden_SPCB
				AnimationSpeedFactorRange	=	1.1666 1.1666
				AnimationMode				=	ONCE
				AnimationBlendTime	=	20
			End
			Animation						=	SPCD
				AnimationName				=	RUTheoden_SPCC
				AnimationMode				=	ONCE
				AnimationBlendTime	=	20
			End
		End
		AnimationState						= HIT_REACTION HIT_LEVEL_1
			Animation						= Hit_Level_1_a
				AnimationName				= RUTheoden_HITA
				AnimationMode				= ONCE
			End
		End
		AnimationState				= LEVELED
			Animation				= LevelUp
				AnimationName		= RUTheoden_CHRB
				AnimationMode		= ONCE
			End
		End
		AnimationState				=	EMOTION_CELEBRATING
			Animation				=	CHRA
				AnimationName		=	RUTheoden_CHRA
				AnimationMode		=	ONCE
			End
			Animation				=	CHRB
				AnimationName		=	RUTheoden_CHRB
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState				=	EMOTION_TAUNTING
			Animation				=	CHRB
				AnimationName		=	RUTheoden_CHRB
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState				=	EMOTION_ALERT
			StateName				=	READY
			Animation				=	ready
				AnimationName		=	RUTheoden_IDLA
				AnimationMode		=	LOOP
				AnimationBlendTime	=	20
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "BORED"		then CurDrawableSetTransitionAnimState("Transition_BoredToReady") end
				if Prev == "SELECTED"	then CurDrawableSetTransitionAnimState("Transition_SelectedToReady") end
			EndScript
		End
		; AnimationState				=	RAISING_FLAG
		; 	Animation				=	CHRA
		; 		AnimationName		=	RUTheoden_CHRA
		; 		AnimationMode		=	ONCE
		; 	End
		; 	Animation				=	CHRB
		; 		AnimationName		=	RUTheoden_CHRB
		; 		AnimationMode		=	ONCE
		; 	End
		; 	Flags					=	RESTART_ANIM_WHEN_COMPLETE
		; End
		AnimationState				=	SELECTED 
			StateName				=	SELECTED
			Animation				=	ATNB
				AnimationName		=	RUTheoden_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "BORED" then CurDrawableSetTransitionAnimState("Transition_BoredToSelected") end
				if Prev == "READY" then CurDrawableSetTransitionAnimState("Transition_ReadyToSelected") end
				if Prev == "SPELL" then CurDrawableSetTransitionAnimState("Transition_ReadyToSelected") end
			EndScript
		End		
		TransitionState Transition_BoredToReady
			Animation				=	ready
				AnimationName		=	RUTheoden_IDLA
				AnimationMode		=	LOOP
				AnimationBlendTime	=	20
			End
		End
		TransitionState Transition_ReadyToBored
			Animation				=	IDLC
				AnimationName		=	RUTheoden_IDLC
				AnimationMode		=	ONCE
				AnimationBlendTime	=	20
			End
		End
		TransitionState Transition_BoredToSelected
			Animation				=	ATNA
				AnimationName		=	RUTheoden_ATNA
				AnimationMode		=	ONCE
			End
		End
		TransitionState Transition_SelectedToBored
			Animation				=	ATNE
				AnimationName		=	RUTheoden_ATNE
				AnimationMode		=	ONCE
			End
		End
		TransitionState Transition_SelectedToReady
			Animation				=	ATNC
				AnimationName		=	RUTheoden_ATNA
				AnimationMode		=	ONCE
			End
		End
		TransitionState Transition_ReadyToSelected
			Animation				=	ATNC
				AnimationName		=	RUTheoden_ATNA
				AnimationMode		=	ONCE_BACKWARDS
			End
			Flags = START_FRAME_LAST
		End
	End
	Draw = W3DScriptedModelDraw DustEffects
	    DefaultModelConditionState
	      Model = None
	    End
	    IdleAnimationState
	    End
	    AnimationState = MOUNTED MOVING WADING
			ParticleSysBone = None FootstepSlash
	    End
	    AnimationState = MOUNTED MOVING ACCELERATE
			ParticleSysBone = None GenericSiegeTrailDust
	    End
	    AnimationState = MOUNTED MOVING ACCELERATE
			ParticleSysBone = None GenericSiegeTrailDust
	    End
	    AnimationState = MOUNTED MOVING
			ParticleSysBone = None GenericSiegeTrailDust
	    End
	End
    Side = Rohan
    EditorSorting = UNIT
    ThreatLevel = 4.0
    ThingClass = CHARACTER_UNIT
    BuildCost = GAMLING_BUILDCOST                
    BuildTime = GAMLING_BUILDTIME                
    TransportSlotCount = 1
    DisplayMeleeDamage = M_FARAMIR_DAMAGE 
    WeaponSet
        Conditions            = MOUNTED
        Weapon                = PRIMARY    FaramirSword
    End
    WeaponSet
        Weapon = PRIMARY    FaramirSword
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End
    ArmorSet
        Conditions      = None
        Armor           = HeroArmor
        DamageFX        = NormalDamageFX
    End

    ArmorSet
        Conditions      = MOUNTED
        Armor           = HeroArmorMounted
        DamageFX        = NormalDamageFX
    End
    ArmorSet
        Conditions      = PLAYER_UPGRADE
        Armor           = TheodredLuckOfBattleArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange = M_VISION_HERO_RANGED
    ShroudClearingRange = M_SHROUD_CLEAR_RANGED_HERO
    BountyValue = M_GONDOR_FARAMIR_BOUNTY_VALUE
    DisplayName = OBJECT:RohanGamling
    RecruitText = CONTROLBAR:RohanGamlingRecruit
    ReviveText    = CONTROLBAR:RohanGamlingRevive
    Hotkey        = CONTROLBAR:RohanGamlingHotkey

    CrusherLevel = 0
    MountedCrusherLevel = 1
    CrushableLevel = 2
    MountedCrushableLevel = 2
    CrushWeapon        = HeroCrush  
    MinCrushVelocityPercent = 50
    CrushDecelerationPercent = 30
    CrushKnockback = 40
    CrushZFactor = 1.0

    CommandSet = RohanGamlingCommandSet

    CommandPoints = 0
    
    ; *** AUDIO Parameters ***;
    VoiceAttack				= GamlingVoiceAttack
    VoiceAttackCharge		= GamlingVoiceAttack
    VoiceAttackStructure	= GamlingVoiceAttack
    VoiceFear				= GamlingVoiceHelpMe
    VoiceGuard				= GamlingVoiceMove
    VoiceMove				= GamlingVoiceMove
    VoiceMoveWhileAttacking	= GamlingVoiceDisengage
    VoiceMoveToCamp			= GamlingVoiceRetreatCamp
    VoiceRetreatToCastle	= GamlingVoiceRetreat
    VoicePriority			= 36
    VoiceSelect				= GamlingVoiceSelect
    VoiceSelectBattle		= GamlingVoiceSelectBattle

    SoundCrushing			= RohirrimCrushing		; Sound made when crushing another unit underhoof
    SoundImpact				= ImpactHorse

    UnitSpecificSounds
    End
  
    EvaEventDamagedOwner                = UnitUnderAttack
    EvaEventDieOwner                    = GamlingDie
    
    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU1
        Key = Human Unit Infantry Hero
        UnitWeight = 2
    End
    
    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior1
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:FootstepDirtA        Animation:GUFaramir_SKL.GUFaramir_RUNA        Frames:2 12
        AnimationSound = Sound:FootstepDirtA        Animation:GUFaramir_SKL.GUFaramir_RUNB        Frames:2 12
        AnimationSound = Sound:WeaponSwitchBow        Animation:GUFaramir_SKL.GUFaramir_ATKC        Frames:18
        AnimationSound = Sound:SwordShingClean1        Animation:GUFaramir_SKL.GUFaramir_STHA        Frames:21
        AnimationSound = Sound:SwordIntoScabbard1        Animation:GUFaramir_SKL.GUFaramir_STHB        Frames:11
        AnimationSound = Sound:WeaponSwitchBow        Animation:GUFaramir_SKL.GUFaramir_STHB        Frames:28
        AnimationSound = Sound:SwordIntoScabbard1        Animation:GUFaramir_SKL.GUFaramir_STHC        Frames:2
        AnimationSound = Sound:WeaponSwitchBow        Animation:GUFaramir_SKL.GUFaramir_STHC        Frames:3
        AnimationSound = Sound:SwordShingClean1        Animation:GUFaramir_SKL.GUFaramir_STHD        Frames:6
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:GUFaramir_SKL.GUFaramir_DIEA        Frames:88
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:GUFaramir_SKL.GUFaramir_DIEB        Frames:85
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:GUFaramir_SKL.GUFaramir_DIEC        Frames:49
        AnimationSound = Sound:BodyFallSoldier        Animation:GUFaramir_SKL.GUFaramir_LNDA        Frames:3
        AnimationSound = Sound:BodyFallSoldier        Animation:GUFaramir_SKL.GUFaramir_LNDB        Frames:2
        AnimationSound = Sound:HorseMoveFootsteps        Animation:RUHHs_Theo_SKL.RUHHs_Theo_ACCL        Frames:14 32
        AnimationSound = Sound:HorseMoveFootsteps        Animation:RUHHs_Theo_SKL.RUHHs_Theo_RUNA        Frames:0
        AnimationSound = Sound:HorseMoveFootsteps        Animation:RUHHs_Theo_SKL.RUHHs_Theo_TNL1        Frames:0
        AnimationSound = Sound:HorseMoveFootsteps        Animation:RUHHs_Theo_SKL.RUHHs_Theo_TNR1        Frames:0
        AnimationSound = Sound:HorseWhinny50Percent    Animation:RUHHs_Theo_SKL.RUHHs_Theo_IDLC        Frames:0
        AnimationSound = Sound:HorseDieForHero        Animation:RUHHs_Theo_SKL.RUHHs_Theo_LNDA        Frames:0
        AnimationSound = Sound:BodyFallSoldier        Animation:RUHHs_Theo_SKL.RUHHs_Theo_LNDA        Frames:1 9
        AnimationSound = Sound:HorseDieForHero        Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA        Frames:0
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA        Frames:4
        AnimationSound = Sound:BodyFallSoldier        Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA        Frames:42
    End
    RadarPriority = UNIT
    KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ARMY_SUMMARY ATTACK_NEEDS_LINE_OF_SIGHT
    PathfindDiameter = 40.0
    
    Body = RespawnBody ModuleTag_RespawnBody1
      CheerRadius             = M_EMOTION_CHEER_RADIUS
      MaxHealth                 = M_FARAMIR_HEALTH
      PermanentlyKilledByFilter    = NONE
      DodgePercent              = M_HERO_DODGE_PERCENT
    End
    
    Behavior = RespawnUpdate ModuleTag_RespawnUpdate1
      DeathAnim                = DYING
      DeathFX                = FX_GenericGoodDieToRespawn
      DeathAnimationTime        = 5000
      InitialSpawnFX            = FX_GenericGoodInitialSpawn
      RespawnAnim                = LEVELED
      RespawnFX                = FX_GamlingRespawn
      RespawnAnimationTime        = 2000
      AutoRespawnAtObjectFilter    = NONE +CASTLE_KEEP
      ButtonImage                = HIRohanGamling
      RespawnRules =            AutoSpawn:No    Cost:600        Time:90000        Health:100%
      RespawnEntry =    Level:2                Cost:700        Time:90000
      RespawnEntry =    Level:3                Cost:800        Time:90000        
      RespawnEntry =    Level:4                Cost:900        Time:90000        
      RespawnEntry =    Level:5                Cost:1000        Time:120000        
      RespawnEntry =    Level:6                Cost:1100        Time:120000        
      RespawnEntry =    Level:7                Cost:1200        Time:120000        
      RespawnEntry =    Level:8                Cost:1300        Time:120000        
      RespawnEntry =    Level:9                Cost:1400        Time:120000        
      RespawnEntry =    Level:10            Cost:1500        Time:120000        
    End
	
    Behavior = AutoHealBehavior ModuleTag_FaramirHealing1
      StartsActive = Yes
      HealingAmount = M_HERO_HEAL_AMOUNT
      HealingDelay = 1000
      StartHealingDelay = M_HERO_HEAL_DELAY
      HealOnlyIfNotInCombat = Yes
    End
    
    Behavior = AIUpdateInterface ModuleTag_031
      AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
      MoodAttackCheckRate        = 500
      AILuaEventsList				= TheodredFunctions
    End
    
    LocomotorSet
      Locomotor = HeroHumanLocomotor
      Condition = SET_NORMAL 
      Speed     = M_NORMAL_GOOD_HERO_SPEED
    End

    Behavior = HeroDie ModuleTag_HeroDeath1
      SpecialPowerTemplate = SpecialAbilitySmite
    End
    
    Behavior = SpecialPowerModule    ModuleTag_SpecialAbilityGrabPassenger1
      SpecialPowerTemplate      =    SpecialAbilityGrabPassenger
      UpdateModuleStartsAttack  =    Yes
    End
    
    Behavior = SpecialAbilityUpdate ModuleTag_SpecialAbilityGrabPassengerUpdate1
      SpecialPowerTemplate    = SpecialAbilityGrabPassenger
      StartAbilityRange       = 8.0
      UnpackTime              = 300
      PreparationTime         = 1
      PersistentPrepTime      = 630
      PackTime                = 1000
      AwardXPForTriggering    = 0
    End

    ; ------------------- Peasant/Archer/Spearmen Leadership -------------------- ;
    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodredBondsofBloodUnpause
      SpecialPowerTemplate = SpecialAbilityFakeLeadership2
      TriggeredBy = Upgrade_GenericUpgrade3
    End
    
    Behavior = SpecialPowerModule ModuleTag_TheodredBondsofBloodUpdate
      SpecialPowerTemplate      = SpecialAbilityFakeLeadership2
      UpdateModuleStartsAttack  = Yes
      StartsPaused = Yes
    End 
    
    Behavior = AttributeModifierAuraUpdate ModuleTag_TheodredBondsofBlood
      TriggeredBy = Upgrade_GenericUpgrade3
      StartsActive    = No
      BonusName        = GamlingPassiveLeadership
      RefreshDelay    = 2000
      Range            = 200
      ObjectFilter    = NONE +RohanPeasant +RohanArcher +RohanSpearmen +RohanSpearmenHorde +RohanArcherHorde +RohanPeasantHorde
    End    
    
    ; ------------------- Rabble Summon -------------------- ;
    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FaramirRangersEnabler1
      SpecialPowerTemplate = SuperweaponLurtzScouts
      TriggeredBy = Upgrade_GenericUpgrade5
    End

    Behavior = OCLSpecialPower ModuleTag_OCLSpecialPower1
      SpecialPowerTemplate    = SuperweaponLurtzScouts
      OCL                        = OCL_GamlingRabbleEgg
      CreateLocation       = USE_OWNER_OBJECT
      StartsPaused            = Yes
      SetModelCondition        = ModelConditionState:USER_1
      SetModelConditionTime    = 8.1
      TriggerFX			 = FX_RohirimSummon
    End
    
		; ----------------------------------------------------- ;

    Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityBehavior1
    End 
    
    Behavior = EmotionTrackerUpdate    Module_EmotionTracker1
      TauntAndPointDistance        =    300
      TauntAndPointUpdateDelay    =    1000
      AddEmotion    =    Alert_Base
    End  
     
    LocomotorSet
      Locomotor = HeroHorseLocomotor
      Condition = SET_MOUNTED 
      Speed     = M_NORMAL_CAVALRY_HORDE_SPEED
    End
    
    Behavior = PhysicsBehavior ModuleTag_041
      GravityMult = 1.0
      ShockStandingTime        = 2533
    End
    
    Behavior = SlowDeathBehavior ModuleTag_051
      DeathTypes = ALL 
      SinkDelay = 30000
      SinkRate = 0.40
      DestructionDelay = 8000
      Sound = INITIAL GamlingVoiceDie
    End
    
    Behavior = SquishCollide ModuleTag_061
    End
    
    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag1
      HitReactionLifeTimer1 = 1500
      HitReactionLifeTimer2 = 1500
      HitReactionLifeTimer3 = 1500
      HitReactionThreshold1 = 5.0
      HitReactionThreshold2 = 25.0
      HitReactionThreshold3 = 50.0
      FastHitsResetReaction = Yes    If set -- when hits occur faster than the reaction animations, it will reset the animation. (like getting riddled with machine gun bullets)
    End

    Behavior = SpecialPowerModule ModuleTag_HorseToggleStarter1
       SpecialPowerTemplate      = SpecialAbilityToggleMounted
       UpdateModuleStartsAttack  = Yes
       StartsPaused = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_HorseToggle1
       SpecialPowerTemplate    = SpecialAbilityToggleMounted
       UnpackTime              = 1200
       PreparationTime         = 1  
       PersistentPrepTime      = 250
       PackTime                = 1200
       OpacityTarget            = .3
       AwardXPForTriggering    = 0
    End
    
    ; Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
    ;     LevelToGrant = 10
    ;     MPOnly = Yes
    ; End
    
    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = No
    Shadow = SHADOW_DECAL
    ShadowSizeX = 20
    ShadowSizeY = 20
    ShadowTexture = ShadowI
End
; ------------------------- Rabble Summon Egg -------------------------- ;
Object SummonGamlingRabbleEgg
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        DefaultModelConditionState
            Model = None
        End
    End
    KindOf = INERT IMMOBILE UNATTACKABLE
    
    Body = ActiveBody ModuleTag_MakesKillWork
        MaxHealth = 1
    End
    Behavior = LifetimeUpdate ModuleTag_HatchTrigger
        MinLifetime = 0.0
        MaxLifetime = 0.0
    End
    Behavior = SlowDeathBehavior ModuleTag_HatchProcess
        DestructionDelay = 2000
        OCL = FINAL OCL_SpawnGamlingRabble
    End
End
; ---------------------------------------------------------------------- ;

; ; Gamling on a horse
; Object RohanGamlingCavalry
	; ; *** ART Parameters ***
	; ; NOTE: If you are updating any of the art parameters, you should really check
	; ; GondorCavalryRiderless in FactionSubObject.ini and see if it needs to be updated

	; SelectPortrait         = SP_Gondor_Horseman

	; Draw = W3DScriptedModelDraw ModuleTag_01 
	; StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		; ; Removed non-armored horse textures
		; ;--------------------------------------------------
		; ;RandomTexture = CUHorse_BnA.tga	0 CUHorse_BnWtA.tga
		; ;RandomTexture = CUHorse_BnWtA.tga	0 CUHorse_BnWtA.tga
		; ;RandomTexture = CUHorse_WtA.tga	0 CUHorse_BnWtA.tga
		; ;RandomTexture = CUHorse_WtBkA.tga	0 CUHorse_BnWtA.tga
		; ; TODO!! Fix so that spawned horse has same random texture

		; DefaultModelConditionState
			; Model	=	RUHHs_Theo_M
		; End
		
		; IdleAnimationState
			; Animation	=	IdleA
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLA
				; AnimationPriority	=	20
				; AnimationMode		=	ONCE
				; AnimationBlendTime	=	15
			; End
			; Animation				=	IdleB
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLB
				; AnimationMode		=	ONCE
				; AnimationBlendTime	=	15
			; End
			; Animation				=	IdleC
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLC
				; AnimationMode		=	ONCE
				; AnimationBlendTime	=	15
			; End
		; End
		
		; ; --- stunned anims
		; AnimationState				=	FREEFALL 
			; Animation				=	freefall
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_FLYC
				; AnimationMode		=	LOOP
			; End
			; Flags					=	RANDOMSTART
		; End
		
		; AnimationState				=	STUNNED_FLAILING 
			; Animation				=	JustDie
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_FLYC
				; AnimationMode		=	LOOP
			; End
			; Flags					=	RANDOMSTART
		; End

		; AnimationState				=	STUNNED
			; Animation				=	Land
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_LNDA
				; AnimationMode		=	ONCE
			; End
		; End

		; AnimationState				=	STUNNED_STANDING_UP
			; Animation				=	StandUp
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_GTPA
				; AnimationMode		=	ONCE
			; End
		; End

		; AnimationState				=	DYING SPLATTED
			; Animation				=	Land
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_LNDA
				; AnimationMode		=	ONCE
			; End
		; End

		; ; This is the no-spawn-horse type of death
		; AnimationState				=	DYING	; DEATH_2 Normally has DEATH_2, but just as a backup don't insist
			; Animation				=	JustDie
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_DIEA
				; AnimationMode		=	ONCE
			; End
		; End

		; ; This is what happens when Theo gives his rousing speech
		; AnimationState				=	MOVING USING_SPECIAL_ABILITY
			; Animation				=	RousingSpeech
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_WLKB
				; AnimationMode		=	LOOP
			; End
			; ;ParticleSysBone			=	None CalvaryDustTrails
		; End

		; AnimationState				=	MOVING TURN_LEFT 
			; Animation				=	TurnLeft
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TRNL
				; AnimationMode		=	LOOP
			; End
; ;			;ParticleSysBone			=	None CalvaryDustTrails
		; End

		; AnimationState				=	MOVING TURN_RIGHT 
			; Animation				=	TurnRight
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TRNR
				; AnimationMode		=	LOOP
			; End
; ;			;ParticleSysBone			=	None CalvaryDustTrails
		; End

		; AnimationState				=	MOVING ACCELERATE
			; Animation				=	Accelerate
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ACCL
				; AnimationMode		=	LOOP
			; End
			; ;ParticleSysBone			=	None CalvaryDustTrails
		; End

		; AnimationState				=	MOVING DECELERATE
			; Animation				=	Decelerate
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_DECL
				; AnimationMode		=	ONCE
			; End
			; ;ParticleSysBone			=	None CalvaryDustTrails
		; End

		; AnimationState				=	MOVING WALKING
			; Animation				=	Walk
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_WLKA
				; AnimationMode		=	LOOP
			; End
			; Flags					=	RANDOMSTART
			; ;ParticleSysBone			=	None InfantryDustTrails  
		; End
		
		; AnimationState				=	MOVING BACKING_UP
			; Animation				=	BackingUp
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_BAKA
				; AnimationMode		=	LOOP
			; End
			; Flags					=	RANDOMSTART
			; ;ParticleSysBone			=	None InfantryDustTrails  
		; End


		; AnimationState				=	MOVING
			; Animation				=	RunA
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_RUNA
				; AnimationMode		=	LOOP
			; End
 			; Flags					=	RANDOMSTART
			; ;ParticleSysBone			=	None CalvaryDustTrails  
		; End
		
		; AnimationState				=	ATTACKING
			; Animation				=	AttackA
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATKA
				; AnimationMode		=	ONCE
			; End
			; Animation				=	AttackB
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATKB
				; AnimationMode		=	ONCE
			; End
			; Flags					=	RESTART_ANIM_WHEN_COMPLETE
		; End

; ;		AnimationState				=	REALLYDAMAGED
; ;			Animation				=	DamagedIdle
; ;				AnimationName		=	
; ;				AnimationMode		=	ONCE
; ;				AnimationBlendTime	=	15
; ;			End
; ;		End
		
		; AnimationState				=	USING_SPECIAL_ABILITY
			; Animation				=	RousingSpeech
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_SPCA
				; AnimationMode		=	LOOP
				; ;AnimationBlendTime	=	149
        ; ;AnimationMustCompleteBlend = yes
			; End
		; End

		; AnimationState				=	SELECTED
			; SimilarRestart			=   Yes			
			; StateName				=	AtAttentionIdle
			; Animation				=	ATNB
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLH
				; AnimationMode		=	LOOP
			; End
			; BeginScript
				; Prev = CurDrawablePrevAnimationState()
				; if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
				; if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
			; EndScript
		; End

		; TransitionState				=	TRANS_Select
			; Animation				=	ATNA
				; AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATNA
				; AnimationMode		=	ONCE
			; End
		; End
	; End
	; ; NOTE, PLEASE: If you are changing this unit in any way, you should consider changing 
	; ; GondorCavalryRiderless in FactionSubObject.ini




	; ; ***DESIGN parameters ***
	; Side = Rohan
	; EditorSorting = UNIT
	; ThreatLevel = 1.0
	; TransportSlotCount = 1
	; ArmorSet
		; Conditions      = None
		; Armor           = HeroArmor
		; DamageFX        = NormalDamageFX
	; End
	; WeaponSet
		; Conditions = None 
		; Weapon = PRIMARY    GondorCavalrySword
		; AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	; End
	; VisionRange = 281
	; BountyValue = M_ROHAN_GAMLING_BOUNTY_VALUE
	; DisplayName = OBJECT:RohanGamling
	; CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	; CrusherLevel = 1
	; RamPower = 30;
	; RamZMult = 0.5;

	; CommandSet = GamlingCavalryCommandSet
	; CommandPoints = 1


	; ; *** AUDIO Parameters ***;

	; VoiceSelect			= NoSound
	; VoiceMove			= NoSound
	; VoiceAttack			= NoSound
	; VoiceFear			= NoSound
	; VoiceGuard			= NoSound

	; SoundMoveStart			= GondorHorseMoveStart
	; SoundImpact			= ImpactHorse
	
	; ;UnitSpecificSounds
	; ;	VoiceGarrison         = NoSound
	; ;	VoiceEnter            = NoSound
	; ;	VoiceEnterHostile     = NoSound
	; ;	VoiceGetHealed        = NoSound
	; ;End

	; EvaEventDamagedOwner = UnitUnderAttack		;Eva event to trigger when unit is damaged


	; ; *** ENGINEERING Parameters ***

	; RadarPriority = UNIT
	; ThingClass = CAVALRY_UNIT

	; KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS CAVALRY SCORE INFANTRY ARMY_SUMMARY
	
	; Body = ActiveBody ModuleTag_02
		; MaxHealth         = 10                  ;BALANCE Knight Health
		; MaxHealthDamaged  = 5
		; RecoveryTime      = 5000
	; End
	
	; Behavior = AIUpdateInterface ModuleTag_03
		; AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
	; End

	; LocomotorSet
		; Locomotor = HorseLocomotor
		; Condition = SET_NORMAL 
		; Speed     = 73
	; End

	; Behavior = PhysicsBehavior ModuleTag_04
		; GravityMult = 1.0
	; End
	
	; Behavior = SquishCollide ModuleTag_06
		; ;nothing
	; End

	; Behavior = SlowDeathBehavior ModuleTag_99
		; SinkDelay = 3000 ; Should be >= DestructionDelay; spawned objects are responsible for sinking
		; SinkRate = 0.60     ; in Dist/Sec
		; DestructionDelay = 10000 ; MUST BE EQUAL TO LENGTH OF DIED ANIMATION
		; DeathTypes = NONE +SPLATTED
	; End

	; ; 66% chance of die & horse-runs-away, 33% horse dies too
; ;	Behavior = SlowDeathBehavior ModuleTag_07
; ;		; Die-and-spawn-horse number 1
; ;		SinkDelay = 30000 ; Should be >= DestructionDelay; spawned objects are responsible for sinking
; ;		SinkRate = 0.40     ; in Dist/Sec
; ;		DestructionDelay = 3000 ; MUST BE EQUAL TO LENGTH OF DIEB ANIMATION
; ;		DeathTypes = ALL -SPLATTED
; ;		OCL = FINAL OCL_GondorCavalryDeathRunAwayB
; ;		ProbabilityModifier = 33
; ;		DeathFlags = DEATH_1 ; Tell model which death animation to play. Sets BOTH model condition and object status bits.
; ;	End
	
	; Behavior = SlowDeathBehavior ModuleTag_08
		; ; Die and don't spawn horse
		; DeathTypes = ALL -SPLATTED
		; SinkDelay = 3000
		; SinkRate = 0.40     ; in Dist/Sec
		; DestructionDelay = 10000
; ;		ProbabilityModifier = 33
		; ProbabilityModifier = 100
		; DeathFlags = DEATH_2 ; Tell model which death animation to play. Sets BOTH model condition and object status bits.
	; End

; ;	Behavior = SlowDeathBehavior ModuleTag_09
; ;		; Die-and-spawn-horse number 2
; ;		SinkDelay = 30000 ; Should be >= DestructionDelay; spawned objects are responsible for sinking
; ;		SinkRate = 0.40     ; in Dist/Sec
; ;		DestructionDelay = 2000 ; MUST BE EQUAL TO LENGTH OF DIED ANIMATION
; ;		DeathTypes = ALL -SPLATTED
; ;		OCL = FINAL OCL_GondorCavalryDeathRunAwayD
; ;		ProbabilityModifier = 33
; ;		DeathFlags = DEATH_3 ; Tell model which death animation to play. Sets BOTH model condition and object status bits.
; ;	End
	
	; Behavior = SpecialPowerModule ModuleTag_10   
		; SpecialPowerTemplate      = SpecialAbilityRousingSpeech
		; UpdateModuleStartsAttack  = Yes
		; ; InitiateSound             = GamlingRousingSpeech
	; End

	
	; Behavior = RousingSpeechUpdate ModuleTag_11
		; SpecialPowerTemplate    = SpecialAbilityRousingSpeech
		; StartAbilityRange		= 8.0
		; UpdateInterval			= 20

		; ;UnpackTime              = 700 
		; ;PreparationTime         = 100 
		; ;PersistentPrepTime      = 500 
		; ;PackTime                = 233 
		; ApproachRequiresLOS		= No
		; ModifierName			= RohanCharge 	


	
		; BonusRadius				= 161
		; SpeechDuration          = 15000
; ;		UniqueBenefactorLabel	= LordOfTheMark ; This makes sure multiple Gamlings are not cumulative
; ;		Bonus
; ;			Type				= EXTRA_MAX_HEALTH
; ;			Duration			= 15000 ;msec
; ;			Amount				= 1.2 
; ;		End		
		; LeaderFX	= FX_SpeechLeaderFX
		; FollowerFX	= FX_SpeechFollowerFX	
; ;		CreateWave	= Yes
; ;		WaveWidth	= 50
	; End
	
	; ; Tie into LargeGroupAudio system
	; Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		; Key = Human Unit Cavalry
	; End
	
	; Geometry = CYLINDER
	; GeometryMajorRadius = 16.0
	; GeometryMinorRadius = 16.0
	; GeometryHeight = 20.0
	; GeometryIsSmall = No
	; Shadow = SHADOW_DECAL
	; ShadowSizeX = 33;
	; ShadowSizeY = 21;
	; ShadowTexture = ShadowI;

	; ; So the question you need to ask yourself is: do I need to change GondorCavalryRiderless?
; End
