;------------------------------------------------------------------------------
;
;    Faramir.ini
;
;------------------------------------------------------------------------------

; Faramir
Object ElvenHaldirSaF
		Scale                                         = .97
    ; *** ART Parameters ***
    ; SelectPortrait for Heros is portrait behind skill buttons. HP (HeroPortrait).
    SelectPortrait                                = HPHaldir
    
    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI (HeroIcon).
    ButtonImage                                   = HIHaldir
    
    Draw                                          = W3DScriptedModelDraw ModuleTag_DRAW1
			OkToChangeModelColor                        = Yes
			ExtraPublicBone                             = arrow
			ExtraPublicBone                             = PASSENGERBONE
			DependencySharedModelFlags                  = TURN_LEFT_HIGH_SPEED TURN_RIGHT_HIGH_SPEED MOVING ACCELERATE DECELERATE TURN_LEFT TURN_RIGHT ATTACKING BACKING_UP

			; ------------------- Models ------------------- ;
			DefaultModelConditionState
				Model                                     = euNhaldir_swd
				Skeleton			                            = EUHaldir_SKL
				WeaponLaunchBone                          = PRIMARY arrow
			End
			
			ModelConditionState                         = RIDER1 WEAPONSET_TOGGLE_1
				Model                                     = euNhaldirHA_bow
				Skeleton			                            = EUHaldir_SKL
				WeaponLaunchBone                          = PRIMARY arrow
			End	
			
			ModelConditionState                         = RIDER1
				Model                                     = euNhaldirHA_swd
				Skeleton			                            = EUHaldir_SKL
			End
			
			ModelConditionState		                      = WEAPONSET_TOGGLE_1
				Model                                     = euNhaldir_bow
				Skeleton 			                            = EUHaldir_SKL
			End	
		
			; ------------------- Animations ------------------- ;
			; -- QuickDraw
			AnimationState                              = USER_2 WEAPONSET_TOGGLE_1
					StateName                               = STATE_CaptainBow
					Animation                               = Bow
							AnimationName                       = EUHaldir_TNTA
							AnimationMode                       = ONCE
							AnimationSpeedFactorRange           = 0.75 0.75
					End
			End
			
			AnimationState                              = USER_2
					StateName                               = CaptainSword
					Animation                               = Sword
							AnimationName                       = EUHaldir_TNTB
							AnimationMode                       = ONCE
							AnimationSpeedFactorRange           = 0.75 0.75
					End
			End
			
			; -- Vigilance Animation
			AnimationState                              = USER_1 WEAPONSET_TOGGLE_1
					StateName                               = STATE_CaptainBow
					Animation                               = Bow
							AnimationName                       = EUHaldir_PNTA
							AnimationMode                       = ONCE
							AnimationSpeedFactorRange           = 0.75 0.75
					End
			End
			
			AnimationState                              = USER_1
					StateName                               = CaptainSword
					Animation                               = Sword
							AnimationName                       = EUHaldir_PNTB
							AnimationMode                       = ONCE
							AnimationSpeedFactorRange           = 0.75 0.75
					End
			End
			
			; -- Elven Skill
			AnimationState                              = PACKING_TYPE_2 WEAPONSET_TOGGLE_1
					StateName                               =    CaptainBow
					Animation                               = Bow
							AnimationName                       = EUHaldir_CHRB
							AnimationMode                       = ONCE
							AnimationSpeedFactorRange           = 1.2 1.2
					End
			End
			
			AnimationState                              = PACKING_TYPE_2
					StateName                               = CaptainSword
					Animation                               = Sword
							AnimationName                       = EUHaldir_CHRS
							AnimationMode                       = ONCE
							AnimationSpeedFactorRange           = 0.75 0.75
					End
			End
					
			AnimationState						                  = PASSENGER WEAPONSET_TOGGLE_1
				StateName						                      = STATE_Grabbed
				Animation						                      = Bow
					AnimationName				                    = EUHaldir_FLYA
					AnimationMode				                    = LOOP
				End
			End
			AnimationState						                  = PASSENGER
				StateName						                      = STATE_Grabbed
				Animation						                      = Sword
					AnimationName				                    = EUHaldir_FLYB
					AnimationMode				                    = LOOP
				End
			End


			AnimationState						                  = FREEFALL WEAPONSET_TOGGLE_1
				StateName						                      = STATE_Falling
				Animation						                      = Bow
					AnimationName				                    = EUHaldir_FLYA
					AnimationMode				                    = LOOP
					AnimationBlendTime			                = 10
					AnimationSpeedFactorRange	              = 0.5	0.5
				End
			End
			AnimationState						                  = FREEFALL
				StateName						                      = STATE_Falling
				Animation						                      = Sword
					AnimationName				                    = EUHaldir_FLYB
					AnimationMode				                    = LOOP
					AnimationBlendTime			                = 10
					AnimationSpeedFactorRange	              = 0.24 0.24
				End
			End


			AnimationState						                  = STUNNED_FLAILING WEAPONSET_TOGGLE_1
				StateName						                      = STATE_Fly
				Animation
					AnimationName				                    = EUHaldir_FLYA
					AnimationMode				                    = LOOP
					AnimationSpeedFactorRange	              = 0.4 0.6
				End
				Flags							                        = MAINTAIN_FRAME_ACROSS_STATES2
			End
			AnimationState						                  = STUNNED_FLAILING
				StateName						                      = STATE_Fly
				Animation						                      = Sword
					AnimationName				                    = EUHaldir_FLYB
					AnimationMode				                    = LOOP
					AnimationSpeedFactorRange	              = 0.4 0.6
				End
				Flags							                        = MAINTAIN_FRAME_ACROSS_STATES2
				BeginScript
					PrevState                               = CurDrawablePrevAnimationState()
					PrevAnim                                = CurDrawablePrevAnimation()
					if PrevState                            == "Ready_Bow" or PrevState == "Moving_Bow" or PrevState == "Bored_Bow"
					then
						CurDrawableShowSubObject("arrow")
						CurDrawableShowSubObject("arrownock")
						return "WantSword"
					elseif PrevState                        == "STATE_Fly"
					then
						if PrevAnim                           == "Bow" or PrevAnim == "WantSword"
						then
							CurDrawableShowSubObject("arrow")
							CurDrawableShowSubObject("arrownock")
							return "WantSword"
						end
					end
					CurDrawableHideSubObject("ArrowNock")
					CurDrawableHideSubObject("arrow")
					return "Sword"
				EndScript
			End


			AnimationState						                  = DYING DEATH_1 SPLATTED WEAPONSET_TOGGLE_1
				StateName						                      = STATE_Dead
				Animation						                      = Bow
					AnimationName				                    = EUHaldir_LNDA
					AnimationMode				                    = ONCE
				End
			End
			AnimationState						                  = DYING DEATH_1 SPLATTED
				StateName						                      = STATE_Dead
				Animation						                      = Sword
					AnimationName				                    = EUHaldir_LNDB
					AnimationMode				                    = ONCE
				End
			End


			AnimationState						                  = DYING DEATH_1 WEAPONSET_TOGGLE_1
				Animation						                      = Bow1
					AnimationName				                    = EUHaldir_DIEBV5
					AnimationMode				                    = ONCE
				End
				Animation						                      = Bow2
					AnimationName				                    = EUHaldir_DIEBV5
					AnimationMode				                    = ONCE
				End
				Animation						                      = WantBow
					AnimationName				                    = EUHaldir_LNDA
					AnimationMode				                    = ONCE
				End
				BeginScript
					PrevState                               = CurDrawablePrevAnimationState()
					PrevAnim                                = CurDrawablePrevAnimation()
					if PrevState                            == "STATE_Fly"
					then
						CurDrawableHideSubObject("ArrowNock")
						CurDrawableHideSubObject("arrow")
						return "WantBow"
					end
					if GetClientRandomNumberReal(0,2) < 1
					then
						CurDrawableShowSubObject("arrow")
						CurDrawableShowSubObject("arrownock")
						return "Bow1"
					else
						CurDrawableShowSubObject("arrow")
						CurDrawableShowSubObject("arrownock")
						return "Bow2"
					end
				EndScript
			End
			AnimationState						                  = DYING DEATH_1
				Animation						                      = Sword1
					AnimationName				                    = EUHaldir_DIESv5
					AnimationMode				                    = ONCE
				End
				Animation						                      = Sword2
					AnimationName				                    = EUHaldir_DIESV5
					AnimationMode				                    = ONCE
				End
				Animation						                      = WantSword
					AnimationName				                    = EUHaldir_LNDB
					AnimationMode				                    = ONCE
				End
				BeginScript
					PrevState                               = CurDrawablePrevAnimationState()
					PrevAnim                                = CurDrawablePrevAnimation()
					if PrevState                            == "STATE_Fly"
					then
						CurDrawableShowSubObject("arrow")
						CurDrawableShowSubObject("arrownock")
						return "WantSword"
					end
					CurDrawableHideSubObject("ArrowNock")
					CurDrawableHideSubObject("arrow")
					if GetClientRandomNumberReal(0,2) < 1
					then
						return "Sword1"
					else
						return "Sword2"
					end
				EndScript
			End


			AnimationState						                  = DYING DEATH_2 WEAPONSET_TOGGLE_1
				Animation						                      = FadeOut
					AnimationName				                    = EUHaldir_DIEBV5
					AnimationMode				                    = ONCE
				End
			End
			AnimationState						                  = DYING DEATH_2
				Animation						                      = FadeOut
					AnimationName				                    = EUHaldir_DIESV5
					AnimationMode				                    = LOOP
				End
			End


			AnimationState						                  = STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
				StateName						                      = STATE_GetUp
				Animation						                      = Bow
					AnimationName				                    = EUHaldir_GTPB
					AnimationMode				                    = ONCE
					AnimationSpeedFactorRange	              = 1.42 1.42
				End
				Animation						                      = WantBow
					AnimationName				                    = EUHaldir_GTPSX1
					AnimationMode				                    = ONCE
				End
				Flags						                          = MAINTAIN_FRAME_ACROSS_STATES4
				BeginScript
					PrevState                               = CurDrawablePrevAnimationState()
					PrevAnim                                = CurDrawablePrevAnimation()
					if PrevState                            == "STATE_GetUp" or PrevState == "STATE_Land"
					then	
						if PrevAnim                           == "WantBow" or PrevAnim == "Sword"
						then
							CurDrawableHideSubObject("ArrowNock")
							CurDrawableHideSubObject("arrow")
							return "WantBow"
						end
					else
						CurDrawableShowSubObject("arrow")
						CurDrawableShowSubObject("arrownock")
						return "Bow"
					end
				EndScript
			End
			AnimationState						                  = STUNNED_STANDING_UP
				StateName						                      = STATE_GetUp
				Animation						                      = Sword
					AnimationName				                    = EUHaldir_GTPSX1
					AnimationMode				                    = ONCE
					AnimationSpeedFactorRange	              = 1.2	1.2
				End
				Animation						                      = WantSword
					AnimationName				                    = EUHaldir_GTPB
					AnimationMode				                    = ONCE
				End
				Flags							                        = MAINTAIN_FRAME_ACROSS_STATES4
				BeginScript
					PrevState                               = CurDrawablePrevAnimationState()
					PrevAnim                                = CurDrawablePrevAnimation()
					if PrevState                            == "STATE_GetUp" or PrevState == "STATE_Land"
					then
						if PrevAnim                           == "Bow" or PrevAnim == "WantSword"
						then	
							CurDrawableShowSubObject("arrow")
							CurDrawableShowSubObject("arrownock")
							return "WantSword"
						end
					end
					CurDrawableHideSubObject("ArrowNock")
					CurDrawableHideSubObject("arrow")
					return "Sword"
				EndScript
			End


			AnimationState						                  = STUNNED WEAPONSET_TOGGLE_1
				StateName						                      = STATE_Land
				Animation						                      = Bow
					AnimationName				                    = EUHaldir_LNDA
					AnimationMode				                    = ONCE
				End
				Animation						                      = WantBow
					AnimationName				                    = EUHaldir_LNDB
					AnimationMode				                    = ONCE
				End
				Flags							                        = MAINTAIN_FRAME_ACROSS_STATES3
				BeginScript
					PrevState                               = CurDrawablePrevAnimationState()
					PrevAnim                                = CurDrawablePrevAnimation()
					if PrevState                            == "STATE_Fly"
					then
						if PrevAnim                           == "WantBow" or PrevAnim == "Sword"
						then
							CurDrawableHideSubObject("ArrowNock")
							CurDrawableHideSubObject("arrow")
							return "WantBow"
						end
					end
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					return "Bow"
				EndScript
			End
			AnimationState						                  = STUNNED
				StateName						                      = STATE_Land
				Animation						                      = Sword
					AnimationName				                    = EUHaldir_LNDB
					AnimationMode				                    = ONCE
				End
				Animation						                      = WantSword
					AnimationName				                    = EUHaldir_LNDA
					AnimationMode				                    = ONCE
				End
				BeginScript
					PrevState                               = CurDrawablePrevAnimationState()
					PrevAnim                                = CurDrawablePrevAnimation()
					if PrevState                            == "STATE_Fly"
					then
						if PrevAnim                           == "WantSword" or PrevAnim == "Bow"
						then
							CurDrawableShowSubObject("arrow")
							CurDrawableShowSubObject("arrownock")
							return "WantSword"
						end
					end
					Flags						                        = MAINTAIN_FRAME_ACROSS_STATES3
					CurDrawableHideSubObject("ArrowNock")
					CurDrawableHideSubObject("arrow")
					return "Sword"
				EndScript
			End

			AnimationState						                  = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
				StateName						                      = Attacking_Bow
				Animation
					AnimationName				                    = euhaldir_atka2
					AnimationMode				                    = ONCE
					UseWeaponTiming				                  = Yes
					AnimationBlendTime			                = 20
				End
				BeginScript
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("ArrowNock")
				EndScript
			End
			AnimationState						                  = FIRING_OR_PREATTACK_A
				StateName						                      = Ready_Sword
				
				Animation						                      = AttackWithSwordA
					AnimationName				                    = EUHaldir_ATKSV2
					AnimationMode				                    = ONCE
					UseWeaponTiming				                  = Yes
				End
				Animation						                      = AttackWithSwordB
					AnimationName				                    = EUHaldir_ATKSV2
					AnimationMode				                    = ONCE
					UseWeaponTiming				                  = Yes
				End
				Animation						                      = AttackWithSwordD
					AnimationName				                    = EUHaldir_ATKSV4
					AnimationMode				                    = ONCE
					UseWeaponTiming				                  = Yes
				End
				BeginScript
					CurDrawableHideSubObject("ArrowNock")
					CurDrawableHideSubObject("arrow")
				EndScript
			End

			AnimationState						                  = SPECIAL_WEAPON_ONE
				Animation
					AnimationName				                    = EUHaldir_SPCA
					AnimationMode				                    = ONCE
				End
				FrameForPristineBonePositions	            = 60
				BeginScript
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
				EndScript
			End


			AnimationState						                  = MOVING WEAPONSET_TOGGLE_1
				StateName						                      = Moving_Bow
				Animation
					AnimationName				                    = EUHaldir_RUNB
					AnimationMode				                    = LOOP
				End
				Flags                                     = RANDOMSTART
				BeginScript
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					Prev                                    = CurDrawablePrevAnimationState()
					if Prev                                 == "Moving_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Moving") end
				EndScript
			End
			AnimationState						                  = MOVING
				StateName						                      = Moving_Sword
				Animation
					AnimationName				                    = EUHaldir_RUNS
					AnimationMode				                    = LOOP
				End
				Flags                                     = RANDOMSTART
				BeginScript
					CurDrawableHideSubObject("arrow")
					CurDrawableHideSubObject("arrownock")
					Prev                                    = CurDrawablePrevAnimationState()
					if Prev                                 == "Moving_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword_Moving") end
				EndScript
			End


			AnimationState						                  = PREATTACK_A WEAPONSET_TOGGLE_1
				Animation						                      = ReadyToDrawn
					AnimationName				                    = euhaldir_atka1
					AnimationMode				                    = ONCE
					AnimationBlendTime			                = 0
					UseWeaponTiming				                  = Yes
				End
				BeginScript
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("ArrowNock")
				EndScript
			End

			AnimationState						                  = FIRING_OR_RELOADING_A WEAPONSET_TOGGLE_1
				StateName						                      = STATE_Firing
				Animation
					AnimationName				                    = euhaldir_atka2
					AnimationMode				                    = ONCE
					AnimationBlendTime			                = 30
					UseWeaponTiming				                  = Yes
					AnimationSpeedFactorRange	              = 1.5 1.5
				End
				Flags							                        = START_FRAME_FIRST
				BeginScript
					CurDrawableHideSubObject("arrow")
					CurDrawableHideSubObject("ArrowNock")
				EndScript
			End


			AnimationState						                  = MOVING BACKING_UP WEAPONSET_TOGGLE_1
				StateName						                      = STATE_BackingUp
				Animation						                      = Bow
					AnimationName				                    = EUHaldir_BAKB
					AnimationMode				                    = LOOP
				End
				Animation						                      = WantBow
					AnimationName				                    = EUHaldir_BAKS
					AnimationMode				                    = LOOP
				End
				Flags							                        = MAINTAIN_FRAME_ACROSS_STATES4
				BeginScript
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					PrevAnim	                              = CurDrawablePrevAnimation()
					PrevState	                              = CurDrawablePrevAnimationState()
					if PrevState                            == "STATE_BackingUp"
					then
						if PrevAnim                           == "WantBow" or PrevAnim == "Sword"
						then
							return "WantBow"
						end
					end
					return "Bow"
				EndScript
			End
			AnimationState						                  = MOVING BACKING_UP
				StateName						                      = STATE_BackingUp
				Animation						                      = Sword
					AnimationName				                    = EUHaldir_BAKS
					AnimationMode				                    = LOOP
				End
				Animation						                      = WantSword
					AnimationName				                    = EUHaldir_BAKS
					AnimationMode				                    = LOOP
				End
				Flags							                        = MAINTAIN_FRAME_ACROSS_STATES4
				BeginScript
					CurDrawableHideSubObject("ARROW")
					CurDrawableHideSubObject("ARROWNOCK")
					PrevAnim	                              = CurDrawablePrevAnimation()
					PrevState	                              = CurDrawablePrevAnimationState()
					if PrevState                            == "STATE_BackingUp"
					then
						if PrevAnim                           == "Bow" or PrevAnim == "WantSword"
						then
							return "WantSword"
						end
					end
					return "Sword"
				EndScript
			End


			AnimationState						                  = CONTINUOUS_FIRE_MEAN
				Animation						                      = HangFrameWhileCoasting
					AnimationName				                    = euhaldir_atka2
					AnimationMode				                    = MANUAL
					AnimationBlendTime			                = 20
				End
				Flags							                        = START_FRAME_LAST
				BeginScript
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("ARROWNOCK")
					if CurDrawablePrevAnimationState()      == "STATE_Firing" then CurDrawableAllowToContinue() end
				EndScript
				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
				;;;;
				;;;;	VERY IMPORTANT ARCHER INFORMATION
				;;;;	THIS WILL STOP THE JITTERS, AND BEST
				;;;;	YET, IT'S A COMPLETE HACK! Just look above.
				;;;;	We say that if we get into this state
				;;;;	from firing, just continue to fire. DONE.
				;;;;
				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
			End
			AnimationState						                  = CONTINUOUS_FIRE_SLOW
				StateName						                      = Ready_Bow
				Animation						                      = PutAwayArrow
					AnimationName				                    = euhaldir_atka1
					AnimationMode				                    = ONCE_BACKWARDS
				End
				BeginScript
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("ARROWNOCK")
				EndScript
			End


			AnimationState						                  = ATTACKING WEAPONSET_TOGGLE_1
				StateName						                      = Ready_Bow
				Animation						                      = IDLB
					AnimationName				                    = EUHaldir_IDLB
					AnimationMode				                    = LOOP
				End
				BeginScript
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					PrevAnim                                = CurDrawablePrevAnimation()
					Prev                                    = CurDrawablePrevAnimationState()
					if Prev                                 == "Bored_Bow" then CurDrawableSetTransitionAnimState("TRANS_BR_Bow") end
					if Prev                                 == "Selected_Bow" then CurDrawableSetTransitionAnimState("TRANS_SelectedToReady_Bow") end
					if Prev                                 == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
					then 
						CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
					end
				EndScript
			End
			AnimationState						                  = ATTACKING
				StateName						                      = Ready_Sword
				Animation						                      = Alert_1
					AnimationName				                    = EUHaldir_IDLST1
					AnimationMode				                    = LOOP
				End
				BeginScript
					PrevAnim                                = CurDrawablePrevAnimation()
					Prev                                    = CurDrawablePrevAnimationState()
					CurDrawableHideSubObject("ArrowNock")
					CurDrawableHideSubObject("arrow")
					if Prev                                 == "Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_BR_Sword") end
					if Prev                                 == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
					then 
						CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
					end
				EndScript
			End


			AnimationState						                  = ENGAGED WEAPONSET_TOGGLE_1
				StateName						                      = Ready_Bow
				Animation						                      = IDLB
					AnimationName				                    = EUHaldir_IDLB
					AnimationMode				                    = LOOP
				End
				BeginScript
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					PrevAnim                                = CurDrawablePrevAnimation()
					Prev                                    = CurDrawablePrevAnimationState()
					if Prev                                 == "Bored_Bow"		then CurDrawableSetTransitionAnimState("TRANS_BR_Bow")				end
					if Prev                                 == "Selected_Bow"	then CurDrawableSetTransitionAnimState("TRANS_SelectedToReady_Bow")				end
					if Prev                                 == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
					then 
						CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")	
					end
				EndScript
			End
			AnimationState						                  = ENGAGED
				StateName						                      = Ready_Sword
				Animation						                      = Alert_1
					AnimationName				                    = EUHaldir_IDLST1
					AnimationMode				                    = LOOP
				End
				BeginScript
					PrevAnim                                = CurDrawablePrevAnimation()
					Prev                                    = CurDrawablePrevAnimationState()
					CurDrawableHideSubObject("ArrowNock")
					CurDrawableHideSubObject("arrow")
					if Prev                                 == "Bored_Sword"		then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")			end
					if Prev                                 == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
					then 
						CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")	
					end
				EndScript
			End


			AnimationState						                  = EMOTION_ALERT WEAPONSET_TOGGLE_1
				StateName						                      = Ready_Bow
				Animation						                      = IDLB
					AnimationName				                    = EUHaldir_IDLB
					AnimationMode				                    = LOOP
				End
				BeginScript
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					PrevAnim                                = CurDrawablePrevAnimation()
					Prev                                    = CurDrawablePrevAnimationState()
					if Prev                                 == "Bored_Bow"		then CurDrawableSetTransitionAnimState("TRANS_BR_Bow") end
					if Prev                                 == "Selected_Bow"	then CurDrawableSetTransitionAnimState("TRANS_SelectedToReady_Bow") end
					if Prev                                 == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
					then 
						CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")	
					end				
				EndScript
			End 
			AnimationState						                  = EMOTION_ALERT
				StateName						                      = Ready_Sword
				Animation						                      = Alert_1
					AnimationName				                    = EUHaldir_IDLST1
					AnimationMode				                    = LOOP
				End
				BeginScript
					PrevAnim                                = CurDrawablePrevAnimation()
					Prev                                    = CurDrawablePrevAnimationState()
					CurDrawableHideSubObject("ArrowNock")
					CurDrawableHideSubObject("arrow")
					if Prev                                 == "Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_BR_Sword") end
					if Prev                                 == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
					then 
						CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")	
					end
				EndScript
			End


			AnimationState						                  = EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
				StateName						                      = STATE_Emotion_Bow
				Animation						                      = Bow
					AnimationName				                    = EUHaldir_CHRB
					AnimationMode				                    = ONCE
				End
				Animation						                      = Bow2
					AnimationName				                    = EUHaldir_CHRB
					AnimationMode				                    = ONCE
				End
				Flags							                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
				BeginScript
					PrevState                               = CurDrawablePrevAnimationState()
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					if PrevState                            == "STATE_Emotion_Sword"
					then
						CurDrawableAllowToContinue()
						if( CurDrawablePrevAnimFraction() > .89 )
						then
							CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
						end
					elseif PrevState                        == "STATE_Emotion_Bow"
					then
						CurDrawableAllowToContinue()
					elseif PrevState                        == "Selected_Bow"
					then
						CurDrawableSetTransitionAnimState("TRANS_SelectedToReady_Bow")
					end
				EndScript
			End
			AnimationState						                  = EMOTION_CELEBRATING
				StateName						                      = STATE_Emotion_Sword
				Animation						                      = Sword
					AnimationName				                    = EUHaldir_CHRS
					AnimationMode				                    = ONCE
				End
				Animation						                      = Sword2
					AnimationName				                    = EUHaldir_CHRS
					AnimationMode				                    = ONCE
				End
				Flags							                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
				BeginScript
					PrevState                               = CurDrawablePrevAnimationState()
					CurDrawableHideSubObject("arrow")
					CurDrawableHideSubObject("arrownock")
					
					if PrevState                            == "STATE_Emotion_Bow"
					then
						CurDrawableAllowToContinue()
						if( CurDrawablePrevAnimFraction() > .89 )
						then
							CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
						end
					elseif PrevState                        == "STATE_Emotion_Sword"
					then
						CurDrawableAllowToContinue()
					elseif PrevState                        == "Bored_Sword"
					then
						CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
					end
				EndScript
			End
			
			AnimationState						                  = EMOTION_TAUNTING WEAPONSET_TOGGLE_1
				StateName						                      = STATE_Emotion_Bow
				Animation						                      = Bow1
					AnimationName				                    = EUHaldir_TNTA
					AnimationMode				                    = ONCE
				End
				Animation						                      = Bow2
					AnimationName				                    = EUHaldir_TNTA
					AnimationMode				                    = ONCE
				End
				Flags							                        = RESTART_ANIM_WHEN_COMPLETE
				BeginScript
					PrevState                               = CurDrawablePrevAnimationState()
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					
					if PrevState                            == "STATE_Emotion_Sword"
					then
						CurDrawableAllowToContinue()
						if( CurDrawablePrevAnimFraction() > .89 )
						then
							CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
						end
					elseif PrevState                        == "STATE_Emotion_Bow"
					then
						CurDrawableAllowToContinue()
					elseif PrevState                        == "Selected_Bow"
					then
						CurDrawableSetTransitionAnimState("TRANS_SelectedToReady_Bow")
					elseif PrevState                        == "Bored_Bow"
					then
						CurDrawableSetTransitionAnimState("TRANS_BR_Bow")
					end
				EndScript
			End
			AnimationState						                  = EMOTION_TAUNTING
				StateName						                      = STATE_Emotion_Sword
				Animation						                      = Sword
					AnimationName				                    = EUHaldir_TNTB
					AnimationMode				                    = ONCE
				End
				Animation						                      = Sword2
					AnimationName				                    = EUHaldir_TNTB
					AnimationMode				                    = ONCE
				End
				Flags							                        = RESTART_ANIM_WHEN_COMPLETE
				BeginScript
					PrevState                               = CurDrawablePrevAnimationState()
					CurDrawableHideSubObject("arrow")
					CurDrawableHideSubObject("arrownock")
					if PrevState                            == "STATE_Emotion_Bow"
					then
						CurDrawableAllowToContinue()
						if( CurDrawablePrevAnimFraction() > .89 )
						then
							CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
						end
					elseif PrevState                        == "STATE_Emotion_Sword"
						then
							CurDrawableAllowToContinue()
					elseif PrevState                        == "Bored_Sword"
					then
						CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
					end
				EndScript
			End


			AnimationState						                  = EMOTION_POINTING WEAPONSET_TOGGLE_1
				StateName						                      = STATE_Emotion_Bow
				Animation						                      = Bow
					AnimationName				                    = EUHaldir_PNTA
					AnimationMode				                    = ONCE
				End
				Animation						                      = Bow2
					AnimationName				                    = EUHaldir_PNTA
					AnimationMode				                    = ONCE
				End
				Flags							                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
				BeginScript
					PrevState                               = CurDrawablePrevAnimationState()
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					
					if PrevState                            == "STATE_Emotion_Sword"
					then
						CurDrawableAllowToContinue()
						if( CurDrawablePrevAnimFraction() > .89 )
						then
							CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
						end
					elseif PrevState                        == "STATE_Emotion_Bow"
					then
						CurDrawableAllowToContinue()
					elseif PrevState                        == "Selected_Bow"
					then
						CurDrawableSetTransitionAnimState("TRANS_SelectedToReady_Bow")
					elseif PrevState                        == "Bored_Bow"
					then
						CurDrawableSetTransitionAnimState("TRANS_BR_Bow")
					end
				EndScript
			End
			AnimationState						                  = EMOTION_POINTING
				StateName						                      = STATE_Emotion_Sword
				Animation						                      = Sword
					AnimationName				                    = EUHaldir_PNTB
					AnimationMode				                    = ONCE
				End
				Animation						                      = Sword2
					AnimationName				                    = EUHaldir_PNTB
					AnimationMode				                    = ONCE
				End
				Flags							                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
				BeginScript
					PrevState                               = CurDrawablePrevAnimationState()
					CurDrawableHideSubObject("arrow")
					CurDrawableHideSubObject("arrownock")
					
					if PrevState                            == "STATE_Emotion_Bow"
					then
						CurDrawableAllowToContinue()
						if( CurDrawablePrevAnimFraction() > .89 )
						then
							CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
						end
					elseif PrevState                        == "STATE_Emotion_Sword"
					then
						CurDrawableAllowToContinue()
					elseif PrevState                        == "Bored_Sword"
					then
						CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
					end
				EndScript
			End


			AnimationState 						                  = HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
				StateName						                      = Bored_Bow
				Animation
					AnimationName				                    = EUHaldir_HITA
					AnimationMode 				                  = ONCE
					AnimationSpeedFactorRange	              = .9 .9
				End
			End
			AnimationState						                  = HIT_REACTION HIT_LEVEL_1
				StateName						                      = Bored_Sword
				Animation
					AnimationName				                    = EUHaldir_HITE
					AnimationMode				                    = ONCE
				End
			End

			AnimationState						                  = SELECTED WEAPONSET_TOGGLE_1
				StateName						                      = Selected_Bow
				Animation						                      = ATNE
					AnimationName				                    = EUHaldir_ATNE
					AnimationMode				                    = LOOP
				End
				BeginScript
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					PrevAnim                                = CurDrawablePrevAnimation()
					Prev                                    = CurDrawablePrevAnimationState()
					if Prev                                 == "STATE_Emotion_Bow" or Prev == "STATE_Emotion_Sword" then CurDrawableAllowToContinue() end
					if Prev                                 == "Bored_Bow" then CurDrawableSetTransitionAnimState("TRANS_BoredToSelected_Bow") end
					if Prev                                 == "Ready_Bow" then CurDrawableSetTransitionAnimState("TRANS_RS_Bow") end
					if Prev                                 == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
					then 
						CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Selected")	
					end
				EndScript
			End
			
			AnimationState						                  = SELECTED
				StateName						                      = Selected_Sword
				Animation						                      = ATNA
					AnimationName				                    = EUHaldir_ATNS
					AnimationMode				                    = LOOP
				End
				BeginScript
					CurDrawableHideSubObject("ARROW")
					CurDrawableHideSubObject("ARROWNOCK")
					PrevAnim                                = CurDrawablePrevAnimation()
					Prev                                    = CurDrawablePrevAnimationState()
					if Prev                                 == "STATE_Emotion_Bow" or Prev == "STATE_Emotion_Sword" then CurDrawableAllowToContinue() end
					if Prev                                 == "Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_BoredToSelected_Sword") end
					if Prev                                 == "Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_ReadyToSelected_Sword") end
					if Prev                                 == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword" or PrevAnim == "EUHaldir_STHB"
					then
						CurDrawableSetTransitionAnimState("TRANS_BowToSword_Selected")
					end
				EndScript
			End


			IdleAnimationState
				StateName						                      = Bored_Sword
				Animation						                      = Idle_Sword1
					AnimationName				                    = EUHaldir_IDLF
					AnimationMode				                    = ONCE
				End
				Animation						                      = Idle_Sword2
					AnimationName				                    = EUHaldir_IDLF
					AnimationMode				                    = ONCE
				End
				Animation						                      = Idle_Sword3
					AnimationName				                    = EUHaldir_IDLF
					AnimationMode				                    = ONCE
				End
				Animation						                      = IdleNoFidget
					AnimationName				                    = EUHaldir_IDLF
					AnimationMode				                    = ONCE
					AnimationPriority			                  = 20
				End
				Animation						                      = IdleNoFidget2
					AnimationName				                    = EUHaldir_IDLF
					AnimationMode				                    = ONCE
					AnimationPriority			                  = 0
				End
				Flags							                        = RESTART_ANIM_WHEN_COMPLETE
				BeginScript
					CurDrawableHideSubObject("ARROW")
					CurDrawableHideSubObject("ARROWNOCK")
					PrevAnim                                = CurDrawablePrevAnimation()
					Prev                                    = CurDrawablePrevAnimationState()
					if Prev                                 == "TRANS_SelectedToBored_Sword" or Prev == "TRANS_RB_Sword" then return "IdleNoFidget" end
					if Prev                                 == "Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBored_Sword") end
					if Prev                                 == "Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_RB_Sword") end
					if Prev                                 == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
					then 
						CurDrawableSetTransitionAnimState("TRANS_BowToSword_Selected")
					end
				EndScript
			End


			AnimationState						                  = WEAPONSET_TOGGLE_1
				StateName						                      = Bored_Bow
				Animation						                      = IdleBowB
					AnimationName				                    = EUHaldir_IDLE
					AnimationMode				                    = ONCE
				End
				Animation						                      = IdleBowD
					AnimationName				                    = EUHaldir_IDLE
					AnimationMode				                    = ONCE
				End
				Animation						                      = IdleNoFidget
					AnimationName				                    = EUHaldir_IDLE
					AnimationMode				                    = ONCE
					AnimationPriority			                  = 20
				End
				Animation						                      = IdleNoFidget2
					AnimationName				                    = EUHaldir_IDLE
					AnimationMode				                    = ONCE
					AnimationPriority			                  = 10
				End
				Flags							                        = RESTART_ANIM_WHEN_COMPLETE
				BeginScript	
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					PrevAnim                                = CurDrawablePrevAnimation()
					Prev                                    = CurDrawablePrevAnimationState()
					if Prev                                 == "TRANS_SelectedToBored_Bow" or Prev == "TRANS_RB_Bow" then return "IdleNoFidget" end
					if Prev                                 == "Selected_Bow" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBored_Bow") end
					if Prev                                 == "Ready_Bow" then CurDrawableSetTransitionAnimState("TRANS_RB_Bow") end
					if Prev                                 == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
					then 
						CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Selected")
					end
				EndScript
			End


			; -------------------- Transitions -------------------- ;
			TransitionState						                  = TRANS_BoredToSelected_Bow
				Animation
					AnimationName				                    = EUHaldir_ATNB
					AnimationMode				                    = ONCE
					AnimationBlendTime			                = 10
				End
			End

			TransitionState						                  = TRANS_SelectedToReady_Bow
				Animation						                      = ATNE
					AnimationName				                    = EUHaldir_IDLB
					AnimationMode				                    = ONCE
					AnimationBlendTime			                = 10
				End
			End

			TransitionState						                  = TRANS_SelectedToBored_Bow
				Animation
					AnimationName				                    = EUHaldir_ATNB
					AnimationMode				                    = ONCE_BACKWARDS
				End
				Flags							                        = START_FRAME_LAST
			End

			TransitionState						                  = TRANS_RS_Bow
				Animation						                      = ATNF
					AnimationName				                    = EUHaldir_IDLB
					AnimationMode				                    = ONCE_BACKWARDS
					AnimationBlendTime			                = 10
				End
				Flags							                        = START_FRAME_LAST
			End

			TransitionState						                  = TRANS_BR_Bow
				Animation						                      = IDLB
					AnimationName				                    = EUHaldir_IDLST1
					AnimationMode				                    = ONCE
					AnimationBlendTime			                = 20
				End
			End

			TransitionState						                  = TRANS_RB_Bow
				Animation						                      = IDLD
					AnimationName				                    = EUHaldir_IDLB
					AnimationMode				                    = ONCE
					AnimationBlendTime			                = 20
				End
			End

			TransitionState					                    = TRANS_BoredToSelected_Sword
				Animation					                        = ATNA
					AnimationName			                      = EUHaldir_ATNA
					AnimationMode			                      = ONCE
				End
			End

			TransitionState					                    = TRANS_SR_Sword
				Animation					                        = ATNC
					AnimationName			                      = EUHaldir_STHA
					AnimationMode			                      = ONCE
				End
			End

			TransitionState					                    = TRANS_SelectedToBored_Sword
				Animation					                        = ATNA
					AnimationName			                      = EUHaldir_ATNA
					AnimationMode			                      = ONCE_BACKWARDS
				End
				Flags						                          = START_FRAME_LAST
			End

			TransitionState					                    = TRANS_ReadyToSelected_Sword
				Animation					                        = ATNC
					AnimationName			                      = EUHaldir_IDLST1
					AnimationMode			                      = ONCE_BACKWARDS
					AnimationBlendTime		                  = 20
				End
				Flags						                          = START_FRAME_LAST
			End

			TransitionState					                    = TRANS_BR_Sword
				Animation					                        = ATNS
					AnimationName			                      = EUHaldir_STHA
					AnimationMode			                      = ONCE
					AnimationBlendTime		                  = 20
				End
			End

			TransitionState					                    = TRANS_RB_Sword
				Animation					                        = IDLG
					AnimationName			                      = EUHaldir_STHA
					AnimationMode			                      = ONCE
					AnimationBlendTime		                  = 20
				End
			End
			
			TransitionState					                    = TRANS_SwordToBow_Moving
				Animation					                        = DrawBow
					AnimationName			                      = EUHaldir_STHC
					AnimationMode			                      = ONCE
				End
			End

			TransitionState					                    = TRANS_BowToSword_Moving
				Animation					                        = DrawSword
					AnimationName			                      = EUHaldir_STHD
					AnimationMode			                      = ONCE
				End
			End

			TransitionState					                    = TRANS_BowToSword_Ready
				Animation					                        = DrawSwords
					AnimationName			                      = EUHaldir_STHA
					AnimationMode			                      = ONCE
				End
			End

			TransitionState					                    = TRANS_SwordToBow_Ready
				Animation					                        = DrawBow
					AnimationName			                      = EUHaldir_STHB
					AnimationMode			                      = ONCE
				End
			End

			TransitionState					                    = TRANS_BowToSword_Selected
				Animation					                        = DrawSwords
					AnimationName			                      = EUHaldir_STHA
					AnimationMode			                      = ONCE
				End
			End

			TransitionState					                    = TRANS_SwordToBow_Selected
				Animation					                        = DrawBow
					AnimationName			                      = EUHaldir_STHB
					AnimationMode			                      = ONCE
				End
			End
		End

    ; ***DESIGN parameters ***
    Side                                          = Rohan
    EditorSorting                                 = UNIT
    ThreatLevel                                   = 4.0
    ThingClass                                    = CHARACTER_UNIT
    BuildCost                                     = M_FARAMIR_BUILDCOST                
    BuildTime                                     = M_FARAMIR_BUILDTIME                
    TransportSlotCount                            = 1
    DisplayMeleeDamage                            = M_FARAMIR_DAMAGE
    DisplayRangedDamage                           = M_FARAMIR_BOW_DAMAGE

    WeaponSet
      Conditions 		                              = WEAPONSET_TOGGLE_1 
			Weapon 			                                = PRIMARY    HaldirBow 
      AutoChooseSources                           = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End
		
    WeaponSet
      Conditions                                  = WEAPONSET_TOGGLE_1 WEAPONSET_HERO_MODE
      Weapon                                      = PRIMARY    HaldirBowQuickDraw
      AutoChooseSources                           = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End
    
    WeaponSet
      Conditions                                  = None
      Weapon                                      = PRIMARY    HaldirSword
      AutoChooseSources                           = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End
    
    ArmorSet
      Conditions                                  = None
      Armor                                       = HeroArmor
      DamageFX                                    = NormalDamageFX
    End
		
    ArmorSet
      Conditions                                  = PLAYER_UPGRADE
      Armor                                       = HaldirArmor
      DamageFX                                    = NormalDamageFX
    End

    VisionRange                                   = M_VISION_HERO_RANGED
    ShroudClearingRange                           = M_SHROUD_CLEAR_RANGED_HERO

    BountyValue                                   = 20
    DisplayName                                   = OBJECT:ElvenHaldir
    RecruitText                                   = CONTROLBAR:ElvenHaldirRecruit
    ReviveText                                    = CONTROLBAR:ElvenHaldirRevive
    Hotkey                                        = CONTROLBAR:ElvenHaldirHotkey
    CrusherLevel                                  = 0            ;Can I crush anything?
    CrushableLevel                                = 2            ;What am I?:        0 = for infantry, 1 = for trees, 2 = cavalry/heroes

    CommandSet                                    = ElvenHaldirSaFCommandSet
    CommandPoints                                 = 0

    ; *** AUDIO Parameters ***;
    VoiceAttack                                   = HaldirVoiceAttack
    VoiceAttackAir                                = HaldirVoiceAttack
    VoiceAttackCharge                             = HaldirVoiceAttackCharge
    VoiceAttackMachine                            = HaldirVoiceAttack
    VoiceAttackStructure                          = HaldirVoiceAttackBuilding
    VoiceMove                                     = HaldirVoiceMove
    VoiceMoveToCamp                               = HaldirVoiceMoveCamp
    VoiceMoveWhileAttacking                       = HaldirVoiceDisengage
    VoicePriority                                 = 82
    VoiceRetreatToCastle                          = HaldirVoiceRetreat
    VoiceSelect                                   = HaldirVoiceSelect
    VoiceSelect2            				              = HeroVoiceSelect2
    VoiceSelectBattle                             = HaldirVoiceSelectBattle
    VoiceGuard                                    = HaldirVoiceMove

    UnitSpecificSounds
        VoiceGarrison                             = HaldirVoiceMoveGarrison             
    End

    EvaEventDamagedOwner                          = UnitUnderAttack ;Eva event to trigger when unit is damaged
    EvaEventDieOwner                              = HaldirDie    ;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths

    Behavior                                      = LargeGroupAudioUpdate ModuleTag_LGAU1            ; Tie into LargeGroupAudio system
        Key                                       = Human Unit Infantry Hero
        UnitWeight                                = 2
    End

    ClientBehavior                                = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior1
        MaxUpdateRangeCap                         = 800
        AnimationSound                            = Sound:FootstepDirtA        Animation:GUFaramir_SKL.GUFaramir_RUNA        Frames:2 12
        AnimationSound                            = Sound:FootstepDirtA        Animation:GUFaramir_SKL.GUFaramir_RUNB        Frames:2 12

        AnimationSound                            = Sound:WeaponSwitchBow        Animation:GUFaramir_SKL.GUFaramir_ATKC        Frames:18        ;wounding arrow

        AnimationSound                            = Sound:SwordShingClean1        Animation:GUFaramir_SKL.GUFaramir_STHA        Frames:21
        AnimationSound                            = Sound:SwordIntoScabbard1        Animation:GUFaramir_SKL.GUFaramir_STHB        Frames:11
        AnimationSound                            = Sound:WeaponSwitchBow        Animation:GUFaramir_SKL.GUFaramir_STHB        Frames:28

        AnimationSound                            = Sound:SwordIntoScabbard1        Animation:GUFaramir_SKL.GUFaramir_STHC        Frames:2
        AnimationSound                            = Sound:WeaponSwitchBow        Animation:GUFaramir_SKL.GUFaramir_STHC        Frames:3
        AnimationSound                            = Sound:SwordShingClean1        Animation:GUFaramir_SKL.GUFaramir_STHD        Frames:6

        AnimationSound                            = Sound:BodyFallGenericNoArmor    Animation:GUFaramir_SKL.GUFaramir_DIEA        Frames:88
        AnimationSound                            = Sound:BodyFallGenericNoArmor    Animation:GUFaramir_SKL.GUFaramir_DIEB        Frames:85
        AnimationSound                            = Sound:BodyFallGenericNoArmor    Animation:GUFaramir_SKL.GUFaramir_DIEC        Frames:49
        AnimationSound                            = Sound:BodyFallSoldier        Animation:GUFaramir_SKL.GUFaramir_LNDA        Frames:3
        AnimationSound                            = Sound:BodyFallSoldier        Animation:GUFaramir_SKL.GUFaramir_LNDB        Frames:2

    End

    ; *** ENGINEERING Parameters ***
    RadarPriority                                 = UNIT
    KindOf                                        = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ARMY_SUMMARY ATTACK_NEEDS_LINE_OF_SIGHT
    PathfindDiameter                              = 40.0

    Body                                          = RespawnBody ModuleTag_RespawnBody1
        CheerRadius                               = M_EMOTION_CHEER_RADIUS
        MaxHealth                                 = M_HALDIR_HEALTH    ;BALANCE Faramir Health
        PermanentlyKilledByFilter                 = NONE        ;Who kills me permanently?
           DodgePercent                           = M_HERO_DODGE_PERCENT
    End
		
    Behavior                                      = RespawnUpdate ModuleTag_RespawnUpdate1
        DeathAnim                                 = DYING                ;Model condition to play when killed-to-respawn
        DeathFX                                   = FX_GenericGoodDieToRespawn    ;FXList to play when killed-to-respawn
        DeathAnimationTime                        = 5000                ;How long DeathAnim will take.
        InitialSpawnFX                            = FX_HaldirInitialSpawn
        RespawnAnim                               = LEVELED                ;Animation to play when respawning.
        RespawnFX                                 = FX_HaldirRespawn        ;FXList to play when respawning.
        RespawnAnimationTime                      = 2000                ;Time it takes for respawn to play.
        AutoRespawnAtObjectFilter                 = NONE +CASTLE_KEEP        ;Respawn at this location -- and at it's exit production point if possible.
        ButtonImage                               = HIHaldir
        
        ;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
        ;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
        RespawnRules                              =            AutoSpawn:No    Cost:600        Time:90000        Health:100%        ;DEFAULT VALUES
        RespawnEntry                              =    Level:2                Cost:700        Time:90000        ;For other levels, only override what is different.
        RespawnEntry                              =    Level:3                Cost:800        Time:90000        
        RespawnEntry                              =    Level:4                Cost:900        Time:90000        
        RespawnEntry                              =    Level:5                Cost:1000        Time:120000        
        RespawnEntry                              =    Level:6                Cost:1100        Time:120000        
        RespawnEntry                              =    Level:7                Cost:1200        Time:120000        
        RespawnEntry                              =    Level:8                Cost:1300        Time:120000        
        RespawnEntry                              =    Level:9                Cost:1400        Time:120000        
        RespawnEntry                              =    Level:10            Cost:1500        Time:120000        
    End
    
    Behavior                                      = AutoHealBehavior ModuleTag_HaldirHealing1
			StartsActive                                = Yes
			HealingAmount                               = M_HERO_HEAL_AMOUNT
			HealingDelay                                = 1000
			StartHealingDelay                           = M_HERO_HEAL_DELAY
			HealOnlyIfNotInCombat                       = Yes
    End

    Behavior                                      = AIUpdateInterface ModuleTag_031
      AutoAcquireEnemiesWhenIdle                  = Yes ATTACK_BUILDINGS STEALTHED
      MoodAttackCheckRate                         = 500
      HoldGroundCloseRangeDistance                = 41
			AILuaEventsList						                  = HaldirFunctions
    End

		LocomotorSet
			Locomotor                                   = HeroHumanLocomotor
			Condition                                   = SET_NORMAL 
			Speed                                       = M_NORMAL_GOOD_FAST_HORDE_SPEED ; M_NORMAL_GOOD_HERO_SPEED
		End
		
		Behavior                                      = AutoAbilityBehavior ModuleTag_AutoAbilityBehavior1
		End        

		Behavior                                      = EmotionTrackerUpdate    Module_EmotionTracker1
			TauntAndPointDistance                       = 300        ; max distance to taunted/pointed objet
			TauntAndPointUpdateDelay                    = 1000    ; how often scan (milliseconds)
			AddEmotion                                  = Alert_Base
		End    

		Behavior                                      = PhysicsBehavior ModuleTag_041
			GravityMult                                 = 1.0
			ShockStandingTime                           = 2533    ;msec
		End

		Behavior                                      = SlowDeathBehavior ModuleTag_051
			DeathTypes                                  = ALL 
			SinkDelay                                   = 30000
			SinkRate                                    = 0.40     ; in Dist/Sec
			DestructionDelay                            = 8000
			Sound                                       = INITIAL HaldirVoiceDie
			DeathFlags                                  = DEATH_1
		End

		Behavior                                      = SquishCollide ModuleTag_061
			;nothing
		End

		Behavior                                      = HitReactionBehavior HitReactionBehaviorModuleTag1
			HitReactionLifeTimer1                       = 1500 ; level 1 (light  damage)  hit reaction animations in ms
			HitReactionLifeTimer2                       = 1500 ; level 2 (medium damage)  hit reaction animations in ms
			HitReactionLifeTimer3                       = 1500 ; level 3 (heavy  damage)  hit reaction animations in ms
 
			HitReactionThreshold1                       = 5.0   ; level 1 (light  damage) threshold trigger
			HitReactionThreshold2                       = 25.0  ; level 2 (medium damage) threshold trigger
			HitReactionThreshold3                       = 50.0  ; level 3 (heavy  damage) threshold trigger
			
			FastHitsResetReaction                       = Yes    If set -- when hits occur faster than the reaction animations, it will reset the animation. (like getting riddled with machine gun bullets)
		End
		
		; -- Leadership
		Behavior                                      = AttributeModifierAuraUpdate ModuleTag_HaldirLeadership1
			StartsActive                                = No ;If no, requires upgrade to turn on.
			BonusName                                   = HaldirPassiveLeadership
			TriggeredBy                                 = Upgrade_GenericUpgrade3
			RefreshDelay                                = 2500
			Range                                       = 150 ; 200
			ObjectFilter                                = NONE +RohanElvenWarrior
		End   

		Behavior                                      = UnpauseSpecialPowerUpgrade ModuleTag_HaldirLeadership2
			SpecialPowerTemplate                        = SpecialAbilityFakeLeadership
			TriggeredBy                                 = Upgrade_GenericUpgrade3
		End

		Behavior                                      = SpecialPowerModule ModuleTag_HaldirLeadershipUpdate1
			SpecialPowerTemplate                        = SpecialAbilityFakeLeadership
			UpdateModuleStartsAttack                    = No
			StartsPaused                                = Yes
		End    

		Behavior                                      = AttributeModifierUpgrade ModuleTag_ElvenGiftBonus
			TriggeredBy                                 = Upgrade_GenericUpgrade3
			AttributeModifier                           = HaldirSelfLeadership
		End

		; -- Vigilance    
		Behavior                                      = UnpauseSpecialPowerUpgrade ModuleTag_HaldirVigilanceStarter
			SpecialPowerTemplate                        = SpecialAbilityHaldirVigilance
			TriggeredBy                                 = Upgrade_GenericUpgrade6
		End

		Behavior                                      = OCLSpecialPower ModuleTag_HaldirVigilanceOCL
			SpecialPowerTemplate                        = SpecialAbilityHaldirVigilance
			OCL                                         = SpecialPowerVigilance
			CreateLocation                              = CREATE_AT_LOCATION
			StartsPaused                                = Yes
			SetModelCondition		                        = ModelConditionState:USER_1
			SetModelConditionTime	                      = 5.1
		End  

		; -- Armor Upgrade     
		Behavior                                      = UnpauseSpecialPowerUpgrade ModuleTag_UnpauseLeadership2
		SpecialPowerTemplate                          = SpecialAbilityFakeLeadership3
		TriggeredBy                                   = Upgrade_GenericUpgrade5
		End

		Behavior                                      = SpecialPowerModule ModuleTag_HaldirArmorLeadershipUpdate2
		SpecialPowerTemplate                          = SpecialAbilityFakeLeadership3
		UpdateModuleStartsAttack                      = No
		StartsPaused                                  = Yes
		End 

		Behavior                                      = ArmorUpgrade ArmorUpgradeModuleTag
		TriggeredBy                                   = Upgrade_GenericUpgrade5
		ArmorSetFlag                                  = PLAYER_UPGRADE
		End

		Behavior                                      = ModelConditionUpgrade ModuleTag_ArmorUpgradeModelSwap
		TriggeredBy			                              = Upgrade_GenericUpgrade5
		AddConditionFlags	                            = RIDER1
		End

		; -- Quickdraw 
		Behavior                                      = UnpauseSpecialPowerUpgrade ModuleTag_HaldirQuickDrawEnabler
			SpecialPowerTemplate                        = SpecialAbilityHaldirQuickDraw
			TriggeredBy                                 = Upgrade_GenericUpgrade1
		End

		Behavior                                      = SpecialPowerModule ModuleTag_HaldirQuickDrawStarter                ; SpecialAbility is a SpecialPower, SpecialPower is anyting special
			SpecialPowerTemplate                        = SpecialAbilityHaldirQuickDraw
			StartsPaused                                = Yes
			SetModelCondition                           = ModelConditionState:USER_2
      SetModelConditionTime                       = 3.0
		End

		Behavior                                      = HeroModeSpecialAbilityUpdate ModuleTag_HaldirQuickDrawUpdate   ; So the difference in SpecialAbility is that it takes timing from this Update, instead of simply firing.
			SpecialPowerTemplate                        = SpecialAbilityHaldirQuickDraw
			HeroAttributeModifier                       = HaldirQuickDraw ; For Duration
			HeroEffectDuration                          = 25000 ; this should sync with the auto ability delay re-fire time in commandButtons.ini
			UnpackTime                                  = 1 ; insant unpack
			TriggerSound                                = AragornBladeMaster
		End	

		; -- Elven Skill  
		Behavior                                      = UnpauseSpecialPowerUpgrade ModuleTag_KingsFavorEnabler1
			SpecialPowerTemplate                        = SpecialAbilityKingsFavor
			TriggeredBy                                 = Upgrade_GenericUpgrade8
		End

		Behavior                                      = SpecialPowerModule ModuleTag_KingsFavorSpecialPowerModule1
			SpecialPowerTemplate                        = SpecialAbilityKingsFavor 
			StartsPaused                                = Yes
			UpdateModuleStartsAttack                    = Yes
			InitiateSound                               = HaldirVoiceElvenSkill
		End

		Behavior                                      = LevelGrantSpecialPower ModuleTag_KingsFavor1
			SpecialPowerTemplate                        = SpecialAbilityKingsFavor
			UnpackingVariation                          = 2
			StartAbilityRange                           = 200.0
		;        LevelFX                              = FX_PorterDeliver
			LevelFX                                     = FX_LevelUp
			UseKindOf											              = Yes
			AffectsKindOf									              = ARCHER
			Experience                                  = 50
			RadiusEffect                                = 150
			;AcceptanceFilter                           = NONE +RohanArcherHorde +RohanRohirrimArcherHorde +RohanSpearmenArcherComboHorde +RohanPeasantArcherComboHorde

			UnpackTime                                  = 2000
			PreparationTime                             = 1   
			FreezeAfterTriggerDuration                  = 2000 ; Hold AI for this long after we fire.        
		End    

		; -- Stealth
		Behavior                                      = StealthUpdate ModuleTag_Stealth
			StealthDelay                                = 0 ; msec
			StealthForbiddenConditions                  = ATTACKING AWAY_FROM_TREES ;PLAYER_UPGRADE
			HintDetectableConditions                    = IS_FIRING_WEAPON 
			FriendlyOpacityMin                          = M_STEALTH_FRIENDLY_OPACITY_MIN ;10
			FriendlyOpacityMax                          = M_STEALTH_FRIENDLY_OPACITY_MAX ;60
			DetectedByAnyoneRange                       = 120
			PulseFrequency                              = 750   ; msec
			OrderIdleEnemiesToAttackMeUponReveal        = Yes
		End

		Geometry                                      = CYLINDER
		GeometryMajorRadius                           = 8.0
		GeometryMinorRadius                           = 8.0
		GeometryHeight                                = 19.2
		GeometryIsSmall                               = No
		Shadow                                        = SHADOW_DECAL
		ShadowSizeX                                   = 20;
		ShadowSizeY                                   = 20;
		ShadowTexture                                 = ShadowI;
End
