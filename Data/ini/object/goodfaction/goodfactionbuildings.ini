; FILE: GoodFactionBuildings.ini ///////////////////////////////////////////////////
; This file contains only buildings that are part of a player or faction.
; Typically these are the buildings that can be build by the player or
; are part of a base.  
;//////////////////////////////////////////////////////////////////////////////
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;
;  Rohan
;
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------

;------------------------------------------------------------------------------
Object RBCampFloor

  ; *** ART Parameters ***
  Draw = W3DFloorDraw ModuleTag_01
      ModelName = abcampbib_skn ;RBCampFloor
      ForceToBack = Yes
  End

  ; *** AUDIO Parameters ***

    VoiceSelect        = Gui_PlotSelect


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:CampFloor
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = NoArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  ; The STRUCTURE KindOf is needed so this object will be given to the base
  ; owner when it's unpacked and show up in the right color on the radar map.

  KindOf                = STRUCTURE IMMOBILE NO_COLLIDE UNATTACKABLE INERT 
  RadarPriority = NOT_ON_RADAR
  Body                  = ImmortalBody ModuleTag_03
    MaxHealth       = 2000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 1000
  End
  
  Geometry              = BOX
  GeometryMajorRadius   = 0.8
  GeometryMinorRadius   = 0.8
  GeometryHeight        = 0.8
  GeometryIsSmall       = Yes
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
End

;------------------------------------------------------------------------------
Object RBCastleFloor

  ; *** ART Parameters ***
  Draw = W3DFloorDraw ModuleTag_01
      ModelName = RBCastFloor
      ForceToBack = Yes
  End

  ; *** AUDIO Parameters ***

    ;VoiceSelect        = Gui_PlotSelect


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:CastFloor
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = NoArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  ; The STRUCTURE KindOf is needed so this object will be given to the base
  ; owner when it's unpacked and show up in the right color on the radar map.

  KindOf                = STRUCTURE IMMOBILE NO_COLLIDE UNATTACKABLE INERT 
  RadarPriority = NOT_ON_RADAR
  Body                  = ImmortalBody ModuleTag_03
    MaxHealth       = 2000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 1000
  End
  
  Geometry              = BOX
  GeometryMajorRadius   = 0.8
  GeometryMinorRadius   = 0.8
  GeometryHeight        = 0.8
  GeometryIsSmall       = Yes
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
End

;------------------------------------------------------------------------------
Object RBCampFence

SelectPortrait = BPRCampWall

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = RBCFence
    End

        ModelConditionState = WORLD_BUILDER
              Model = RBCFenceW ;RBCFence
          End

    IdleAnimationState
        Animation
            AnimationName     = RBCFence.RBCFence
            AnimationMode     = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
    End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCFence
;      ParticleSysBone      = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
    AnimationState          = BASE_BUILD
        Animation
            AnimationName = RBCFence.RBCFence
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
        End
    End

    AnimationState          = JUST_BUILT
        Animation
            AnimationName = RBCFence.RBCFence
            AnimationMode = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
    End    
    
    ModelConditionState  = DAMAGED
      Model         = RBCFence_D1
      ParticleSysBone emberBone01 SmokeBuildingLarge
    
    End
    AnimationState = DAMAGED
    EnteringStateFX    = FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCFence_D2
      ParticleSysBone emberBone01 SmokeBuildingLarge
    End
    AnimationState = REALLYDAMAGED
    EnteringStateFX    = FX_BuildingDamaged
    End    
    
    ModelConditionState  = RUBBLE
      Model         = RBCFence_D3  
      ParticleSysBone emberBone01 CatapultDestroyDebris
;      ParticleSysBone emberBone02 SmokeBuildingLarge
      ParticleSysBone emberBone03 PCTMediumDust
    End
    AnimationState = RUBBLE
        EnteringStateFX    = FX_WallWoodDie
;        EnteringStateFX    = FX_BuildingReallyDamaged
    End

      ModelConditionState  = POST_RUBBLE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    ModelConditionState  = POST_COLLAPSE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End

  End

  ; *** AUDIO Parameters ***

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:RBCampFence
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = RohanCampWallArmor
    DamageFX          = None
  End
  
  CommandSet = EmptyCommandSet

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE DEFENSIVE_WALL NOT_AUTOACQUIRABLE MADE_OF_WOOD
  RadarPriority = NOT_ON_RADAR
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 2000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End

    Behavior                  = StructureCollapseUpdate ModuleTag_06
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
;        FXList                  = INITIAL   FX_StructureMediumCollapse
;        FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
        DestroyObjectWhenDone    = Yes
        CollapseHeight            = 80
    End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 
  
  Geometry              = BOX
  GeometryMajorRadius   = 26.0
  GeometryMinorRadius   = 4.0
  GeometryHeight        = 24.0
  GeometryOffset        = X:2 Y:0 Z:0
  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object RBCampFenceLeft

SelectPortrait = BPRCampWall

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = RBCFenceLeft
    End

        ModelConditionState = WORLD_BUILDER
              Model = RBCFenceW ;RBCFenceLeft
          End

    IdleAnimationState
        Animation
            AnimationName     = RBCFence.RBCFence
            AnimationMode     = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
    End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCFence
;      ParticleSysBone      = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
    AnimationState          = BASE_BUILD
        Animation
            AnimationName = RBCFence.RBCFence
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
        End
    End

    AnimationState          = JUST_BUILT
        Animation
            AnimationName = RBCFence.RBCFence
            AnimationMode = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
    End    
    
    ModelConditionState  = DAMAGED
      Model         = RBCFence_D1
      ParticleSysBone emberBone01 SmokeBuildingLarge
    
    End
    AnimationState = DAMAGED
    EnteringStateFX    = FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCFence_D2
      ParticleSysBone emberBone01 SmokeBuildingLarge
    End
    AnimationState = REALLYDAMAGED
    EnteringStateFX    = FX_BuildingDamaged
    End    
    
    ModelConditionState  = RUBBLE
      Model         = RBCFence_D3  
      ParticleSysBone emberBone01 CatapultDestroyDebris
;      ParticleSysBone emberBone02 SmokeBuildingLarge
      ParticleSysBone emberBone03 PCTMediumDust
    End
    AnimationState = RUBBLE
        EnteringStateFX    = FX_WallWoodDie
;        EnteringStateFX    = FX_BuildingReallyDamaged
    End

      ModelConditionState  = POST_RUBBLE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    ModelConditionState  = POST_COLLAPSE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End

  End

  ; *** AUDIO Parameters ***

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:RBCampFence
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = RohanCampWallArmor
    DamageFX          = None
  End
  
  CommandSet = EmptyCommandSet

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE DEFENSIVE_WALL NOT_AUTOACQUIRABLE MADE_OF_WOOD
  RadarPriority = NOT_ON_RADAR
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 2000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End

    Behavior                  = StructureCollapseUpdate ModuleTag_06
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
;        FXList                  = INITIAL   FX_StructureMediumCollapse
;        FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
        DestroyObjectWhenDone    = Yes
        CollapseHeight            = 80
    End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 
  
  Geometry              = BOX
  GeometryMajorRadius   = 26.0
  GeometryMinorRadius   = 4.0
  GeometryHeight        = 24.0
  GeometryOffset        = X:2 Y:0 Z:0
  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object RBCampFence2

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = RBCFence2
    End

        ModelConditionState = WORLD_BUILDER
              Model = RBCFence2
          End

    IdleAnimationState
        Animation
            AnimationName     = RBCFence2.RBCFence2
            AnimationMode     = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
    End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCFence2
;      ParticleSysBone      = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
    AnimationState          = BASE_BUILD
        Animation
            AnimationName = RBCFence2.RBCFence2
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
        End
    End

    AnimationState          = JUST_BUILT
        Animation
            AnimationName = RBCFence2.RBCFence2
            AnimationMode = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
    End    
    
    ModelConditionState  = DAMAGED
      Model         = RBCFence2_D1
      ParticleSysBone emberBone01 SmokeBuildingLarge
    
    End
    AnimationState = DAMAGED
    EnteringStateFX    = FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCFence2_D2
      ParticleSysBone emberBone01 SmokeBuildingLarge
    
    End
    AnimationState = REALLYDAMAGED
    EnteringStateFX    = FX_BuildingReallyDamaged
    End    
    
    ModelConditionState  = RUBBLE
      Model         = RBCFence2_D2  
      ParticleSysBone emberBone01 CatapultDestroyDebris
      ParticleSysBone emberBone02 SmokeBuildingLarge
      ParticleSysBone emberBone03 PCTMediumDust
    End
    AnimationState = RUBBLE
    End

      ModelConditionState  = POST_RUBBLE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    ModelConditionState  = POST_COLLAPSE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End

  End

  ; *** AUDIO Parameters ***

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:RBCampFence2
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE DEFENSIVE_WALL NOT_AUTOACQUIRABLE MADE_OF_WOOD
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 2000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 5000
  End
  
  Geometry              = BOX
  GeometryMajorRadius   = 26.0
  GeometryMinorRadius   = 4.0
  GeometryHeight        = 24.0
  GeometryOffset        = X:2 Y:0 Z:0
  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object RohanCastleBend

  
  SelectPortrait = BRCastleWall
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    WallBoundsMesh = P1
            
    DefaultModelConditionState
      Model = RBCastBend
    End


        ModelConditionState = WORLD_BUILDER
              Model = RBCastBendW
          End

    IdleAnimationState
        Animation
            AnimationName     = RBCastBend.RBCastBend
            AnimationMode     = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
    End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCastBend
;      ParticleSysBone      = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
    AnimationState          = BASE_BUILD
        Animation
            AnimationName = RBCastBend.RBCastBend
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
        End
    End

    AnimationState          = JUST_BUILT
        Animation
            AnimationName = RBCastBend.RBCastBend
            AnimationMode = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
    End    
    
    ModelConditionState  = DAMAGED
      Model         = RBCastBend_D1  
    End
    
    AnimationState = DAMAGED
    EnteringStateFX    = FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCastBend_D2
    End
    AnimationState = REALLYDAMAGED
           Animation                =    ReallyDamagedanimation
            AnimationName        =     RBCastBend_D2.RBCastBend_D2
            AnimationMode        =    ONCE
           End
    EnteringStateFX    = FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBCastBend_D3
    End
    
    AnimationState = RUBBLE
        Animation                =    Death
            AnimationName        =    RBCastBend_D3.RBCastBend_D3
            AnimationMode        =    ONCE
        End
        EnteringStateFX = FX_WallDie
        ;EnteringStateFX = FX_RohanWallRubble
    End      

    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End


  End

  ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleWall
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT
    BuildTime = M_CASTLE_WALL_REBUILD_TIME
    BuildCost = M_CASTLE_WALL_REBUILD_COST

  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = RohanCastleWall
    DamageFX          = RohanWallDamageFX
  End
  

  ; *** ENGINEERING Parameters ***  
    KindOf                    = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL MADE_OF_WOOD SELECTABLE NOT_AUTOACQUIRABLE
    RadarPriority            = NOT_ON_RADAR
    KeepSelectableWhenDead    = Yes
    CommandSet                = GenericSelfRepairCommandSet

  Body                = StructureBody ModuleTag_03
    MaxHealth         = M_ROHAN_CASTLE_WALL_HEALTH
  End

  Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
  End

     Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
        SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
        SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
        SelfRepairFromRubbleLoop  = BuildingConstructionLoop
        SpawnTimer = -1.0 ; Negative means no 'autoheal'
    End
  
  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End

    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End
    
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
    End 
      
     Behavior = FireWeaponWhenDeadBehavior FireDeadTag2
        DeathTypes                    = ALL
        StartsActive                = Yes
        ActiveDuringConstruction    = Yes
        DeathWeapon                    = StandardWallDeath
    End    
      
  Geometry              = BOX
  GeometryMajorRadius   = 55.0
  GeometryMinorRadius   = 55.0
  GeometryHeight        = 45.0

  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  
  AttackContactPoint    = X:3 Y:48 Z:27.5
  AttackContactPoint    = X:3 Y:3 Z:27.5
  AttackContactPoint    = X:48 Y:3 Z:27.5
End

;------------------------------------------------------------------------------
Object RohanCastleCorn
  
  SelectPortrait = BRCastleWall
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    WallBoundsMesh = P1
            
    DefaultModelConditionState
      Model = RBCastCorn
    End

    IdleAnimationState
        Animation
            AnimationName     = RBCastCorn.RBCastCorn
            AnimationMode     = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
    End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCastCorn
;      ParticleSysBone      = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
    AnimationState          = BASE_BUILD
        Animation
            AnimationName = RBCastCorn.RBCastCorn
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
        End
    End

    AnimationState          = JUST_BUILT
        Animation
            AnimationName = RBCastCorn.RBCastCorn
            AnimationMode = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
    End    
    
    ModelConditionState  = DAMAGED
      Model         = RBCastCorn_D1  
    End
    
    AnimationState = DAMAGED
    EnteringStateFX    = FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCastCorn_D2
    End
    AnimationState = REALLYDAMAGED
           Animation                =    ReallyDamagedanimation
            AnimationName        =     RBCastCorn_D2.RBCastCorn_D2
            AnimationMode        =    ONCE
           End
    EnteringStateFX    = FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBCastCorn_D3
    End
    
    AnimationState = RUBBLE
        Animation                =    Death
            AnimationName        =    RBCastCorn_D3.RBCastCorn_D3
            AnimationMode        =    ONCE
        End
    EnteringStateFX = FX_WallDie
    End      

    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End


  End

  ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleWall
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT
    BuildTime = M_CASTLE_WALL_REBUILD_TIME
    BuildCost = M_CASTLE_WALL_REBUILD_COST

  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = RohanCastleWall
    DamageFX          = RohanWallDamageFX
  End
  

  ; *** ENGINEERING Parameters ***  
    KindOf                    = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL MADE_OF_WOOD SELECTABLE NOT_AUTOACQUIRABLE
    RadarPriority            = NOT_ON_RADAR
    KeepSelectableWhenDead    = Yes
    CommandSet                = GenericSelfRepairCommandSet

  Body                = StructureBody ModuleTag_03
    MaxHealth         = M_ROHAN_CASTLE_WALL_HEALTH
  End

  Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
  End

     Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
        SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
        SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
        SelfRepairFromRubbleLoop  = BuildingConstructionLoop
        SpawnTimer = -1.0 ; Negative means no 'autoheal'
        RebuildTimeSeconds = M_CASTLE_WALL_REBUILD_TIME
    End
  
  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End

    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End
    
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
    End 
      
     Behavior = FireWeaponWhenDeadBehavior FireDeadTag2
        DeathTypes                    = ALL
        StartsActive                = Yes
        ActiveDuringConstruction    = Yes
        DeathWeapon                    = StandardWallDeath
    End    
      
  Geometry              = BOX
  GeometryMajorRadius   = 43.0
  GeometryMinorRadius   = 43.0
  GeometryHeight        = 55.0
  GeometryOffset        = X:7 Y:7 Z:0
  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  
  AttackContactPoint    = X:3 Y:48 Z:27.5
  AttackContactPoint    = X:3 Y:3 Z:27.5
  AttackContactPoint    = X:48 Y:3 Z:27.5
End

;------------------------------------------------------------------------------
Object RohanCastleTowr

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = RBCastTowr
    End

    IdleAnimationState
        Animation
            AnimationName     = RBCastTowr.RBCastTowr
            AnimationMode     = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
    End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCastTowr
;      ParticleSysBone      = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
    AnimationState          = BASE_BUILD
        Animation
            AnimationName = RBCastTowr.RBCastTowr
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
        End
    End

    AnimationState          = JUST_BUILT
        Animation
            AnimationName = RBCastTowr.RBCastTowr
            AnimationMode = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
    End    
    
        ModelConditionState  = DAMAGED
            Model         = RBCastTOWR_D1  
        End
        
        AnimationState = DAMAGED
            EnteringStateFX    = FX_BuildingDamaged
        End

    ModelConditionState  = REALLYDAMAGED
        Model         = RBCastTOWR_D2
    End
    AnimationState = REALLYDAMAGED
               Animation                =    ReallyDamagedanimation
                AnimationName        =     RBCastTOWR_D2.RBCastTOWR_D2
                AnimationMode        =    ONCE
           End
        EnteringStateFX    = FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
        Model         = RBCastTOWR_D3
    End
        
    AnimationState = RUBBLE
        Animation                =    Death
            AnimationName        =    RBCastTOWR_D3.RBCastTOWR_D3
            AnimationMode        =    ONCE
        End
        EnteringStateFX = FX_WallDie
    ;        EnteringStateFX = FX_MinWallATransitionRubble
    End      

    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
        Model         = None
    End

  End


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleTower
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  VisionRange         = 400.0          ; Shroud clearing distance
  ShroudClearingRange = 400

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE MADE_OF_WOOD
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 3000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End
    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End  
  
  Geometry              = BOX
  GeometryMajorRadius   = 22.0
  GeometryMinorRadius   = 24.0
  GeometryHeight        = 119.0
  GeometryOffset        = X:-4 Y:-39 Z:0
  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  
;  AttackContactPoint    = X:-4 Y:-39 Z:116
;  AttackContactPoint    = X:-4 Y:-39 Z:0

    GeometryContactPoint    = X:-20.675        Y:-58.257    Z:108.263    Swoop
    GeometryContactPoint    = X:-20.675        Y:-58.257    Z:0
End

;------------------------------------------------------------------------------
Object RohanCastleAngl01

SelectPortrait = BRCastleWall

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
        WallBoundsMesh = P1
    DefaultModelConditionState
      Model = RBCastAngl01
    End

    IdleAnimationState
        Animation
            AnimationName     = RBCastAngl01.RBCastAngl01
            AnimationMode     = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
    End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCastAngl01
;      ParticleSysBone      = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
    AnimationState          = BASE_BUILD
        Animation
            AnimationName = RBCastAngl01.RBCastAngl01
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
        End
    End

    AnimationState          = JUST_BUILT
        Animation
            AnimationName = RBCastAngl01.RBCastAngl01
            AnimationMode = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
    End    

    ModelConditionState  = DAMAGED
      Model         = RBCastAngl01_D1  
    End
    
    AnimationState = DAMAGED
    EnteringStateFX    = FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCastAngl01_D2
    End
    AnimationState = REALLYDAMAGED
           Animation                =    ReallyDamagedanimation
            AnimationName        =     RBCastAngl01_D2.RBCastAngl01_D2
            AnimationMode        =    ONCE
           End
    EnteringStateFX    = FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBCastAngl01_D3
    End
    
    AnimationState = RUBBLE
        Animation                =    Death
            AnimationName        =    RBCastAngl01_D3.RBCastAngl01_D3
            AnimationMode        =    ONCE
        End
        EnteringStateFX = FX_WallDie
;        EnteringStateFX = FX_RohanWallRubble
    End      

    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End

  End


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleWall
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT
    BuildTime = M_CASTLE_WALL_REBUILD_TIME
    BuildCost = M_CASTLE_WALL_REBUILD_COST

  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = RohanCastleWall
    DamageFX          = RohanWallDamageFX
  End
  
    ; *** ENGINEERING Parameters ***  
    KindOf                    = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL MADE_OF_WOOD SELECTABLE NOT_AUTOACQUIRABLE
    RadarPriority            = NOT_ON_RADAR
    KeepSelectableWhenDead    = Yes
    CommandSet                = GenericSelfRepairCommandSet
  
  
  Body                = StructureBody ModuleTag_03
    MaxHealth         = M_ROHAN_CASTLE_WALL_HEALTH
  End

  Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
  End
  
  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End

   Behavior = KeepObjectDie ModuleTag_IWantRubble
   End
   
   Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
   End 

     Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
        SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
        SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
        SelfRepairFromRubbleLoop  = BuildingConstructionLoop
        SpawnTimer = -1.0 ; Negative means no 'autoheal'
        RebuildTimeSeconds = M_CASTLE_WALL_REBUILD_TIME
    End


      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End

     Behavior = FireWeaponWhenDeadBehavior FireDeadTag2
        DeathTypes                    = ALL
        StartsActive                = Yes
        ActiveDuringConstruction    = Yes
        DeathWeapon                    = StandardWallDeath
    End    
  
  Geometry              = CYLINDER
  GeometryMajorRadius   = 13.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 57.0
  GeometryOffset        = X:-40 Y:-20 Z:0
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 35.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 57.0
  GeometryOffset        = X:-15 Y:18 Z:0
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 35.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 57.0
  GeometryOffset        = X:17 Y:52 Z:0
  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  
  AttackContactPoint    = X:27 Y:62 Z:28.5
  AttackContactPoint    = X:-40 Y:-20 Z:28.5
End

;------------------------------------------------------------------------------
Object RohanCastleAngl02

SelectPortrait = BRCastleWall
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
        WallBoundsMesh = P1
    DefaultModelConditionState
      Model = RBCastAngl02
    End

    IdleAnimationState
        Animation
            AnimationName     = RBCastAngl02.RBCastAngl02
            AnimationMode     = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
    End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCastAngl02
;      ParticleSysBone      = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
    AnimationState          = BASE_BUILD
        Animation
            AnimationName = RBCastAngl02.RBCastAngl02
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
        End
    End

    AnimationState          = JUST_BUILT
        Animation
            AnimationName = RBCastAngl02.RBCastAngl02
            AnimationMode = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
    End    
    
    ModelConditionState  = DAMAGED
      Model         = RBCastAngl02_D1  
    End
    
    AnimationState = DAMAGED
    EnteringStateFX    = FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCastAngl02_D2
    End
    AnimationState = REALLYDAMAGED
           Animation                =    ReallyDamagedanimation
            AnimationName        =     RBCastAngl02_D2.RBCastAngl02_D2
            AnimationMode        =    ONCE
           End
    EnteringStateFX    = FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBCastAngl02_D3
    End
    
    AnimationState = RUBBLE
        Animation                =    Death
            AnimationName        =    RBCastAngl02_D3.RBCastAngl02_D3
            AnimationMode        =    ONCE
        End
        EnteringStateFX = FX_WallDie
;        EnteringStateFX = FX_RohanWallRubble
    End      

    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End

  End


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleWall
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT
    BuildTime = M_CASTLE_WALL_REBUILD_TIME
    BuildCost = M_CASTLE_WALL_REBUILD_COST

  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = RohanCastleWall
    DamageFX          = RohanWallDamageFX
  End
  
    ; *** ENGINEERING Parameters ***  
    KindOf                    = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL MADE_OF_WOOD SELECTABLE NOT_AUTOACQUIRABLE
    RadarPriority            = NOT_ON_RADAR
    KeepSelectableWhenDead    = Yes
    CommandSet                = GenericSelfRepairCommandSet

  Body                = StructureBody ModuleTag_03
    MaxHealth         = M_ROHAN_CASTLE_WALL_HEALTH
  End

  Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
  End
  
  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End

   Behavior = KeepObjectDie ModuleTag_IWantRubble
   End  

    Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
        SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
        SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
        SelfRepairFromRubbleLoop  = BuildingConstructionLoop
        SpawnTimer = -1.0 ; Negative means no 'autoheal'
        RebuildTimeSeconds = M_CASTLE_WALL_REBUILD_TIME
    End
   
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End

   Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
   End 

     Behavior = FireWeaponWhenDeadBehavior FireDeadTag2
        DeathTypes                    = ALL
        StartsActive                = Yes
        ActiveDuringConstruction    = Yes
        DeathWeapon                    = StandardWallDeath
    End    
  
  Geometry              = CYLINDER
  GeometryMajorRadius   = 13.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 57.0
  GeometryOffset        = X:20 Y:40 Z:0
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 35.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 57.0
  GeometryOffset        = X:-15 Y:22 Z:0
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 35.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 57.0
  GeometryOffset        = X:-47 Y:-12 Z:0
  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  
  AttackContactPoint    = X:-57 Y:-22 Z:28.5
  AttackContactPoint    = X:20 Y:40 Z:28.5
End

;------------------------------------------------------------------------------
Object RohanCastleGateR


SelectPortrait = BRCastleWall
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    WallBoundsMesh = P02
    DefaultModelConditionState
      Model = RBCastGateR
    End

    IdleAnimationState
        Animation
            AnimationName     = RBCastGateR.RBCastGateR
            AnimationMode     = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
    End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCastGateR
;      ParticleSysBone      = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
    AnimationState          = BASE_BUILD
        Animation
            AnimationName = RBCastGateR.RBCastGateR
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
        End
    End

    AnimationState          = JUST_BUILT
        Animation
            AnimationName = RBCastGateR.RBCastGateR
            AnimationMode = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
    End    
    
    ModelConditionState  = DAMAGED
      Model         = RBCastGateR_D1  
    End
    
    AnimationState = DAMAGED
    EnteringStateFX    = FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCastGateR_D2
    End
    AnimationState = REALLYDAMAGED
           Animation                =    ReallyDamagedanimation
            AnimationName        =     RBCastGateR_D2.RBCastGateR_D2
            AnimationMode        =    ONCE
           End
    EnteringStateFX    = FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBCastGateR_D3
    End
    
    AnimationState = RUBBLE
        Animation                =    Death
            AnimationName        =    RBCastGateR_D3.RBCastGateR_D3
            AnimationMode        =    ONCE
        End
        EnteringStateFX = FX_WallDie
;        EnteringStateFX = FX_RohanWallRubble
    End      

    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
  End


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleGate
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = RohanCastleWall
    DamageFX          = RohanWallDamageFX
  End
  
  ; *** ENGINEERING Parameters ***  
    KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL MADE_OF_WOOD SELECTABLE NOT_AUTOACQUIRABLE
    RadarPriority = NOT_ON_RADAR
    BuildTime = M_CASTLE_WALL_REBUILD_TIME
    BuildCost = M_CASTLE_WALL_REBUILD_COST
    KeepSelectableWhenDead    = Yes
    CommandSet                = GenericSelfRepairCommandSet


  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = M_ROHAN_CASTLE_WALL_HEALTH
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End

   Behavior = KeepObjectDie ModuleTag_IWantRubble
   End
 
     Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
        SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
        SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
        SelfRepairFromRubbleLoop  = BuildingConstructionLoop
        SpawnTimer = -1.0 ; Negative means no 'autoheal'
        RebuildTimeSeconds = M_CASTLE_WALL_REBUILD_TIME
    End
  
  Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
  End
  
  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
  End 
  
  Geometry              = BOX
  GeometryMajorRadius   = 61.0
  GeometryMinorRadius   = 44.0
  GeometryHeight        = 56.0
  GeometryOffset        = X:39.0 Y:-7.0 Z:0
  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  
  AttackContactPoint    = X:92 Y:8 Z:28
  AttackContactPoint    = X:3 Y:8 Z:28
  AttackContactPoint    = X:3 Y:-32 Z:28
End

;------------------------------------------------------------------------------
Object RohanCastleGateRTower

SelectPortrait = BRCastleWall

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    WallBoundsMesh = P01
    RampMesh1 = Ramp01
    DefaultModelConditionState
      Model = RBCastGateRT
    End

    IdleAnimationState
        Animation
            AnimationName     = RBCastGateRT.RBCastGateRT
            AnimationMode     = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
    End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCastGateRT
;      ParticleSysBone      = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
    AnimationState          = BASE_BUILD
        Animation
            AnimationName = RBCastGateRT.RBCastGateRT
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
        End
    End

    AnimationState          = JUST_BUILT
        Animation
            AnimationName = RBCastGateRT.RBCastGateRT
            AnimationMode = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
    End    
    
    ModelConditionState  = DAMAGED
      Model         = RBCastGateRT_D1  
    End
    
    AnimationState = DAMAGED
    EnteringStateFX    = FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCastGateRT_D2
    End
    AnimationState = REALLYDAMAGED
           Animation                =    ReallyDamagedanimation
            AnimationName        =     RBCastGateRT_D2.RBCastGateRT_D2
            AnimationMode        =    ONCE
           End
    EnteringStateFX    = FX_BuildingReallyDamaged    
    End

    ModelConditionState  = RUBBLE
      Model         = RBCastGateRT_D3
    End
    
    AnimationState = RUBBLE
        Animation                =    Death
            AnimationName        =    RBCastGateRT_D3.RBCastGateRT_D3
            AnimationMode        =    ONCE
        End
        EnteringStateFX = FX_WallDie
;        EnteringStateFX = FX_RohanWallRubble
    End      

    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End

  End


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleGate
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = RohanCastleWall
    DamageFX          = RohanWallDamageFX
  End
  
  KeepSelectableWhenDead    = Yes
  CommandSet                = GenericSelfRepairCommandSet

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL MADE_OF_WOOD SELECTABLE NOT_AUTOACQUIRABLE
  RadarPriority = NOT_ON_RADAR

  Body                = StructureBody ModuleTag_03
    MaxHealth         = 5000 ; M_ROHAN_CASTLE_WALL_HEALTH
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End

     Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
        SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
        SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
        SelfRepairFromRubbleLoop  = BuildingConstructionLoop
        SpawnTimer = -1.0 ; Negative means no 'autoheal'
        RebuildTimeSeconds = M_CASTLE_WALL_REBUILD_TIME
    End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End
  
    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End
    
    
    Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = No  
    End   
  
  Geometry              = BOX
  GeometryMajorRadius   = 29.0
  GeometryMinorRadius   = 27.0
  GeometryHeight        = 79.0
  GeometryOffset        = X:6 Y:-73 Z:0
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 29.0
  GeometryMinorRadius   = 20.0
  GeometryHeight        = -30.0
  GeometryOffset        = X:6 Y:-29 Z:55

  GeometryFrontAngle    = -90.0    
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  
  AttackContactPoint    = X:6 Y:-73 Z:76
  AttackContactPoint    = X:6 Y:-73 Z:0
End


;------------------------------------------------------------------------------
Object RohanCastleGateL

SelectPortrait = BRCastleWall

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    WallBoundsMesh = P01
    DefaultModelConditionState
      Model = RBCastGateL
    End

    IdleAnimationState
        Animation
            AnimationName     = RBCastGateL.RBCastGateL
            AnimationMode     = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
    End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCastGateL
;      ParticleSysBone      = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
    AnimationState          = BASE_BUILD
        Animation
            AnimationName = RBCastGateL.RBCastGateL
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
        End
    End

    AnimationState          = JUST_BUILT
        Animation
            AnimationName = RBCastGateL.RBCastGateL
            AnimationMode = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
    End    
    
    ModelConditionState  = DAMAGED
      Model         = RBCastGateL_D1  
    End
    
    AnimationState = DAMAGED
    EnteringStateFX    = FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCastGateL_D2
    End
    AnimationState = REALLYDAMAGED
           Animation                =    ReallyDamagedanimation
            AnimationName        =     RBCastGateL_D2.RBCastGateL_D2
            AnimationMode        =    ONCE
           End
    EnteringStateFX    = FX_BuildingReallyDamaged    
    End

    ModelConditionState  = RUBBLE
      Model         = RBCastGateL_D3
    End
    
    AnimationState = RUBBLE
        Animation                =    Death
            AnimationName        =    RBCastGateL_D3.RBCastGateL_D3
            AnimationMode        =    ONCE
        End
        EnteringStateFX = FX_WallDie
;        EnteringStateFX = FX_RohanWallRubble
    End      

    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End

  End


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleGate
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = RohanCastleWall
    DamageFX          = RohanWallDamageFX
  End
  
  CommandSet = EmptyCommandSet

  ; *** ENGINEERING Parameters ***  
    KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL MADE_OF_WOOD SELECTABLE NOT_AUTOACQUIRABLE
    RadarPriority = NOT_ON_RADAR
    BuildTime = M_CASTLE_WALL_REBUILD_TIME
    BuildCost = M_CASTLE_WALL_REBUILD_COST
    KeepSelectableWhenDead    = Yes
    CommandSet                = GenericSelfRepairCommandSet

  Body                = StructureBody ModuleTag_03
    MaxHealth         = 5000 ; M_ROHAN_CASTLE_WALL_HEALTH
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End
    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End
 
      Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
        SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
        SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
        SelfRepairFromRubbleLoop  = BuildingConstructionLoop
        SpawnTimer = -1.0 ; Negative means no 'autoheal'
        RebuildTimeSeconds = M_CASTLE_WALL_REBUILD_TIME
    End
 
  Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
  End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End

  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
  End 

  Geometry              = BOX
  GeometryMajorRadius   = 61.0
  GeometryMinorRadius   = 44.0
  GeometryHeight        = 56.0
  GeometryOffset        = X:-40.0 Y:-7.0 Z:0
  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  
  AttackContactPoint    = X:-95 Y:8 Z:28
  AttackContactPoint    = X:-5 Y:8 Z:28
  AttackContactPoint    = X:-5 Y:-46 Z:28
End

;------------------------------------------------------------------------------
Object RohanCastleGateLTower


SelectPortrait = BRCastleWall
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    WallBoundsMesh = P02
    RampMesh1 = Ramp01
    DefaultModelConditionState
      Model = RBCastGateLT
    End

    IdleAnimationState
        Animation
            AnimationName     = RBCastGateLT.RBCastGateLT
            AnimationMode     = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
    End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCastGateLT
;      ParticleSysBone      = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
    AnimationState          = BASE_BUILD
        Animation
            AnimationName = RBCastGateLT.RBCastGateLT
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
        End
    End

    AnimationState          = JUST_BUILT
        Animation
            AnimationName = RBCastGateLT.RBCastGateLT
            AnimationMode = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
    End    
    
    ModelConditionState  = DAMAGED
      Model         = RBCastGateLT_D1  
    End
    
    AnimationState = DAMAGED
    EnteringStateFX    = FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCastGateLT_D2
    End
    AnimationState = REALLYDAMAGED
           Animation                =    ReallyDamagedanimation
            AnimationName        =    RBCastGateLT_D2.RBCastGateLT_D2
            AnimationMode        =    ONCE
           End
    EnteringStateFX    = FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBCastGateLT_D3
    End
    
    AnimationState = RUBBLE
        Animation                =    Death
            AnimationName        =    RBCastGateLT_D3.RBCastGateLT_D3
            AnimationMode        =    ONCE
        End
        EnteringStateFX = FX_WallDie
;        EnteringStateFX = FX_RohanWallRubble
    End      

    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End

  End


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleGate
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = RohanCastleWall
    DamageFX          = RohanWallDamageFX
  End
  
  KeepSelectableWhenDead    = Yes
  CommandSet                = GenericSelfRepairCommandSet

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL MADE_OF_WOOD SELECTABLE NOT_AUTOACQUIRABLE
  RadarPriority = NOT_ON_RADAR

  Body                = StructureBody ModuleTag_03
    MaxHealth         = 5000 ; M_ROHAN_CASTLE_WALL_HEALTH
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End

     Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
        SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
        SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
        SelfRepairFromRubbleLoop  = BuildingConstructionLoop
        SpawnTimer = -1.0 ; Negative means no 'autoheal'
        RebuildTimeSeconds = M_CASTLE_WALL_REBUILD_TIME
    End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End

    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End  

    Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = No   ; Towers don't actually give access to interior of castle
    End 
  

  Geometry              = BOX
  GeometryMajorRadius   = 29.0
  GeometryMinorRadius   = 27.0
  GeometryHeight        = 79.0
  GeometryOffset        = X:-5 Y:-73 Z:0
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 29.0
  GeometryMinorRadius   = 20.0
  GeometryHeight        = -30.0
  GeometryOffset        = X:-5 Y:-29 Z:55

  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  
  AttackContactPoint    = X:-5 Y:-73 Z:76
  AttackContactPoint    = X:-5 Y:-73 Z:0
End

;------------------------------------------------------------------------------
;Rohan Buildable Wall Foundation -- the area where faction rohan walls can be built on
Object RohanWallFoundation
 
  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    
    DefaultModelConditionState
      Model = GBFoundationL
    End
    
    ModelConditionState = WORLD_BUILDER
        Model = RBWalls
    End
  End
  
  ;PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanWallFoundation
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  CommandSet = RohanWallFoundationCommandSet


  ; *** AUDIO Parameters ***

  VoiceSelect    = Gui_PlotSelect


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY
 
  Behavior            = FoundationAIUpdate ModuleTag_foundationAI
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 15000.0
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 16.0
  GeometryHeight        = 0.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion        = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
;Rohan Refugee Camp
Object RohanRefugeeCamp
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

;  Draw                = W3DModelDraw ModuleTag_01
;    OkToChangeModelColor = Yes
;
;    DefaultConditionState
;      Model           = RBRefCamp
;    End
;  End

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD 

    DefaultModelConditionState
      Model = RBRefCamp
    End
    
    ModelConditionState  = DAMAGED
        Model         = RBRefCamp_D
;        ParticleSysBone SmokeSmall01 SmokeBuildingSmall
    End   
    AnimationState = DAMAGED
;    EnteringStateFX    = FX_BuildingDamaged
    End   
    
  End

  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanRefugeeCamp
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 60.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End



; For Testing Purposes


; *** AUDIO Parameters ***

    ;SoundOnDamaged        = BuildingLightDamageWood
    ;SoundOnReallyDamaged    = BuildingHeavyDamageWood

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION AUTO_RALLYPOINT MADE_OF_WOOD
 
;  Behavior            = GettingBuiltBehavior ModuleTag_04
;    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
;    SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
;    SelfRepairFromRubbleLoop  = BuildingConstructionLoop
;  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1000.0
  End

;  Behavior            = DestroyDie ModuleTag_07
    ;nothing
;  End

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
     Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
        DestructionDelay  = 5000
    End
    
    Behavior                  = StructureCollapseUpdate ModuleTag_12
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureSmallCollapse
;        FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
        DestroyObjectWhenDone    = Yes
        CollapseHeight            = 66
    End
     
  Geometry              = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 16.0
  GeometryHeight        = 21.8
  GeometryOffset        = X:6.6 Y:-50.6 Z:0
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 14.0
  GeometryMinorRadius   = 24.0
  GeometryHeight        = 21.8
  GeometryOffset        = X:33.6 Y:-9.6 Z:0
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 14.0
  GeometryHeight        = 21.8
  GeometryOffset        = X:-19.6 Y:27.6 Z:0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
;Rohan Refugee CampA
Object RohanRefugeeCampA
 
  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD 
    DefaultModelConditionState
      Model = RBRefCampA
    End
    
    ModelConditionState  = DAMAGED
        Model         = RBRefCampA_D
;        ParticleSysBone SmokeSmall01 SmokeBuildingSmall
    End   
    AnimationState = DAMAGED
;    EnteringStateFX    = FX_BuildingDamaged
    End
    
  End

  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanRefugeeCamp
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 60.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


  ; *** AUDIO Parameters ***

    ;SoundOnDamaged        = BuildingLightDamageWood
    ;SoundOnReallyDamaged    = BuildingHeavyDamageWood

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION AUTO_RALLYPOINT MADE_OF_WOOD
 
  ;Behavior            = GettingBuiltBehavior ModuleTag_04
  ;  SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
;    SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
;    SelfRepairFromRubbleLoop  = BuildingConstructionLoop
;  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1000.0
  End

;  Behavior            = DestroyDie ModuleTag_07
    ;nothing
;  End

     Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
        DestructionDelay  = 5000
    End
    
    Behavior                  = StructureCollapseUpdate ModuleTag_8
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureSmallCollapse
;        FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
        DestroyObjectWhenDone    = Yes
        CollapseHeight            = 66
    End
 
  Geometry              = BOX
  GeometryMajorRadius   = 24.6
  GeometryMinorRadius   = 17.6
  GeometryHeight        = 20.8
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
;Rohan Refugee CampB
Object RohanRefugeeCampB
 
  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD 

    DefaultModelConditionState
      Model = RBRefCampB
    End
    
    ModelConditionState  = DAMAGED
        Model         = RBRefCampB_D
;        ParticleSysBone SmokeSmall01 SmokeBuildingSmall
    End   
    AnimationState = DAMAGED
;    EnteringStateFX    = FX_BuildingDamaged
    End
    
  End

  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanRefugeeCamp
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 60.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


  ; *** AUDIO Parameters ***

    ;SoundOnDamaged        = BuildingLightDamageWood
    ;SoundOnReallyDamaged    = BuildingHeavyDamageWood

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION AUTO_RALLYPOINT MADE_OF_WOOD
 
;  Behavior            = GettingBuiltBehavior ModuleTag_04
;    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
;    SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
;    SelfRepairFromRubbleLoop  = BuildingConstructionLoop
;  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1000.0
  End

;  Behavior            = DestroyDie ModuleTag_07
    ;nothing
;  End
 
      Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
        DestructionDelay  = 5000
    End
    
     Behavior                  = StructureCollapseUpdate ModuleTag_8
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureSmallCollapse
;        FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
        DestroyObjectWhenDone    = Yes
        CollapseHeight            = 66
    End
    
  Geometry              = BOX
  GeometryMajorRadius   = 24.6
  GeometryMinorRadius   = 13.6
  GeometryHeight        = 20.8
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
;Rohan Refugee CampC
Object RohanRefugeeCampC
 
  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD 

    DefaultModelConditionState
        Model = RBRefCampC
    End
    
    ModelConditionState  = DAMAGED
        Model         = RBRefCampC_D
;        ParticleSysBone SmokeSmall01 SmokeBuildingSmall
    End   
    AnimationState = DAMAGED
;    EnteringStateFX    = FX_BuildingDamaged
    End
    
  End

  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanRefugeeCamp
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 60.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


  ; *** AUDIO Parameters ***

    ;SoundOnDamaged        = BuildingLightDamageWood
    ;SoundOnReallyDamaged    = BuildingHeavyDamageWood

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION AUTO_RALLYPOINT MADE_OF_WOOD
 
;  Behavior            = GettingBuiltBehavior ModuleTag_04
 ;   SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
;    SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
;    SelfRepairFromRubbleLoop  = BuildingConstructionLoop
 ; End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1000.0
  End

     Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
        DestructionDelay  = 5000
    End
    
;  Behavior            = DestroyDie ModuleTag_07
    ;nothing
;  End
 
    Behavior                  = StructureCollapseUpdate ModuleTag_8
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureSmallCollapse
;        FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
        DestroyObjectWhenDone    = Yes
        CollapseHeight            = 66
    End

  Geometry              = BOX
  GeometryMajorRadius   = 24.6
  GeometryMinorRadius   = 13.6
  GeometryHeight        = 20.8
  GeometryOffset        = X:-4 Y:0 Z:0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
;Rohan Inner Wall
Object RohanInnerWall
 
  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBWalls
    End
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanWall
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MADE_OF_WOOD
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName          = RohanWorker
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 28.0
  GeometryMinorRadius   = 20.0
  GeometryHeight        = 24.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
;Rohan Wall
Object RohanWall
 
  ; *** ART Parameters ***
    SelectPortrait = BRCastleWall
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBWalls
    End
        
    WallBoundsMesh = wall1
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanWall
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


  ArmorSet
    Armor = StructureArmor
  End
; For Testing Purposes


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***
 
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE MADE_OF_WOOD
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
  End 
   
  Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
  End
     
  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 35.0
  GeometryHeight        = 60.0
  
  GeometryContactPoint =    X:-50            Y:-40                Z:0 Grab
  GeometryContactPoint =    X:0                Y:-40                Z:40 Grab
  GeometryContactPoint =    X:50            Y:-40                Z:0 Grab
  GeometryContactPoint =    X:-50            Y:40                Z:0 Grab
  GeometryContactPoint =    X:0                Y:40                Z:40 Grab
  GeometryContactPoint =    X:50            Y:40                Z:0 Grab
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------------------
Object RohanCastleDoor

SelectPortrait = BPRohanCastleGate

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = RBCASTDOOR
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED 
        Model             = RBCASTDOOR_A
        ParticleSysBone   = DUSTBONE BuildingContructDust
    End
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED 
        StateName                = STATE_None
            Animation           = RBCASTDOOR_A
                AnimationName   = RBCASTDOOR_A.RBCASTDOOR_A
                AnimationMode   = MANUAL
            End
        Flags                    = START_FRAME_FIRST
    End

    ModelConditionState   = DESTROYED_WHILST_BEING_CONSTRUCTED
        Model              = RBCASTDOOR_A
        ParticleSysBone   = DUSTBONE BuildingContructDust
    End  
    AnimationState    = DESTROYED_WHILST_BEING_CONSTRUCTED
        StateName        = STATE_DetroyedConstructing
        EnteringStateFX    = FX_GondorCastleGateDestroy
        Animation
            AnimationName        = RBCASTDOOR_A.RBCASTDOOR_A
            AnimationMode        = ONCE_BACKWARDS
            AnimationBlendTime    = 90    ; 3 seconds * 30 frames
        End
        ; Specifically no start last frame flag here.
        Flags = START_FRAME_FIRST
    End

    ModelConditionState  = RUBBLE DOOR_1_OPENING
        Model         = RBCASTDOOR_D4  
    End
    TransitionState = TRANS_IntoRubble4
        Animation = D3
            AnimationName        = RBCASTDOOR_D4.RBCASTDOOR_D4
            AnimationMode        = ONCE
            AnimationBlendTime = 0
        End
        EnteringStateFX    = FX_GondorCastleGateDestroy
    End
    AnimationState = RUBBLE DOOR_1_OPENING
        Flags = START_FRAME_LAST
        StateName = STATE_Rubble
        Animation                =    Death
            AnimationName        =    RBCASTDOOR_D4.RBCASTDOOR_D4
            AnimationMode        =    ONCE
        End
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_None" or Prev == "STATE_Open" or Prev == "STATE_Closed" or Prev == "TRANS_Closed_To_Open" or Prev == "TRANS_Open_To_Closed"
            then
                ; Only play the rubble anim if we havn't come from another rubble.
                CurDrawableSetTransitionAnimState("TRANS_IntoRubble4")
            end
        EndScript
    End      

    ModelConditionState  = RUBBLE DOOR_1_CLOSING
        Model         = RBCASTDOOR_D3
    End
    TransitionState = TRANS_IntoRubble3
        Animation = D4
            AnimationName        = RBCASTDOOR_D3.RBCASTDOOR_D3
            AnimationMode        = ONCE
            AnimationBlendTime = 0
        End
        EnteringStateFX    = FX_GondorCastleGateDestroy
    End
    AnimationState = RUBBLE DOOR_1_CLOSING
        Flags = START_FRAME_LAST
        StateName = STATE_Rubble
        Animation                =    Death
            AnimationName        =    RBCASTDOOR_D3.RBCASTDOOR_D3
            AnimationMode        =    ONCE
        End
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_None" or Prev == "STATE_Open" or Prev == "STATE_Closed" or Prev == "TRANS_Closed_To_Open" or Prev == "TRANS_Open_To_Closed"
            then
                ; Only play the rubble anim if we havn't come from another rubble.
                CurDrawableSetTransitionAnimState("TRANS_IntoRubble3")
            end
        EndScript
    End      

;    ModelConditionState  = RUBBLE DOOR_1_OPENING
;      Model         = RBCASTDOOR_D4  
;    End
;    AnimationState = RUBBLE DOOR_1_OPENING
;        Animation = Open 
;            AnimationName    =    RBCASTDOOR_D4.RBCASTDOOR_D4
;            AnimationMode    =    ONCE 
;        End
 ;   End
       
;    ModelConditionState  = RUBBLE
;        Model         = RBCASTDOOR_D3 
;        ParticleSysBone NONE CatapultDestroyDebris
;        ParticleSysBone NONE PCTMediumDust 
 ;   End
 ;    AnimationState = RUBBLE 
;        Animation = Open 
;            AnimationName    =    RBCASTDOOR_D3.RBCASTDOOR_D3
;            AnimationMode    =    ONCE 
;        End
 ;   End
    
    AnimationState = DOOR_1_OPENING
        StateName = STATE_Open   
        Animation = Open 
            AnimationName    =    RBCASTDOOR.RBCASTDOOR
            AnimationMode    =    ONCE 
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Closed" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
        EndScript
    End
    TransitionState = TRANS_Closed_To_Open
        Animation = Open 
            AnimationName    =    RBCASTDOOR.RBCASTDOOR
            AnimationMode    =    ONCE 
        End
    End
        
    AnimationState = DOOR_1_CLOSING 
        StateName = STATE_Closed 
        Animation = Close 
            AnimationName    =    RBCASTDOOR.RBCASTDOOR
            AnimationMode    =    ONCE_BACKWARDS 
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
        BeginScript
            
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
        EndScript
    End
    TransitionState = TRANS_Open_To_Closed
        Animation = Open 
            AnimationName    =    RBCASTDOOR.RBCASTDOOR
            AnimationMode    =    ONCE_BACKWARDS 
        End
        Flags = START_FRAME_LAST
    End

  End

  ; *** AUDIO Parameters ***

    VoiceSelect        = GateSelect

    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleDoor
  Side = Rohan
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0
    BuildTime           = 180.0           ; in seconds
        BuildCost           = 1000

  VisionRange         = 400.0          ; Shroud clearing distance

  ArmorSet
    Conditions        = None
    Armor             = CastleGateArmor
    DamageFX          = GateDamageFX
  End

    CommandSet = CastleGateCommandSet


    ; *** ENGINEERING Parameters ***  
    KindOf                    = STRUCTURE IMMOBILE SELECTABLE BLOCKING_GATE MADE_OF_WOOD
    RadarPriority            = NOT_ON_RADAR
    KeepSelectableWhenDead    = Yes


    Body                  = ActiveBody ModuleTag_02
        MaxHealth       = 3000.0
    End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: MinisTirithGateDie Animation:GBMgatedoorSKL.GBMgatedoorA3 Frames: 1 
    End

    Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
        SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
        SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
        SelfRepairFromRubbleLoop  = BuildingConstructionLoop
        SpawnTimer = -1.0 ; Negative means no 'autoheal'
        RebuildTimeSeconds = 120 ;30
    End

    Behavior = TransitionDamageFX ModleTag_hideBustedDoors
        PristineShowSubObject        RBCASTDRR RBCASTDRL
        PristineHideSubObject        RBCASTDRR_D1 RBCASTDRR_D2 RBCASTDRL_D1 RBCASTDRL_D2
        DamagedShowSubObject        RBCASTDRR_D1 RBCASTDRL_D1
        DamagedHideSubObject        RBCASTDRR_D2 RBCASTDRL_D2 RBCASTDRR RBCASTDRL
        ReallyDamagedShowSubObject    RBCASTDRR_D2 RBCASTDRL_D2
        ReallyDamagedHideSubObject  RBCASTDRR_D1  RBCASTDRL_D1 RBCASTDRR RBCASTDRL
        DamagedFXList1 = Loc: X:0 Y:0 Z:0            FXList:FX_BasicSevereScreenShake
         ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0        FXList:FX_BasicSevereScreenShake
         RubbleFXList1 = Loc: X:0 Y:0 Z:0            FXList:FX_HelmsDeepGateRubble
    End

    Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
        ResetTimeInMilliseconds = 12200 ;important! this must be longer than the gates animation, ir it will twitch
        OpenByDefault = Yes
        PercentOpenForPathing = 50
        SoundOpeningGateLoop = GateOpenStart
        SoundClosingGateLoop = GateCloseStart
        SoundFinishedOpeningGate = GateOpenEnd
        SoundFinishedClosingGate = GateCloseEnd
        TimeBeforePlayingOpenSound = 9500
        TimeBeforePlayingClosedSound = 9500
    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
    End 

    Geometry              = BOX
    GeometryMajorRadius   = 16.0
    GeometryMinorRadius   = 72.0
    GeometryHeight        = 59.0
    GeometryName          = Closed
    GeometryIsSmall       = No
    
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 28.0
    GeometryMinorRadius   = 7.0
    GeometryHeight        = 59.0    
    GeometryOffset          = X:18 Y:70 Z:0
    GeometryName          = OpenLeft
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 28.0
    GeometryMinorRadius   = 7.0
    GeometryHeight        = 59.0    
    GeometryOffset          = X:18 Y:-70 Z:0
    GeometryName          = OpenRight
    
    GeometryContactPoint = X:36        Y:-72    Z:0 Ram
    GeometryContactPoint = X:18        Y:-72    Z:59
    GeometryContactPoint = X:0        Y:-72    Z:0
    GeometryContactPoint = X:0        Y:-36    Z:59
    GeometryContactPoint = X:0        Y:0        Z:0 Ram
    GeometryContactPoint = X:0        Y:36    Z:59
    GeometryContactPoint = X:0        Y:72    Z:0
    GeometryContactPoint = X:18        Y:72    Z:59
    GeometryContactPoint = X:36        Y:72    Z:0 Ram

    Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------------------
Object RohanEdorasDoor

SelectPortrait = BPRohanCastleGate

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = RBEdorDoor
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED 
        Model             = RBEdorDoor_A
        ParticleSysBone   = DUSTBONE BuildingContructDust
    End
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED 
        StateName                = STATE_None
            Animation           = RBEdorDoor_A
                AnimationName   = RBEdorDoor_A.RBEdorDoor_A
                AnimationMode   = MANUAL
            End
        Flags                    = START_FRAME_FIRST
    End

    ModelConditionState   = DESTROYED_WHILST_BEING_CONSTRUCTED
        Model              = RBEdorDoor_A
        ParticleSysBone   = DUSTBONE BuildingContructDust
    End  
    AnimationState    = DESTROYED_WHILST_BEING_CONSTRUCTED
        StateName        = STATE_DetroyedConstructing
        EnteringStateFX    = FX_GondorCastleGateDestroy
        Animation
            AnimationName        = RBEdorDoor_A.RBEdorDoor_A
            AnimationMode        = ONCE_BACKWARDS
            AnimationBlendTime    = 90    ; 3 seconds * 30 frames
        End
        ; Specifically no start last frame flag here.
        Flags = START_FRAME_FIRST
    End

    ModelConditionState  = RUBBLE DOOR_1_OPENING
        Model         = RBEdorDoor_D4  
    End
    TransitionState = TRANS_IntoRubble4
        Animation = D3
            AnimationName        = RBEdorDoor_D4.RBEdorDoor_D4
            AnimationMode        = ONCE
            AnimationBlendTime = 0
        End
        EnteringStateFX    = FX_GondorCastleGateDestroy
    End
    AnimationState = RUBBLE DOOR_1_OPENING
        Flags = START_FRAME_LAST
        StateName = STATE_Rubble
        Animation                =    Death
            AnimationName        =    RBEdorDoor_D4.RBEdorDoor_D4
            AnimationMode        =    ONCE
        End
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_None" or Prev == "STATE_Open" or Prev == "STATE_Closed" or Prev == "TRANS_Closed_To_Open" or Prev == "TRANS_Open_To_Closed"
            then
                ; Only play the rubble anim if we havn't come from another rubble.
                CurDrawableSetTransitionAnimState("TRANS_IntoRubble4")
            end
        EndScript
    End      

    ModelConditionState  = RUBBLE DOOR_1_CLOSING
        Model         = RBEdorDoor_D3
    End
    TransitionState = TRANS_IntoRubble3
        Animation = D4
            AnimationName        = RBEdorDoor_D3.RBEdorDoor_D3
            AnimationMode        = ONCE
            AnimationBlendTime = 0
        End
        EnteringStateFX    = FX_GondorCastleGateDestroy
    End
    AnimationState = RUBBLE DOOR_1_CLOSING
        Flags = START_FRAME_LAST
        StateName = STATE_Rubble
        Animation                =    Death
            AnimationName        =    RBEdorDoor_D3.RBEdorDoor_D3
            AnimationMode        =    ONCE
        End
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_None" or Prev == "STATE_Open" or Prev == "STATE_Closed" or Prev == "TRANS_Closed_To_Open" or Prev == "TRANS_Open_To_Closed"
            then
                ; Only play the rubble anim if we havn't come from another rubble.
                CurDrawableSetTransitionAnimState("TRANS_IntoRubble3")
            end
        EndScript
    End      

;    ModelConditionState  = RUBBLE DOOR_1_OPENING
;      Model         = RBEdorDoor_D4  
;    End
;    AnimationState = RUBBLE DOOR_1_OPENING
;        Animation = Open 
;            AnimationName    =    RBEdorDoor_D4.RBEdorDoor_D4
;            AnimationMode    =    ONCE 
;        End
 ;   End
       
;    ModelConditionState  = RUBBLE
;        Model         = RBEdorDoor_D3 
;        ParticleSysBone NONE CatapultDestroyDebris
;        ParticleSysBone NONE PCTMediumDust 
 ;   End
 ;    AnimationState = RUBBLE 
;        Animation = Open 
;            AnimationName    =    RBEdorDoor_D3.RBEdorDoor_D3
;            AnimationMode    =    ONCE 
;        End
 ;   End
    
    AnimationState = DOOR_1_OPENING
        StateName = STATE_Open   
        Animation = Open 
            AnimationName    =    RBEdorDoor.RBEdorDoor
            AnimationMode    =    ONCE 
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Closed" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
        EndScript
    End
    TransitionState = TRANS_Closed_To_Open
        Animation = Open 
            AnimationName    =    RBEdorDoor.RBEdorDoor
            AnimationMode    =    ONCE 
        End
    End
        
    AnimationState = DOOR_1_CLOSING 
        StateName = STATE_Closed 
        Animation = Close 
            AnimationName    =    RBEdorDoor.RBEdorDoor
            AnimationMode    =    ONCE_BACKWARDS 
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
        BeginScript
            
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
        EndScript
    End
    TransitionState = TRANS_Open_To_Closed
        Animation = Open 
            AnimationName    =    RBEdorDoor.RBEdorDoor
            AnimationMode    =    ONCE_BACKWARDS 
        End
        Flags = START_FRAME_LAST
    End

  End

  ; *** AUDIO Parameters ***

    VoiceSelect        = GateSelect

    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleDoor
  Side = Rohan
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0
    BuildTime           = 180.0           ; in seconds
        BuildCost           = 1000

  VisionRange         = 400.0          ; Shroud clearing distance

  ArmorSet
    Conditions        = None
    Armor             = CastleGateArmor
    DamageFX          = GateDamageFX
  End

    CommandSet = CastleGateCommandSet


    ; *** ENGINEERING Parameters ***  
    KindOf                    = STRUCTURE IMMOBILE SELECTABLE BLOCKING_GATE MADE_OF_WOOD
    RadarPriority            = NOT_ON_RADAR
    KeepSelectableWhenDead    = Yes


    Body                  = ActiveBody ModuleTag_02
        MaxHealth       = 3000.0
    End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: MinisTirithGateDie Animation:GBMgatedoorSKL.GBMgatedoorA3 Frames: 1 
    End

    Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
        SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
        SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
        SelfRepairFromRubbleLoop  = BuildingConstructionLoop
        SpawnTimer = -1.0 ; Negative means no 'autoheal'
    End

    Behavior = TransitionDamageFX ModleTag_hideBustedDoors
        PristineShowSubObject        RBCASTDRR RBCASTDRL
        PristineHideSubObject        RBCASTDRR_D1 RBCASTDRR_D2 RBCASTDRL_D1 RBCASTDRL_D2
        DamagedShowSubObject        RBCASTDRR_D1 RBCASTDRL_D1
        DamagedHideSubObject        RBCASTDRR_D2 RBCASTDRL_D2 RBCASTDRR RBCASTDRL
        ReallyDamagedShowSubObject    RBCASTDRR_D2 RBCASTDRL_D2
        ReallyDamagedHideSubObject  RBCASTDRR_D1  RBCASTDRL_D1 RBCASTDRR RBCASTDRL
        DamagedFXList1 = Loc: X:0 Y:0 Z:0            FXList:FX_BasicSevereScreenShake
         ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0        FXList:FX_BasicSevereScreenShake
         RubbleFXList1 = Loc: X:0 Y:0 Z:0            FXList:FX_HelmsDeepGateRubble
    End

    Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
        ResetTimeInMilliseconds = 12200 ;important! this must be longer than the gates animation, ir it will twitch
        OpenByDefault = Yes
        PercentOpenForPathing = 50
        SoundOpeningGateLoop = GateOpenStart
        SoundClosingGateLoop = GateCloseStart
        SoundFinishedOpeningGate = GateOpenEnd
        SoundFinishedClosingGate = GateCloseEnd
        TimeBeforePlayingOpenSound = 9500
        TimeBeforePlayingClosedSound = 9500
    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
    End 

    Geometry              = BOX
    GeometryMajorRadius   = 12.0
    GeometryMinorRadius   = 112.5
    GeometryHeight        = 70.0
    GeometryOffset          = X:20.75 Y:0 Z:0
    GeometryName          = Closed
    GeometryIsSmall       = No
    
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 56.0
    GeometryMinorRadius   = 12.0
    GeometryHeight        = 70.0    
    GeometryOffset          = X:72 Y:-110 Z:0
    GeometryName          = OpenLeft
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 56.0
    GeometryMinorRadius   = 12.0
    GeometryHeight        = 70.0    
    GeometryOffset          = X:72 Y:110 Z:0
    GeometryName          = OpenRight
    
    GeometryContactPoint = X:36        Y:-72    Z:0 Ram
    GeometryContactPoint = X:18        Y:-72    Z:59
    GeometryContactPoint = X:0        Y:-72    Z:0
    GeometryContactPoint = X:0        Y:-36    Z:59
    GeometryContactPoint = X:0        Y:0        Z:0 Ram
    GeometryContactPoint = X:0        Y:36    Z:59
    GeometryContactPoint = X:0        Y:72    Z:0
    GeometryContactPoint = X:18        Y:72    Z:59
    GeometryContactPoint = X:36        Y:72    Z:0 Ram

    Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Rohan Gate
Object RohanGate
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBGate
    End
; remove this so the units can walk under the gate, but not on top of it    
;    WallBoundsMesh = wall1
    RampMesh1 = P1   
    RampMesh2 = P2 
    RaisedWallMesh = P3        
  End
 
  PlacementViewAngle  = 0
 

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanGate
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 30.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Armor = StructureArmor
  End

  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood

;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End


  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE IMMOBILE CHUNK_VENDOR NOT_AUTOACQUIRABLE WALK_ON_TOP_OF_WALL MADE_OF_WOOD

  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 2500.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End



      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    


  Geometry              = BOX
  GeometryMajorRadius   = 80.0
  GeometryMinorRadius   = 25.0
  GeometryHeight        = 40.0
  GeometryOffset        = X:0 Y:0 Z:72
    
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 30.0
  GeometryMinorRadius   = 70.0
  GeometryHeight        = 80    
  GeometryOffset        = X:100 Y:-10 Z:0

  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 30.0
  GeometryMinorRadius   = 70.0
  GeometryHeight        = 80    
  GeometryOffset        = X:-100 Y:-10 Z:0

  
  GeometryContactPoint =    X:75        Y:-60                Z:0 
  GeometryContactPoint =    X:105        Y:-78                Z:0 Grab
  GeometryContactPoint =    X:75        Y:0                    Z:60
  GeometryContactPoint =    X:-75        Y:0                    Z:60
  GeometryContactPoint =    X:-105        Y:-78                Z:0 Grab
  GeometryContactPoint =    X:-75        Y:-60                Z:0 
  
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Rohan Wall Junction I
Object RohanWallJntI
 
  ; *** ART Parameters ***
SelectPortrait = BRCastleWall
;  ButtonImage            = SNReactor
  ;day


  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBWallJntI
    End
    
    WallBoundsMesh = wall1
    
  End


  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanWall
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Armor = StructureArmor
  End
  
  CommandSet = EmptyCommandSet


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood


;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE MADE_OF_WOOD

  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 3000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 45.6
  GeometryMinorRadius   = 37.6
  GeometryHeight        = 20.8
  GeometryIsSmall       = No
  
  GeometryContactPoint =    X:0            Y:0                Z:18 
  GeometryContactPoint =    X:0            Y:0                Z:0 
  GeometryContactPoint =    X:45        Y:0                Z:0 Grab
  GeometryContactPoint =    X:-45        Y:0                Z:0 Grab
  GeometryContactPoint =    X:0            Y:45            Z:0 Grab
  GeometryContactPoint =    X:0        Y:-45                Z:0 Grab
  
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End



;------------------------------------------------------------------------------
;Rohan Wall Junction 0
Object RohanWallJntO
 
  ; *** ART Parameters ***
SelectPortrait = BRCastleWall
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBWallJntO
    End
    
    WallBoundsMesh = wall1
        
  End


  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanWall
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Armor = StructureArmor
  End
  
  CommandSet = EmptyCommandSet


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood


;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_WOOD
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 3000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 35.0
  GeometryMinorRadius   = 35.0
  GeometryHeight        = 60.0
  
  GeometryContactPoint =    X:0            Y:0                Z:50 
  GeometryContactPoint =    X:0            Y:0                Z:0 
  GeometryContactPoint =    X:45        Y:0                Z:0 Grab
  GeometryContactPoint =    X:-45        Y:0                Z:0 Grab
  GeometryContactPoint =    X:0            Y:45            Z:0 Grab
  GeometryContactPoint =    X:0        Y:-45                Z:0 Grab
  GeometryIsSmall       = No
  
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End


;------------------------------------------------------------------------------
;Rohan Wall Elevator
Object RohanWallElev
 
  ; *** ART Parameters ***
SelectPortrait = BRCastleWall
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_01

        ExtraPublicBone = Elev01
        ExtraPublicBone = Elev02
        ExtraPublicBone = Elev03
;        ExtraPublicBone = Elev04
;        ExtraPublicBone = Elev05

    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBWallElev
    End
    
    WallBoundsMesh = P1
        
  End
 


  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanWall
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions = None
    Armor = StructureArmor
  End
  
  CommandSet = EmptyCommandSet


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood


;  VoiceSelect         = NuclearReactorSelect

;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End


  ; *** ENGINEERING Parameters ***

    KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE MADE_OF_WOOD
    RadarPriority        = STRUCTURE
    
    Body                = ActiveBody ModuleTag_02
        MaxHealth        = 3000.0
        
        GrabObject = EntThrownBuildingRock
        GrabFX = FX_WallGrab
        GrabDamage = 490
        GrabOffset = X:16 Y:0
    End
    
    Behavior = DynamicPortalBehaviour Portal
        GenerateNow        = Yes
        AllowKindOf        = INFANTRY
        RejectKindOf    = MONSTER MACHINE CAVALRY ARMY_OF_DEAD        
        BonePrefix        = Elev
        NumberOfBones    = 3
        
        WayPoint        = Index:0    Type:Walk        ; 0
        WayPoint        = Index:1    Type:Walk        ; 1
        WayPoint        = Index:2    Type:Walk        ; 2
        WayPoint        = Index:3    Type:Walk        ; 3    top right
        WayPoint        = Index:2    Type:Walk        ; 4
        WayPoint        = Index:1    Type:Walk        ; 5

;        WayPoint        = Index:0    Type:Walk        ; 6
;        WayPoint        = Index:1    Type:Walk        ; 7
;        WayPoint        = Index:2    Type:Walk        ; 8
;        WayPoint        = Index:4    Type:Walk        ; 9 top left
;        WayPoint        = Index:2    Type:Walk        ; 10
;        WayPoint        = Index:1    Type:Walk        ; 11

        Link            = From:0 Via:5 To:2    ; up, to centre
        Link            = From:2 Via:1 To:0    ; down, from centre

;        Link            = From:0 Via:4 Via:5 To:3    ; up, to right
;        Link            = From:3 Via:1 Via:2 To:0    ; down, from right

;        Link            = From:6 Via:10 Via:11 To:9    ; up, to left
;        Link            = From:9 Via:7 Via:8 To:6    ; down, from left
    End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

    Geometry                        = BOX
    GeometryMajorRadius                = 50.0
    GeometryMinorRadius                = 44.0
    GeometryHeight                    = 76.0
    GeometryIsSmall                    = No
    
    GeometryContactPoint =    X:0            Y:0                Z:70 
    GeometryContactPoint =    X:0            Y:0                Z:0 
    GeometryContactPoint =    X:45        Y:0                Z:0 Grab
    GeometryContactPoint =    X:-45        Y:0                Z:0 Grab
    GeometryContactPoint =    X:0            Y:55            Z:0 Grab
    GeometryContactPoint =    X:0        Y:-45                Z:0 Grab
  
    Shadow                            = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Rohan Wall Angl15
Object RohanWallAngl15
 
  ; *** ART Parameters ***
SelectPortrait = BRCastleWall
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBWalls15
    End
    
    WallBoundsMesh = P1
        
  End


  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanWall
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = RohanCastleWall
    DamageFX          = RohanWallDamageFX
  End
  
  CommandSet = EmptyCommandSet


; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood


;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End


  ; *** ENGINEERING Parameters ***

  RadarPriority = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_WOOD
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = M_ROHAN_CASTLE_WALL_HEALTH
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 35.0
  GeometryMinorRadius   = 35.0
  GeometryHeight        = 60.0
    
  GeometryContactPoint =    X:0            Y:0                Z:18 
  GeometryContactPoint =    X:0            Y:0                Z:0 
  GeometryContactPoint =    X:0            Y:-45                Z:0 Grab
  GeometryContactPoint =    X:0            Y:45                Z:0 Grab
      
    
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
;Rohan Wall Tower
Object RohanWallTower
 
  ; *** ART Parameters ***
SelectPortrait = BRCastleWall
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBWallTwr
    End
    
    WallBoundsMesh = wall1
    RampMesh1 = ramp1   
    RampMesh2 = ramp2 
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanWallTower
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions = None
    Armor = StructureArmor
  End
  
  CommandSet = EmptyCommandSet


; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood


;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End


  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE MADE_OF_WOOD
  
  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = No ; ??? Can't figure out where this used...
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 3000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 18.0
  GeometryMinorRadius   = 47.0
  GeometryHeight        = 92.0
  
  GeometryContactPoint =    X:-28        Y:45            Z:0 Grab
  GeometryContactPoint =    X:28        Y:45            Z:0 Grab
  GeometryContactPoint =    X:0            Y:0                Z:85 Grab
  GeometryContactPoint =    X:0            Y:0                Z:0 Grab
  GeometryContactPoint =    X:-28        Y:-45            Z:0 Grab
  GeometryContactPoint =    X:28        Y:-45            Z:0 Grab
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
Object RohanHelmsDeepKeep

    SelectPortrait = BPRHelmsDeep

    
  ; *** ART Parameters ***
;  Draw = W3DModelDraw ModuleTag_01
;    OkToChangeModelColor = Yes
;  
;    ConditionState = NONE
;      Model = GBFSTower
;    End
;    ExtraPublicBone = Ramp01
;    ExtraPublicBone = Ramp02
;    ExtraPublicBone = Ramp03
;    WallBoundsMesh = P1
;    EmbedPortal = ramp Ramp
;  End
  
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    ExtraPublicBone = Ramp01
    ExtraPublicBone = Ramp02
    ExtraPublicBone = Ramp03
    WallBoundsMesh  = P1
    ;;;;EmbedPortal = ramp Ramp  ;;; not yet supported in W3DScriptedModelDraw 
    DefaultModelConditionState
      Model = GBFSTower
    End
  End


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood

;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanHelmsDeepKeep
  Side = Rohan
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  ArmorSet
    Conditions        = None
    Armor             = NoArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf            = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority        = STRUCTURE
  Body              = ActiveBody ModuleTag_02
        MaxHealth       = 2000.0
    
        GrabObject = EntThrownBuildingRock
        GrabFX = FX_WallGrab
        GrabDamage = 490
        GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 5000
  End
  
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 36.0
  GeometryMinorRadius   = 36.0
  GeometryHeight        = 88.0
  GeometryIsSmall       = No
  GeometryRotationAnchorOffset = X:372.9936 Y:0.0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------------------
;Rohan Battle Tower
Object RohanBattleTower

SelectPortrait = BPRBattleTower

      ; *** ART Parameters ***
    ButtonImage = BRBattleTower
      
    ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
  
    ExtraPublicBone    = ARROWBONE01
    ExtraPublicBone    = ARROWBONE02
    ExtraPublicBone    = ARROWBONE03
    ExtraPublicBone    = ARROWBONE04
    ExtraPublicBone    = ARROWBONE05
    ExtraPublicBone    = ARROWBONE06
    ExtraPublicBone    = ARROWBONE07
    ExtraPublicBone    = ARROWBONE08
    ExtraPublicBone    = ARROWBONE09
    ExtraPublicBone    = ARROWBONE10
    ExtraPublicBone    = ARROWBONE11
    ExtraPublicBone    = ARROWBONE12
    ExtraPublicBone    = ARROWBONE13
    ExtraPublicBone    = ARROWBONE14
    ExtraPublicBone    = ARROWBONE15
    ExtraPublicBone    = ARROWBONE16
    
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBWatchTow
    End
    
     ;------------ build up states---------------
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = RBWatchTow_A
;        ParticleSysBone      = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           =  RBWatchTow_A
        AnimationName     =  RBWatchTow_ASKL.RBWatchTow_ABLD
        AnimationMode     = MANUAL
        AnimationBlendTime = 0
      End
      Flags                  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = RBWatchTow_A
        ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End;
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
        Animation           = RBWatchTow_A
            AnimationName     = RBWatchTow_ASKL.RBWatchTow_ABLD
            AnimationMode     = MANUAL
            AnimationBlendTime = 0
        End
        Flags                  = START_FRAME_FIRST
        StateName              = BeingConstructed
        BeginScript
            CurDrawablePlaySound("GondorBarracksBeginConstruction")
        EndScript
    End
    
    
    
       ;--damaged building
    ModelConditionState  = DESTROYED_FRONT
      Model         = RBWatchTow_D2 
        ParticleSysBone FireSmall01 FireBuildingLarge
        ParticleSysBone FireSmall02 FireBuildingLarge
        ParticleSysBone FireSmall03 FireBuildingMedium
        ParticleSysBone FireSmall04 FireBuildingLarge
        ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("RBWatchTowDP_1")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         =  RBWatchTow_D2 
        ParticleSysBone FireSmall01 FireBuildingLarge
        ParticleSysBone FireSmall02 FireBuildingLarge
        ParticleSysBone FireSmall03 FireBuildingMedium
        ParticleSysBone FireSmall04 FireBuildingLarge
        ParticleSysBone FireSmall05 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("RBWatchTowDP_2")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         =  RBWatchTow_D2   
        ParticleSysBone FireSmall01 FireBuildingLarge
        ParticleSysBone FireSmall02 FireBuildingLarge
        ParticleSysBone FireSmall03 FireBuildingMedium
        ParticleSysBone FireSmall04 FireBuildingLarge
        ParticleSysBone FireSmall05 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("RBWatchTowDP_3")
      EndScript
    End

    ModelConditionState  = DESTROYED_LEFT
      Model         =  RBWatchTow_D2   
        ParticleSysBone FireSmall01 FireBuildingLarge
        ParticleSysBone FireSmall02 FireBuildingLarge
        ParticleSysBone FireSmall03 FireBuildingMedium
        ParticleSysBone FireSmall04 FireBuildingLarge
        ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("RBWatchTowDP_4")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         =  RBWatchTow_D1  
        ParticleSysBone FireSmall01 FireBuildingLarge
        ParticleSysBone FireSmall02 FireBuildingMedium
        ParticleSysBone FireSmall03 FireBuildingMedium
        ParticleSysBone FireSmall04 SmokeBuildingLarge
        ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    AnimationState = DAMAGED
    EnteringStateFX    = FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         =  RBWatchTow_D2  
        ParticleSysBone FireSmall01 FireBuildingLarge
        ParticleSysBone FireSmall02 FireBuildingLarge
        ParticleSysBone FireSmall03 FireBuildingMedium
        ParticleSysBone FireSmall04 FireBuildingLarge
        ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    AnimationState = REALLYDAMAGED
    EnteringStateFX    = FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         =  RBWatchTow_D2 
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("RBWatchTowDP_1")
        CurDrawableHideSubObject("RBWatchTowDP_2")
        CurDrawableHideSubObject("RBWatchTowDP_3")
        CurDrawableHideSubObject("RBWatchTowDP_4")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End
 
  End
 
  PlacementViewAngle  = 270
 
    ; ***DESIGN parameters ***
    DisplayName         = OBJECT:RohanBattleTower
    Description         = OBJECT:RohanBattleTowerDescription
    Side                = Rohan
    EditorSorting       = STRUCTURE
    ThreatLevel = 1.0
     
    BuildCost           = 1200
    BuildTime           = 20.0           ; in seconds
    VisionRange         = M_VISION_BASE_DEFENSE
     ShroudClearingRange = M_SHROUD_CLEAR_BASE_DEFENSE

  CommandSet = BattleTowerCommandSet
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End


    ; *** AUDIO Parameters ***

    VoiceSelect = RohanBattleTowerSelect

    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood

    VoiceSelectUnderConstruction    = BuildingGoodVoiceSelectUnderConstruction

    UnitSpecificSounds
        UnderConstruction        = BuildingConstructionLoop  ; Built first time
        ; UnderRepairFromDamage    = NoSound                    ; Repaired No animation on the building, so don't bother playing sound
        UnderRepairFromRubble    = BuildingConstructionLoop    ; Repaired from completely destroyed (not used???)
    End


    ; *** ENGINEERING Parameters ***

    RadarPriority       = STRUCTURE
    KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CAN_ATTACK MADE_OF_WOOD ATTACK_NEEDS_LINE_OF_SIGHT     ; GARRISON GARRISONABLE_UNTIL_DESTROYED
     
    Behavior            = GettingBuiltBehavior ModuleTag_04
        WorkerName          = RohanWorkerNoSelect 
    End


    Body                      = StructureBody ModuleTag_05
        MaxHealth               = 2000.0
        MaxHealthDamaged        = 1300.0
        MaxHealthReallyDamaged  = 700.0
        DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
        
        DamageCreationList = OCL_GBBtlTwrSD2_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
        DamageCreationList = OCL_GBBtlTwrSD2_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
        DamageCreationList = OCL_GBBtlTwrSD2_Chunk3 CATAPULT_ROCK BACK_DESTROYED
        DamageCreationList = OCL_GBBtlTwrSD2_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
    End

;    Behavior                  = BuildingBehavior BuildingModuleTag
;        NightWindowName         = WINDOW_N01
;        FireWindowName          = WINDOW_F01
;        GlowWindowName        = WINDOW_G01
;    End
 
    Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
        DestructionDelay  = 5000
    End
      
    Behavior                  = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureMediumCollapse
        OCL                        = INITIAL   OCL_StructureRubblePileSinkAway
    End

    Behavior       = EvacuateDamage ModuleTag_evacuateDamage
        WeaponThatCausesEvacuation  = MordorCatapultHumanHeads
    End

;    Behavior = HordeGarrisonContain ModuleTag_hordeGarrison
;        ObjectStatusOfContained    = UNSELECTABLE CAN_ATTACK
;        ContainMax              = 4
;        MaxHordeCapacity        = 4
;        DamagePercentToUnits    = 0%
;        PassengerFilter            = ANY +INFANTRY +HORDE -CAVALRY
;        AllowEnemiesInside      = Yes
;        AllowNeutralInside      = Yes
;        NumberOfExitPaths       = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
;        PassengerBonePrefix     = PassengerBone:ARROWBONE KindOf:INFANTRY
;        EntryOffset                = X:0.0 Y:45.0 Z:0.0
;        ExitOffset                = X:0.0 Y:45.0 Z:0.0
;        
;        ;PassengersTestCollisionHeight = 80
;        ;Slots                         = 1
;        ;EnterSound                     = GarrisonEnter
;        ;ExitSound                      = GarrisonExit
;        ;ExitDelay               = 250
;        ;GoAggressiveOnExit      = Yes ; AI Will tell people to set their mood to Aggressive on exiting
;        ;ForceOrientationContainer = No  ; otherwise contained units can't orient themselves towards their targets...
;    End 

    Geometry              = BOX
    GeometryMajorRadius   = 18.4
    GeometryMinorRadius   = 18.4
    GeometryHeight        = 95.0
    
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
    BuildCompletion     = PLACED_BY_PLAYER
    
    GeometryContactPoint    = X:-15.191        Y:14.07        Z:0            Repair
    GeometryContactPoint    = X:16.514        Y:-12.506    Z:0            Repair
    GeometryContactPoint    = X:12.361        Y:24.008    Z:0
    GeometryContactPoint    = X:-11.371        Y:-22.442    Z:0
    GeometryContactPoint    = X:0.081        Y:-4.234    Z:111.299    Swoop

End

;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;
;  Gondor
;
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------

;------------------------------------------------------------------------------
Object GondorCastleWall_temp
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = GBCWall
    End
  End
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorCastleWall_temp
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP MADE_OF_STONE
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
    SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
    SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

  Geometry              = BOX
  GeometryMajorRadius   = 25.6
  GeometryMinorRadius   = 35.2
  GeometryHeight        = 191.2
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object GondorCastleKeep_temp

    SelectPortrait = BPGKeep
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = GBCKeep
    End
  End
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorCastleKeep_temp
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


  ; *** AUDIO Parameters ***

    VoiceSelect            = GondorCitadelSelect

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone

    EvaEventDieOwner = CitadelDie


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP AUTO_RALLYPOINT MADE_OF_STONE
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
    SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
    SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

  Geometry              = BOX
  GeometryMajorRadius   = 25.6
  GeometryMinorRadius   = 35.2
  GeometryHeight        = 191.2
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object GondorCastleFoundation_temp
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = GBCfoundation
    End
  End
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorCastleFoundation_temp
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ; *** AUDIO Parameters ***

  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP 
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
    SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
    SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

  Geometry              = BOX
  GeometryMajorRadius   = 25.6
  GeometryMinorRadius   = 35.2
  GeometryHeight        = 191.2
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object GondorCastleBarracks_temp
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = GBCBarracks
    End
  End
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorCastleBarracks_temp
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


  ; *** AUDIO Parameters ***

    VoiceSelectUnderConstruction    = BuildingGoodVoiceSelectUnderConstruction

    UnitSpecificSounds
        UnderConstruction        = BuildingConstructionLoop  ; Built first time
        ; UnderRepairFromDamage    = NoSound                    ; Repaired No animation on the building, so don't bother playing sound
        UnderRepairFromRubble    = BuildingConstructionLoop    ; Repaired from completely destroyed (not used???)
    End


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP MADE_OF_STONE
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
    SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
    SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

  Geometry              = BOX
  GeometryMajorRadius   = 25.6
  GeometryMinorRadius   = 35.2
  GeometryHeight        = 191.2
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object GBCastleGate

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCastGate
    End
;    WallBoundsMesh = GBCastleWallT2
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:240 G:240 B:100
    Radius = 40
    Intensity = 1.2
    FlickerAmplitude = 0.5
    FlickerFrequency = 10
    AttachToBoneInAnotherModule = E_Fire_SM
  End  


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GBCastleGate
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_WOOD
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 4000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 5000
  End
  
  
  
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  
    Geometry              = BOX
    GeometryMajorRadius   = 44.0
    GeometryMinorRadius   = 88.0
    GeometryHeight        = 40.0
    GeometryIsSmall       = No
    ;GeometryRotationAnchorOffset = X:1037.871 Y:0
    Shadow                = SHADOW_VOLUME
  
    GeometryContactPoint = X:-8  Y:0  Z:0 Grab
    GeometryContactPoint = X:8  Y:0  Z:0 Grab
    GeometryContactPoint = X:0  Y:0  Z:5
    GeometryContactPoint = X:0  Y:-50  Z:40
    GeometryContactPoint = X:0  Y:-30  Z:5
    GeometryContactPoint = X:0  Y:0  Z:40
    GeometryContactPoint = X:0  Y:30  Z:5
    GeometryContactPoint = X:0  Y:50  Z:40
    GeometryContactPoint = X:0  Y:50  Z:5
    
    
End

;------------------------------------------------------------------------------
Object GBCastleTrebuchet

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCastTreb
    End
;    WallBoundsMesh = GBCastleWallT2
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:240 G:240 B:100
    Radius = 40
    Intensity = 1.2
    FlickerAmplitude = 0.5
    FlickerFrequency = 10
    AttachToBoneInAnotherModule = E_Fire_SM
  End  


  ; *** AUDIO Parameters ***

    ;SoundOnDamaged        = BuildingLightDamageStone
    ;SoundOnReallyDamaged    = BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GBCastleTrebuchet
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 2000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 5000
  End
  
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

    Geometry              = BOX
    GeometryMajorRadius   = 44.0
    GeometryMinorRadius   = 88.0
    GeometryHeight        = 40.0
    GeometryIsSmall       = No
    ;GeometryRotationAnchorOffset = X:1037.871 Y:0
    Shadow                = SHADOW_VOLUME
    
    ; Regular geometry is all screwy, leave these commented out
    ;GeometryContactPoint = X:-10  Y:-40  Z:0 Grab
    ;GeometryContactPoint = X:30   Y:0    Z:0 Grab
    ;GeometryContactPoint = X:-10  Y:40   Z:0 Grab
    ;GeometryContactPoint = X:-10  Y:20   Z:40
    ;GeometryContactPoint = X:15   Y:10   Z:10
    ;GeometryContactPoint = X:20   Y:0    Z:40
    ;GeometryContactPoint = X:15   Y:-10  Z:10
    ;GeometryContactPoint = X:-10   Y:-30  Z:40
    ;GeometryContactPoint = X:-10  Y:-30  Z:10
End

;------------------------------------------------------------------------------
Object GBCastleElevator

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCastElev
    End
;    WallBoundsMesh = GBCastleWallT2
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:240 G:240 B:100
    Radius = 40
    Intensity = 1.2
    FlickerAmplitude = 0.5
    FlickerFrequency = 10
    AttachToBoneInAnotherModule = E_Fire_SM
  End  


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GondorCastleElevator
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 3300.0 ; 4000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 5000
  End
  
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 44.0
  GeometryMinorRadius   = 88.0
  GeometryHeight        = 40.0
  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  
  ; wow this geometry is screwy
  GeometryContactPoint = X:-29.397        Y:0.326        Z:108.421        Swoop
  GeometryContactPoint = X:0            Y:0            Z:0
  GeometryContactPoint = X:40 Y:-20  Z:0 Grab
End

;------------------------------------------------------------------------------
Object GBCastleWallF

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCastleWallF
    End
;    WallBoundsMesh = GBCastleWallT2
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:240 G:240 B:100
    Radius = 40
    Intensity = 1.2
    FlickerAmplitude = 0.5
    FlickerFrequency = 10
    AttachToBoneInAnotherModule = E_Fire_SM
  End  


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GondorCastleWall
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 3300 ; 4000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
  End
  
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 44.0
  GeometryMinorRadius   = 88.0
  GeometryHeight        = 40.0
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object GBCastleWallG

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCastleWallG
    End
;    WallBoundsMesh = GBCastleWallT2
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:240 G:240 B:100
    Radius = 40
    Intensity = 1.2
    FlickerAmplitude = 0.5
    FlickerFrequency = 10
    AttachToBoneInAnotherModule = E_Fire_SM
  End  


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GondorCastleWall
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 3300 ; 4000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
  End
  
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 44.0
  GeometryMinorRadius   = 88.0
  GeometryHeight        = 40.0
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object GBCastleWallR

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCastleWallR
    End
;    WallBoundsMesh = GBCastleWallT2
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:240 G:240 B:100
    Radius = 40
    Intensity = 1.2
    FlickerAmplitude = 0.5
    FlickerFrequency = 10
    AttachToBoneInAnotherModule = E_Fire_SM
  End  


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GondorCastleWall
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 3300 ; 4000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
  End
  
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 44.0
  GeometryMinorRadius   = 88.0
  GeometryHeight        = 40.0
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object GondorCastleGateTower

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    WallBoundsMesh = P1
    RampMesh1 = Ramp1
    
    DefaultModelConditionState
      Model = GBCastPed
    End

    ModelConditionState = WORLD_BUILDER
          Model = GBCASTPEDW
      End

    IdleAnimationState
         StateName             = STATE_None
        Flags                 = START_FRAME_LAST
        Animation
            AnimationName     = GBCastPed.GBCastPed
            AnimationMode     = MANUAL
            AnimationBlendTime = 0
        End
    End    

    ModelConditionState  = ACTIVELY_BEING_CONSTRUCTED UPGRADE_NUMENOR_STONEWORK
        Model = GBCastPed_UA
    End
    AnimationState = ACTIVELY_BEING_CONSTRUCTED UPGRADE_NUMENOR_STONEWORK
        StateName            = STATE_None
        Flags                = START_FRAME_FIRST
        Animation
            AnimationName = GBCastPed_UA.GBCastPed_UA
            AnimationMode = MANUAL
        End
    End    

    ModelConditionState  = ACTIVELY_BEING_CONSTRUCTED
        Model = GBCastPed  
    End
    AnimationState = ACTIVELY_BEING_CONSTRUCTED
        StateName            = STATE_None
        Flags                = START_FRAME_FIRST
        Animation
            AnimationName = GBCastPed.GBCastPed
            AnimationMode = MANUAL
        End
    End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = GBCastPed
      ParticleSysBone     = NONE BuildingContructDust
    End  
    AnimationState          = BASE_BUILD
        StateName                = STATE_None
        Animation
            AnimationName = GBCastPed.GBCastPed
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
        End
    End

    AnimationState = JUST_BUILT
        StateName                = STATE_None
        Flags                    = START_FRAME_FIRST
        Animation
            AnimationName        = GBCastPed.GBCastPed
            AnimationMode        = MANUAL
            AnimationBlendTime    = 0
        End
    End    
    
    ; DAMAGED ----------------------------------------------------------------------------------------------------------------
    ModelConditionState = DAMAGED UPGRADE_NUMENOR_STONEWORK
        Model            = GBCastPed_UD1  
    End
    AnimationState = DAMAGED UPGRADE_NUMENOR_STONEWORK
        StateName        = STATE_None
        EnteringStateFX    = FX_BuildingDamaged
    End
    ModelConditionState = DAMAGED
        Model            = GBCastPed_D1  
    End
    AnimationState = DAMAGED
        StateName        = STATE_None
        EnteringStateFX    = FX_BuildingDamaged
    End

    ; REALLYDAMAGED ----------------------------------------------------------------------------------------------------------------
    TransitionState = TRANS_U_IntoReallyDamaged
        EnteringStateFX        = FX_BuildingReallyDamaged
        Animation = D2
            AnimationName        = GBCastPed_UD2.GBCastPed_UD2
            AnimationMode        = ONCE
            AnimationBlendTime    = 0
        End
    End

    ModelConditionState  = REALLYDAMAGED UPGRADE_NUMENOR_STONEWORK
      Model         = GBCastPed_UD2
    End
    AnimationState = REALLYDAMAGED UPGRADE_NUMENOR_STONEWORK
        StateName            = STATE_ReallyDamaged
         Flags                = START_FRAME_LAST
          Animation            = ReallyDamagedanimation
            AnimationName    = GBCastPed_UD2.GBCastPed_UD2
            AnimationMode    = MANUAL
            AnimationBlendTime = 0
           End
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_None" or Prev == "STATE_Rubble"
            then
                ; Only play the really damaged anim if we havn't come from another really damaged.
                CurDrawableSetTransitionAnimState("TRANS_U_IntoReallyDamaged")
            end
        EndScript
       End

    ModelConditionState  = REALLYDAMAGED
      Model         = GBCastPed_D2
    End
    AnimationState = REALLYDAMAGED
        StateName            = STATE_ReallyDamaged
           Animation            = ReallyDamagedanimation
            AnimationName    = GBCastPed_D2.GBCastPed_D2
            AnimationMode    = ONCE
            AnimationBlendTime = 0
           End
        EnteringStateFX    = FX_BuildingReallyDamaged
    End

    ; RUBBLE ----------------------------------------------------------------------------------------------------------------
    TransitionState = TRANS_U_IntoRubble
        Animation = D3
            AnimationName        = GBCastPed_U_D3.GBCastPed_U_D3
            AnimationMode        = ONCE
            AnimationBlendTime = 0
        End
    End

    ModelConditionState  = RUBBLE UPGRADE_NUMENOR_STONEWORK
      Model                        = GBCastPed_U_D3
    End
    AnimationState = RUBBLE UPGRADE_NUMENOR_STONEWORK
        StateName                = STATE_Rubble
        Flags                    = START_FRAME_LAST
        ;EnteringStateFX    = FX_WallDie    ;this plays after the stone sink into the ground
        Animation                = Death
            AnimationName        = GBCastPed_U_D3.GBCastPed_U_D3
            AnimationMode        = MANUAL
            AnimationBlendTime    = 0
        End
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_ReallyDamaged" or Prev == "STATE_None" or Prev == "TRANS_U_IntoReallyDamaged"
            then
                ; Only play the rubble anim if we havn't come from another rubble.
                CurDrawableSetTransitionAnimState("TRANS_U_IntoRubble")
            end
        EndScript
    End

    ModelConditionState  = RUBBLE
      Model         = GBCastPed_D3
    End
    AnimationState = RUBBLE
        StateName                = STATE_Rubble
        Animation                = Death
            AnimationName        = GBCastPed_D3.GBCastPed_D3
            AnimationMode        = ONCE
            AnimationBlendTime    = 0
        End
        EnteringStateFX    = FX_WallDie
    End      

     ; ----------------------------------------------------------------------------------------------------------------
   ModelConditionState  = UPGRADE_NUMENOR_STONEWORK
      Model         = GBCastPed_U
    End
    AnimationState = UPGRADE_NUMENOR_STONEWORK
        StateName        = STATE_None
        EnteringStateFX = GenericBuildingUpgrade
    End    

  End

  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:WallDie    Animation:GBCastPed_U_D3.GBCastPed_U_D3    Frames:0
    End


  ; ***DESIGN parameters ***

    DisplayName     = OBJECT:GondorCastleGateTower
    Side            = Gondor
    EditorSorting    = STRUCTURE
    BuildTime        = M_CASTLE_WALL_REBUILD_TIME
    BuildCost        = M_CASTLE_WALL_REBUILD_COST

  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = MinasWallADamageFX
  End

  ; *** ENGINEERING Parameters ***  
    KindOf                    = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR SELECTABLE MADE_OF_STONE NOT_AUTOACQUIRABLE
    RadarPriority            = STRUCTURE
    KeepSelectableWhenDead    = Yes
    CommandSet                = GenericSelfRepairCommandSet

  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 5000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  
    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End
  
    Behavior = CastleMemberBehavior ModuleTag_CMB
    End 
  
    Behavior                    = AttributeModifierUpgrade ModuleTag_Reinforced
      TriggeredBy               = Upgrade_NumenorStonework
      AttributeModifier         = NumenorStonework_Bonus
      CustomAnimAndDuration     = AnimState:UPGRADE_NUMENOR_STONEWORK AnimTime:0
    End
    
    Behavior                    = AttributeModifierUpgrade ModuleTag_Reinforced1
      TriggeredBy				        = Upgrade_NumenorStoneworkUpgraded
      AttributeModifier		      = NumenorStonework_Bonus
      CustomAnimAndDuration	    = AnimState:UPGRADE_NUMENOR_STONEWORK AnimTime:0
    End
    
    Behavior                    = GettingBuiltBehavior ModuleTag_GettingBuilt
      SelfBuildingLoop          = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
      SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
      SelfRepairFromRubbleLoop  = BuildingConstructionLoop
      SpawnTimer                = -1.0 ; Negative means no 'autoheal'
      RebuildTimeSeconds        = M_CASTLE_WALL_REBUILD_TIME
    End 
  
    Geometry              = BOX
    GeometryMajorRadius   = 20.0
    GeometryMinorRadius   = 50.0
    GeometryHeight        = 45.0
    GeometryIsSmall       = No
    ;GeometryRotationAnchorOffset = X:1037.871 Y:0
    Shadow                = SHADOW_VOLUME
    
    GeometryContactPoint = X:-10  Y:-40  Z:0 Grab
    GeometryContactPoint = X:40   Y:0    Z:0 Grab
    GeometryContactPoint = X:-10  Y:40   Z:0 Grab
    GeometryContactPoint = X:-10  Y:25   Z:45
    GeometryContactPoint = X:15   Y:15   Z:5
    GeometryContactPoint = X:20   Y:0    Z:45
    GeometryContactPoint = X:15   Y:-15  Z:5
    GeometryContactPoint = X:-10  Y:-25  Z:45
    GeometryContactPoint = X:-10  Y:-25  Z:5
End

;------------------------------------------------------------------------------
Object GBCastleWallsA

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCastleWallsA
    End
;    WallBoundsMesh = GBCastleWallT2
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:240 G:240 B:100
    Radius = 40
    Intensity = 1.2
    FlickerAmplitude = 0.5
    FlickerFrequency = 10
    AttachToBoneInAnotherModule = E_Fire_SM
  End  


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GondorCastleWall
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 3300.0 ; 4000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
  End
  
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 44.0
  GeometryMinorRadius   = 88.0
  GeometryHeight        = 40.0
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object GBCastleWallsBT

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCastleWallsBT
    End
;    WallBoundsMesh = GBCastleWallT2
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:240 G:240 B:100
    Radius = 40
    Intensity = 1.2
    FlickerAmplitude = 0.5
    FlickerFrequency = 10
    AttachToBoneInAnotherModule = E_Fire_SM
  End  


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GBCampWall
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_STONE 
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 3300.0 ; 4000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
  End
  
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 44.0
  GeometryMinorRadius   = 88.0
  GeometryHeight        = 40.0
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object GBCastleWallT1

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCastleWallT1
    End
;    WallBoundsMesh = GBCastleWallT2
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:240 G:240 B:100
    Radius = 40
    Intensity = 1.2
    FlickerAmplitude = 0.5
    FlickerFrequency = 10
    AttachToBoneInAnotherModule = E_Fire_SM
  End  


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GBCampWall
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 3300.0 ; 4000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
  End
  
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 44.0
  GeometryMinorRadius   = 88.0
  GeometryHeight        = 40.0
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object GBCastleWallT2

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCastleWallT2
    End
;    WallBoundsMesh = GBCastleWallT2
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:240 G:240 B:100
    Radius = 40
    Intensity = 1.2
    FlickerAmplitude = 0.5
    FlickerFrequency = 10
    AttachToBoneInAnotherModule = E_Fire_SM
  End  


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GBCampWall
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 3300.0 ; 4000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
  End
  
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 44.0
  GeometryMinorRadius   = 88.0
  GeometryHeight        = 40.0
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object GBCampFloor

    ; *** ART Parameters ***
    Draw = W3DFloorDraw ModuleTag_01
        ModelName = GBCampFloor
        ForceToBack = Yes
    End

  ; *** AUDIO Parameters ***

    VoiceSelect        = Gui_PlotSelect


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:CampFloor
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = NoArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  ; The STRUCTURE KindOf is needed so this object will be given to the base
  ; owner when it's unpacked and show up in the right color on the radar map.
  
  KindOf                = STRUCTURE IMMOBILE NO_COLLIDE UNATTACKABLE INERT 

  RadarPriority = NOT_ON_RADAR
  Body                  = ImmortalBody ModuleTag_03
    MaxHealth       = 2000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 1000
  End
  
  Geometry              = BOX
  GeometryMajorRadius   = 0.8
  GeometryMinorRadius   = 0.8
  GeometryHeight        = 0.8
  GeometryIsSmall       = Yes
End

;------------------------------------------------------------------------------
Object GBCastleFloor

    ; *** ART Parameters ***
    Draw = W3DFloorDraw ModuleTag_01
        ModelName = GBCastFloor_skn
        ForceToBack = Yes
    End

  ; *** AUDIO Parameters ***

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:CastFloor
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = NoArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  ; The STRUCTURE KindOf is needed so this object will be given to the base
  ; owner when it's unpacked and show up in the right color on the radar map.
  
  KindOf                = STRUCTURE IMMOBILE NO_COLLIDE UNATTACKABLE INERT 
  RadarPriority = NOT_ON_RADAR
  Body                  = ImmortalBody ModuleTag_03
    MaxHealth       = 2000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 1000
  End
  
  Geometry              = BOX
  GeometryMajorRadius   = 0.8
  GeometryMinorRadius   = 0.8
  GeometryHeight        = 0.8
  GeometryIsSmall       = Yes
End

;------------------------------------------------------------------------------
;Gondor Tent
Object GondorTent
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw                = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultModelConditionState
      Model           = GBTent
    End
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorTent
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 0
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End
;  CommandSet          = GondorTentCommandSet

 
  ; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE NOT_AUTOACQUIRABLE SCORE MADE_OF_WOOD
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
    SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
    SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

  Behavior = UpgradeDie  UpgradeDieModuleTag
    ;This frees the object based upgrade for the producer object.
    DeathTypes = ALL
    UpgradeToRemove     = Upgrade_TestBuilding BaseUpgradeTag_01
  End

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 33.6
  GeometryMinorRadius   = 28.0
  GeometryHeight        = 40.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object GBCampWall

SelectPortrait = BPGCampWall

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCampWall_A
    End

    IdleAnimationState
        Animation
            AnimationName     = GBCampWall_A.GBCampWall_A
            AnimationMode     = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
    End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = GBCampWall_A
;      ParticleSysBone      = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
    AnimationState          = BASE_BUILD
        Animation
            AnimationName = GBCampWall_A.GBCampWall_A
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
        End
    End

    AnimationState          = JUST_BUILT
        Animation
            AnimationName = GBCampWall_A.GBCampWall_A
            AnimationMode = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
    End    

    
    ModelConditionState  = DAMAGED UPGRADE_NUMENOR_STONEWORK
        Model         = GBCampWall_UD1
        ParticleSysBone emberBone01 SmokeBuildingLarge
    End
    ModelConditionState  = DAMAGED
        Model         = GBCampWall_D1
        ParticleSysBone emberBone01 SmokeBuildingLarge
    End
    AnimationState = DAMAGED
        EnteringStateFX    = FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED UPGRADE_NUMENOR_STONEWORK
      Model         = GBCampWall_UD2
      ParticleSysBone emberBone01 SmokeBuildingLarge
    End
    ModelConditionState  = REALLYDAMAGED
      Model         = GBCampWall_D2
      ParticleSysBone emberBone01 SmokeBuildingLarge
    End
    AnimationState = REALLYDAMAGED
        EnteringStateFX    = FX_BuildingReallyDamaged
    End    
    
    ModelConditionState  = RUBBLE UPGRADE_NUMENOR_STONEWORK
      Model         = GBCampWall_UD3
      ParticleSysBone emberBone01 GondorWallDebris
      ParticleSysBone emberBone01 SmokeBuildingLarge
      ParticleSysBone emberBone01 PCTMediumDust
    End
    AnimationState = RUBBLE UPGRADE_NUMENOR_STONEWORK
    EnteringStateFX = FX_WallStoneDie
    End

    ModelConditionState  = RUBBLE
      Model         = GBCampWall_D3
      ParticleSysBone emberBone01 GondorWallDebris
      ParticleSysBone emberBone01 SmokeBuildingLarge
      ParticleSysBone emberBone01 PCTMediumDust
    End
    AnimationState = RUBBLE
    EnteringStateFX = FX_WallStoneDie
    End

      ModelConditionState  = POST_RUBBLE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    ModelConditionState  = POST_COLLAPSE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End
      
    ModelConditionState  = UPGRADE_NUMENOR_STONEWORK
        Model         = GBCampWall_U
    End
    AnimationState = UPGRADE_NUMENOR_STONEWORK
        EnteringStateFX = GenericBuildingUpgrade
    End

  End

  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone

    ;ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
    ;    MaxUpdateRangeCap = 800
    ;    AnimationSound = Sound:BuildingDebris    Animation:GBCampWall_A.GBCampWall_D3    Frames:0
    ;    AnimationSound = Sound:BuildingDebris    Animation:GBCampWall_A.GBCampWall_UD3    Frames:0
    ;End


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GBCampWall
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = CampWallArmor
    DamageFX          = None
  End
  
  CommandSet = EmptyCommandSet

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE DEFENSIVE_WALL NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority = NOT_ON_RADAR
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 3000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End
    
    Behavior                  = StructureCollapseUpdate ModuleTag_06
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        DestroyObjectWhenDone    = Yes
        CollapseHeight            = 80
    End
      
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End
  
  Behavior                     = AttributeModifierUpgrade ModuleTag_Reinforced
    TriggeredBy                = Upgrade_NumenorStonework
    AttributeModifier          = NumenorStoneworkKeep_Bonus
    CustomAnimAndDuration      = AnimState:UPGRADE_NUMENOR_STONEWORK AnimTime:0
  End
  
	Behavior                     = AttributeModifierUpgrade ModuleTag_Reinforced1
		TriggeredBy				         = Upgrade_NumenorStoneworkUpgraded
		AttributeModifier		       = NumenorStonework_Bonus
		CustomAnimAndDuration	     = AnimState:UPGRADE_NUMENOR_STONEWORK AnimTime:0
	End
  
  Geometry              = BOX
  GeometryMajorRadius   = 4.0
  GeometryMinorRadius   = 72.0
  GeometryHeight        = 24.0
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object GBCampWallC

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCampWallC
    End
;    WallBoundsMesh = GBMTWallAPTop
  End


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GBCampWall
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE DEFENSIVE_WALL NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority = NOT_ON_RADAR
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 3000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2100
  End
  
  Geometry              = BOX
  GeometryMajorRadius   = 32.0
  GeometryMinorRadius   = 8.0
  GeometryHeight        = 8.0
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Gondor Buildable Wall Foundation -- the area where faction gondor walls can be built on
Object GondorWallFoundation
 
  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    
    DefaultModelConditionState
      Model = GBFoundationL
    End

    ModelConditionState = WORLD_BUILDER
        Model = RBWalls
    End    
  End
  
  ;PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWallFoundation
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  CommandSet = GondorWallFoundationCommandSet


  ; *** AUDIO Parameters ***

    VoiceSelect    = Gui_PlotSelect


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY MADE_OF_STONE
 
  Behavior            = FoundationAIUpdate ModuleTag_foundationAI
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 15000.0
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 16.0
  GeometryHeight        = 0.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion        = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
;Gondor Catacombs (copied from MarketPlace)
Object GondorCatacombs
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

;  Draw                = W3DModelDraw ModuleTag_01
;    OkToChangeModelColor = Yes
;
;    DefaultConditionState
;      Model           = GBCatacombs
;    End
;  End

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = GBCatacombs
    End
    
        ModelConditionState     = DAMAGED
            Model               = GBCatacombsD1
            ParticleSysBone SmokeSmall03 SmokeBuildingSmall
            ParticleSysBone SmokeSmall03 SmokeBuildingSmall    
        End  
        AnimationState = DAMAGED
            EnteringStateFX    = FX_StatueDamaged ;FX_BuildingDamaged
        End

        ModelConditionState     = REALLYDAMAGED
            Model               = GBCatacombsD2
            ParticleSysBone SmokeSmall03 SmokeBuildingSmall
            ParticleSysBone SmokeSmall03 SmokeBuildingSmall
            ParticleSysBone SmokeSmall03 SmokeBuildingSmall
        End  
        AnimationState = REALLYDAMAGED
            EnteringStateFX    = FX_StatueDamaged ;FX_BuildingReallyDamaged
        End

        ModelConditionState  = RUBBLE
            Model         = GBCatacombsD2
            ParticleSysBone SmokeSmall03 SmokeBuildingMedium
        End
        AnimationState = RUBBLE
        End

        ModelConditionState  = POST_RUBBLE
            Model         = None
            ParticleSysBone SmokeSmall03 SmokeBuildingMediumRubble
        End

        ModelConditionState  = POST_COLLAPSE
            Model         = None
            ParticleSysBone SmokeSmall03 SmokeBuildingMediumRubble
        End
            
  End

  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorCatacombs
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End

 
  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CHUNK_VENDOR MADE_OF_STONE
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName          = GondorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
;  Behavior            = DestroyDie ModuleTag_07
    ;nothing
;  End

    Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
        DestructionDelay  = 5000
    End
      
    Behavior                  = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureSmallCollapse
    End
    
;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 36.8
  GeometryMinorRadius   = 47.2
  GeometryHeight        = 36.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------

;Gondor HseHeal
Object GondorHseHeal
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

;  Draw                = W3DModelDraw ModuleTag_01
;    OkToChangeModelColor = Yes
;
;    DefaultConditionState
;      Model           = GBHseHeal
;    End
;  End
  
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = GBHseHeal
    End
    ;--damaged building
      ModelConditionState  = DESTROYED_FRONT
      Model         = GBHseHeal_D
        ParticleSysBone FireSmall01 FireBuildingSmall
        ParticleSysBone FireSmall02 FireBuildingSmall
        ParticleSysBone FireSmall03 FireBuildingSmall
        ParticleSysBone FireSmall04 FireBuildingSmall
        ParticleSysBone FireMedium01 FireBuildingMedium
        ParticleSysBone FireMedium02 FireBuildingMedium
         ParticleSysBone FireLarge01 FireBuildingLarge
         ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("GBHseHeal_01")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         = GBHseHeal_D
        ParticleSysBone FireSmall01 FireBuildingSmall
        ParticleSysBone FireSmall02 FireBuildingSmall
        ParticleSysBone FireSmall03 FireBuildingSmall
        ParticleSysBone FireSmall04 FireBuildingSmall
        ParticleSysBone FireMedium01 FireBuildingMedium
        ParticleSysBone FireMedium02 FireBuildingMedium
        ParticleSysBone FireLarge01 FireBuildingLarge
        ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("GBHseHeal_02")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = GBHseHeal_D
        ParticleSysBone FireSmall01 FireBuildingSmall
        ParticleSysBone FireSmall02 FireBuildingSmall
        ParticleSysBone FireSmall03 FireBuildingSmall
        ParticleSysBone FireSmall04 FireBuildingSmall
        ParticleSysBone FireMedium01 FireBuildingMedium
        ParticleSysBone FireMedium02 FireBuildingMedium
        ParticleSysBone FireLarge01 FireBuildingLarge
        ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("GBHseHeal_03")
      EndScript
    End

    ModelConditionState  = DESTROYED_LEFT
      Model         = GBHseHeal_D
        ParticleSysBone FireSmall01 FireBuildingSmall
        ParticleSysBone FireSmall02 FireBuildingSmall
        ParticleSysBone FireSmall03 FireBuildingSmall
        ParticleSysBone FireSmall04 FireBuildingSmall
        ParticleSysBone FireMedium01 FireBuildingMedium
        ParticleSysBone FireMedium02 FireBuildingMedium
        ParticleSysBone FireLarge01 FireBuildingLarge
        ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("GBHseHeal_04")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = GBHseHeal_D
        ParticleSysBone FireSmall01 FireBuildingSmall
        ParticleSysBone FireSmall02 FireBuildingSmall
        ParticleSysBone FireSmall03 FireBuildingSmall
        ParticleSysBone FireSmall04 FireBuildingSmall
        ParticleSysBone FireMedium01 FireBuildingMedium
        ParticleSysBone FireMedium02 FireBuildingMedium
        ParticleSysBone FireLarge01 FireBuildingLarge
        ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = GBHseHeal_D
        ParticleSysBone FireSmall01 FireBuildingSmall
        ParticleSysBone FireSmall02 FireBuildingSmall
        ParticleSysBone FireSmall03 FireBuildingSmall
        ParticleSysBone FireSmall04 FireBuildingSmall
        ParticleSysBone FireMedium01 FireBuildingMedium
        ParticleSysBone FireMedium02 FireBuildingMedium
        ParticleSysBone FireLarge01 FireBuildingLarge
        ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = RUBBLE
      Model         = GBHseHeal_D
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("GBHseHeal_01")
        CurDrawableHideSubObject("GBHseHeal_02")
        CurDrawableHideSubObject("GBHseHeal_03")
        CurDrawableHideSubObject("GBHseHeal_04")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End  

End


  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorHseHeal
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName          = GondorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
    
    DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
    
    DamageCreationList = OCL_GBHseHeal_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList = OCL_GBHseHeal_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList = OCL_GBHseHeal_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList = OCL_GBHseHeal_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
    
   
  End
 

  Behavior                  = StructureCollapseUpdate ModuleTag_06
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
    DestroyObjectWhenDone    = Yes
    CollapseHeight            = 76
  End

  

   Behavior                  = BuildingBehavior BuildingModuleTag
    NightWindowName         = WINDOW_N01
    FireWindowName          = WINDOW_F01
    GlowWindowName            = WINDOW_G01
    FireName                = FIRE01
    FireName                = FIRE02
  End


;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 33.6
  GeometryMinorRadius   = 31.2
  GeometryHeight        = 32.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------------------
;Gondor Great Keep 
Object GondorGreatKeep

    SelectPortrait = BPGKeep
 
    ; *** ART Parameters ***
    Draw = W3DScriptedModelDraw ModuleTag_Draw
    
        ExtraPublicBone = ARROW_01
        ExtraPublicBone = ARROW_02
        ExtraPublicBone = ARROW_03
        ExtraPublicBone = ARROW_04
        ExtraPublicBone = ARROW_05
        ExtraPublicBone = ARROW_06
        ExtraPublicBone = ARROW_07
        ExtraPublicBone = ARROW_08
        ExtraPublicBone = ARROW_09
        ExtraPublicBone = ARROW_10
        ExtraPublicBone = ARROW_11
        ExtraPublicBone = ARROW_12
    
        OkToChangeModelColor  = Yes
        UseStandardModelNames = Yes
        DefaultModelConditionState
        Model = GBWTower
        End    
    End
 
    ; ***DESIGN parameters ***
    DisplayName         = OBJECT:GBKeep
    Side                = Gondor
    EditorSorting       = STRUCTURE
    ThreatLevel = 1.0
    CommandSet            = BattleTowerCommandSet
;     CommandSet            = GondorCastleGreatKeepCommandSet
     
    BuildCost           = 1
    BuildTime           = 5.0           ; in seconds
    VisionRange         = 160.0          ; Shroud clearing distance
    ShroudClearingRange = 160


    ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone


    ; *** ENGINEERING Parameters ***

    RadarPriority       = STRUCTURE
    KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP CAN_ATTACK MADE_OF_STONE    ; GARRISON GARRISONABLE_UNTIL_DESTROYED

    Behavior = ProductionUpdate ProductionUpdateModuleTag
        ; nothing, but is required if we have any Object-level Upgrades!
    End

    Behavior = GettingBuiltBehavior ModuleTag_04
        WorkerName    = GondorWorkerNoSelect
    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
    End 
    

    Behavior = ManTheWallsSpecialPower ModuleTag_ManTheWalls
        SpecialPowerTemplate = ManTheWallsSpecialPower
    End

    Behavior = OCLSpecialPower ModuleTag_RangerAmbush
        SpecialPowerTemplate = RangerAmbushSpecialPower
        OCL                  = OCL_RangerAmbush
        CreateLocation       = CREATE_AT_LOCATION
    End
    
    Behavior = OCLSpecialPower ModuleTag_OsgiliathVeterans
        SpecialPowerTemplate = OsgiliathVeteransSpecialPower
        OCL                  = OCL_OsgiliathVeterans
        CreateLocation       = CREATE_AT_LOCATION
    End
    
    Behavior = OCLSpecialPower ModuleTag_PrinceOfDolArmoth
        SpecialPowerTemplate = PrinceOfDolArmothSpecialPower
        OCL                  = OCL_PrinceOfDolArmoth
        CreateLocation       = CREATE_AT_EDGE_NEAR_TARGET_AND_MOVE_TO_LOCATION
    End
    

    Body = StructureBody ModuleTag_05
        MaxHealth         = 1500.0
    End
   
    Behavior                  = BuildingBehavior BuildingModuleTag
        ; NightWindowName         = WINDOW_N01
        ; FireWindowName         = WINDOW_F01
        ; GlowWindowName        = WINDOW_G01
        ; FireName            = FIRE01
    End

;    Behavior            = HordeGarrisonContain ModuleTag_hordeGarrison
;        ObjectStatusOfContained    = UNSELECTABLE CAN_ATTACK
;        ContainMax              = 4
;        MaxHordeCapacity        = 4
;        DamagePercentToUnits    = 0%
;        PassengerFilter            = ANY +INFANTRY +HORDE
;        AllowEnemiesInside      = No
;        AllowNeutralInside      = Yes
;        NumberOfExitPaths       = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
;        PassengerBonePrefix     = PassengerBone:ARROW_ KindOf:INFANTRY
;        ;PassengersTestCollisionHeight = 80
;        ;Slots                         = 1
;        ;EnterSound                     = GarrisonEnter
;        ;ExitSound                      = GarrisonExit
;        ;ExitDelay               = 250
;        ;GoAggressiveOnExit      = Yes ; AI Will tell people to set their mood to Aggressive on exiting
;        ;ForceOrientationContainer = No  ; otherwise contained units can't orient themselves towards their targets...
;    End 

    Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
        DestructionDelay  = 5000
    End

    Behavior = RefundDie ModuleTag_refund
        UpgradeRequired = Upgrade_MarketplaceUpgradeDefiance
        BuildingRequired = ANY +GondorMarketPlace
        RefundPercent = 50%
    End



    Behavior                  = StructureCollapseUpdate ModuleTag_06
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureMediumCollapse
    End


    Geometry              = BOX
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 150.0
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
    BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------------------
;Gondor White Tower ; aka MinisTop4... but this is the real GAME version... this is the KEEP of MinasTirith
Object GondorWhiteTower
 
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
  OkToChangeModelColor = Yes
  
    DefaultModelConditionState
      Model = GBMTop4
    End
    
    ;--damaged building
        ModelConditionState  = DAMAGED
            Model         = GBMtop4_D1
        End
        AnimationState = DAMAGED
            EnteringStateFX    = FX_BuildingDamaged
        End
        
        
        ModelConditionState  = REALLYDAMAGED
            Model         = GBMTop4_D2
            ParticleSysBone gbmtop4d2_01 FireSmoke FollowBone:Yes
            ParticleSysBone gbmtop4d2_02 FireSmoke FollowBone:Yes
            ParticleSysBone gbmtop4d2_03 SmokeBuildingLarge FollowBone:Yes
            ParticleSysBone gbmtop4d2_04 FireSmoke FollowBone:Yes
             ParticleSysBone gbmtop4d2_05 SmokeBuildingLarge FollowBone:Yes
             
            ParticleSysBone gbmtop4d2_06 FireSmoke FollowBone:Yes
            ParticleSysBone gbmtop4d2_07 FireSmoke FollowBone:Yes
            ParticleSysBone gbmtop4d2_08 SmokeBuildingLarge FollowBone:Yes
            ParticleSysBone gbmtop4d2_09 FireSmoke FollowBone:Yes
            ParticleSysBone gbmtop4d2_10 SmokeBuildingLarge FollowBone:Yes
            
            ParticleSysBone gbmtop4d2_11 FireSmoke FollowBone:Yes
            ParticleSysBone gbmtop4d2_12 FireSmoke FollowBone:Yes
            ParticleSysBone gbmtop4d2_13 SmokeBuildingLarge FollowBone:Yes
            ParticleSysBone gbmtop4d2_14 FireSmoke FollowBone:Yes
            ParticleSysBone gbmtop4d2_15 SmokeBuildingLarge FollowBone:Yes
        
            ParticleSysBone gbmtop4d2_16 FireSmoke FollowBone:Yes
            ParticleSysBone gbmtop4d2_17 FireSmoke FollowBone:Yes
            ParticleSysBone gbmtop4d2_18 SmokeBuildingLarge FollowBone:Yes
            ParticleSysBone gbmtop4d2_19 FireSmoke FollowBone:Yes
            ParticleSysBone gbmtop4d2_20 SmokeBuildingLarge FollowBone:Yes
            
        End
        AnimationState = REALLYDAMAGED
            Animation = reallydamaged
                AnimationName = GBMtop4_D2.GBMtop4_D2
                AnimationMode = ONCE
                AnimationBlendTime = 0
                AnimationSpeedFactorRange = 0.4 0.4
            End
            EnteringStateFX    = FX_BuildingReallyDamaged
        End


        ModelConditionState  = RUBBLE
            Model         = GBMTop4_D3
            ParticleSysBone none  SmokeBuildingLarge
            ParticleSysBone gbmtop4d3_01 FireSmoke FollowBone:Yes
            ParticleSysBone gbmtop4d3_02 FireSmoke FollowBone:Yes
            ParticleSysBone gbmtop4d3_03 SmokeBuildingLarge FollowBone:Yes
            ParticleSysBone gbmtop4d3_04 FireSmoke FollowBone:Yes
             ParticleSysBone gbmtop4d3_05 SmokeBuildingLarge FollowBone:Yes
                             
            ParticleSysBone gbmtop4d3_06 FireSmoke FollowBone:Yes
            ParticleSysBone gbmtop4d3_07 FireSmoke FollowBone:Yes
            ParticleSysBone gbmtop4d3_08 SmokeBuildingLarge FollowBone:Yes
            ParticleSysBone gbmtop4d3_09 FireSmoke FollowBone:Yes
            ParticleSysBone gbmtop4d3_10 SmokeBuildingLarge FollowBone:Yes
                            
            ParticleSysBone gbmtop4d3_11 FireSmoke FollowBone:Yes
            ParticleSysBone gbmtop4d3_12 SmokeBuildingLarge FollowBone:Yes
            ParticleSysBone gbmtop4d3_13 FireSmoke FollowBone:Yes
            ParticleSysBone gbmtop4d3_14 SmokeBuildingLarge FollowBone:Yes
        End
        AnimationState = RUBBLE
            Animation = rubble
                AnimationName = GBMTop4_D3.GBMTop4_D3
                AnimationMode = ONCE
                AnimationBlendTime = 0
                AnimationSpeedFactorRange = 0.4 0.4
            End
        End

        ModelConditionState  = POST_RUBBLE
            Model         = None
        End

        ModelConditionState  = POST_COLLAPSE
            Model         = None
        End
        
    End
        
 
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWhiteTower
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 2500
  BuildTime           = 60.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160
  
  CommandSet          = GondorWhiteTowerCommandSet


    ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone


    ; *** ENGINEERING Parameters ***
    RadarPriority       = STRUCTURE
    KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP 
 
    Behavior            = GettingBuiltBehavior ModuleTag_04
        WorkerName          = GondorWorkerNoSelect
    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
    End 

    Body                = StructureBody ModuleTag_05
        MaxHealth       = 5000.0
        MaxHealthDamaged   = 4000.0
        MaxHealthReallyDamaged   = 3000.0
    End
 
    ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
    ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
    ; buildings automatically stick around because GarrisonContain has it's own DieModule
    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End

    ;----------special powers------------------------
    ;AE: add your special power modules and behaviors, here 


    Geometry              = BOX
    GeometryMajorRadius   = 25.6
    GeometryMinorRadius   = 35.2
    GeometryHeight        = 31.2
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
    BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object GondorSilverTree

  ; *** ART Parameters ***  
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    ExtraPublicBone = Ramp01
    ExtraPublicBone = Ramp02
    ExtraPublicBone = Ramp03
    WallBoundsMesh  = P1
    ;;;;EmbedPortal = ramp Ramp  ;;; not yet supported in W3DScriptedModelDraw 
    DefaultModelConditionState
      Model = GBFSTower
    End
  End

  ; *** AUDIO Parameters ***

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:GondorSilverTree
  Side = Gondor
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  ArmorSet
    Conditions        = None
    Armor             = CitadelArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf            = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE ;SELECTABLE;@1
  RadarPriority        = STRUCTURE
  Body              = ActiveBody ModuleTag_02
    MaxHealth       = 2000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
  End
  
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 36.0
  GeometryMinorRadius   = 36.0
  GeometryHeight        = 88.0
  GeometryIsSmall       = No
  GeometryRotationAnchorOffset = X:372.9936 Y:0.0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object GondorBaseTower

  ; *** ART Parameters ***  
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    ExtraPublicBone = Ramp01
    ExtraPublicBone = Ramp02
    ExtraPublicBone = Ramp03
    WallBoundsMesh  = P1
    ;;;;EmbedPortal = ramp Ramp  ;;; not yet supported in W3DScriptedModelDraw 
    DefaultModelConditionState
      Model = GBFSTower
    End
  End


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GondorBaseTower
  Side = Gondor
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE ;SELECTABLE;@1 
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_02
    MaxHealth       = 2000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
  End
  
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 36.0
  GeometryMinorRadius   = 36.0
  GeometryHeight        = 88.0
  GeometryIsSmall       = No
  GeometryRotationAnchorOffset = X:372.9936 Y:0.0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------------------
Object GondorBaseWall

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    WallBoundsMesh = P1
    DefaultModelConditionState
      Model = GBFSWall
    End
;    WallBoundsMesh = P1
;    RampMesh1 = P2
;    RampMesh2 = P2
;    RampMesh3 = P3
  End


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GondorBaseWall
  Side = Gondor
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE SELECTABLE 
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_02
    MaxHealth       = 3300.0 ; 4000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
  End
  
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 36.0
  GeometryMinorRadius   = 72.0
  GeometryHeight        = 36.0
  GeometryIsSmall       = No
  GeometryRotationAnchorOffset = X:372.8264 Y:0.0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------------------
Object GondorBaseWallTreb

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    WallBoundsMesh = P1
    RampMesh1      = P2
    DefaultModelConditionState
      Model = GBFSWallT
    End
  End

  
  ; *** AUDIO Parameters ***

    ;SoundOnDamaged        = BuildingLightDamageStone
    ;SoundOnReallyDamaged    = BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GondorBaseWallTreb
  Side = Gondor
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE SELECTABLE 
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_02
    MaxHealth       = 2000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
  End
  
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 36.0
  GeometryMinorRadius   = 28.0
  GeometryHeight        = 44.0
  GeometryIsSmall       = No
  GeometryRotationAnchorOffset = X:411.2648 Y:0.0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------------------
Object GondorGate

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    WallBoundsMesh = P1

    DefaultModelConditionState   
      Model = GBFSGate
    End
    AnimationState        = NONE
      Animation           = GBFSGate
        AnimationName     = GBFSGate.GBFSGate
        AnimationMode     = LOOP
      End
    End
  End
  

  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GondorGate
  Side = Gondor
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  BuildTime           = 30.0           ; in seconds

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE ;SELECTABLE;@1
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_02
    MaxHealth       = 2000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
  End
  
  
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 36.0
  GeometryMinorRadius   = 104.0
  GeometryHeight        = 36.0
  GeometryIsSmall       = No
  GeometryRotationAnchorOffset = X:341.568 Y:0.0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Gondor Inner Wall
Object GondorInnerWall
 
  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBWalls
    End
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWall
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End


  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect

;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName          = GondorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 28.0
  GeometryMinorRadius   = 20.0
  GeometryHeight        = 24.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------------------
Object GBMGateDoor

SelectPortrait = BPGondorCastleGate

  ; *** ART Parameters ***

    BuildTime           = 180.0           ; in seconds
        BuildCost           = 1000

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = GBCASTGATE
    End

    ; Reinforced constructed--------------------------------------------------------------
    ; Need this so that repairing a reinforced one correctly plays the geting built anim.
    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED USER_1
        Model             = GBCASTGATE_UA
        ParticleSysBone   = DUSTBONE BuildingContructDust
    End
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED USER_1
        StateName                = STATE_None
            Animation           = GBCASTGATE_UA
                AnimationName   = GBCASTGATE_UA.GBCASTGATE_UA
                AnimationMode   = MANUAL
            End
        Flags                    = START_FRAME_FIRST
    End

    ; Constructed---------------------------------------------------------------------------------------
    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED
        Model             = GBCASTGATE_A
        ParticleSysBone   = DUSTBONE BuildingContructDust
    End
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED 
        StateName                = STATE_None
            Animation           = GBCASTGATE_A
                AnimationName   = GBCASTGATE_A.GBCASTGATE_A
                AnimationMode   = MANUAL
            End
        Flags                    = START_FRAME_FIRST
    End
    
    ; Reinforced destoyed when being constructed--------------------------------------------------------------
    ModelConditionState   = DESTROYED_WHILST_BEING_CONSTRUCTED USER_1
        Model              = GBCASTGATE_UA
        ParticleSysBone   = DUSTBONE BuildingContructDust
    End  
    AnimationState    = DESTROYED_WHILST_BEING_CONSTRUCTED USER_1
        StateName        = STATE_DetroyedConstructing
        EnteringStateFX    = FX_GondorCastleGateDestroy
        Animation
            AnimationName        = GBCASTGATE_UA.GBCASTGATE_UA
            AnimationMode        = ONCE_BACKWARDS
            AnimationBlendTime    = 90    ; 3 seconds * 30 frames
        End
        ; Specifically no start last frame flag here.
        Flags = START_FRAME_FIRST
    End
    
    ; Destoyed when being constructed--------------------------------------------------------------
    ModelConditionState   = DESTROYED_WHILST_BEING_CONSTRUCTED
        Model              = GBCASTGATE_A
        ParticleSysBone   = DUSTBONE BuildingContructDust
    End  
    AnimationState    = DESTROYED_WHILST_BEING_CONSTRUCTED
        StateName        = STATE_DetroyedConstructing
        EnteringStateFX    = FX_GondorCastleGateDestroy
        Animation
            AnimationName        = GBCASTGATE_A.GBCASTGATE_A
            AnimationMode        = ONCE_BACKWARDS
            AnimationBlendTime    = 90    ; 3 seconds * 30 frames
        End
        ; Specifically no start last frame flag here.
        Flags = START_FRAME_FIRST
    End

    ; Reinforced rubble open-------------------------------------------------------------------------
    ModelConditionState  = RUBBLE DOOR_1_OPENING USER_1
        Model         = GBCASTGATE_UD4
    End
    TransitionState = TRANS_IntoRubbleU4
        Animation = D3
            AnimationName        = GBCASTGATE_UD4.GBCASTGATE_UD4
            AnimationMode        = ONCE
            AnimationBlendTime = 0
        End
        ParticleSysBone NONE FX_GondorCastleGateDestroy
    End
    AnimationState = RUBBLE DOOR_1_OPENING USER_1
        Flags = START_FRAME_LAST
        StateName = STATE_Rubble
        Animation                =    Death
            AnimationName        =    GBCASTGATE_UD4.GBCASTGATE_UD4
            AnimationMode        =    ONCE
        End
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_None" or Prev == "STATE_Open" or Prev == "STATE_Closed" or Prev == "TRANS_Closed_To_Open" or Prev == "TRANS_Open_To_Closed"
            then
                ; Only play the rubble anim if we havn't come from another rubble.
                CurDrawableSetTransitionAnimState("TRANS_IntoRubbleU4")
            end
        EndScript
    End      

    ; Rubble open-------------------------------------------------------------------------
    ModelConditionState  = RUBBLE DOOR_1_OPENING
        Model         = GBCASTGATE_D4  
    End
    TransitionState = TRANS_IntoRubble4
        Animation = D3
            AnimationName        = GBCASTGATE_D4.GBCASTGATE_D4
            AnimationMode        = ONCE
            AnimationBlendTime = 0
        End
        ParticleSysBone NONE FX_GondorCastleGateDestroy
    End
    AnimationState = RUBBLE DOOR_1_OPENING
        Flags = START_FRAME_LAST
        StateName = STATE_Rubble
        Animation                =    Death
            AnimationName        =    GBCASTGATE_D4.GBCASTGATE_D4
            AnimationMode        =    ONCE
        End
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_None" or Prev == "STATE_Open" or Prev == "STATE_Closed" or Prev == "TRANS_Closed_To_Open" or Prev == "TRANS_Open_To_Closed"
            then
                ; Only play the rubble anim if we havn't come from another rubble.
                CurDrawableSetTransitionAnimState("TRANS_IntoRubble4")
            end
        EndScript
    End      

    ; Reinforced rubble closed-------------------------------------------------------------------------
    ModelConditionState  = RUBBLE DOOR_1_CLOSING USER_1
        Model         = GBCASTGATE_UD3
    End
    TransitionState = TRANS_IntoRubbleU3
        Animation = D4
            AnimationName        = GBCASTGATE_UD3.GBCASTGATE_UD3
            AnimationMode        = ONCE
            AnimationBlendTime    = 0
        End
        ParticleSysBone NONE FX_GondorCastleGateDestroy
    End
    AnimationState = RUBBLE DOOR_1_CLOSING USER_1
        Flags = START_FRAME_LAST
        StateName = STATE_Rubble
        Animation                =    Death
            AnimationName        =    GBCASTGATE_UD3.GBCASTGATE_UD3
            AnimationMode        =    ONCE
        End
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_None" or Prev == "STATE_Open" or Prev == "STATE_Closed" or Prev == "TRANS_Closed_To_Open" or Prev == "TRANS_Open_To_Closed"
            then
                ; Only play the rubble anim if we havn't come from another rubble.
                CurDrawableSetTransitionAnimState("TRANS_IntoRubbleU3")
            end
        EndScript
    End      

    ; Rubble open-------------------------------------------------------------------------
    ModelConditionState  = RUBBLE DOOR_1_CLOSING
        Model         = GBCASTGATE_D3
    End
    TransitionState = TRANS_IntoRubble3
        Animation = D4
            AnimationName        = GBCASTGATE_D3.GBCASTGATE_D3
            AnimationMode        = ONCE
            AnimationBlendTime = 0
        End
        ParticleSysBone NONE FX_GondorCastleGateDestroy
    End
    AnimationState = RUBBLE DOOR_1_CLOSING
        Flags = START_FRAME_LAST
        StateName = STATE_Rubble
        Animation                =    Death
            AnimationName        =    GBCASTGATE_D3.GBCASTGATE_D3
            AnimationMode        =    ONCE
        End
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_None" or Prev == "STATE_Open" or Prev == "STATE_Closed" or Prev == "TRANS_Closed_To_Open" or Prev == "TRANS_Open_To_Closed"
            then
                ; Only play the rubble anim if we havn't come from another rubble.
                CurDrawableSetTransitionAnimState("TRANS_IntoRubble3")
            end
        EndScript
    End      
    
    AnimationState = DOOR_1_OPENING
        StateName = STATE_Open   
        Animation = Open 
            AnimationName    =    GBCASTGATE.GBCASTGATE
            AnimationMode    =    ONCE 
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Closed" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
        EndScript
    End
    TransitionState = TRANS_Closed_To_Open
        Animation = Open 
            AnimationName    =    GBCASTGATE.GBCASTGATE
            AnimationMode    =    ONCE 
        End
    End
        
    AnimationState = DOOR_1_CLOSING 
        StateName = STATE_Closed 
        Animation = Close 
            AnimationName    =    GBCASTGATE.GBCASTGATE
            AnimationMode    =    ONCE_BACKWARDS 
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
        BeginScript
            
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
        EndScript
    End
    TransitionState = TRANS_Open_To_Closed
        Animation = Open 
            AnimationName    =    GBCASTGATE.GBCASTGATE
            AnimationMode    =    ONCE_BACKWARDS 
        End
        Flags = START_FRAME_LAST
    End
    
    ModelConditionState = USER_1
        Model = GBCastGate_U
    End

  End


  ; *** AUDIO Parameters ***

    VoiceSelect        = GateSelect

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone

    VoiceSelectUnderConstruction    = BuildingGoodVoiceSelectUnderConstruction

    UnitSpecificSounds
        UnderConstruction        = BuildingConstructionLoop  ; Built first time
        ; UnderRepairFromDamage    = NoSound                    ; Repaired No animation on the building, so don't bother playing sound
        UnderRepairFromRubble    = BuildingConstructionLoop    ; Repaired from completely destroyed (not used???)
    End


  ; ***DESIGN parameters ***

    DisplayName                = OBJECT:GBMgatedoor
    Side                    = Gondor
    EditorSorting            = STRUCTURE
    ThreatLevel                = 1.0
    KeepSelectableWhenDead    = Yes
    VisionRange                = 400.0          ; Shroud clearing distance

    ArmorSet
        Conditions        = None
        Armor             = CastleGateArmor
        DamageFX          = GateDamageFX
    End
    ;ArmorSet
    ;    Conditions        = UNBESIEGEABLE
    ;    Armor             = CastleGateUnbesiegeableArmor
    ;    DamageFX          = None
    ;End

    CommandSet = CastleGateCommandSet


    ; *** ENGINEERING Parameters ***  
    KindOf                = STRUCTURE IMMOBILE SELECTABLE BLOCKING_GATE
    RadarPriority = STRUCTURE
    Body                  = ActiveBody ModuleTag_02
        MaxHealth       = M_GONDOR_CASTLE_DOOR_HEALTH            
    End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: MinisTirithGateDie Animation:GBMgatedoorSKL.GBMgatedoorA3 Frames: 1 
    End

    Behavior = TransitionDamageFX ModleTag_hideBustedDoors
        PristineShowSubObject        RBCASTDRR RBCASTDRL
        PristineHideSubObject        RBCASTDRR_D1 RBCASTDRR_D2 RBCASTDRL_D1 RBCASTDRL_D2
        DamagedShowSubObject        RBCASTDRR_D1 RBCASTDRL_D1
        DamagedHideSubObject        RBCASTDRR_D2 RBCASTDRL_D2 RBCASTDRR RBCASTDRL
        ReallyDamagedShowSubObject    RBCASTDRR_D2 RBCASTDRL_D2
        ReallyDamagedHideSubObject  RBCASTDRR_D1  RBCASTDRL_D1 RBCASTDRR RBCASTDRL
        DamagedFXList1 = Loc: X:0 Y:0 Z:0            FXList:FX_BasicSevereScreenShake
         ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0        FXList:FX_BasicSevereScreenShake
         RubbleFXList1 = Loc: X:0 Y:0 Z:0            FXList:FX_HelmsDeepGateRubble
    End

    Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
        ResetTimeInMilliseconds = 12200 ; important! this must be longer than the gates animation, ir it will twitch
        OpenByDefault = Yes
        PercentOpenForPathing = 50
        SoundOpeningGateLoop = GateOpenStart
        SoundClosingGateLoop = GateCloseStart
        SoundFinishedOpeningGate = GateOpenEnd
        SoundFinishedClosingGate = GateCloseEnd
        TimeBeforePlayingOpenSound = 9500
        TimeBeforePlayingClosedSound = 9500

        ;Proxy = Munkee
    End


    Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
        SelfBuildingLoop = BuildingConstructionLoop            ; Only played if we DON'T spawn a worker
        SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
        SelfRepairFromRubbleLoop  = BuildingConstructionLoop
        SpawnTimer = -1.0                                    ; Negative means no 'autoheal'
        
        RebuildTimeSeconds = 120 ;30
        
    End



    Behavior = AttributeModifierUpgrade ModuleTag_Reinforced
        TriggeredBy                = Upgrade_ReinforcedGate
        AttributeModifier        = ReinforcedGate_Bonus
        CustomAnimAndDuration    = AnimState:USER_1 AnimTime:0    ;  - should define special upgrade model condition.
    End
	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced1
        TriggeredBy                = Upgrade_ReinforcedGateUpgraded
        AttributeModifier        = ReinforcedGate_Bonus
        CustomAnimAndDuration    = AnimState:USER_1 AnimTime:0    ;  - should define special upgrade model condition.
    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
    End 

    Geometry              = BOX
    GeometryMajorRadius   = 16.0
    GeometryMinorRadius   = 72.0
    GeometryHeight        = 56.0
    GeometryName          = Closed
    GeometryIsSmall       = No
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 21.0
    GeometryMinorRadius   = 2.0
    GeometryHeight        = 56.0    
    GeometryOffset          = X:10 Y:56 Z:0
    GeometryName          = OpenLeft
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 21.0
    GeometryMinorRadius   = 2.0
    GeometryHeight        = 56.0    
    GeometryOffset          = X:10 Y:-56 Z:0
    GeometryName          = OpenRight
    
    GeometryContactPoint = X:25 Y:-56 Z:0 Ram
    GeometryContactPoint = X:12 Y:-56 Z:56            ; do
    GeometryContactPoint = X:0  Y:-56 Z:0            ; kindly
    GeometryContactPoint = X:0  Y:-25 Z:56            ; note the
    GeometryContactPoint = X:0  Y:  0 Z:0 Ram        ; butterfly
    GeometryContactPoint = X:0  Y: 25 Z:56            ; symmetry
    GeometryContactPoint = X:0  Y: 56 Z:0            ; please
    GeometryContactPoint = X:12 Y: 56 Z:56            ; ta
    GeometryContactPoint = X:25 Y: 56 Z:0 Ram
    
    
    Shadow                = SHADOW_VOLUME
End

;--------------------------------------------------------------------------------------

Object gateProxy

    ;ART---------------------
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        OkToChangeModelColor  = Yes
        UseStandardModelNames = Yes
        DefaultModelConditionState
            Model = None
        End
    End

    ;DESIGN------------------
    DisplayName      = OBJECT:GBMgatedoor
    Side = Civilian
    EditorSorting   = SYSTEM

    VisionRange         = 400.0          ; should match proxy
    CommandSet = CastleGateCommandSet

    ;ENGINEERING-------------
    KindOf                = IMMOBILE UNATTACKABLE SELECTABLE INERT INERT_SHROUD_REVEALER
    Behavior = GateProxyBehavior ModuleTag_GATE
    End
    
    Geometry              = BOX
    GeometryMajorRadius   = 0.0
    GeometryMinorRadius   = 0.0
    GeometryHeight        = 36.0 ;should be close or same as the gate to which this is proxy
    GeometryIsSmall       = Yes

    
End

;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;
;  Ents
;
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------

;Ent Building Foundation -- the area where faction Ent buildings can be built on
Object EntBuildingFoundation
 
  ; *** ART Parameters ***

  
    Draw = W3DScriptedModelDraw ModuleTag_Draw2
        DefaultModelConditionState
            Model = OBBFoundationX
        End
        ModelConditionState = WORLD_BUILDER
              Model = RBSizeTemplate
          End
        
    End
  Draw = W3DFloorDraw ModuleTag_Draw
      ModelName = GBFoundationX
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:EntBuildingFoundation
  Side                = Rohan ; temporary... probably needs it's own faactions
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  CommandSet = EntFoundationCommandSet

  ; *** AUDIO Parameters ***

    VoiceSelect            = Gui_PlotSelect


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY
 
  Behavior            = FoundationAIUpdate ModuleTag_foundationAI
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = ImmortalBody ModuleTag_05
    MaxHealth         = 15000.0
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 24.0
  GeometryHeight        = 0.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion        = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;
;  Elves
;
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------

;Elven Building Foundation -- the area where faction elven buildings can be built on
Object ElvenBuildingFoundation
   
   SelectPortrait = BPECamp_Plot
  ; *** ART Parameters ***

  
    Draw = W3DScriptedModelDraw ModuleTag_Draw2
        DefaultModelConditionState
            Model = OBBFoundationX
        End
        ModelConditionState = WORLD_BUILDER
              Model = RBSizeTemplate
          End

    End
  Draw = W3DFloorDraw ModuleTag_Draw    
      ModelName = EBFoundationX
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:ElvenBuildingFoundation
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  CommandSet = ElvenFoundationCommandSet

  ; *** AUDIO Parameters ***

    VoiceSelect        = Gui_PlotSelect


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY
 
  Behavior            = FoundationAIUpdate ModuleTag_foundationAI
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = ImmortalBody ModuleTag_05
    MaxHealth         = 15000.0
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 24.0
  GeometryHeight        = 0.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion        = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------

;Elven Farm
Object ElvenFarm
 
   ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
  DefaultModelConditionState
      Model = GBFarm_SKN
    End
    
    IdleAnimationState
        Animation = IDLE
            AnimationName        =    GBFarm_SKL.GBFarm_IDLA
            AnimationMode            =    ONCE    
            AnimationBlendTime = 0
        End        
    End    
    
    ;-- building being constructed
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = GBFarm_A
;        ParticleSysBone      = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           = GBFarm_A
        AnimationName     = GBFarm_A.GBFarm_A
        AnimationMode     = MANUAL
      End
      Flags                  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = GBFarm_A
        ParticleSysBone   = DUSTBONE BuildingContructDust
    End;
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Animation           = GBFarm_A
        AnimationName     = GBFarm_A.GBFarm_A
        AnimationMode     = MANUAL
      End
    Flags                  = START_FRAME_FIRST
    BeginScript
        CurDrawablePlaySound("GondorBarracksBeginConstruction")
    EndScript
    End
       
    
     ;--damaged building
      ModelConditionState  = DESTROYED_FRONT
      Model         = GBFarm_D2
         ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("GBFarm_01")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         = GBFarm_D2
        ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("GBFarm_02")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = GBFarm_D2
        ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("GBFarm_03")
      EndScript
    End

    ModelConditionState  = DESTROYED_LEFT
      Model         = GBFarm_D2
        ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("GBFarm_04")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = GBFarm_D1
        ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End
    AnimationState = DAMAGED
    EnteringStateFX    = FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = GBFarm_D2
        ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End
    AnimationState = REALLYDAMAGED
    EnteringStateFX    = FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = GBFarm_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("GBFarm_01")
        CurDrawableHideSubObject("GBFarm_02")
        CurDrawableHideSubObject("GBFarm_03")
        CurDrawableHideSubObject("GBFarm_04")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End

End


  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:ElvenFarm
  Side                = Gondor ; temporary... probably needs it's own faction
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 300
  BuildTime           = 15.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End


; CommandSet = ElvenFarmCommandSet
  CommandSet = SellableCommandSet


  ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageWood
    SoundOnReallyDamaged        = BuildingHeavyDamageWood

    VoiceSelectUnderConstruction    = BuildingGoodVoiceSelectUnderConstruction

    UnitSpecificSounds
        UnderConstruction        = BuildingConstructionLoop  ; Built first time
        ; UnderRepairFromDamage    = NoSound                    ; Repaired No animation on the building, so don't bother playing sound
        UnderRepairFromRubble    = BuildingConstructionLoop    ; Repaired from completely destroyed (not used???)
    End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION  
                             ;MP_COUNT_FOR_VICTORY;removed so econ plots will not keep zombie games going

  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName          = GondorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
    
   DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
    
    DamageCreationList = OCL_GBFarm_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList = OCL_GBFarm_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList = OCL_GBFarm_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList = OCL_GBFarm_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
  End

  Behavior = AutoDepositUpdate AutoDepositModuleTag
    DepositTiming       = 2000   ; in milliseconds
    DepositAmount       = 20   ; cash amount to deposit every DepositTiming
    InitialCaptureBonus = 0  ; no initial bonus
  End
  
  
   ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  
 Behavior = DestroyDie ModuleTag_IWantRubble
 End

  Behavior                  = StructureCollapseUpdate ModuleTag_07
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse

  End

  
  
  ;Behavior            = DestroyDie ModuleTag_08a
    ;nothing
  ;End
  
  Behavior                  = BuildingBehavior BuildingModuleTag
    NightWindowName         = WINDOW_N01
    FireWindowName          = WINDOW_F01
    GlowWindowName            = WINDOW_G01
;    FireName                = FIRE01
  End


;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 43.2
  GeometryMinorRadius   = 32.8
  GeometryHeight        = 18.4
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End


;------------------------------------------------------------------------------
Object Tower_FromZeroHourThatCanTopple

    ; *** ART Parameters ***
    
    
    
    Draw = W3DScriptedModelDraw ModuleTag_01
        UseStandardModelNames = Yes
        OkToChangeModelColor = Yes
        
        StaticModelLODMode = yes
  
        DefaultModelConditionState
            Model         = OSFallTwr
        End

        ModelConditionState = POST_COLLAPSE
            Model         = OSFallTwr_D1
        End

    ;    ModelConditionState = POST_COLLAPSE NIGHT
    ;        Model         = OSFallTower
    ;    End
    ;    ModelConditionState = POST_COLLAPSE SNOW
    ;        Model         = OSFallTower
    ;    End
    ;    ModelConditionState = POST_COLLAPSE SNOW NIGHT
    ;        Model         = OSFallTower
    ;    End
    End

    ; ***DESIGN parameters ***
    DisplayName      = OBJECT:Tower
    Side             = OSGILIATH
    EditorSorting    = STRUCTURE
    ;ArmorSet
    ;    Conditions      = None
    ;    Armor           = StructureArmor
    ;    DamageFX        = StructureDamageFXNoShake
    ;End

    ; *** ENGINEERING Parameters ***  
    KindOf                = STRUCTURE SELECTABLE IMMOBILE
    Body                  = StructureBody ModuleTag_02
        MaxHealth       = 500.0
    End
    
    Behavior                = StructureToppleUpdate ModuleTag_04
        MinToppleDelay        = 50         ;The delay between the time we die to the beginning of the collapse.
        MaxToppleDelay        = 50
        MinToppleBurstDelay   = 1500
        MaxToppleBurstDelay   = 2500
        ToppleAccelerationFactor = 0.25  ;Increase this value to speed up the collapse.
        StructuralIntegrity   = 0.75
        StructuralDecay       = 1.0
        DamageFXTypes         = ALL -WATER
        ToppleStartFX         = FX_DefaultStructureToppleStart
        ToppleDelayFX         = FX_DefaultStructureToppleDelay
        CrushingFX            = FX_DefaultStructureCrushing
        AngleFX               = 20.0 FX_StructureToppleAngle20
        ToppleDoneFX          = FX_DefaultStructureToppleDone
        CrushingWeaponName    = ToppledStructureWeapon
    End

  Behavior = SlowDeathBehavior ModuleTag_51
    DeathTypes = ALL 
    DestructionDelay = 30000
    DecayBeginTime = 5000
    SinkDelay = 14000
    SinkRate = 0.84     ; in Dist/Sec
    ProbabilityModifier = 50
  End

  Geometry              = BOX
  GeometryMajorRadius   = 31.20
  GeometryMinorRadius   = 30.8
  GeometryHeight        = 139.60
  GeometryIsSmall       = No
  
  GeometryContactPoint = X:0 Y:0 Z:139 Swoop
  
  Shadow                = SHADOW_VOLUME

End

;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;
;  Osgiliath
;
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------

;------------------------------------------------------------
Object OsgiliathPillar01

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSPillar01
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Pillar
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth       = 2000.0
        End

    Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
        DestructionDelay  = 2100
    End
          
        Geometry              = BOX
        GeometryMajorRadius   = 19.2
        GeometryMinorRadius   = 8.40
        GeometryHeight        = 6.4
        GeometryIsSmall       = No
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathPillar02

SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSPillar02
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Pillar
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth       = 2000.0
        End

        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
            DestructionDelay  = 2100
        End
          
        Geometry              = BOX
        GeometryMajorRadius   = 8.40
        GeometryMinorRadius   = 15.2
        GeometryHeight        = 28.8
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------

;------------------------------------------------------------
Object OsgiliathRuin01

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin01
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
     ModelConditionState  = DAMAGED
      Model         = OSBruin01_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin01_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin01_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  

        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

    Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
        DestructionDelay  = 3000
    End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse

  End

  
  
  
          Geometry              = BOX
        GeometryMajorRadius   = 40.0
        GeometryMinorRadius   = 42.4
        GeometryHeight        = 72.8
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin02

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin02
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin02_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin02_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin02_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

    Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
    End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End

  
          Geometry              = BOX
        GeometryMajorRadius   = 40.0
        GeometryMinorRadius   = 30.4
        GeometryHeight        = 51.2
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin03

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin03
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
        ; ---------- destruction states
     ModelConditionState  = DAMAGED
      Model         = OSBruin03_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin03_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin03_D1
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

    Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
        DestructionDelay  = 3000
    End

    Behavior                  = StructureCollapseUpdate ModuleTag_04
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureMediumCollapse
        OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

    End

 
  
          Geometry              = BOX
        GeometryMajorRadius   = 6.8
        GeometryMinorRadius   = 53.80
        GeometryHeight        = 40.8
        GeometryIsSmall       = No
        GeometryOffset = X:7 Y:-19 Z:0
    
        AdditionalGeometry    = BOX
        GeometryMajorRadius   = 54.0
        GeometryMinorRadius   = 6.0
        GeometryHeight        = 35.0
        GeometryOffset        = X:8 Y:28 Z:0
        
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin04

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin04
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
        ; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin04_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin04_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin04_D1
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

    Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
        DestructionDelay  = 3000
    End

    Behavior                  = StructureCollapseUpdate ModuleTag_04
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureMediumCollapse
        OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

    End

  

          Geometry              = BOX
        GeometryMajorRadius   = 33.20
        GeometryMinorRadius   = 28.40
        GeometryHeight        = 51.2
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------



;------------------------------------------------------------
Object OsgiliathRuin05

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin05
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
        ; ---------- destruction states
   
     ModelConditionState  = DAMAGED
      Model         = OSBruin05_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin05_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin05_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
    Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
        DestructionDelay  = 3000
    End

    Behavior                  = StructureCollapseUpdate ModuleTag_04
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureMediumCollapse
        OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

    End

  
  
          Geometry              = BOX
        GeometryMajorRadius   = 33.6
        GeometryMinorRadius   = 9.20
        GeometryHeight        = 32.0
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin06

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin06
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
        ; ---------- destruction states
   
     ModelConditionState  = DAMAGED
      Model         = OSBruin06_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin06_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin06_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
        End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End

  

          Geometry              = BOX
        GeometryMajorRadius   = 10.80
        GeometryMinorRadius   = 6.80
        GeometryHeight        = 25.20
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin07

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin07
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
        ; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin07_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin07_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin07_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE SELECTABLE
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
        End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End


          Geometry              = BOX
        GeometryMajorRadius   = 19.2
        GeometryMinorRadius   = 6.00
        GeometryHeight        = 90.4
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin08

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin08
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
        ; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin08_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin08_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin08_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
        End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End



          Geometry              = BOX
        GeometryMajorRadius   = 25.20
        GeometryMinorRadius   = 8.8
        GeometryHeight        = 65.6
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin09

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin09
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
        ; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin09_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin09_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin09_D1
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
        End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End

  

          Geometry              = BOX
        GeometryMajorRadius   = 27.60
        GeometryMinorRadius   = 27.60
        GeometryHeight        = 80.8
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin10

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin10
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
        ; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin10_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin10_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin10_D1
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE SELECTABLE MADE_OF_STONE NOT_AUTOACQUIRABLE CHUNK_VENDOR
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0

            GrabObject = EntThrownBuildingRock
            GrabFX = FX_WallGrab
            GrabOffset = X:16 Y:0              
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2700
        End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End


  
    Geometry              = BOX
    GeometryMajorRadius   = 30.80
    GeometryMinorRadius   = 28.0
    GeometryHeight        = 41.6
    GeometryIsSmall       = No
    ;GeometryRotationAnchorOffset = X:1037.871 Y:0
    Shadow                = SHADOW_VOLUME

    GeometryContactPoint = X:0  Y:-40  Z:0 Grab
    GeometryContactPoint = X:-17  Y:-17  Z:40 
    GeometryContactPoint = X:-40  Y:0  Z:0 Grab
    GeometryContactPoint = X:-17  Y:17  Z:10
    GeometryContactPoint = X:0  Y:40  Z:0 Grab
    GeometryContactPoint = X:17  Y:17  Z:40 
    GeometryContactPoint = X:40  Y:0  Z:0 Grab
    GeometryContactPoint = X:17  Y:-17  Z:40 
End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin11

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin11
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
        ; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin11_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin11_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin11_D1
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

        End

    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE SELECTABLE MADE_OF_STONE NOT_AUTOACQUIRABLE CHUNK_VENDOR
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0

            GrabObject = EntThrownBuildingRock
            GrabFX = FX_WallGrab
            GrabOffset = X:16 Y:0              

        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
        End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End

    Geometry              = BOX
    GeometryMajorRadius   = 24.40
    GeometryMinorRadius   = 20.0
    GeometryHeight        = 99.2
    GeometryIsSmall       = No
    ;GeometryRotationAnchorOffset = X:1037.871 Y:0
    Shadow                = SHADOW_VOLUME
    
    GeometryContactPoint = X:0  Y:-24  Z:0 Grab
    GeometryContactPoint = X:-12  Y:-10  Z:50 
    GeometryContactPoint = X:-28  Y:0  Z:0 Grab
    GeometryContactPoint = X:-12  Y:10  Z:50 
    GeometryContactPoint = X:0  Y:24  Z:0 Grab
    GeometryContactPoint = X:12  Y:10  Z:95 
    GeometryContactPoint = X:28  Y:0  Z:0 Grab
    GeometryContactPoint = X:12  Y:-10  Z:95 
End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin12

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin12
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
        ; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin12_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin12_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin12_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
        End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End

  

  
          Geometry              = BOX
        GeometryMajorRadius   = 12.0
        GeometryMinorRadius   = 8.8
        GeometryHeight        = 48.8
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin13

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin13
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
        ; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin13_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin13_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin13_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE MADE_OF_STONE NOT_AUTOACQUIRABLE CHUNK_VENDOR
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0

            GrabObject = EntThrownBuildingRock
            GrabFX = FX_WallGrab
            GrabOffset = X:16 Y:0              

        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3500
        End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End


    Geometry              = BOX
    GeometryMajorRadius   = 30.80
    GeometryMinorRadius   = 30.80
    GeometryHeight        = 65.20
    GeometryIsSmall       = No
    ;GeometryRotationAnchorOffset = X:1037.871 Y:0
    Shadow                = SHADOW_VOLUME
    
    GeometryContactPoint = X:-30  Y:-30  Z:0
    GeometryContactPoint = X:-15  Y:-30  Z:65 
    GeometryContactPoint = X:0  Y:-35  Z:0 Grab
    GeometryContactPoint = X:15  Y:-30  Z:65 
    GeometryContactPoint = X:30  Y:-30  Z:0
    GeometryContactPoint = X:30  Y:-15  Z:65 
    GeometryContactPoint = X:35  Y:0  Z:0 Grab 
    GeometryContactPoint = X:30  Y:15 Z:65
    GeometryContactPoint = X:30  Y:30 Z:0
    GeometryContactPoint = X:15  Y:30 Z:65
    GeometryContactPoint = X:0  Y:35 Z:0 Grab
    GeometryContactPoint = X:-15  Y:30 Z:65
    GeometryContactPoint = X:-30  Y:30 Z:0
    
End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin14

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin14
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
        ; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin14_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin14_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin14_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
        End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End

  

          Geometry              = BOX
        GeometryMajorRadius   = 32.0
        GeometryMinorRadius   = 7.2
        GeometryHeight        = 44.0
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin15

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin15
        End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
        ; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin15_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin15_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin15_D1
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

      ModelConditionState  = POST_RUBBLE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    ModelConditionState  = POST_COLLAPSE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End

 
  End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE SELECTABLE MADE_OF_STONE NOT_AUTOACQUIRABLE CHUNK_VENDOR
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0

            GrabObject = EntThrownBuildingRock
            GrabFX = FX_WallGrab
            GrabOffset = X:16 Y:0              

        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
        End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 350
    MaxBurstDelay           = 550
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done
  
  End
  
      Geometry              = BOX
    GeometryMajorRadius   = 32.8
    GeometryMinorRadius   = 31.2
    GeometryHeight        = 99.60
    GeometryIsSmall       = No
    ;GeometryRotationAnchorOffset = X:1037.871 Y:0
    Shadow                = SHADOW_VOLUME
        
    GeometryContactPoint = X:0  Y:-34  Z:0 Grab
    GeometryContactPoint = X:-16  Y:-15  Z:95 
    GeometryContactPoint = X:-36  Y:0  Z:0 Grab
    GeometryContactPoint = X:-16  Y:15  Z:95 
    GeometryContactPoint = X:0  Y:34  Z:0 Grab
    GeometryContactPoint = X:16  Y:15  Z:95 
    GeometryContactPoint = X:36  Y:0  Z:0 Grab
    GeometryContactPoint = X:16  Y:-15  Z:95 
End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin16

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin16
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
        ; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin16_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin16_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin16_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
        End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End


  
          Geometry              = BOX
        GeometryMajorRadius   = 34.00
        GeometryMinorRadius   = 7.2
        GeometryHeight        = 44.8
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------

ChildObject OsgiliathRuin17 OsgiliathRuin16
End

ChildObject OsgiliathRuin18 OsgiliathRuin16
End

ChildObject OsgiliathRuin19 OsgiliathRuin16
End


;------------------------------------------------------------
Object OsgiliathRuin20

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin20
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
        ; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin20_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin20_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin20_D1
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
        End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End

  
          Geometry              = BOX
        GeometryMajorRadius   = 30.80
        GeometryMinorRadius   = 8.8
        GeometryHeight        = 44.0
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin21

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin21
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
        ; ---------- destruction states
     ModelConditionState  = DAMAGED
      Model         = OSBruin21_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin21_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin21_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE SELECTABLE CHUNK_VENDOR
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
            
            GrabObject = EntThrownBuildingRock
            GrabFX = FX_WallGrab
            GrabDamage = 490
            GrabOffset = X:16 Y:0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
        End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End
  
    Geometry              = BOX
    GeometryMajorRadius   = 16.40
    GeometryMinorRadius   = 13.6
    GeometryHeight        = 60.0
    GeometryIsSmall       = No
    ;GeometryRotationAnchorOffset = X:1037.871 Y:0
    Shadow                = SHADOW_VOLUME

    GeometryContactPoint = X:0  Y:-16  Z:0 Grab
    GeometryContactPoint = X:-10  Y:-6  Z:55 
    GeometryContactPoint = X:-20  Y:0  Z:0 Grab
    GeometryContactPoint = X:-10  Y:6  Z:55 
    GeometryContactPoint = X:0  Y:16  Z:0 Grab
    GeometryContactPoint = X:10  Y:6  Z:55 
    GeometryContactPoint = X:20  Y:0  Z:0 Grab
    GeometryContactPoint = X:10  Y:-6  Z:55 
End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathRuin21b

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin21b
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
        ; ---------- destruction states
     ModelConditionState  = DAMAGED
      Model         = OSBruin21b_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin21b_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin21b_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE SELECTABLE MADE_OF_STONE NOT_AUTOACQUIRABLE CHUNK_VENDOR
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1300.0
            MaxHealthReallyDamaged     = 100.0

            GrabObject = EntThrownBuildingRock
            GrabFX = FX_WallGrab
            GrabOffset = X:16 Y:0              

        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
        End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done
  End

    Geometry              = CYLINDER
    GeometryMajorRadius   = 35.0
    GeometryMinorRadius   = 35.0
    GeometryHeight        = 100.0
    GeometryIsSmall       = No
    ;GeometryRotationAnchorOffset = X:1037.871 Y:0
    Shadow                = SHADOW_VOLUME
        
    GeometryContactPoint = X:0  Y:-40  Z:0 Grab
    GeometryContactPoint = X:-17  Y:-17  Z:95 
    GeometryContactPoint = X:-40  Y:0  Z:0 Grab
    GeometryContactPoint = X:-17  Y:17  Z:95 
    GeometryContactPoint = X:0  Y:40  Z:0 Grab
    GeometryContactPoint = X:17  Y:17  Z:95 
    GeometryContactPoint = X:40  Y:0  Z:0 Grab
    GeometryContactPoint = X:17  Y:-17  Z:95     
End
;------------------------------------------------------------

;------------------------------------------------------------
Object OsgiliathRuin22

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin22
            End
        
        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE UNATTACKABLE 
        RadarPriority = STRUCTURE
        Body                  = ImmortalBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1300.0
            MaxHealthReallyDamaged     = 1000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2100
        End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End


          Geometry              = BOX
        GeometryMajorRadius   = 5.20
        GeometryMinorRadius   = 8.8
        GeometryHeight        = 23.2
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------



;------------------------------------------------------------
Object OsgiliathRuin23

SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin23
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
        ; ---------- destruction states
     ModelConditionState  = DAMAGED
      Model         = OSBruin23_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin23_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin23_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2300
        End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End

  
          Geometry              = BOX
        GeometryMajorRadius   = 22.00
        GeometryMinorRadius   = 8.8
        GeometryHeight        = 39.2
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin24

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruin24
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        
        ; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin24_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin24_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin24_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
        End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL                        = INITIAL    OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End

  
  
          Geometry              = BOX
        GeometryMajorRadius   = 30.80
        GeometryMinorRadius   = 8.8
        GeometryHeight        = 41.6
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------



;------------------------------------------------------------
Object OsgiliathRubble01

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruinRub01
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        End

    ; *** AUDIO Parameters ***



    ; ***DESIGN parameters ***


        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth       = 2000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
        End
          
;        Geometry              = BOX
;        GeometryMajorRadius   = 40.0
;        GeometryMinorRadius   = 11.2
;        GeometryHeight        = 48.0
;        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathRubble02

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruinRub02
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        End

    ; *** AUDIO Parameters ***

    ; ***DESIGN parameters ***
        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth       = 2000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
        End
          
;        Geometry              = BOX
;        GeometryMajorRadius   = 40.0
;        GeometryMinorRadius   = 11.2
;        GeometryHeight        = 48.0
;        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathRubble03

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruinRub03
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        End

    ; *** AUDIO Parameters ***

    ; ***DESIGN parameters ***
        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth       = 2000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
        End
          
;        Geometry              = BOX
;        GeometryMajorRadius   = 40.0
;        GeometryMinorRadius   = 11.2
;        GeometryHeight        = 48.0
;        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathRubble04

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruinRub04
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        End

    ; *** AUDIO Parameters ***

    ; ***DESIGN parameters ***
        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth       = 2000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
        End
          
;        Geometry              = BOX
;        GeometryMajorRadius   = 40.0
;        GeometryMinorRadius   = 11.2
;        GeometryHeight        = 48.0
;        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathPlot01

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruinPl01
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        End

    ; *** AUDIO Parameters ***

    ; ***DESIGN parameters ***
        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth       = 2000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
        End
          
        Geometry              = BOX
        GeometryMajorRadius   = 40.0
        GeometryMinorRadius   = 11.2
        GeometryHeight        = 48.0
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathPlot02

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruinPl02
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        End

    ; *** AUDIO Parameters ***

    ; ***DESIGN parameters ***
        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth       = 2000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
        End
          
        Geometry              = BOX
        GeometryMajorRadius   = 40.0
        GeometryMinorRadius   = 11.2
        GeometryHeight        = 48.0
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathPlot03

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBruinPl03
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        End

    ; *** AUDIO Parameters ***

    ; ***DESIGN parameters ***
        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth       = 2000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
        End
          
        Geometry              = BOX
        GeometryMajorRadius   = 40.0
        GeometryMinorRadius   = 11.2
        GeometryHeight        = 48.0
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathStatue01

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBsta01
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth       = 2000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
        End
          
        Geometry              = BOX
        GeometryMajorRadius   = 12.0
        GeometryMinorRadius   = 20.0
        GeometryHeight        = 72.0
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathStatue02

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBsta02
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth       = 2000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
        End
          
        Geometry              = BOX
        GeometryMajorRadius   = 8.0
        GeometryMinorRadius   = 9.6
        GeometryHeight        = 48.0
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathStatue03

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBsta03
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth       = 2000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
        End
          
        Geometry              = BOX
        GeometryMajorRadius   = 8.0
        GeometryMinorRadius   = 8.0
        GeometryHeight        = 40.0
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathStatue04

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBsta04
            End
        
        ;    WallBoundsMesh = GBMTWallAPTop
        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE
        ; Browser = CINEMATICS UNIT
        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth       = 2000.0
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
        End
          
        Geometry              = BOX
        GeometryMajorRadius   = 24.0
        GeometryMinorRadius   = 20.0
        GeometryHeight        = 35.2
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
    End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathBridgeCenter

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBridgeC
            End
        
            WallBoundsMesh = OSBridgeCPTop
;            RampMesh1 = OSBridgeCPTop            
        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Bridge
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE
        RadarPriority        = STRUCTURE
        Body                  = InactiveBody ModuleTag_03
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
        End
          
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

        Geometry              = BOX
        GeometryMajorRadius   = 72.8
        GeometryMinorRadius   = 76.0
        GeometryHeight        = 65.6
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
        
        GeometryContactPoint = X:-60  Y:-60 Z:60
        GeometryContactPoint = X:60  Y:-60 Z:60
        GeometryContactPoint = X:60  Y:60 Z:60
        GeometryContactPoint = X:-60  Y:60 Z:60
        GeometryContactPoint = X:0  Y:0 Z:60 Grab
    End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathBridgeLeft

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBridgeL
            End
        
            RampMesh1 = OSBridgeLPTop
        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Bridge
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE
        RadarPriority        = STRUCTURE
        Body                  = InactiveBody ModuleTag_03
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 5000
        End
          
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

        Geometry              = BOX
        GeometryMajorRadius   = 61.6
        GeometryMinorRadius   = 104.8
        GeometryHeight        = 40.0
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
        
        ; left side contact points
        GeometryContactPoint = X:-65 Y:-105  Z:0 Grab
        GeometryContactPoint = X:-60 Y:-105  Z:0
        GeometryContactPoint = X:-60 Y:-50  Z:25 
        GeometryContactPoint = X:-65 Y:20 Z:0 Grab
        GeometryContactPoint = X:-60 Y:20  Z:0
        GeometryContactPoint = X:-60 Y:100  Z:40 
        
        ; right side contact points
        GeometryContactPoint = X:60 Y:100  Z:40 
        GeometryContactPoint = X:60 Y:20  Z:0
        GeometryContactPoint = X:65 Y:20 Z:0 Grab
        GeometryContactPoint = X:60 Y:-50  Z:25
        GeometryContactPoint = X:60 Y:-105  Z:0
        GeometryContactPoint = X:65 Y:-105  Z:0 Grab
    End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathBridgeRight

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBridgeR
            End
            RampMesh1 = OSBridgeRPTop
        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Bridge
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE
        RadarPriority        = STRUCTURE
        Body                  = InactiveBody ModuleTag_03
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
        End
          
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

    ; need to approximate the ramp geometry here, otherwise treb projectiles explode in mid air
    Geometry              = BOX
    GeometryMajorRadius   = 61.6
    GeometryMinorRadius   = 26.2
    GeometryHeight        = 10.0
    GeometryIsSmall       = No
    GeometryOffset          = X:0 Y:78.6 Z:0
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 61.6
    GeometryMinorRadius   = 26.2
    GeometryHeight        = 20.0
    GeometryIsSmall       = No
    GeometryOffset          = X:0 Y:26.2 Z:0
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 61.6
    GeometryMinorRadius   = 26.2
    GeometryHeight        = 30.0
    GeometryIsSmall       = No
    GeometryOffset          = X:0 Y:-26.2 Z:0
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 61.6
    GeometryMinorRadius   = 26.2
    GeometryHeight        = 40.0
    GeometryIsSmall       = No
    GeometryOffset          = X:0 Y:-78.6 Z:0
    
    ;GeometryRotationAnchorOffset = X:1037.871 Y:0
    Shadow                = SHADOW_VOLUME
    
    ; left side contact points
    GeometryContactPoint = X:-65 Y:105  Z:0 Grab
    GeometryContactPoint = X:-60 Y:105  Z:0
    GeometryContactPoint = X:-60 Y:50  Z:25 
    GeometryContactPoint = X:-65 Y:-20 Z:0 Grab
    GeometryContactPoint = X:-60 Y:-20  Z:0
    GeometryContactPoint = X:-60 Y:-100  Z:40 
        
    ; right side contact points
    GeometryContactPoint = X:60 Y:-100  Z:40 
    GeometryContactPoint = X:60 Y:-20  Z:0
    GeometryContactPoint = X:65 Y:-20 Z:0 Grab
    GeometryContactPoint = X:60 Y:50  Z:25
    GeometryContactPoint = X:60 Y:105  Z:0
    GeometryContactPoint = X:65 Y:105  Z:0 Grab
End
;------------------------------------------------------------


;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathBridge2Center

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBridge2C
            End
        
            WallBoundsMesh = OSBridgeCPTop
;            RampMesh1 = OSBridgeCPTop            
        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Bridge
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE
        RadarPriority        = STRUCTURE
        Body                  = InactiveBody ModuleTag_03
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
        End
          
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

        Geometry              = BOX
        GeometryMajorRadius   = 72.8
        GeometryMinorRadius   = 76.0
        GeometryHeight        = 65.6
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
        
        GeometryContactPoint = X:-60  Y:-60 Z:60
        GeometryContactPoint = X:60  Y:-60 Z:60
        GeometryContactPoint = X:60  Y:60 Z:60
        GeometryContactPoint = X:-60  Y:60 Z:60
        GeometryContactPoint = X:0  Y:0 Z:60 Grab
    End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathBridge2Left

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBridge2L
            End
        
            RampMesh1 = OSBridgeLPTop
        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Bridge
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE
        RadarPriority        = STRUCTURE
        Body                  = InactiveBody ModuleTag_03
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 5000
        End
          
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

        Geometry              = BOX
        GeometryMajorRadius   = 61.6
        GeometryMinorRadius   = 104.8
        GeometryHeight        = 40.0
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
        
        ; left side contact points
        GeometryContactPoint = X:-65 Y:-105  Z:0 Grab
        GeometryContactPoint = X:-60 Y:-105  Z:0
        GeometryContactPoint = X:-60 Y:-50  Z:25 
        GeometryContactPoint = X:-65 Y:20 Z:0 Grab
        GeometryContactPoint = X:-60 Y:20  Z:0
        GeometryContactPoint = X:-60 Y:100  Z:40 
        
        ; right side contact points
        GeometryContactPoint = X:60 Y:100  Z:40 
        GeometryContactPoint = X:60 Y:20  Z:0
        GeometryContactPoint = X:65 Y:20 Z:0 Grab
        GeometryContactPoint = X:60 Y:-50  Z:25
        GeometryContactPoint = X:60 Y:-105  Z:0
        GeometryContactPoint = X:65 Y:-105  Z:0 Grab
    End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathBridge2Right

    SelectPortrait = BPGOsgiliath

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            
            
            StaticModelLODMode = yes
            
            DefaultModelConditionState
                Model = OSBridge2R
            End
            RampMesh1 = OSBridgeRPTop
        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Bridge
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE
        RadarPriority        = STRUCTURE
        Body                  = InactiveBody ModuleTag_03
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
        End
          
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

    ; need to approximate the ramp geometry here, otherwise treb projectiles explode in mid air 
    Geometry              = BOX
    GeometryMajorRadius   = 110 ;61.6
    GeometryMinorRadius   = 26.2
    GeometryHeight        = 10.0
    GeometryIsSmall       = No
    GeometryOffset          = X:0 Y:78.6 Z:0
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 110 ;61.6
    GeometryMinorRadius   = 26.2
    GeometryHeight        = 20.0
    GeometryIsSmall       = No
    GeometryOffset          = X:0 Y:26.2 Z:0
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 110 ;61.6
    GeometryMinorRadius   = 26.2
    GeometryHeight        = 30.0
    GeometryIsSmall       = No
    GeometryOffset          = X:0 Y:-26.2 Z:0
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 110 ;61.6
    GeometryMinorRadius   = 26.2
    GeometryHeight        = 40.0
    GeometryIsSmall       = No
    GeometryOffset          = X:0 Y:-78.6 Z:0
    
    ;GeometryRotationAnchorOffset = X:1037.871 Y:0
    Shadow                = SHADOW_VOLUME
    
    ; left side contact points
    GeometryContactPoint = X:-65 Y:105  Z:0 Grab
    GeometryContactPoint = X:-60 Y:105  Z:0
    GeometryContactPoint = X:-60 Y:50  Z:25 
    GeometryContactPoint = X:-65 Y:-20 Z:0 Grab
    GeometryContactPoint = X:-60 Y:-20  Z:0
    GeometryContactPoint = X:-60 Y:-100  Z:40 
        
    ; right side contact points
    GeometryContactPoint = X:60 Y:-100  Z:40 
    GeometryContactPoint = X:60 Y:-20  Z:0
    GeometryContactPoint = X:65 Y:-20 Z:0 Grab
    GeometryContactPoint = X:60 Y:50  Z:25
    GeometryContactPoint = X:60 Y:105  Z:0
    GeometryContactPoint = X:65 Y:105  Z:0 Grab
End
;------------------------------------------------------------



;------------------------------------------------------------
Object GondorIthilienBridge

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            DefaultModelConditionState
                Model = GBITHBRDG
            End
        
            WallBoundsMesh    = OSBridgeCPTop
            RampMesh1        = OSBridgeRamp01
            RampMesh2        = OSBridgeRamp02            
        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Bridge
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE
        RadarPriority        = STRUCTURE
        Body                  = InactiveBody ModuleTag_03
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
        End
          
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

        Geometry              = BOX
        GeometryMajorRadius   = 76.0
        GeometryMinorRadius   = 280.0
        GeometryHeight        = 65.6
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
        
        
End

;------------------------------------------------------------
Object GondorIthilienBridge2

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            DefaultModelConditionState
                Model = GBITHBRDG2
            End
        
            WallBoundsMesh    = OSBridgeCPTop
            RampMesh1        = OSBridgeRamp01
            RampMesh2        = OSBridgeRamp02            
        End


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ; ***DESIGN parameters ***

        DisplayName      = OBJECT:Bridge
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

    ; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE
        RadarPriority        = STRUCTURE
        Body                  = InactiveBody ModuleTag_03
        End

        ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
        ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
        ; buildings automatically stick around because GarrisonContain has it's own DieModule
        Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
        End
          
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

        Geometry              = BOX
        GeometryMajorRadius   = 76.0
        GeometryMinorRadius   = 275.0
        GeometryHeight        = 30
        GeometryIsSmall       = No
        ;GeometryRotationAnchorOffset = X:1037.871 Y:0
        Shadow                = SHADOW_VOLUME
        
        GeometryContactPoint = X:-79  Y:-270 Z:0 Grab
        GeometryContactPoint = X:-50  Y:-260 Z:8
        GeometryContactPoint = X:50  Y:0 Z:30 Grab
        GeometryContactPoint = X:-50  Y:260 Z:8
        GeometryContactPoint = X:-79  Y:275 Z:0 Grab
        GeometryContactPoint = X:-50  Y:260 Z:8
        GeometryContactPoint = X:50  Y:260 Z:8
        GeometryContactPoint = X:79  Y:275 Z:0 Grab
        GeometryContactPoint = X:50  Y:260 Z:8
        GeometryContactPoint = X:-50  Y:0 Z:30 Grab
        GeometryContactPoint = X:50  Y:-260 Z:8
        GeometryContactPoint = X:79  Y:-275 Z:0 Grab
End

;---------------------------------------------------------
Object GBCSigFire

    SelectPortrait = BPGSignalFire

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCSigFire
        ParticleSysBone = EMBERBONE SigFire FollowBone:Yes
        ParticleSysBone = EMBERBONE burningTreeSmoke FollowBone:Yes
        ParticleSysBone = EMBERBONE burningTreeEmbers FollowBone:Yes
        ParticleSysBone = EMBERBONE SigFireGlow FollowBone:Yes
    End

  End

  ; *** AUDIO Parameters ***

    SoundAmbient        = Campfire1AmbientLoop


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:SignalFire
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = NoArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  ;;KindOf                = STRUCTURE IMMOBILE ;Old sets before this was used as BASE of Minas Tirith in SP and MP
  KindOf              = SELECTABLE STRUCTURE IMMOBILE SCORE CASTLE_KEEP MP_COUNT_FOR_VICTORY 
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 2000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
  End
  
  Geometry              = BOX
  GeometryMajorRadius   = 8.0
  GeometryMinorRadius   = 8.0
  GeometryHeight        = 40.0
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Elven grove object
Object ElvenGrove

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
;      Model =  PTElvenWdHC
      Model = NONE
      ParticleSysBone = None TaintHCPing HouseColor:yes
    End
    
     MultiPlayerOnly = Yes
  End 

  ; *** AUDIO Parameters ***

    ;SoundAmbient        = ElvenGroveAmbientLoop


  ; ***DESIGN parameters ***

  DisplayName     = OBJECT:ElvenGrove
  Side            = Gondor
  EditorSorting   = STRUCTURE
;  ThreatLevel = 1.0

;  CommandSet          = ElvenGroveCommandSet

  ; *** ENGINEERING Parameters ***  
  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD UNATTACKABLE IMMOBILE TAINT

    Behavior = AttributeModifierAuraUpdate ModuleTag_ElvenGroveOne
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = ElvenWoodPositiveSpell
        RefreshDelay    = 2000
        Range            = 200
        ObjectFilter    = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO
        RunWhileDead    = Yes
        RequiredConditions = ELVEN_WOOD ; In case elven wood and taint overlap, this flag makes it double check the cell type of the target
    End    

    Behavior = AttributeModifierAuraUpdate ModuleTag_ElvenGroveTwo
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = ElvenWoodNegativeSpell
        RefreshDelay    = 2000
        Range            = 200
        TargetEnemy        = Yes
        ObjectFilter    = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION ;-IsengardPikeman
        AntiCategory    = LEADERSHIP ; This means cancel all previous leadership bonuses
;        AntiFX            = FX_AntiLeadership ; FX for anti category
        RunWhileDead    = Yes
        RequiredConditions = ELVEN_WOOD
    End    

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate    ;-- Removed timelimit
        MinLifetime        = 120000
        MaxLifetime        = 120000
        DeathType        = FADED
    End

;  Geometry = BOX
;  GeometryMajorRadius = 80.0
;  GeometryMinorRadius = 88.0
;  GeometryHeight = 40.0
;  GeometryIsSmall = No

  Shadow              = SHADOW_DECAL
  ShadowSizeX = 120
  ShadowSizeY = 120
End

;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;
; HELMS DEEP
;
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------



;------------------------------------------------------------------------------ 
;Helms Deep Gate
Object HelmsDeepGate

    SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = RBHDIGateTemp        
    End
    
    IdleAnimationState
        Animation = IDLE
            AnimationName            =    RBHDIGateTemp.RBHDIGateTemp
            AnimationMode            =    ONCE    
            AnimationBlendTime        = 0
        End        
    End    
        
        ;--damaged building
    ModelConditionState  = DESTROYED_FRONT
      Model         = RBHDIGateTemp  
;        ParticleSysBone FireSmall01 FireBuildingSmall
    End
    AnimationState = DESTROYED_FRONT
;      BeginScript
;        CurDrawableHideSubObject("GBBARRACKSDP1")
;      EndScript
    End
    
    ModelConditionState  = DESTROYED_RIGHT
      Model         = RBHDIGateTemp  
;        ParticleSysBone FireSmall01 FireBuildingSmall
    End

    AnimationState = DESTROYED_RIGHT
;      BeginScript
;        CurDrawableHideSubObject("GBBARRACKSDP2")
;      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = RBHDIGateTemp  
;        ParticleSysBone FireSmall01 FireBuildingSmall
    End

    AnimationState = DESTROYED_BACK
;      BeginScript
;        CurDrawableHideSubObject("GBBARRACKSDP3")
;      EndScript
    End

    ModelConditionState  = DESTROYED_LEFT
      Model         = RBHDIGateTemp  
;        ParticleSysBone FireSmall01 FireBuildingSmall
    End
    
    AnimationState = DESTROYED_LEFT
;      BeginScript
;        CurDrawableHideSubObject("GBBARRACKSDP4")
;      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIGateTemp  
;        ParticleSysBone FireSmall01 FireBuildingSmall
    End
    AnimationState = DAMAGED
    EnteringStateFX    = FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIGateTemp  
;        ParticleSysBone FireSmall01 FireBuildingSmall
    End
    AnimationState = REALLYDAMAGED
    EnteringStateFX    = FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBHDIGateTemp  
 ;     ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
 ;       CurDrawableHideSubObject("GBBARRACKSDP1")
 ;       CurDrawableHideSubObject("GBBARRACKSDP2")
 ;       CurDrawableHideSubObject("GBBARRACKSDP3")
 ;       CurDrawableHideSubObject("GBBARRACKSDP4")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RBHelmsDeepGateDoorBig
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 500
  BuildTime           = 15.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


;  CommandSet          = GondorBarracksCommandSet

 
  ; *** AUDIO Parameters ***

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone

    ;  VoiceSelect         = GondorBarracksSelect
     
    ;  UnitSpecificSounds
    ;  UnderConstruction     = UnderConstructionLoop
    ;  End
 

    ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
    KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE     


    Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
    End 

    Body                        = ActiveBody ModuleTag_05
        MaxHealth                = 1000.0
        MaxHealthDamaged        = 700.0
        MaxHealthReallyDamaged  = 300.0
    End

    ArmorSet
        Conditions        = None
        Armor             = HelmsDeepGates
        DamageFX          = GateDamageFX
    End

    Behavior = ProductionUpdate ModuleTag_06
        ; nothing
    End
  
    Behavior                  = StructureCollapseUpdate ModuleTag_08
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureMediumCollapse
        FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
        DestroyObjectWhenDone    = Yes
        CollapseHeight            = 155
    End
  
    AttackContactPoint = X:-24 Y:-24 Z:92

    Geometry              = BOX
    GeometryMajorRadius   = 80.0
    GeometryMinorRadius   = 16.0
    GeometryHeight        = 60
;  GeometryOffset        = X:0 Y:-28 Z:0
    GeometryIsSmall       = No
      
    Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Helms Deep Arcade
Object HelmsDeepArcade

    SelectPortrait = BPRHelmsDeep
 
    ; *** ART Parameters ***
    ;  SelectPortrait         = SNReactor_L
    ;  ButtonImage            = SNReactor
    ;day

    Draw = W3DScriptedModelDraw ModuleTag_Draw
      
        ExtraPublicBone = ARROW_01
        ExtraPublicBone = ARROW_02
        ExtraPublicBone = ARROW_03
        ExtraPublicBone = ARROW_04
        ExtraPublicBone = ARROW_05
        ExtraPublicBone = ARROW_06
        ExtraPublicBone = ARROW_07
        ExtraPublicBone = ARROW_08
        ExtraPublicBone = ARROW_09
        ExtraPublicBone = ARROW_10
        ExtraPublicBone = ARROW_11
        ExtraPublicBone = ARROW_12
        ExtraPublicBone = OBJECT05
  
        OkToChangeModelColor  = Yes
        UseStandardModelNames = Yes
        DefaultModelConditionState
        Model = RBHDArcade
        End
        
        ;--damaged building
      
        ModelConditionState  = DAMAGED
        Model         = RBHDArcade_D2  
        End
        AnimationState = DAMAGED
                Animation            =    DamagedAnimation
                AnimationName        =     RBHDArcade_D2.RBHDArcade_D2
                AnimationMode        =    ONCE
               End
            EnteringStateFX    = FX_BuildingDamaged
        End        
        
        ModelConditionState  = REALLYDAMAGED
            Model         = RBHDArcade_D3
        End
        AnimationState = REALLYDAMAGED
                   Animation                =    ReallyDamagedAnimation
                AnimationName        =     RBHDArcade_D3.RBHDArcade_D3
                AnimationMode        =    ONCE
               End
            EnteringStateFX    = FX_BuildingReallyDamaged
        End
    
        ModelConditionState  = RUBBLE
            Model         = RBHDArcade_D4  
            ParticleSysBone OBJECT05 FireBuildingLarge
            ParticleSysBone OBJECT05 SmokeBuildingLarge
        End
        AnimationState = RUBBLE
               Animation                =    RubbleAnimation
                AnimationName        =     RBHDArcade_D4.RBHDArcade_D4
                AnimationMode        =    ONCE
               End
            EnteringStateFX = FX_MinWallATransitionReallyDamaged
        End
                
            
    End
      
    PlacementViewAngle  = 0
 
    ; ***DESIGN parameters ***
    DisplayName         = OBJECT:HelmsDeepArcade
    Side                = Rohan
    EditorSorting       = STRUCTURE
    Browser = REGION Helms_Deep STRUCTURE
    ThreatLevel = 10.0
     
    BuildCost           = 1
    BuildTime           = 5.0           ; in seconds
    VisionRange         = 160.0          ; Shroud clearing distance
    ShroudClearingRange = 160

    ArmorSet
        Conditions        = None
        Armor             = StructureArmor
        DamageFX          = None
    End

    CommandSet            = HelmsDeepArcadeCommandSet


    ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone


    ;  VoiceSelect         = NuclearReactorSelect
     
    ;  UnitSpecificSounds
    ;  UnderConstruction     = UnderConstructionLoop
    ;  End

 
    ; *** ENGINEERING Parameters ***
    
    RadarPriority       = STRUCTURE
    KindOf              = VITAL_FOR_BASE_SURVIVAL PRELOAD SELECTABLE STRUCTURE IMMOBILE SCORE CASTLE_KEEP MP_COUNT_FOR_VICTORY CAN_ATTACK FS_FACTORY AUTO_RALLYPOINT; GARRISON  GARRISONABLE_UNTIL_DESTROYED 

    Behavior = GettingBuiltBehavior ModuleTag_GBB
        WorkerName    = GondorWorkerNoSelect
        SpawnTimer  = 120
        RebuildWhenDead = Yes
    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
    End 

    Body                  = ActiveBody ModuleTag_B_03
        MaxHealth       = 6000.0
        MaxHealthDamaged = 3500
        MaxHealthReallyDamaged = 2000
    End
  
      ;-----------------------------------------------
    ;Used for hero revival and initial construction     
    Behavior = ProductionUpdate ProductionUpdateModuleTag
        ; nothing, but is required if we have any Object-level Upgrades!
    End
    Behavior = QueueProductionExitUpdate ModuleTag_QueuePEU
        UnitCreatePoint   = X:0.0 Y:30.0 Z:0.0
        NaturalRallyPoint = X:0.0 Y:-50.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! 
        ExitDelay = 300 ;Handles delays between units if multiple produced at a time. 
    End  
    ;-----------------------------------------------


;    Behavior            = HordeGarrisonContain ModuleTag_hordeGarrison
;        ObjectStatusOfContained    = UNSELECTABLE CAN_ATTACK ENCLOSED
;        ContainMax              = 4
;        MaxHordeCapacity        = 4
;        DamagePercentToUnits    = 100%
;        PassengerFilter            = ANY +INFANTRY +HORDE +CAVALRY
;        AllowEnemiesInside      = No
;        AllowNeutralInside      = Yes
;        NumberOfExitPaths       = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
;        PassengerBonePrefix     = PassengerBone:ARROW_ KindOf:INFANTRY
;        PassengerBonePrefix     = PassengerBone:ARROW_ KindOf:CAVALRY
;        EntryOffset                = X:0.0 Y:-50.0 Z:0.0
;        
;        ;PassengersTestCollisionHeight = 80
;        ;Slots                         = 1
;        ;EnterSound                     = GarrisonEnter
;        ;ExitSound                      = GarrisonExit
;        ;ExitDelay               = 250
;        ;GoAggressiveOnExit      = Yes ; AI Will tell people to set their mood to Aggressive on exiting
;        ;ForceOrientationContainer = No  ; otherwise contained units can't orient themselves towards their targets...
;    End 
         
    Geometry              = BOX
    GeometryMajorRadius   = 105.0
    GeometryMinorRadius   = 37.5
    GeometryHeight        = 100.0
    GeometryOffset          = X:0 Y:30 Z:0
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Culvert
Object HelmsDeepCulvert

SelectPortrait = BPRHelmsDeep
 
    ; *** ART Parameters ***
    ;  SelectPortrait         = SNReactor_L
    ;  ButtonImage            = SNReactor
    ;day

    ;----------------------------------------------------------------------------------------------
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        OkToChangeModelColor  = Yes
        UseStandardModelNames = Yes
        ExtraPublicBone = SIEGELADDER
       
        WallBoundsMesh = P1
        RampMesh1 = P2
        RampMesh2 = P3        
        
        DefaultModelConditionState
            Model = RBHDDWCulv
        End
        
        ;--damaged building  
        ModelConditionState  = DAMAGED
        Model         = RBHDDWCulv_D1  
        End
        
        
        AnimationState = DAMAGED
        EnteringStateFX    = FX_BuildingDamaged
        End

        ModelConditionState  = REALLYDAMAGED
            Model         = RBHDDWCulv_D2
        End
        AnimationState = REALLYDAMAGED
                       Animation        =    ReallyDamagedanimation
                AnimationName        =    RBHDDWCulv_D2.RBHDDWCulv_D2
                AnimationMode        =    ONCE
                AnimationSpeedFactorRange = 0.5 0.5
            End
            EnteringStateFX = FX_MinWallATransitionReallyDamaged
        End

        ModelConditionState  = RUBBLE
        Model         = RBHDDWCulv_D3
        End
        
        AnimationState = RUBBLE
            Animation                =    Death
                AnimationName        =    RBHDDWCulv_D3.RBHDDWCulv_D3
                AnimationMode        =    ONCE
                AnimationSpeedFactorRange = 0.5 0.5
            End
            EnteringStateFX = FX_MinWallATransitionRubble
        End      

        ModelConditionState  = POST_RUBBLE
            Model         = None
        End

        ModelConditionState  = POST_COLLAPSE
            Model         = None
        End
    End

    ;----------------------------------------------------------------------------------------------
    Draw = W3DScriptedModelDraw Draw_PosternGate
        ExtraPublicBone = Post01
        ExtraPublicBone = Post02
        ExtraPublicBone = Post03
        ExtraPublicBone = Post04

        DefaultModelConditionState
            Model            = RBHDDWCulvPst
        End

        IdleAnimationState
            BeginScript
                CurDrawableHideModule("Draw_PosternGate")
            EndScript
        End

        AnimationState = RUBBLE
            BeginScript
                CurDrawableHideModule("Draw_PosternGate")
            EndScript
        End

        AnimationState = UPGRADE_POSTERN_GATE
            BeginScript
                CurDrawableShowModule("Draw_PosternGate")
            EndScript
            Animation
                AnimationName = RBHDDWCulvPst.RBHDDWCulvPst
                AnimationMode = ONCE
            End
            EnteringStateFX = FX_BuildingContructDustCulvert
        End
    End
  
    PlacementViewAngle  = 0
     
    ; ***DESIGN parameters ***
    DisplayName    = OBJECT:HelmsDeepCulvert
    Side            = Rohan
    EditorSorting    = STRUCTURE
    Browser        = REGION Helms_Deep STRUCTURE
    ThreatLevel    = 1.0
     
    BuildCost           = 1
    BuildTime           = 5.0           ; in seconds
    VisionRange         = 160.0          ; Shroud clearing distance
    ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

    ; *** ENGINEERING Parameters ***

    RadarPriority    = NOT_ON_RADAR
    KindOf            = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE SELECTABLE 
     CommandSet        = PosternGateCommandSet

    ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
    ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
    ; buildings automatically stick around because GarrisonContain has it's own DieModule
    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
    End 

    Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
    End
    
    Behavior = DynamicPortalBehaviour PosternGatePortal
        TriggeredBy                = Upgrade_PosternGate
        ConflictsWith            = Upgrade_OpenGarrison Upgrade_TrebuchetTurret
        CustomAnimAndDuration    = AnimState:UPGRADE_POSTERN_GATE AnimTime:0
        
        AllowKindOf        = INFANTRY CAVALRY
        RejectKindOf    = MONSTER MACHINE ARMY_OF_DEAD
        BonePrefix        = Post
        NumberOfBones    = 4
        WayPoint        = Index:0    Type:Walk    ; 0
        WayPoint        = Index:1    Type:Walk    ; 1
        WayPoint        = Index:2    Type:Walk    ; 2
        WayPoint        = Index:3    Type:Walk    ; 3
        WayPoint        = Index:2    Type:Walk    ; 4
        WayPoint        = Index:1    Type:Walk    ; 5
        Link            = From:0 Via:4 Via:5 To:3
        Link            = From:3 Via:1 Via:2 To:0
    End
    
    Behavior = ProductionUpdate ProductionUpdateModuleTag
        ; nothing, but is required if we have any Object-level Upgrades!
    End

    Body                  = ActiveBody ModuleTag_B_03
        MaxHealth       = 6000.0
        MaxHealthDamaged = 3000
        MaxHealthReallyDamaged = 1000
        
        GrabObject = EntThrownBuildingRock
        GrabFX = FX_WallGrab
        GrabDamage = 490
        GrabOffset = X:16 Y:0    
    End

    ArmorSet
        Conditions        = None
        Armor             = HelmsDeepWalls
        DamageFX          = None
    End

;    Behavior            = DestroyDie ModuleTag_07
;        ;nothing
;    End
 
;     Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
;        DeathTypes        = ALL
;        StartsActive    = Yes
;        DeathWeapon        = WallDeath
;    End    
 
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

    GeometryContactPoint = X:80 Y:0 Z:60 Menu ;<-- where to draw the radial menu

    Geometry              = BOX
    GeometryMajorRadius   = 222.0
    GeometryMinorRadius   = 46.0
    GeometryHeight        = 62.0
    GeometryOffset          = X:0 Y:12 Z:0    
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
    
    ;HelmsDeepCulvert Grab points for rock-wielding ents
    GeometryContactPoint = X:180  Y:65  Z:0 Grab
    GeometryContactPoint = X:180  Y:-40 Z:0 Grab
    GeometryContactPoint = X:180  Y:-30 Z:10 
    GeometryContactPoint = X:120  Y:-30 Z:60 
    GeometryContactPoint = X:60   Y:-30 Z:10 
    GeometryContactPoint = X:0    Y:-30 Z:60
    GeometryContactPoint = X:-60   Y:-30 Z:10
    GeometryContactPoint = X:-120  Y:-30 Z:60
    GeometryContactPoint = X:-180  Y:-30 Z:10 
    GeometryContactPoint = X:-180 Y:-40 Z:0 Grab
    GeometryContactPoint = X:-180 Y:60  Z:0 Grab
End



;------------------------------------------------------------------------------
;Helms Deep Section Ai
Object HelmsDeepSectionAi

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    ExtraPublicBone = SIEGELADDER

    DefaultModelConditionState
      Model = RBHDDWSecA
    End

;--damaged building
  
    ModelConditionState  = DAMAGED
      Model         = RBHDDWSecA_D1  
    End
    
    
    AnimationState = DAMAGED
      EnteringStateFX = FX_MinWallATransitionDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDDWSecA_D2
    End
    AnimationState = REALLYDAMAGED
               Animation        =    ReallyDamagedanimation
        AnimationName        =    RBHDDWSecA_D2.RBHDDWSecA_D2
        AnimationMode        =    ONCE
                AnimationSpeedFactorRange = 0.5 0.5
       End
    End

    ModelConditionState  = RUBBLE
      Model         = RBHDDWSecA_D3
    End
    
    AnimationState = RUBBLE
        Animation                =    Death
            AnimationName        =    RBHDDWSecA_D3.RBHDDWSecA_D3
            AnimationMode        =    ONCE
            AnimationSpeedFactorRange = 0.5 0.5
        End
        EnteringStateFX = FX_MinWallATransitionRubble
    End      

    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
    
    WallBoundsMesh = P1
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepSectionAi
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
  End 

    Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
    End

  Body                  = ActiveBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End
  
  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

    ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
    ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
    ; buildings automatically stick around because GarrisonContain has it's own DieModule
    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

;     Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
;        DeathTypes        = ALL
;        StartsActive    = Yes
;        DeathWeapon        = WallDeath
;    End    

    Geometry              = BOX
    GeometryMajorRadius   = 115.0
    GeometryMinorRadius   = 50.0
    GeometryHeight        = 60.0
    GeometryOffset          = X:0 Y:15.0 Z:0
    
    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 60.0
    GeometryOffset          = X:64 Y:20.0 Z:0
    
    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 60.0
    GeometryOffset          = X:-64 Y:20.0 Z:0
    
    
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
  
      GeometryContactPoint = X:-90  Y:70  Z:0 Grab
    GeometryContactPoint = X:-90  Y:-40 Z:0 Grab
    GeometryContactPoint = X:-90  Y:-30 Z:10 
    GeometryContactPoint = X:-60  Y:-30 Z:60 
    GeometryContactPoint = X:-30   Y:-30 Z:10 
    GeometryContactPoint = X:0    Y:-30 Z:60
    GeometryContactPoint = X:30   Y:-30 Z:10
    GeometryContactPoint = X:60  Y:-30 Z:60
    GeometryContactPoint = X:90  Y:-30 Z:10 
    GeometryContactPoint = X:90 Y:-40 Z:0 Grab
    GeometryContactPoint = X:90 Y:70  Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Section B
Object HelmsDeepSectionB

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    ExtraPublicBone = SIEGELADDER

    DefaultModelConditionState
      Model = RBHDDWSecB
    End
    
    ;--damaged building
  
    ModelConditionState  = DAMAGED
      Model         = RBHDDWSecB_D1  
    End
    
    
    AnimationState = DAMAGED
      EnteringStateFX = FX_MinWallATransitionDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDDWSecB_D2
    End
    AnimationState = REALLYDAMAGED
               Animation        =    ReallyDamagedanimation
        AnimationName        =    RBHDDWSecB_D2.RBHDDWSecB_D2
        AnimationMode        =    ONCE
            AnimationSpeedFactorRange = 0.5 0.5
       End
        EnteringStateFX = FX_MinWallATransitionReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBHDDWSecB_D3
    End
    
    AnimationState = RUBBLE
        Animation                =    Death
            AnimationName        =    RBHDDWSecB_D3.RBHDDWSecB_D3
            AnimationMode        =    ONCE
            AnimationSpeedFactorRange = 0.5 0.5
        End
        EnteringStateFX = FX_MinWallATransitionRubble
    End      

    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
            
    WallBoundsMesh = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepSectionB
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
  End 

    Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
    End

  Body                  = ActiveBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

    ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
    ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
    ; buildings automatically stick around because GarrisonContain has it's own DieModule
    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

    Geometry              = BOX
    GeometryMajorRadius   = 115.0
    GeometryMinorRadius   = 60.0
    GeometryHeight        = 70.0
    GeometryOffset        = X:0 Y:18.0 Z:0
    
    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 60.0
    GeometryOffset          = X:0 Y:35.0 Z:0

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 60.0
    GeometryOffset          = X:75.0 Y:35.0 Z:0

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 60.0
    GeometryOffset          = X:-79.0 Y:32.0 Z:0    
    
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
  
    GeometryContactPoint = X:75  Y:80  Z:0 Grab
    GeometryContactPoint = X:85  Y:-50  Z:0 Grab
    GeometryContactPoint = X:85  Y:-35  Z:10
    GeometryContactPoint = X:55  Y:-35  Z:60
    GeometryContactPoint = X:25  Y:-35  Z:10
    GeometryContactPoint = X:0     Y:-20  Z:60
    GeometryContactPoint = X:-25 Y:-20  Z:10
    GeometryContactPoint = X:-55 Y:-20  Z:60
    GeometryContactPoint = X:-75 Y:-20  Z:10
    GeometryContactPoint = X:-75   Y:-25  Z:0 Grab
    GeometryContactPoint = X:-75  Y:80  Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Section C
Object HelmsDeepSectionC

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = RBHDDWSecC
    End
    
    ;--damaged building
  
    ModelConditionState  = DAMAGED
      Model         = RBHDDWSecC_D1  
    End
    
    
    AnimationState = DAMAGED
      EnteringStateFX = FX_MinWallATransitionDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDDWSecC_D2
    End
    AnimationState = REALLYDAMAGED
               Animation                =    ReallyDamagedanimation
        AnimationName        =     RBHDDWSecC_D2.RBHDDWSecC_D2
        AnimationMode        =    ONCE
                AnimationSpeedFactorRange = 0.5 0.5
       End
        EnteringStateFX = FX_MinWallATransitionReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBHDDWSecC_D3
    End
    
    AnimationState = RUBBLE
        Animation                =    Death
            AnimationName        =    RBHDDWSecC_D3.RBHDDWSecC_D3
            AnimationMode        =    ONCE
            AnimationSpeedFactorRange = 0.5 0.5
        End
        EnteringStateFX = FX_MinWallATransitionRubble
    End      

    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
          
    WallBoundsMesh = P2
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepSectionC
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

    ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
    ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
    ; buildings automatically stick around because GarrisonContain has it's own DieModule
    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

;     Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
;        DeathTypes        = ALL
;        StartsActive    = Yes
;        DeathWeapon        = WallDeath
;    End    

    Geometry              = BOX
    GeometryMajorRadius   = 110.0
    GeometryMinorRadius   = 50.0
    GeometryHeight        = 75.0
    GeometryOffset        = X:26 Y:11.0 Z:0

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 70.0
    GeometryOffset          = X:-50.0 Y:15.0 Z:0

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 60.0
    GeometryOffset          = X:50.0 Y:15.0 Z:0
            
    GeometryIsSmall       = No
    GeometryFrontAngle    = 90.0
    Shadow                = SHADOW_VOLUME
  
    GeometryContactPoint = X:30   Y:67  Z:0 Grab
    GeometryContactPoint = X:90  Y:-47 Z:0 Grab
    GeometryContactPoint = X:90  Y:-38 Z:10 
    GeometryContactPoint = X:20   Y:-38 Z:70
    GeometryContactPoint = X:0  Y:-38 Z:10
    GeometryContactPoint = X:-25 Y:-38 Z:70
    GeometryContactPoint = X:-50  Y:-38 Z:10
    GeometryContactPoint = X:-50  Y:-47 Z:0 Grab
    GeometryContactPoint = X:-50  Y:67  Z:0 Grab
End

;------------------------------------------------------------------------------
;Helms Deep  dw StairsA1
Object HelmsDeepdwStairsA1

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDDWSt1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDDWSt1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDDWSt1_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDDWSt1_D4  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
    
    WallBoundsMesh = P2
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdwStairsA1
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

    ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
    ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
    ; buildings automatically stick around because GarrisonContain has it's own DieModule
    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

    Geometry              = BOX
    GeometryMajorRadius   = 85.0
    GeometryMinorRadius   = 50.0
    GeometryHeight        = 50.0
    GeometryOffset        = X:0 Y:0 Z:0
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
    
    
    GeometryContactPoint = X:-15 Y:55  Z:0 Grab
    GeometryContactPoint = X:-15 Y:45  Z:0 
    GeometryContactPoint = X:-15 Y:45  Z:50 
    GeometryContactPoint = X:35 Y:-45  Z:50 
    GeometryContactPoint = X:85 Y:45  Z:50 
    GeometryContactPoint = X:85 Y:45  Z:0 
    GeometryContactPoint = X:85  Y:55  Z:0 Grab
    
End


;------------------------------------------------------------------------------
;Helms Deep  dw StairsA2
Object HelmsDeepdwStairsA2

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDDWSt2
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDDWSt2_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDDWSt2_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDDWSt2_D4  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
            
    WallBoundsMesh = P2
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdwStairsA2
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE  IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

    ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
    ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
    ; buildings automatically stick around because GarrisonContain has it's own DieModule
    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

    Geometry              = BOX
    GeometryMajorRadius   = 85.0
    GeometryMinorRadius   = 50.0
    GeometryHeight        = 50.0
    GeometryOffset        = X:0 Y:0 Z:0
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
  
    GeometryContactPoint = X:-80 Y:55  Z:0 Grab
    GeometryContactPoint = X:-80 Y:45  Z:0 
    GeometryContactPoint = X:-80 Y:45  Z:50 
    GeometryContactPoint = X:-10 Y:-45  Z:50 
    GeometryContactPoint = X:65 Y:45  Z:50 
    GeometryContactPoint = X:65 Y:45  Z:0 
    GeometryContactPoint = X:65  Y:55  Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Causeway
Object HelmsDeepCauseway

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDGatCy
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDGatCy_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDGatCy_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDGatCy_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
                    
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepCauseway
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE  IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged. 
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor   ;HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
;     Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
;        StartsActive    = Yes ;If no, requires upgrade to turn on.
;        BonusName        = WallBonus
;        RefreshDelay    = 2000
;        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
;        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
;    End    

  Geometry              = BOX
  GeometryMajorRadius   = 75.0
  GeometryMinorRadius   = 275.0
  GeometryHeight        = 25.0
  GeometryOffset        = X:17.0 Y:0 Z:0
  GeometryIsSmall       = No  
  
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gatehouse
Object HelmsDeepGatehouseLeft

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day


    ;----------------------------------------------------------------------------------------------
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        OkToChangeModelColor  = Yes
        UseStandardModelNames = Yes
        
        DefaultModelConditionState
            Model = RBHDGatHsL
        End

        ModelConditionState  = DAMAGED
            Model         = RBHDGatHsL_D1  
        End

        ModelConditionState  = REALLYDAMAGED
            Model         = RBHDGatHsL_D1  
        End

        ModelConditionState  = RUBBLE
            Model         = RBHDGatHsL_D1  
        End

        ModelConditionState  = POST_RUBBLE
            Model         = None
        End

        ModelConditionState  = POST_COLLAPSE
            Model         = None
        End
                            
        WallBoundsMesh = P1
        RampMesh1 = P2
        RaisedWallMesh = P3
    End

    ;----------------------------------------------------------------------------------------------
    Draw = W3DScriptedModelDraw Draw_PosternGate
        ExtraPublicBone = Post01
        ExtraPublicBone = Post02
        ExtraPublicBone = Post03
        ExtraPublicBone = Post04

        DefaultModelConditionState
            Model            = RBHDGatHsLPst
        End

        IdleAnimationState
            BeginScript
                CurDrawableHideModule("Draw_PosternGate")
            EndScript
        End

        AnimationState = UPGRADE_POSTERN_GATE
            BeginScript
                CurDrawableShowModule("Draw_PosternGate")
            EndScript
            Animation
                AnimationName = RBHDGatHsLPst.RBHDGatHsLPst
                AnimationMode = ONCE
            End
            EnteringStateFX = FX_BuildingContructDustCulvert
        End
    End
  
    PlacementViewAngle  = 0
 
    ; ***DESIGN parameters ***
    DisplayName         = OBJECT:HelmsDeepGatehouseLeft
    Side                = Rohan
    EditorSorting       = STRUCTURE
    Browser = REGION Helms_Deep STRUCTURE
    ThreatLevel = 1.0
 
    BuildCost           = 1
    BuildTime           = 5.0           ; in seconds
    VisionRange         = 160.0          ; Shroud clearing distance
    ShroudClearingRange = 160



; For Testing Purposes


  ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone

;    VoiceSelect         = NuclearReactorSelect
     
;    UnitSpecificSounds
;    UnderConstruction     = UnderConstructionLoop
;    End
 

    ; *** ENGINEERING Parameters ***

    RadarPriority       = NOT_ON_RADAR
    KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE SELECTABLE IGNORED_IN_GUI
    CommandSet            = PosternGateCommandSetMk2
    
    Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = No   ; ??? Not sure, Helm's Deep doesn't support EVA CastleBreached anyway
    End 

    Behavior = DynamicPortalBehaviour PosternGatePortal
        TriggeredBy                = Upgrade_PosternGate
        ConflictsWith            = Upgrade_OpenGarrison Upgrade_TrebuchetTurret
        CustomAnimAndDuration    = AnimState:UPGRADE_POSTERN_GATE AnimTime:0
        
        AllowKindOf        = INFANTRY CAVALRY
        RejectKindOf    = MONSTER MACHINE ARMY_OF_DEAD 
        BonePrefix        = Post
        NumberOfBones    = 4
        WayPoint        = Index:0    Type:Walk    ; 0
        WayPoint        = Index:1    Type:Walk    ; 1
        WayPoint        = Index:2    Type:Walk    ; 2
        WayPoint        = Index:3    Type:Walk    ; 3
        WayPoint        = Index:2    Type:Walk    ; 4
        WayPoint        = Index:1    Type:Walk    ; 5
        Link            = From:0 Via:4 Via:5 To:3
        Link            = From:3 Via:1 Via:2 To:0
    End
    
    Behavior = ProductionUpdate ProductionUpdateModuleTag
        ; nothing, but is required if we have any Object-level Upgrades!
    End


  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

    ArmorSet
        Conditions        = None
        Armor             = HelmsDeepWalls
        DamageFX          = None
    End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    


 ;GeometryContactPoint = X:40 Y:40 Z:10 
 ;GeometryContactPoint = X:0 Y:-20 Z:60 


  Geometry              = BOX
  GeometryMajorRadius   = 74.0
  GeometryMinorRadius   = 95.0
  GeometryHeight        = 140.0

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 130.0
    GeometryOffset          = X:-45.0 Y:0.0 Z:0    
    
    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 130.0
    GeometryOffset          = X:45.0 Y:0.0 Z:0      

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 85.0
    GeometryOffset          = X:-12.0 Y:-25.0 Z:0    

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 85.0
    GeometryOffset          = X:60.0 Y:40.0 Z:0    

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 120.0
    GeometryOffset          = X:-20.0 Y:40.0 Z:0        
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  
  GeometryContactPoint = X:-20  Y:-75 Z:0 Grab
  GeometryContactPoint = X:0    Y:40  Z:120
  GeometryContactPoint = X:55   Y:-35 Z:0 Grab
  ;GeometryContactPoint = X:60   Y:25  Z:85 Grab
  GeometryContactPoint = X:65 Y:60  Z:60 Menu ;<-- where to draw the radial menu
End


;------------------------------------------------------------------------------
;Helms Deep Gatehouse
Object HelmsDeepGatehouseRight

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDGatHsR
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = RBHDGatHsR_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDGatHsR_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDGatHsR_D1   
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
                                    
    WallBoundsMesh = P1
    RampMesh1 = P2
    RaisedWallMesh = P3
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepGatehouseRight
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = No   ; ??? Not sure, Helm's Deep doesn't support EVA CastleBreached anyway
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 74.0
  GeometryMinorRadius   = 95.0
  GeometryHeight        = 140.0


    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 85.0
    GeometryOffset          = X:12.0 Y:-25.0 Z:0    

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 85.0
    GeometryOffset          = X:-60.0 Y:40.0 Z:0    

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 120.0
    GeometryOffset          = X:20.0 Y:40.0 Z:0    

  
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0
  Shadow                = SHADOW_VOLUME
  
  GeometryContactPoint = X:20  Y:-75 Z:0 Grab
  GeometryContactPoint = X:0  Y:40 Z:120
  GeometryContactPoint = X:-55  Y:-35 Z:0 Grab
  ;GeometryContactPoint = X:-60  Y:25 Z:92 Grab
End

;------------------------------------------------------------------------------
;Helms Deep Gatehouse
Object HelmsDeepGatehouseCenter

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day
      
    ;----------------------------------------------------------------------------------------------
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        OkToChangeModelColor  = Yes
        UseStandardModelNames = Yes

        ; Fade Parameters - fade disabled for now
        ; AlphaCameraFadeOuterRadius = 350
        ; AlphaCameraFadeInnerRadius = 250
          ; AlphaCameraAtInnerRadius = 20%

        
        DefaultModelConditionState
            Model = RBHDGatHs
        End

        ModelConditionState  = DAMAGED
            Model         = RBHDGatHs_D1  
        End

        ModelConditionState  = REALLYDAMAGED
            Model         = RBHDGatHs_D1  
        End

        ModelConditionState  = RUBBLE
            Model         = RBHDGatHs_D1  
        End

        ModelConditionState  = POST_RUBBLE
            Model         = None
        End

        ModelConditionState  = POST_COLLAPSE
            Model         = None
        End
                            
;        WallBoundsMesh = P1
;        RampMesh1 = P2
        RaisedWallMesh = P1
    End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepGatehouseRight
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE

  ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone

;    VoiceSelect         = NuclearReactorSelect
     
;    UnitSpecificSounds
;    UnderConstruction     = UnderConstructionLoop
;    End
 

    ; *** ENGINEERING Parameters ***

    RadarPriority       = NOT_ON_RADAR
    KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1

    
    Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = No   ; ??? Not sure, Helm's Deep doesn't support EVA CastleBreached anyway
    End 




  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

    ArmorSet
        Conditions        = None
        Armor             = HelmsDeepWalls
        DamageFX          = None
    End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

    Geometry              = BOX
    GeometryMajorRadius   = 85.0
    GeometryMinorRadius   = 57.5
    GeometryHeight        = 30.0
    GeometryOffset        = X:0 Y:0 Z:110
        
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 20.0
    GeometryMinorRadius   = 60.0
    GeometryHeight        = 125.0
    GeometryOffset        = X:70 Y:0 Z:0

    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 20.0
    GeometryMinorRadius   = 60.0
    GeometryHeight        = 125.0
    GeometryOffset          = X:-70 Y:0 Z:0

    GeometryFrontAngle    = -90.0  
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
  
    GeometryContactPoint = X:70  Y:-65 Z:0 Grab
    GeometryContactPoint = X:70  Y:-6 Z:0
    GeometryContactPoint = X:70  Y:-60 Z:0 
    GeometryContactPoint = X:70  Y:-60  Z:125
    GeometryContactPoint = X:-70  Y:-60  Z:125
    GeometryContactPoint = X:-70 Y:-60 Z:0
    GeometryContactPoint = X:-70 Y:-65 Z:0 Grab
    GeometryContactPoint = X:-70 Y:65 Z:0 Grab
    GeometryContactPoint = X:-70 Y:60 Z:0
    GeometryContactPoint = X:-70 Y:60  Z:125
    GeometryContactPoint = X:70  Y:60  Z:125
    GeometryContactPoint = X:70  Y:60 Z:0
    GeometryContactPoint = X:70  Y:65 Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate Wall
Object HelmsDeepGate1

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIGate1
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepGate1
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 5000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End


  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 35.0
  GeometryHeight        = 60.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate Wall
Object HelmsDeepGate2
 
 SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIGate2
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepGate2
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


  ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 35.0
  GeometryHeight        = 60.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate Pavement01
Object HelmsDeepPavement01

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = HDki_Pavement01
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepPavement01
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 35.0
  GeometryHeight        = 60.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End



;------------------------------------------------------------------------------
;Helms Deep Gate Pavement02
Object HelmsDeepPavement02

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIPave2
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepPavement02
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 35.0
  GeometryHeight        = 60.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate Rampart02
Object HelmsDeepRampart02

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIRamp2
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIRamp2_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIRamp2_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDIRamp2_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
    
    WallBoundsMesh = P3
    RampMesh1 = P2
    RampMesh2 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepRampart02
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End


  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 42.0
  GeometryMinorRadius   = 65.0
  GeometryHeight        = 150.0
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0
  Shadow                = SHADOW_VOLUME
  
  ; just grab from the center, the only we can get at this thing is if an ent is on top of it
  ;GeometryContactPoint = X:42  Y:55  Z:150 Grab
  ;GeometryContactPoint = X:42  Y:-55 Z:150 Grab
  ;GeometryContactPoint = X:-42 Y:-55 Z:150 Grab
  ;GeometryContactPoint = X:-42 Y:55  Z:150 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate Rampart03
Object HelmsDeepRampart03

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIRamp3
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIRamp3_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIRamp3_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDIRamp3_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
    
    WallBoundsMesh = P2
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepRampart03
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

    Geometry              = BOX
    GeometryMajorRadius   = 50.0
    GeometryMinorRadius   = 60.0
    GeometryHeight        = 170.0
    GeometryOffset        = X:0 Y:0 Z:0
    
    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 170.0
    GeometryOffset          = X:0 Y:0 Z:0
        
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME

    ; have no idea how this lines up with other pieces 
    ; most likely it's only going to get grabbed from if the unit is on top of it (I hope)
    GeometryContactPoint = X:40 Y:-55 Z:0 Grab
    GeometryContactPoint = X:40 Y:-50 Z:150
    GeometryContactPoint = X:0 Y:0 Z:160 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate Rampart04
Object HelmsDeepRampart04

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIRamp4
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIRamp4_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIRamp4_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDIRamp4_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
    
;   RaisedWallMesh = P2
;   RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepRampart04
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End


; For Testing Purposes


  ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes ; ??? Not sure, Helm's Deep doesn't support EVA CastleBreached anyway
  End 

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 120.0
  GeometryMinorRadius   = 50.0
  GeometryHeight        = 30.0
  GeometryOffset        = X:-33 Y:0 Z:165
  GeometryIsSmall       = No

  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 25.0
  GeometryMinorRadius   = 50.0
  GeometryHeight        = 100.0
  GeometryOffset        = X:60 Y:0 Z:95
  GeometryIsSmall       = No
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 40.0
  GeometryMinorRadius   = 40.0
  GeometryHeight        = 80.0
  GeometryOffset        = X:-100 Y:0 Z:115
  
  GeometryIsSmall       = No
    
  
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate Rampart05
Object HelmsDeepRampart05

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIRamp5
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIRamp5_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIRamp5_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDIRamp5_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
    
    WallBoundsMesh = P2
    RampMesh1 = P1
    RampMesh2 = P3
    RaisedWallMesh = P2_OLD
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepRampart05
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes  ; ??? Not sure, Helm's Deep doesn't support EVA CastleBreached anyway
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry                = BOX
  GeometryMajorRadius   = 120.0
  GeometryMinorRadius   = 70.0 
  GeometryHeight        = 30.0
  GeometryOffset        = X:0 Y:0 Z:160  
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 120.0
  GeometryMinorRadius   = 70.0 
  GeometryHeight        = 108.0
;  GeometryOffset        = X:0 Y:0 Z:0  
      
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 120.0
  GeometryMinorRadius   = 70.0 
  GeometryHeight        = 30.0
  GeometryOffset        = X:0 Y:0 Z:160  
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 37.5
  GeometryMinorRadius   = 70.0 
  GeometryHeight        = 190.0
  GeometryOffset        = X:-80 Y:0 Z:0  
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 37.5
  GeometryMinorRadius   = 70.0 
  GeometryHeight        = 190.0
  GeometryOffset        = X:80 Y:0 Z:0  

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 190.0
    GeometryOffset          = X:90 Y:0 Z:0

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 190.0
    GeometryOffset          = X:0 Y:0 Z:0

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 190.0
    GeometryOffset          = X:-90 Y:0 Z:0
      
  GeometryFrontAngle    = -110.0  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  
  GeometryContactPoint = X:-105  Y:-55 Z:0 Grab
  GeometryContactPoint = X:-40  Y:-20 Z:185 
  GeometryContactPoint = X:0  Y:-20 Z:110 Grab
  GeometryContactPoint = X:40  Y:-20 Z:185 
  GeometryContactPoint = X:105  Y:-55 Z:0 Grab
  
End



;------------------------------------------------------------------------------
;Helms Deep Gate Rampart05
Object HelmsDeepRampart05a

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIRamp5a
    End
    
    
    RampMesh1 = P01
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepRampart05a
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL NOT_AUTOACQUIRABLE NO_COLLIDE IGNORED_IN_GUI ;SELECTABLE;@1
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
  End


  Geometry              = BOX
  GeometryMajorRadius   = 10.0
  GeometryMinorRadius   = 10.0
  GeometryHeight        = 10.0
  GeometryIsSmall       = No
  Shadow                = NONE
End


;------------------------------------------------------------------------------
;Helms Deep Gate Rampart05 Invisible
Object HelmsDeepRampartInvisible

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIRampInv
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIRampInv  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIRampInv  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDIRampInv  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
    
    RampMesh1 = P01
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepRampart05Invisible
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
;    GrabObject = EntThrownBuildingRock
;    GrabFX = FX_WallGrab
;    GrabDamage = 490
;    GrabOffset = X:16 Y:0    
  End

;  ArmorSet
;    Conditions        = None
;    Armor             = HelmsDeepWalls
;    DamageFX          = None
;  End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

;  Geometry              = BOX
;  GeometryMajorRadius   = 162.0
;  GeometryMinorRadius   = 64.0
;  GeometryHeight        = 190.0
;  GeometryIsSmall       = No
;  Shadow                = SHADOW_VOLUME
End



;------------------------------------------------------------------------------
;Helms Deep Gate di Section A3
Object HelmsDeepkiSectionA3

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    WallBoundsMesh = P1
    RampMesh1 = P2 this is not in any way suitable for a ramp at this time.  
    
    DefaultModelConditionState
      Model = RBHDISecA3
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDISecA3_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecA3_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDISecA3_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
    

  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionA3
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

    Geometry              = BOX
    GeometryMajorRadius   = 141.0
    GeometryMinorRadius   = 54.0
    GeometryHeight        = 150.0
    
    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 150.0
    GeometryOffset          = X:90 Y:0 Z:0

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 150.0
    GeometryOffset          = X:0 Y:0 Z:0
            
    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 150.0
    GeometryOffset          = X:-90 Y:0 Z:0
    
    GeometryIsSmall       = No
    GeometryFrontAngle    = -130.0  
    Shadow                = SHADOW_VOLUME
    
    GeometryContactPoint = X:-105  Y:-45 Z:0   Grab
    GeometryContactPoint = X:0     Y:-15 Z:148 Grab
    GeometryContactPoint = X:105   Y:-45 Z:0   Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate di Section A5
Object HelmsDeepkiSectionA5

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDISecA5
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDISecA5_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecA5_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDISecA5_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
    
    WallBoundsMesh = P1
   ; RampMesh1 = P2
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionA5
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

     Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 80.0
  GeometryMinorRadius   = 55.0
  GeometryHeight        = 150.0
   GeometryOffset        = X:65 Y:0 Z:0

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 150.0
    GeometryOffset          = X:100 Y:0 Z:0   

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 150.0
    GeometryOffset          = X:30 Y:0 Z:0
   
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0  
  Shadow                = SHADOW_VOLUME
  End

;------------------------------------------------------------------------------
;Helms Deep Gate di Section A6
Object HelmsDeepdiSectionA6

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDISecA6
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDISecA6_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecA6_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDISecA6_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
    
    WallBoundsMesh = P1
  ;  RampMesh1 = P2
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionA6
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 80.0
  GeometryMinorRadius   = 55.0
  GeometryHeight        = 150.0
   GeometryOffset        = X:-68 Y:0 Z:0

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 150.0
    GeometryOffset          = X:-100 Y:0 Z:0   

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 150.0
    GeometryOffset          = X:-30 Y:0 Z:0
       
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0  
  Shadow                = SHADOW_VOLUME
 End

;------------------------------------------------------------------------------
;Helms Deep Gate di Section A7
Object HelmsDeepdiSectionA7

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDISecA7
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDISecA7_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecA7_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDISecA7_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
    
    WallBoundsMesh = P1
  ;  RampMesh1 = P2
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionA7
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 80.0
  GeometryMinorRadius   = 55.0
  GeometryHeight        = 150.0
   GeometryOffset        = X:68 Y:0 Z:0

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 150.0
    GeometryOffset          = X:100 Y:0 Z:0   

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 150.0
    GeometryOffset          = X:30 Y:0 Z:0
       
   
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0
 Shadow                = SHADOW_VOLUME
 End


;------------------------------------------------------------------------------
;Helms Deep Gate di Section A8
Object HelmsDeepdiSectionA8

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDISecA8
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDISecA8_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecA8_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDISecA8_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
    
    WallBoundsMesh = P1
  ;  RampMesh1 = P2
    
  End
  
  PlacementViewAngle  = 0
 
 ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionA8
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 80.0
  GeometryMinorRadius   = 55.0
  GeometryHeight        = 150.0
  GeometryOffset        = X:-68 Y:0 Z:0
  
    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 150.0
    GeometryOffset          = X:-100 Y:0 Z:0   

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 150.0
    GeometryOffset          = X:-30 Y:0 Z:0
      
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0
  Shadow                = SHADOW_VOLUME
  End
   


;------------------------------------------------------------------------------
;Helms Deep Gate di Section A4
Object HelmsDeepkiSectionA4

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDISecA4
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDISecA4_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecA4_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDISecA4_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
            
    WallBoundsMesh = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionA4
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
 
    ; *** ENGINEERING Parameters ***
    RadarPriority       = NOT_ON_RADAR
    KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE ;SELECTABLE;@1

    Behavior = CastleMemberBehavior ModuleTag_CMB
    End 

    ; Immortal because they can't be destroyed, only damaged.  
    Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000

    GrabObject = EntThrownBuildingRock
        GrabFX = FX_WallGrab
        GrabDamage = 490
        GrabOffset = X:16 Y:0    
    End

    ArmorSet
        Conditions        = None
        Armor             = HelmsDeepWalls
        DamageFX          = None
    End

    Behavior            = DestroyDie ModuleTag_07
    ;nothing
    End
 
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

    Geometry              = BOX
    GeometryMajorRadius   = 136.0
    GeometryMinorRadius   = 57.0
    GeometryHeight        = 150.0
    
    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 150.0
    GeometryOffset          = X:90 Y:0 Z:0

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 150.0
    GeometryOffset          = X:0 Y:0 Z:0
            
    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 150.0
    GeometryOffset          = X:-90 Y:0 Z:0
    
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
    
    GeometryContactPoint = X:-105 Y:-45 Z:0 Grab
    GeometryContactPoint = X:0    Y:0   Z:145 Grab
    GeometryContactPoint = X:105  Y:-45 Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate di Section B
Object HelmsDeepkiSectionB

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDISecB
    End
        
    ModelConditionState  = DAMAGED
      Model         = RBHDISecB_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecB_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDISecB_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
                    
    WallBoundsMesh = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionB
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

    Geometry              = BOX
    GeometryMajorRadius   = 80.0
    GeometryMinorRadius   = 60.0
    GeometryHeight        = 150.0
    GeometryOffset        = X:20 Y:-14 Z:0
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
    
    GeometryContactPoint = X:-60 Y:-58 Z:0 Grab
    GeometryContactPoint = X:15   Y:-5   Z:145 Grab
    GeometryContactPoint = X:90  Y:-58 Z:0 Grab
End




;------------------------------------------------------------------------------
;Helms Deep Gate di Stair1
Object HelmsDeepdiStair1

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIStair1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIStair1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIStair1_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDIStair1_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
                            
    WallBoundsMesh = P3
    RampMesh2 = P2
    RampMesh1 = P1
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiStair1
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor   ;HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

    Geometry              = BOX
    GeometryMajorRadius   = 114.0
    GeometryMinorRadius   = 117.0
    GeometryHeight        = 115.0
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
 
   AdditionalGeometry = Cylinder
   GeometryMajorRadius = 75
   GeometryMinorRadius = 75
   GeometryHeight      = 82
   GeometryOffset      = X:-22.024 Y:-127.849 Z:0
   
   AdditionalGeometry = Cylinder
   GeometryMajorRadius = 75
   GeometryMinorRadius = 75
   GeometryHeight      = 57
   GeometryOffset      = X:22.284 Y:-245 Z:0
   
   AdditionalGeometry = Cylinder
   GeometryMajorRadius = 70
   GeometryMinorRadius = 70
   GeometryHeight      = 36.5
   GeometryOffset      = X:84.753 Y:-330 Z:0
   
   AdditionalGeometry = Cylinder
   GeometryMajorRadius = 70
   GeometryMinorRadius = 70
   GeometryHeight      = 18.3
   GeometryOffset      = X:154.86 Y:-391 Z:0
   
   ;HelmsDeepdiStair1 grab points for rock-wielding ents
   GeometryContactPoint = X:-105   Y:80  Z:0 Grab
   GeometryContactPoint = X:-90   Y:0  Z:95
   GeometryContactPoint = X:-90   Y:-80 Z:0 Grab
   GeometryContactPoint = X:-70   Y:-120 Z:75
   GeometryContactPoint = X:-65  Y:-180  Z:0 Grab
   GeometryContactPoint = X:-50   Y:-230  Z:45
   GeometryContactPoint = X:-40   Y:-280  Z:0 Grab
End



;------------------------------------------------------------------------------
;Helms Deep Gate di Stair2
Object HelmsDeepdiStair2

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIStair2
    End
                                    
    WallBoundsMesh = P2
    RampMesh1 = P3
    RampMesh2 = P1
     
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiStair1
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 142.0
  GeometryMinorRadius   = 161.0
  GeometryHeight        = 80.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate di Step1
Object HelmsDeepdiStep1

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIStep1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIStep1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIStep1_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDIStep1_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
    
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiStep1
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 90.0
  GeometryMinorRadius   = 20.0
  GeometryHeight        = 22.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate di Step2
Object HelmsDeepdiStep2

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIStep2
    End
        
    ModelConditionState  = DAMAGED
      Model         = RBHDIStep2_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIStep2_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDIStep2_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
            
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiStep2
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 50.0
  GeometryHeight        = 20.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Helms Deep Gate di Wall1
Object HelmsDeepdiWall1

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIWall1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIWall1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIWall1_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDIWall1_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiWall
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 6.0
  GeometryMinorRadius   = 22.0
  GeometryHeight        = 40.0
  GeometryOffset        = X:61 Y:-46 Z:0
    
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 40.0
  GeometryMinorRadius   = 6.0
  GeometryHeight        = 40.0
  GeometryOffset        = X:26 Y:-61 Z:0
    
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 27.5
  GeometryMinorRadius   = 65.0
  GeometryHeight        = 40.0
  GeometryOffset        = X:-36.9 Y:1.8 Z:0
    
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate di Wall2
Object HelmsDeepdiWall2

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIWall2
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIWall2_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIWall2_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDIWall2_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiWall
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 17.0
  GeometryMinorRadius   = 27.5
  GeometryHeight        = 40.0
  GeometryOffset        = X:88 Y:-14 Z:0
    
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 106.0
  GeometryMinorRadius   = 5.4
  GeometryHeight        = 40.0
  GeometryOffset        = X:0 Y:5.5 Z:0
    
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 8.0
  GeometryMinorRadius   = 22.0
  GeometryHeight        = 40.0
  GeometryOffset        = X:-97 Y:20 Z:0
    
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Helms Deep Gate do Bridge1
Object HelmsDeepdoBridge1

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOBrid1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOBrid1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOBrid1_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDOBrid1_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
    
    WallBoundsMesh = P1
    RampMesh1 = P2
;    RampMesh2 = P3
       
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoBridge1
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1  
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = No   ; Bridge over the gate doesn't let enemy in when broken
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor  ;HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

    Geometry              = BOX
    GeometryMajorRadius   = 50.0
    GeometryMinorRadius   = 150.0
    GeometryHeight        = 90.0
    GeometryOffset        = X:0 Y:0 Z:0

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 80.0
    GeometryOffset          = X:0 Y:90 Z:0    

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 60.0
    GeometryOffset          = X:0 Y:0 Z:0    

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 45.0
    GeometryOffset          = X:0 Y:-90 Z:0    
        
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
    
    ; bridge is oriented so longways is along the Y w/ default camera
    GeometryContactPoint = X:-55 Y:-140  Z:0 Grab 
    GeometryContactPoint = X:-50 Y:-140  Z:0     
    GeometryContactPoint = X:-50 Y:0     Z:65
    GeometryContactPoint = X:-50 Y:140   Z:0
    GeometryContactPoint = X:-55 Y:140   Z:0 Grab 
    GeometryContactPoint = X:-50 Y:140   Z:65
    GeometryContactPoint = X:50  Y:140   Z:65
    GeometryContactPoint = X:55  Y:140   Z:0 Grab
    GeometryContactPoint = X:50  Y:140   Z:0
    GeometryContactPoint = X:50  Y:0      Z:65
    GeometryContactPoint = X:50  Y:-140   Z:0
    GeometryContactPoint = X:55  Y:-140   Z:0 Grab
    
End


;------------------------------------------------------------------------------
;Helms Deep Gate do SectionA2
Object HelmsDeepdoSectionA2

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOSecA2
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOSecA2_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOSecA2_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDOSecA2_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
    
    WallBoundsMesh = P1
       
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoSectionA2
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1  
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

    Geometry              = BOX
    GeometryMajorRadius   = 130.0
    GeometryMinorRadius   = 55.0
    GeometryHeight        = 90.0
    GeometryOffset        = X:0 Y:14 Z:0

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 80.0
    GeometryOffset          = X:-80.0 Y:15.0 Z:0    

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 80.0
    GeometryOffset          = X:0.0 Y:15.0 Z:0    

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 80.0
    GeometryOffset          = X:80.0 Y:15.0 Z:0    
        
    GeometryIsSmall       = No
    GeometryFrontAngle    = -90.0
    Shadow                = SHADOW_VOLUME
    
    GeometryContactPoint = X:-110  Y:-47 Z:0 Grab
    GeometryContactPoint = X:0  Y:0 Z:85 Grab
    GeometryContactPoint = X:110  Y:-47 Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate do SectionA5
Object HelmsDeepdoSectionA5

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOSecA5
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOSecA5_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOSecA5_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDOSecA5_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
     
    WallBoundsMesh = P1
      
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoSectionA5
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
       Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

 Geometry              = BOX
  GeometryMajorRadius   = 57.0
  GeometryMinorRadius   = 125.0
  GeometryHeight        = 90.0

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 80.0
    GeometryOffset          = X:10.0 Y:-80.0 Z:0      

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 80.0
    GeometryOffset          = X:10.0 Y:0.0 Z:0      

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 80.0
    GeometryOffset          = X:10.0 Y:80.0 Z:0    
      
  GeometryIsSmall       = No
  GeometryFrontAngle    = 180.0
  Shadow                = SHADOW_VOLUME
  
  GeometryContactPoint = X:-45 Y:-100 Z:0 Grab
  GeometryContactPoint = X:0  Y:0 Z:75 Grab
  GeometryContactPoint = X:-45  Y:100 Z:0 Grab
End

;------------------------------------------------------------------------------
;Helms Deep Gate do SectionB1
Object HelmsDeepdoSectionB1

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOSecB1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOSecB1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOSecB1_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDOSecB1_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
             
    WallBoundsMesh = P1
      
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoSectionB1
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 130.0
  GeometryMinorRadius   = 85.0
  GeometryHeight        = 90.0
  GeometryOffset        = X:0 Y:-10 Z:0

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 80.0
    GeometryOffset          = X:-80.0 Y:15.0 Z:0    
      
    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 80.0
    GeometryOffset          = X:0.0 Y:15.0 Z:0      

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 80.0
    GeometryOffset          = X:80.0 Y:15.0 Z:0      

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 80.0
    GeometryOffset          = X:40.0 Y:-60.0 Z:0      
  
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0
  Shadow                = SHADOW_VOLUME
  
  GeometryContactPoint = X:-100  Y:-20 Z:0 Grab
  GeometryContactPoint = X:-20  Y:0 Z:75 Grab
  GeometryContactPoint = X:30  Y:-93 Z:0 Grab
  GeometryContactPoint = X:120  Y:-30 Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate do SectionD
Object HelmsDeepdoSectionD

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOSecD
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOSecD_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOSecD_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDOSecD_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
                     
    WallBoundsMesh = P2
    RampMesh1 = P1
      
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoSectionD
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1  
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 92.0
  GeometryMinorRadius   = 107.0
  GeometryHeight        = 90.0

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 80.0
    GeometryOffset          = X:65.0 Y:-130.0 Z:0    
    
    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 80.0
    GeometryOffset          = X:65.0 Y:-50.0 Z:0    
    
    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 80.0
    GeometryOffset          = X:65.0 Y:35.0 Z:0    
    
    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 80.0
    GeometryOffset          = X:65.0 Y:120.0 Z:0      
    
    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 80.0
    GeometryOffset          = X:-15.0 Y:60.0 Z:0    
    
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  
  ;HelmsDeepdoSectionD Grab points for rock wielding ents
  GeometryContactPoint = X:-75 Y:30   Z:0 Grab  
  GeometryContactPoint = X:-65 Y:30   Z:70
  GeometryContactPoint = X:15  Y:30   Z:70
  GeometryContactPoint = X:21  Y:-120 Z:0 Grab
  
  
End


;------------------------------------------------------------------------------
;Helms Deep Gate do StairsA1
Object HelmsDeepdoStairsA1

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOStA1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOStA1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOStA1_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDOStA1_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
                             
    WallBoundsMesh = P2
    RampMesh1 = P1
    RampMesh2 = P3
      
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoStairsA1
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

    Geometry              = BOX
    GeometryMajorRadius   = 70.0
    GeometryMinorRadius   = 50.0
    GeometryHeight        = 25.0
    GeometryOffset        = X:-10 Y:0 Z:0
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
    
    GeometryContactPoint = X:-10 Y:55  Z:0 Grab
    GeometryContactPoint = X:-10 Y:48  Z:0 
    GeometryContactPoint = X:-10 Y:48  Z:25 
    GeometryContactPoint = X:25 Y:-48  Z:25 
    GeometryContactPoint = X:65 Y:48  Z:25 
    GeometryContactPoint = X:65 Y:58  Z:0 
    GeometryContactPoint = X:65  Y:55  Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate do StairsA4
Object HelmsDeepdoStairsA4

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOStA4
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOStA4_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOStA4_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDOStA4_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
                                     
    WallBoundsMesh = P2
    RampMesh1 = P1
    RampMesh2 = P3
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoStairsA4
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = WallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

    Geometry              = BOX
    GeometryMajorRadius   = 80.0
    GeometryMinorRadius   = 50.0
    GeometryHeight        = 45.0
    GeometryOffset        = X:0 Y:0 Z:0
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
    
    GeometryContactPoint = X:-15 Y:55  Z:0 Grab
    GeometryContactPoint = X:-15 Y:48  Z:0 
    GeometryContactPoint = X:-15 Y:48  Z:43 
    GeometryContactPoint = X:30 Y:-48  Z:43 
    GeometryContactPoint = X:80 Y:48  Z:43 
    GeometryContactPoint = X:80 Y:48  Z:0 
    GeometryContactPoint = X:80  Y:55  Z:0 Grab
End

;------------------------------------------------------------------------------
;Helms Deep Gate do StairsA5
Object HelmsDeepdoStairsA5

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOStA5
    End
                                             
    WallBoundsMesh = P2
    RampMesh1 = P1
    RampMesh2 = P3
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoStairsA5
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1  
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = HelmsDeepWallBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

    Geometry              = BOX
    GeometryMajorRadius   = 80.0
    GeometryMinorRadius   = 50.0
    GeometryHeight        = 45.0
    GeometryOffset        = X:0 Y:0 Z:0
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
    
    GeometryContactPoint = X:-15 Y:50  Z:0 Grab
    GeometryContactPoint = X:-15 Y:43  Z:0 
    GeometryContactPoint = X:-15 Y:43  Z:48 
    GeometryContactPoint = X:30 Y:-43  Z:48 
    GeometryContactPoint = X:75 Y:43  Z:48 
    GeometryContactPoint = X:75 Y:43  Z:0 
    GeometryContactPoint = X:75  Y:50  Z:0 Grab
End

;------------------------------------------------------------------------------
;Helms Deep Gate Tower
Object HelmsDeepTower

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDTower
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDTower_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDTower_D1  
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBHDTower_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepTower
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


  ; *** AUDIO Parameters ***

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 10000.0
    MaxHealthDamaged = 5000
    MaxHealthReallyDamaged = 2500
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = CYLINDER
  GeometryMajorRadius   = 68.0
  GeometryMinorRadius   = 68.0
  GeometryHeight        = 420.0

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 420.0
    GeometryOffset          = X:40.0 Y:-40.0 Z:0    
    
    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 420.0
    GeometryOffset          = X:40.0 Y:40.0 Z:0    

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 420.0
    GeometryOffset          = X:-40.0 Y:40.0 Z:0    

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 420.0
    GeometryOffset          = X:-40.0 Y:-40.0 Z:0    

    
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End



;------------------------------------------------------------------------------------------
Object RBHelmsDeepGateDoorBig

SelectPortrait = BPRHelmsDeep

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = RBHDGatDr
    End


    ModelConditionState  = RUBBLE DOOR_1_OPENING
      Model         = RBHDGatDr_D4  
    End
    AnimationState = RUBBLE DOOR_1_OPENING
        Animation = Open 
            AnimationName    =    RBHDGatDr_D4.RBHDGatDr_D4
            AnimationMode    =    ONCE 
        End
    End
       
      ModelConditionState  = RUBBLE
      Model         = RBHDGatDr_D3  
    End
     AnimationState = RUBBLE 
        Animation = Open 
            AnimationName    =    RBHDGatDr_D3.RBHDGatDr_D3
            AnimationMode    =    ONCE 
        End
    End
    
    AnimationState = DOOR_1_OPENING
        StateName = STATE_Open   
        Animation = Open 
            AnimationName    =    RBHDGatDr.RBHDGatDr
            AnimationMode    =    ONCE 
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Closed" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
        EndScript
    End
    TransitionState = TRANS_Closed_To_Open
        Animation = Open 
            AnimationName    =    RBHDGatDr.RBHDGatDr
            AnimationMode    =    ONCE 
        End
    End
        
    AnimationState = DOOR_1_CLOSING 
        StateName = STATE_Closed 
        Animation = Close 
            AnimationName    =    RBHDGatDr.RBHDGatDr
            AnimationMode    =    ONCE_BACKWARDS 
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
        BeginScript
            
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
        EndScript
    End
    TransitionState = TRANS_Open_To_Closed
        Animation = Open 
            AnimationName    =    RBHDGatDr.RBHDGatDr
            AnimationMode    =    ONCE_BACKWARDS 
        End
        Flags = START_FRAME_LAST
    End

  End


  ; *** AUDIO Parameters ***

    VoiceSelect        = GateSelect

    SoundOnDamaged        = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:RBHelmsDeepGateDoorBig
  Side = Rohan
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  VisionRange         = 1600.0          ; Shroud clearing distance

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepGates
    DamageFX          = GateDamageFX
  End

    CommandSet = CastleGateCommandSet


    ; *** ENGINEERING Parameters ***  
    KindOf                = STRUCTURE IMMOBILE SELECTABLE BLOCKING_GATE
    RadarPriority = NOT_ON_RADAR
    Body                  = ActiveBody ModuleTag_02
        MaxHealth       = 4000.0
    End

    Behavior = AIUpdateInterface ModuleTag_AIForSequentialScriptsToWork
        ; required for sequential scripts to work on this object
    End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: MinisTirithGateDie Animation:GBMgatedoorSKL.GBMgatedoorA3 Frames: 1 
    End

    Behavior = TransitionDamageFX ModleTag_hideBustedDoors
        PristineShowSubObject        HDG_GATER HDG_GATEL
        PristineHideSubObject        HDG_GATER_D1 HDG_GATER_D2 HDG_GATEL_D1 HDG_GATEL_D2
        DamagedShowSubObject        HDG_GATER_D1 HDG_GATEL_D1
        DamagedHideSubObject        HDG_GATER_D2 HDG_GATEL_D2 HDG_GATER HDG_GATEL
        ReallyDamagedShowSubObject    HDG_GATER_D2 HDG_GATEL_D2
        ReallyDamagedHideSubObject  HDG_GATER_D1  HDG_GATEL_D1 HDG_GATER HDG_GATEL
        DamagedFXList1 = Loc: X:0 Y:0 Z:0            FXList:FX_BasicSevereScreenShake
         ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0        FXList:FX_BasicSevereScreenShake
         RubbleFXList1 = Loc: X:0 Y:0 Z:0            FXList:FX_HelmsDeepGateRubble
    End

    Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
        ResetTimeInMilliseconds = 12200 ; important! this must be longer than the gates animation, ir it will twitch
        OpenByDefault = Yes
        PercentOpenForPathing = 50
        SoundOpeningGateLoop = GateOpenStart
        SoundClosingGateLoop = GateCloseStart
        SoundFinishedOpeningGate = GateOpenEnd
        SoundFinishedClosingGate = GateCloseEnd
        TimeBeforePlayingOpenSound = 6000
        TimeBeforePlayingClosedSound = 6000
    End


    Geometry              = BOX
    GeometryMajorRadius   = 16.0
    GeometryMinorRadius   = 62.0
    GeometryHeight        = 64.0
    GeometryName          = Closed
    GeometryIsSmall       = No

    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 17.0
    GeometryMinorRadius   = 10.0
    GeometryHeight        = 60.0    
    GeometryOffset          = X:10 Y:45 Z:0
    GeometryName          = OpenLeft
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 17.0
    GeometryMinorRadius   = 10.0
    GeometryHeight        = 60.0    
    GeometryOffset          = X:10 Y:-45 Z:0
    GeometryName          = OpenRight
    
    GeometryContactPoint =    X:23    Y:-39    Z:0 Ram
    GeometryContactPoint =    X:12    Y:-45    Z:60
    GeometryContactPoint =    X:0        Y:-50    Z:0
    GeometryContactPoint =    X:0        Y:-25    Z:60
    GeometryContactPoint =    X:0        Y:0        Z:0 Ram
    GeometryContactPoint =    X:0        Y:25    Z:60
    GeometryContactPoint =    X:0        Y:50    Z:0
    GeometryContactPoint =    X:12    Y:45    Z:60
    GeometryContactPoint =    X:23    Y:39    Z:0 Ram
    

    Shadow                = SHADOW_VOLUME
End




;------------------------------------------------------------------------------------------
Object RBHelmsDeepGateDoorSmall

    SelectPortrait = BPRHelmsDeep

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = RBHDIGatDr
    End

    ModelConditionState  = RUBBLE DOOR_1_OPENING
       Model         = RBHDIGATDR_D4  
     End
     AnimationState = RUBBLE DOOR_1_OPENING
         Animation = Open 
             AnimationName    =    RBHDIGATDR_D4.RBHDIGATDR_D4
             AnimationMode    =    ONCE 
         End
     End
        
       ModelConditionState  = RUBBLE
       Model         = RBHDIGATDR_D3  
     End
      AnimationState = RUBBLE 
         Animation = Open 
             AnimationName    =    RBHDIGATDR_D3.RBHDIGATDR_D3
             AnimationMode    =    ONCE 
         End
     End
     
    AnimationState = DOOR_1_OPENING
        StateName = STATE_Open   
        Animation = Open 
            AnimationName    =    RBHDIGATDR.RBHDIGATDR
            AnimationMode    =    ONCE 
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Closed" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
        EndScript
    End
    TransitionState = TRANS_Closed_To_Open
        Animation = Open 
            AnimationName    =    RBHDIGATDR.RBHDIGATDR
            AnimationMode    =    ONCE 
        End
    End
        
    AnimationState = DOOR_1_CLOSING 
        StateName = STATE_Closed 
        Animation = Close 
            AnimationName    =    RBHDIGATDR.RBHDIGATDR
            AnimationMode    =    ONCE_BACKWARDS 
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
        EndScript
    End
    TransitionState = TRANS_Open_To_Closed
        Animation = Open 
            AnimationName    =    RBHDIGATDR.RBHDIGATDR
            AnimationMode    =    ONCE_BACKWARDS 
        End
        Flags = START_FRAME_LAST
    End

  End


  ; *** AUDIO Parameters ***

    VoiceSelect        = GateSelect


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RBHelmsDeepGateDoorSmall
  Side = Rohan
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  VisionRange         = 1600.0          ; Shroud clearing distance

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepGates
    DamageFX          = GateDamageFX
  End

    CommandSet = CastleGateCommandSet


    ; *** ENGINEERING Parameters ***  
    KindOf                = STRUCTURE IMMOBILE SELECTABLE BLOCKING_GATE
    RadarPriority = NOT_ON_RADAR
    Body                  = ActiveBody ModuleTag_02
        MaxHealth       = 3500.0
    End

    Behavior = AIUpdateInterface ModuleTag_AIForSequentialScriptsToWork
        ; required for sequential scripts to work on this object
    End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: MinisTirithGateDie Animation:GBMgatedoorSKL.GBMgatedoorA3 Frames: 1 
    End

    Behavior = TransitionDamageFX ModleTag_hideBustedDoors
         PristineShowSubObject        HDG_GATER HDG_GATEL
         PristineHideSubObject        HDG_GATER_D1 HDG_GATER_D2 HDG_GATEL_D1 HDG_GATEL_D2
         DamagedShowSubObject        HDG_GATER_D1 HDG_GATEL_D1
         DamagedHideSubObject        HDG_GATER_D2 HDG_GATEL_D2 HDG_GATER HDG_GATEL
         ReallyDamagedShowSubObject    HDG_GATER_D2 HDG_GATEL_D2
         ReallyDamagedHideSubObject  HDG_GATER_D1  HDG_GATEL_D1 HDG_GATER HDG_GATEL
         DamagedFXList1 = Loc: X:0 Y:0 Z:0            FXList:FX_BasicSevereScreenShake
          ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0        FXList:FX_BasicSevereScreenShake
          RubbleFXList1 = Loc: X:0 Y:0 Z:0            FXList:FX_HelmsDeepGateRubble
     End

    Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
        ResetTimeInMilliseconds = 12200 ; important! this must be longer than the gates animation, ir it will twitch
        OpenByDefault = Yes
        PercentOpenForPathing = 50
        SoundOpeningGateLoop = GateOpenStart
        SoundClosingGateLoop = GateCloseStart
        SoundFinishedOpeningGate = GateOpenEnd
        SoundFinishedClosingGate = GateCloseEnd
        TimeBeforePlayingOpenSound = 8500
        TimeBeforePlayingClosedSound = 8500
    End

    Geometry              = BOX
    GeometryMajorRadius   = 16.0
    GeometryMinorRadius   = 57.0
    GeometryHeight        = 56.0
    GeometryName          = Closed
    GeometryIsSmall       = No
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 20.0
    GeometryMinorRadius   = 5.0
    GeometryHeight        = 56.0    
    GeometryOffset          = X:10 Y:50 Z:0
    GeometryName          = OpenLeft
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 20.0
    GeometryMinorRadius   = 5.0
    GeometryHeight        = 56.0    
    GeometryOffset          = X:10 Y:-50 Z:0
    GeometryName          = OpenRight
    
    GeometryContactPoint = X:24        Y:-50    Z:0 Ram
    GeometryContactPoint = X:12        Y:-50    Z:45
    GeometryContactPoint = X:0        Y:-50    Z:0
    GeometryContactPoint = X:0        Y:-25    Z:54
    GeometryContactPoint = X:0        Y:0        Z:0 Ram
    GeometryContactPoint = X:0        Y:25    Z:54
    GeometryContactPoint = X:0        Y:50    Z:0
    GeometryContactPoint = X:12        Y:50    Z:45
    GeometryContactPoint = X:24        Y:50    Z:0 Ram
    
    
    Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------
Object RohanRuin01

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            DefaultModelConditionState
                Model = RBGenRuin01
            End        
        End

    ; *** AUDIO Parameters ***

    ; ***DESIGN parameters ***
        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE SELECTABLE
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

    Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
        DestructionDelay  = 3000
    End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
  End

  
    Geometry              = BOX
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 42.4
    GeometryHeight        = 72.8
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
End
;------------------------------------------------------------


;------------------------------------------------------------
Object RohanRuin02

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            DefaultModelConditionState
                Model = RBGenRuin02
            End        
        End

    ; *** AUDIO Parameters ***

    ; ***DESIGN parameters ***
        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE SELECTABLE
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

    Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
        DestructionDelay  = 3000
    End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
  End
  
  
    Geometry              = BOX
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 42.4
    GeometryHeight        = 72.8
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
End
;------------------------------------------------------------

;------------------------------------------------------------
Object RohanRuin03

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            DefaultModelConditionState
                Model = RBGenRuin03
            End        
        End

    ; *** AUDIO Parameters ***

    ; ***DESIGN parameters ***
        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE SELECTABLE
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

    Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
        DestructionDelay  = 3000
    End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
  End
  
  
    Geometry              = BOX
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 42.4
    GeometryHeight        = 72.8
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
End
;------------------------------------------------------------


;------------------------------------------------------------
Object RohanFenceRuin01

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            DefaultModelConditionState
                Model = RPGenFnceRuin1
            End        
        End

    ; *** AUDIO Parameters ***

    ; ***DESIGN parameters ***
        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

    Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
        DestructionDelay  = 3000
    End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
  End
  
  
;    Geometry              = BOX
;    GeometryMajorRadius   = 40.0
;    GeometryMinorRadius   = 42.4
;    GeometryHeight        = 72.8
;    GeometryIsSmall       = No
;    ;GeometryRotationAnchorOffset = X:1037.871 Y:0
;    Shadow                = SHADOW_VOLUME
End
;------------------------------------------------------------

;------------------------------------------------------------
Object RohanFenceRuin02

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            DefaultModelConditionState
                Model = RPGenFnceRuin2
            End        
        End

    ; *** AUDIO Parameters ***

    ; ***DESIGN parameters ***
        DisplayName      = OBJECT:Ruins
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

    Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
        DestructionDelay  = 3000
    End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
  End

  
    Geometry              = BOX
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 42.4
    GeometryHeight        = 72.8
    GeometryIsSmall       = No
    ;GeometryRotationAnchorOffset = X:1037.871 Y:0
    Shadow                = SHADOW_VOLUME
End
;------------------------------------------------------------


;------------------------------------------------------------
Object RohanGenericVillage

    ; *** ART Parameters ***
        Draw = W3DScriptedModelDraw ModuleTag_01
            OkToChangeModelColor = Yes
            DefaultModelConditionState
                Model = GenRBGBVil
            End        
        End

    ; *** AUDIO Parameters ***

    ; ***DESIGN parameters ***
        DisplayName      = OBJECT:Village
        EditorSorting   = STRUCTURE

        ArmorSet
            Conditions        = None
            Armor             = NoArmor
            DamageFX          = None
        End

; *** ENGINEERING Parameters ***  
        KindOf                = STRUCTURE IMMOBILE 
        RadarPriority = STRUCTURE
        Body                  = ActiveBody ModuleTag_03
            MaxHealth                = 2000.0
            MaxHealthDamaged          = 1500.0
            MaxHealthReallyDamaged     = 1000.0
        End

    Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
        DestructionDelay  = 3000
    End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
  End
  
 
;    Geometry              = BOX
;    GeometryMajorRadius   = 40.0
;    GeometryMinorRadius   = 42.4
;    GeometryHeight        = 72.8
;    GeometryIsSmall       = No
;    ;GeometryRotationAnchorOffset = X:1037.871 Y:0
;    Shadow                = SHADOW_VOLUME
End
;------------------------------------------------------------

Object GondorCampKeepSymbioticBase

    SelectPortrait = BPGCamp

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = GBCCenter_A
;      ParticleSysBone      = glowbone01 TorchGlow
;      ParticleSysBone     = glowbone02 furnaceSmoke
    End
    
    IdleAnimationState
        Animation             = Idle
            AnimationName     = GBCCenter_A.GBCCenter_A
            AnimationMode     = MANUAL
            AnimationBlendTime = 0            
        End
        Flags = START_FRAME_LAST
        BeginScript
;            CurDrawableShowSubObject("FIRE02")
        EndScript
        
    End  

;------------Build Up States
    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = GBCCenter_A
;      ParticleSysBone      = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

    AnimationState          = ACTIVELY_BEING_CONSTRUCTED
        Animation
            AnimationName    = GBCCenter_A.GBCCenter_A
            AnimationMode   = MANUAL
        End
        BeginScript
;            CurDrawableHideSubObject("FIRE02")
            CurDrawablePlaySound("GondorBarracksBeginConstruction")
        EndScript
    End

;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = GBCCenter_A
;      ParticleSysBone      = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

    AnimationState          = BASE_BUILD
        Animation
            AnimationName = GBCCenter_A.GBCCenter_A
            AnimationMode = ONCE
            AnimationBlendTime = 0            
            AnimationSpeedFactorRange = 2.0 2.0 ; 300 frame anim, but need to shrink down to 5 seconds
        End
        BeginScript
;            CurDrawableHideSubObject("FIRE02")
        EndScript
    End

    AnimationState          = JUST_BUILT
        Animation
            AnimationName = GBCCenter_A.GBCCenter_A
            AnimationMode = MANUAL            
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
        BeginScript
;            CurDrawableHideSubObject("FIRE02")
        EndScript
    End

    ModelConditionState  = DAMAGED
      Model         = GBCCenter_D1  
      ParticleSysBone dustbone01 TrebuchetImpactDebris
;      ParticleSysBone      = glowbone01 TorchGlow
;      ParticleSysBone     = glowbone02 furnaceSmoke
    
    End
    AnimationState = DAMAGED
    EnteringStateFX    = FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = GBCCenter_D2  
      ParticleSysBone     = glowbone02 TrebuchetImpactDebris
      ParticleSysBone      = glowbone01 Explosion5
    
    End
    AnimationState = REALLYDAMAGED
    EnteringStateFX    = FX_BuildingReallyDamaged
    End
    
    ModelConditionState  = RUBBLE
      Model         = GBCCenter_D2
      ParticleSysBone dustbone01 TrebuchetImpactDebris
      ParticleSysBone      = glowbone01 Explosion5
      ParticleSysBone     = glowbone02 BuildingChunkDebris
    End
    AnimationState = RUBBLE
    End

      ModelConditionState  = POST_RUBBLE
        Model         = GBGenRubble
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    AnimationState = POST_RUBBLE
    End
    
    ModelConditionState  = POST_COLLAPSE
        Model         = GBGenRubble
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    AnimationState = POST_COLLAPSE
    End

  End


    ; *** AUDIO Parameters ***

    VoiceSelect = GondorCitadelSelect

    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone

    VoiceSelectUnderConstruction    = BuildingEvilVoiceSelectUnderConstruction

    UnitSpecificSounds
        UnderConstruction        = BuildingConstructionLoop  ; Built first time
        ; UnderRepairFromDamage    = NoSound                    ; Repaired No animation on the building, so don't bother playing sound
        UnderRepairFromRubble    = BuildingConstructionLoop    ; Repaired from completely destroyed (not used???)
    End

    EvaEventDieOwner = CitadelDie


    ; ***DESIGN parameters ***
    DisplayName      = OBJECT:GondorCampKeep
    Side = Gondor
    EditorSorting   = STRUCTURE
    ThreatLevel = 1.0
    BuildCost           = 1000
    BuildTime           = 20.0           ; in seconds
    CommandSet            = GenericKeepCommandSet

    ArmorSet
        Conditions        = None
        Armor             = StructureArmor
        DamageFX          = None
    End

    ; *** ENGINEERING Parameters ***  
    KindOf            = STRUCTURE SELECTABLE IMMOBILE CASTLE_KEEP MP_COUNT_FOR_VICTORY AUTO_RALLYPOINT
    RadarPriority        = STRUCTURE
    Body              = ActiveBody ModuleTag_ActiveBody
        MaxHealth       = 5000.0
    End

    Behavior = GettingBuiltBehavior ModuleTag_04
        WorkerName    = GondorWorkerNoSelect
        SpawnTimer  = 15
        RebuildWhenDead = Yes
        ; SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
        ;SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
        ;SelfRepairFromRubbleLoop  = BuildingConstructionLoop
    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
        BeingBuiltSound = BuildingConstructionLoop
    End 

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End
  
     Behavior                  = StructureCollapseUpdate ModuleTag_06
       MinCollapseDelay        = 000
       MaxCollapseDelay        = 000
       CollapseDamping         = .5
       MaxShudder              = 0.6
       MinBurstDelay           = 250
       MaxBurstDelay           = 800
       BigBurstFrequency       = 4
       FXList                  = INITIAL   FX_StructureMediumCollapse
     End

    Behavior                  = RubbleRiseUpdate ModuleTag_07
        MinRubbleRiseDelay      = 000
        MaxRubbleRiseDelay      = 000
        ;RubbleRiseDamping       = .5
        RubbleHeight            = 4.0
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL FX_StructureMediumCollapse
    End  
  
  Geometry              = CYLINDER
  GeometryMajorRadius   = 16.0
  GeometryMinorRadius   = 16.0
  GeometryHeight        = 88.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End



ChildObject GondorCampKeepSymbioticA GondorCampKeepSymbioticBase
    Body              = ActiveBody ModuleTag_ActiveBody
        MaxHealth       = 5000.0
    End

End
ChildObject GondorCampKeepSymbioticB GondorCampKeepSymbioticBase
    Body              = SymbioticStructuresBody ModuleTag_SymbioticBody
        Symbiote = KeepLeft
    End
End

;------------------------------------------------------------------------------
;A special version of the Rohan Hero Statue: Give no leadership bonus
;------------------------------------------------------------------------------
Object RohanHeroStatueNoLeadership

    SelectPortrait = BPRHeroicStatue

  Draw = W3DScriptedModelDraw ModuleTag_Draw
        OkToChangeModelColor  = Yes
        UseStandardModelNames = Yes

        DefaultModelConditionState
            Model = RPHeroStat
;            ParticleSysBone        = NONE BuildingDoughnutCloud
;            ParticleSysBone        = NONE StatueHeroFX
        End
    
        ModelConditionState     = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Model               = RPHeroStat_A
;            ParticleSysBone        = NONE BuildingDoughnutCloud
            ParticleSysBone     = NONE BuildingContructDust
        End  
        AnimationState          = ACTIVELY_BEING_CONSTRUCTED
            Animation
                AnimationName    = RPHeroStat_A.RPHeroStat_A
                AnimationMode   = MANUAL
            End
            BeginScript
                CurDrawablePlaySound("GondorBarracksBeginConstruction")
            EndScript
        End

        ModelConditionState     = DAMAGED
            Model               = RPHeroStat_D1
    
        End  
        AnimationState =    DAMAGED
            EnteringStateFX    = FX_StatueDamaged
        End
        
        
        ModelConditionState     = REALLYDAMAGED
            Model               = RPHeroStat_D2
    
        End  
        AnimationState =    REALLYDAMAGED
            EnteringStateFX    = FX_StatueDamaged
        End
        
            
        ModelConditionState  = RUBBLE
            Model         =  RPHeroStat_D2 
            ParticleSysBone SmokeLarge01 SmokeBuildingLarge
        End
        AnimationState = RUBBLE
        End

        ModelConditionState  = POST_RUBBLE
            Model         = None
            ParticleSysBone NONE SmokeBuildingMediumRubble
        End
        ModelConditionState  = POST_COLLAPSE
            Model         = None
            ParticleSysBone NONE SmokeBuildingMediumRubble
        End
  End



  PlacementViewAngle  = 90
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiWall
;  Description           = OBJECT:RohanStatueDescription
  Side                 = Rohan
    IsTrainable        = No
  EditorSorting        = STRUCTURE
  ThreatLevel          = 0.0
 
  BuildCost            = M_ROHAN_HEROSTATUE_BUILDCOST
  BuildTime            = M_ROHAN_HEROSTATUE_BUILDTIME            ; in seconds
  VisionRange          = M_ROHAN_HEROSTATUE_VISIONRANGE          ; Shroud clearing distance
  ShroudClearingRange  = M_ROHAN_HEROSTATUE_SHROUDCLEAR
  BountyValue          = M_ROHAN_HEROSTATUE_BOUNTY_VALUE
  
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End


  ; *** AUDIO Parameters ***

  VoiceSelect  = GondorStatueSelect

  SoundOnDamaged        = BuildingLightDamageWood
  SoundOnReallyDamaged  = BuildingHeavyDamageWood

  VoiceSelectUnderConstruction  = BuildingGoodVoiceSelectUnderConstruction

  UnitSpecificSounds
        UnderConstruction        = BuildingConstructionLoop  ; Built first time
        ; UnderRepairFromDamage    = NoSound                    ; Repaired No animation on the building, so don't bother playing sound
        UnderRepairFromRubble    = BuildingConstructionLoop    ; Repaired from completely destroyed (not used???)
  End

 
  ; *** ENGINEERING Parameters ***

  RadarPriority  = STRUCTURE
  KindOf         = PRELOAD STRUCTURE IMMOBILE SCORE NEED_BASE_FOUNDATION MADE_OF_STONE ;SELECTABLE 
 

  Behavior     = CastleMemberBehavior ModuleTag_CMB
  End 

  Body         = StructureBody ModuleTag_05
    MaxHealth  = M_ROHAN_HEROSTATUE_MAXHEALTH
  End

  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
    DestructionDelay        = 5000
  End

  Behavior = GettingBuiltBehavior ModuleTag_GetBuilt
    ;WorkerName             = "" ; Not RohanWorker, I build myself
    SpawnTimer              = 120
    RebuildWhenDead         = No
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
    SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
    SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior                  = StructureCollapseUpdate ModuleTag_Collapse
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
      DestroyObjectWhenDone = Yes
      CollapseHeight        = 126
  End

  CommandSet = SellableCommandSet

  Geometry              = BOX
  GeometryMajorRadius   = 11.0
  GeometryMinorRadius   = 22.0
  GeometryHeight        = 70.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion       = PLACED_BY_PLAYER
END



;------------------------------------------------------------------------------


Object CastleBookEnd
  
  SelectPortrait = BRCastleWall
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    WallBoundsMesh = P1
            
    DefaultModelConditionState
      Model = GBMinwallBE
    End
End

  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GondorCastleWall
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT


  VisionRange         = 0.0          ; Shroud clearing distance
  ShroudClearingRange = 0


  

  ; *** ENGINEERING Parameters ***  
    KindOf                    = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL NOT_AUTOACQUIRABLE
    RadarPriority            = NOT_ON_RADAR
    KeepSelectableWhenDead    = Yes


  Body                = StructureBody ModuleTag_03
    MaxHealth         = M_ROHAN_CASTLE_WALL_HEALTH
  End

 
  
  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End

   
    
 
     

      
  Geometry              = BOX
  GeometryMajorRadius   = 35.0
  GeometryMinorRadius   = 19.0
  GeometryHeight        = 7.0

  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  

End
