Object SpellbookNumenorBits
	; *** ART Parameters ***
	Draw = W3DScriptedModelDraw ModuleTag_Draw
		OkToChangeModelColor  = Yes
		UseStandardModelNames = Yes
		
		DefaultModelConditionState
			Model = NONE
			ParticleSysBone = None NumenorRuinsGlow
		End

		MultiPlayerOnly = No
	End 

	; ***DESIGN parameters ***
	DisplayName           = OBJECT:Ruins
	Side                  = Rivendell
	EditorSorting         = STRUCTURE
	ThreatLevel		        = 0.5

	; *** ENGINEERING Parameters ***  
	RadarPriority         = NOT_ON_RADAR
	KindOf                = NO_COLLIDE IMMOBILE UNATTACKABLE IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION MOVE_ONLY ;TAINT

	Body = ActiveBody ModuleTag_01
		MaxHealth		        = 999999
		InitialHealth	      = 999999
	End
	
	Behavior = AttributeModifierAuraUpdate ModuleTag_ElvenGroveOne
		StartsActive		    = Yes											; If no, requires upgrade to turn on.
		BonusName			      = ElvenWoodPositiveSpell
		RefreshDelay		    = 2000
		Range				        = 180
		TargetEnemy			    = No
		ObjectFilter		    = ANY +INFANTRY +CAVALRY +MACHINE -HERO -STRUCTURE -BASE_FOUNDATION
	End
	
	Behavior = AttributeModifierAuraUpdate ModuleTag_ElvenGroveTwo
		StartsActive		    = Yes											; If no, requires upgrade to turn on.
		BonusName			      = FearlessForever
		RefreshDelay		    = 2000
		Range				        = 180
		TargetEnemy			    = No
		ObjectFilter		    = ANY +INFANTRY +CAVALRY +MACHINE -HERO -STRUCTURE -BASE_FOUNDATION
	End	
	
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate		
		MinLifetime		    	= M_BEACON_LIFETIME
		MaxLifetime		    	= M_BEACON_LIFETIME
		DeathType		      	= FADED
	End
	
	Shadow		            = SHADOW_DECAL
	ShadowSizeX           = 120
	ShadowSizeY           = 120
End

; Seeds for FX use
Object SpellRuinsStatueSeed
	Draw = W3DScriptedModelDraw ModuleTag_Draw
		DefaultModelConditionState
			Model          = None
		End
	End
	
	KindOf             = IMMOBILE UNATTACKABLE TAINTEFFECT
	
	Body = ActiveBody ModuleTag_MakesKillWork
		MaxHealth        = 1
	End
	
	Behavior = LifetimeUpdate ModuleTag_Lifetime
		MinLifetime      = 0
		MaxLifetime      = 2000
	End
	
	Behavior = SlowDeathBehavior ModuleTag_SpawnRealTree
		DestructionDelay = 1500
		OCL              = FINAL OCL_SpellbookGondorNumenorSeedStatue
		FX 	             = INITIAL FX_NumenorRemnantsObjectSummon
	End
End

Object SpellRuinsColumnSeed
	Draw = W3DScriptedModelDraw ModuleTag_Draw
		DefaultModelConditionState
			Model          = None
		End
	End
	KindOf             = IMMOBILE UNATTACKABLE TAINTEFFECT
	
	Body = ActiveBody ModuleTag_MakesKillWork
		MaxHealth        = 1
	End
	
	Behavior = LifetimeUpdate ModuleTag_Lifetime
		MinLifetime      = 0
		MaxLifetime      = 2000
	End
	
	Behavior = SlowDeathBehavior ModuleTag_SpawnRealTree
		DestructionDelay = 1500
		OCL            	 = FINAL OCL_SpellbookGondorNumenorSeedColumn
		FX 	           	 = INITIAL FX_NumenorRemnantsObjectSummon
	End
	
End

Object SpellRuinsRubble01Seed
	Draw = W3DScriptedModelDraw ModuleTag_Draw
		DefaultModelConditionState
			Model          = None
		End
	End
	
	KindOf             = IMMOBILE UNATTACKABLE TAINTEFFECT
	
	Body = ActiveBody ModuleTag_MakesKillWork
		MaxHealth        = 1
	End
	
	Behavior = LifetimeUpdate ModuleTag_Lifetime
		MinLifetime      = 0
		MaxLifetime      = 2000
	End
	
	Behavior = SlowDeathBehavior ModuleTag_SpawnRealTree
		DestructionDelay = 1500
		OCL              = FINAL OCL_SpellbookGondorNumenorSeedRubble1
	End
End

; Actual Objects
; --- Statue ----
Object SpellRuinsStatue
	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes
		
		StaticModelLODMode = yes
		
		DefaultModelConditionState
			Model = None
		End

		
		ModelConditionState  = UPGRADE_GARRISON 
			Model         = gbrstat
		End	
		AnimationState = UPGRADE_GARRISON
			;Flags = START_FRAME_LAST
			Animation
				AnimationName = gbrstat.gbrstat
				AnimationMode = ONCE
				AnimationSpeedFactorRange	= 1 1
			End
		End
	
		IdleAnimationState
		End
	End
	
	; ***DESIGN parameters ***
	DisplayName                   = OBJECT:Ruins
	EditorSorting                 = STRUCTURE

	ArmorSet
		Conditions                  = None
		Armor                       = NoArmor
		DamageFX                    = None
	End

	; *** ENGINEERING Parameters ***  
	KindOf                        = IMMOBILE STRUCTURE IGNORED_IN_GUI UNATTACKABLE NOT_AUTOACQUIRABLE CLEARED_BY_BUILD
	RadarPriority                 = NOT_ON_RADAR
	
	Body = ActiveBody ModuleTag_03
		MaxHealth                   = 2000.0
	End

	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		              = M_BEACON_LIFETIME
		MaxLifetime		              = M_BEACON_LIFETIME
		DeathType		                = FADED
	End
	
	Behavior = AIUpdateInterface ModuleTag_AI
		AILuaEventsList					    = Ruins1Functions
	End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		FadeDelay                 	= 3000
		FadeTime                    = 3000
		DestructionDelay            = 6000
		FX 	                        = INITIAL FX_NumenorRemnantsObjectRemove
		Sound                       = INITIAL BuildingFallingStone
	End
		
	Behavior = GrantUpgradeCreate ModuleTag BeFullyUpgraded
		UpgradeToGrant              = Upgrade_StructureLevel1
	End 
	
	Behavior = GeometryUpgrade ModueTag_TowerGeom
		TriggeredBy			            = Upgrade_StructureLevel1
		CustomAnimAndDuration	      = AnimState:UPGRADE_GARRISON AnimTime:0
	End
	
	Behavior = SquishCollide ModuleTag_07
		;nothing
	End
	
	Behavior = PhysicsBehavior ModuleTag_04
	End
	
	LocomotorSet
		Locomotor                   = FakeImmobileLocomotor
		Condition                   = SET_NORMAL
		Speed                       = 0
	End
	
	Geometry                      = BOX
	GeometryMajorRadius           = 15
	GeometryMinorRadius           = 15
	GeometryHeight                = 40.0
	GeometryIsSmall               = No
	Shadow                        = SHADOW_VOLUME
End
	
	
; --- Column ----
Object SpellRuinsColumn

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes
		
		StaticModelLODMode = yes
		
		DefaultModelConditionState
			Model = None
		End
		
		ModelConditionState  = UPGRADE_GARRISON 
			Model         = gbrcol
		End	
		AnimationState = UPGRADE_GARRISON
			Animation
				AnimationName = gbrcol.gbrcol
				AnimationMode = ONCE
				AnimationSpeedFactorRange	= 1 1
			End
		End
	
		IdleAnimationState
		End
	
	End
		
	; ***DESIGN parameters ***
	DisplayName               = OBJECT:Ruins
	EditorSorting             = STRUCTURE

	ArmorSet
		Conditions              = None
		Armor                   = NoArmor
		DamageFX                = None
	End
	
	Behavior = AIUpdateInterface ModuleTag_AI
		AILuaEventsList					= Ruins2Functions
	End
	
	; *** ENGINEERING Parameters ***  
	KindOf                    = IMMOBILE STRUCTURE IGNORED_IN_GUI UNATTACKABLE NOT_AUTOACQUIRABLE CLEARED_BY_BUILD
	RadarPriority             = NOT_ON_RADAR
	
	Body = ActiveBody ModuleTag_03
		MaxHealth				        = 2000.0

	End
	
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		          = M_BEACON_LIFETIME
		MaxLifetime		          = M_BEACON_LIFETIME
		DeathType		            = FADED
	End
	
	Behavior = GrantUpgradeCreate ModuleTag BeFullyUpgraded
		UpgradeToGrant          = Upgrade_StructureLevel1
	End 
	
	Behavior = GeometryUpgrade ModueTag_TowerGeom
		TriggeredBy			        = Upgrade_StructureLevel1
		CustomAnimAndDuration	  = AnimState:UPGRADE_GARRISON AnimTime:0
	End
	
	Behavior = SquishCollide ModuleTag_07
		;nothing
	End
	
	Behavior = PhysicsBehavior ModuleTag_04
	End
	
	LocomotorSet
		Locomotor               = FakeImmobileLocomotor
		Condition               = SET_NORMAL
		Speed                   = 0
	End
	
	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		FadeDelay             	= 3000
		FadeTime                = 3000
		DestructionDelay        = 6000
		FX 	                    = INITIAL FX_NumenorRemnantsObjectRemove
		Sound                   = INITIAL BuildingFallingStone
	End

	Geometry                	= BOX
	GeometryMajorRadius       = 20
	GeometryMinorRadius       = 25
	GeometryHeight            = 40
	Shadow                    = SHADOW_VOLUME
End

; --- Rubble ----
Object SpellRuinsRubble01

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes
		
		StaticModelLODMode = yes
		
		DefaultModelConditionState
			Model = None
		End
		
		ModelConditionState  = UPGRADE_GARRISON 
			Model         = gbrruin
		End	
		AnimationState = UPGRADE_GARRISON
			;Flags = START_FRAME_LAST
			Animation
				AnimationName = gbrruin.gbrruin
				AnimationMode = ONCE
				AnimationSpeedFactorRange	= 1 1
			End
		End
	
		IdleAnimationState
		End
	
	End

	; ***DESIGN parameters ***
	DisplayName               = OBJECT:Ruins
	EditorSorting             = STRUCTURE

	ArmorSet
		Conditions              = None
		Armor                   = NoArmor
		DamageFX                = None
	End

	; *** ENGINEERING Parameters ***  
	KindOf                    = IMMOBILE UNATTACKABLE NOT_AUTOACQUIRABLE HIDE_IF_FOGGED CLEARED_BY_BUILD ;INERT OPTIMIZED_PROP
	RadarPriority             = NOT_ON_RADAR
	
	Body = ActiveBody ModuleTag_03
		MaxHealth               = 2000.0
	End
	
	Behavior = AIUpdateInterface ModuleTag_AI
		AILuaEventsList					= Ruins3Functions
	End
	
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		          = M_BEACON_LIFETIME
		MaxLifetime		          = M_BEACON_LIFETIME
		DeathType		            = FADED
	End
	
	Behavior = GrantUpgradeCreate ModuleTag BeFullyUpgraded
		UpgradeToGrant          = Upgrade_StructureLevel1
	End 
	
	Behavior = GeometryUpgrade ModueTag_TowerGeom
		TriggeredBy			        = Upgrade_StructureLevel1
		CustomAnimAndDuration	  = AnimState:UPGRADE_GARRISON AnimTime:0
	End
	
	Behavior = SquishCollide ModuleTag_07
		;nothing
	End
	
	Behavior = PhysicsBehavior ModuleTag_04
	End
	
	LocomotorSet
		Locomotor               = FakeImmobileLocomotor
		Condition               = SET_NORMAL
		Speed                   = 0
	End
	
	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		FadeDelay             	= 3000
		FadeTime                = 3000
		DestructionDelay        = 6000
		Sound                   = INITIAL BuildingFallingStone
	End
	
	Shadow                    = SHADOW_VOLUME
End

;----------------------------------------------------------------------------
;----------------------------------------------------------------------------
Object ArnorRemnantTreeSeed
	Draw = W3DScriptedModelDraw ModuleTag_Draw
		DefaultModelConditionState
			Model = None
		End
	End
	KindOf = IMMOBILE UNATTACKABLE ;TAINTEFFECT
	
	Body = ActiveBody ModuleTag_MakesKillWork
		MaxHealth = 1
	End
	
	Behavior = LifetimeUpdate ModuleTag_Lifetime
		MinLifetime = 0
		MaxLifetime = 2000
	End
	
	Behavior = SlowDeathBehavior ModuleTag_SpawnRealTree
		OCL = FINAL OCL_ArnorRemnantTree
	End
End

;----------------------------------------------------------------------------
Object ArnorRemnantTree
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
		DefaultModelConditionState
			Model                   = pttreearnor_bld
			ParticleSysBone           = None ElvenWoodSummonShafts
		End
			
		IdleAnimationState
			Animation                 = IDLA
			AnimationName             = pttreearnor_bld.pttreearnor_bld
			AnimationMode             = ONCE
			AnimationSpeedFactorRange	= 1.6 1.6
			End
			End    
		End

  ; ***DESIGN parameters ***
  DisplayName                 = OBJECT:Tree
  EditorSorting               = MISC_MAN_MADE

  ; *** ENGINEERING Parameters ***
  KindOf                      = IMMOBILE UNATTACKABLE ;TAINTEFFECT
  
  Body = ActiveBody ModuleTag_01
    MaxHealth                 = 99999.0
  End

  Behavior = LifetimeUpdate ModuleTag_02
    MinLifetime               = 5200   ; min lifetime in msec
    MaxLifetime               = 5200  ; max lifetime in msec
  End

  Behavior = SlowDeathBehavior ModuleTag_03
		DeathTypes                = ALL
		OCL                       = FINAL OCL_ArnorRemnantTreeSpawn
  End

  Geometry                    = CYLINDER
  GeometryMajorRadius         = 8.0
  GeometryMinorRadius         = 8.0
  GeometryHeight              = 38.4
  GeometryIsSmall             = Yes
End
;----------------------------------------------------------------------------
Object ArnorRemnantFlowerGrassSeed1
	Draw = W3DScriptedModelDraw ModuleTag_Draw
		DefaultModelConditionState
			Model = None
		End
	End
	KindOf = IMMOBILE UNATTACKABLE ;TAINTEFFECT
	
	Body = ActiveBody ModuleTag_MakesKillWork
		MaxHealth = 1
	End
	
	Behavior = LifetimeUpdate ModuleTag_Lifetime
		MinLifetime = 3000
		MaxLifetime = 8000
	End
	
	Behavior = SlowDeathBehavior ModuleTag_SpawnRealTree
		OCL = FINAL OCL_ArnorRemnantFlowerGrass1
	End
End
;----------------------------------------------------------------------------
Object ArnorRemnantFlowerGrassSeed2
	Draw = W3DScriptedModelDraw ModuleTag_Draw
		DefaultModelConditionState
			Model     = None
		End
	End
	KindOf        = IMMOBILE UNATTACKABLE ;TAINTEFFECT
	
	Body = ActiveBody ModuleTag_MakesKillWork
		MaxHealth   = 1
	End
	
	Behavior = LifetimeUpdate ModuleTag_Lifetime
		MinLifetime = 3000
		MaxLifetime = 8000
	End
	
	Behavior = SlowDeathBehavior ModuleTag_SpawnRealTree
		OCL         = FINAL OCL_ArnorRemnantFlowerGrass2
	End
End
;------------------------------------------------------------------------------
Object ArnorRemnantsAthelas

  ; *** ART Parameters ***
  Draw = W3DTreeDraw ModuleTag_01
    ModelName                 = ptathelas
    TextureName               = abdunecamp.tga

    ; The following parameters apply when grass is pused aside.
    MoveOutwardTime           = 333 ; .333 seconds
    MoveInwardTime            = 1666 ; 1.6 seconds
    MoveOutwardDistanceFactor = 1.0f ; Modify the distance grass is pushed aside.
    DarkeningFactor           = 0.3 ; Amount grass is darkened when it is pushed aside.
  End

  ; *** DESIGN parameters ***
  DisplayName                 = OBJECT:Prop
  EditorSorting               = SHRUBBERY
  KindOf                      = SHRUBBERY IMMOBILE SHRUB

  ; *** ENGINEERING Parameters ***
  Shadow                      = SHADOW_DECAL
  ShadowTexture               = ShadowI

End
;------------------------------------------------------------------------------
Object ArnorGrassField01
  ; *** ART Parameters ***
  ; Note - draw module must be the first module in an SHRUB object.
  ; Also, the kindof SHRUB must be set. 
  Draw = W3DTreeDraw ModuleTag_01
    ModelName                      = ptgrassfldarnor
    TextureName                    = ptgrassAOTR01.tga

    ; The following parameters apply when grass is pused aside.
    MoveOutwardTime                = 333 ; .333 seconds
    MoveInwardTime                 = 1666 ; 1.6 seconds
    MoveOutwardDistanceFactor      = 1.0f ; Modify the distance grass is pushed aside.
    DarkeningFactor                = 0.3 ; Amount grass is darkened when it is pushed aside.
  End

  ; *** DESIGN parameters ***
  DisplayName                      = OBJECT:Prop
  EditorSorting                    = SHRUBBERY
  CrushableLevel                   = 0

  ArmorSet
    Conditions                     = None
    Armor                          = NoArmor
  End

  ; *** ENGINEERING parameters ***
  KindOf                           = SHRUBBERY SHRUB IMMOBILE IGNORED_IN_GUI OPTIMIZED_PROP

  Body = HighlanderBody ModuleTag_10 ;Can take damage, but won't die.  Can only die from ::kill() or other unresistable damage
    MaxHealth                      = 50.0
  End


  Geometry                         = CYLINDER
  GeometryIsSmall                  = Yes
  GeometryMajorRadius              = 3.2
  GeometryHeight                   = 3.2
  ; no shadow ;Shadow              = SHADOW_DECAL
  InstanceScaleFuzziness           = 0.3 ; will instance with scale from 70% to 130%
  
End