;----------------------------------------------------------------------------------------------
Object RivendellCastleWall1

  SelectPortrait                    	= BPRivendellWall
	
	Draw                                = W3DScriptedModelDraw Draw_Wall
	
		OkToChangeModelColor              = Yes

	  WallBoundsMesh                  	= WALL_W1

		DefaultModelConditionState
			Model                           = ebcastwall1 
		End

		ModelConditionState               = WORLD_BUILDER
  		Model                         	= ebcastwall1
  	End
		
    ;------------Build Up States
		ModelConditionState               = BASE_BUILD
  		Model                         	= ebcastwall1 
  	End
		
		AnimationState                    = BASE_BUILD
			Animation
				AnimationName                 = ebcastwall1.ebcastwall1
				AnimationMode                 = ONCE
				AnimationSpeedFactorRange     = 1.5 2.5 ; keep range wide to avoid lockstep anims
			End
		End    
		
    ;------------Just Built States
		ModelConditionState               = JUST_BUILT
  		Model                         	= ebcastwall1 
  	End
			
		AnimationState                    = JUST_BUILT
			StateName                       = STATE_None
			Animation
				AnimationName                 = ebcastwall1.ebcastwall1 
				AnimationMode                 = MANUAL
			End
			Flags                           = START_FRAME_FIRST
		End
		
    ;------------Actively Being Constructed
		ModelConditionState               = ACTIVELY_BEING_CONSTRUCTED
  		Model                         	= ebcastwall1 
  	End
			
		AnimationState                    = ACTIVELY_BEING_CONSTRUCTED
			Animation
				AnimationName                 = ebcastwall1.ebcastwall1 
				AnimationMode                 = MANUAL
			End
			Flags                           = START_FRAME_FIRST
		End    

		;------------Damage States D1
		ModelConditionState               = DAMAGED
			Model                           = ebcastwall1_d1
		End
	    
		AnimationState                    = DAMAGED
	;      EnteringStateFX              = FX_RohanWallDamaged
		End
		
    ;------------Damage States D2
		ModelConditionState               = REALLYDAMAGED
			Model                           = ebcastwall1_d2
		End
		
		AnimationState                    = REALLYDAMAGED
      Animation				            		=	ReallyDamagedanimation
				AnimationName		              =	ebcastwall1_d2.ebcastwall1_d2
				AnimationMode		              =	ONCE
   		End
		End
		
    ;------------Damage States D3
		ModelConditionState               = RUBBLE
      Model                           = ebcastwall1_d3
      ParticleSysBone NONE BuildingChunkBitsTrail
      ParticleSysBone NONE ExplosiveMineFire02
    End
	    
		AnimationState                    = RUBBLE
			Animation				                =	Death
				AnimationName		              =	ebcastwall1_d3.ebcastwall1_d3
				AnimationMode		              =	ONCE
			End
			EnteringStateFX                 = FX_WallDie
		End      

		ModelConditionState               = POST_RUBBLE
			Model                           = None
		End

		ModelConditionState               = POST_COLLAPSE
			Model                           = None
		End

	End
	
  
	;----------------------- AUDIO -------------------------

	VoiceSelect			                    = Gui_PlotSelect

	SoundOnDamaged			                = BuildingLightDamageStone
	SoundOnReallyDamaged		            = BuildingHeavyDamageStone


	; ***DESIGN parameters ***
	DisplayName		                      = OBJECT:RivendellCastleWall
	EditorSorting	                      = STRUCTURE
	Side			                          = Rivendell
	BuildTime		                        = M_CASTLE_WALL_REBUILD_TIME
	BuildCost		                        = M_CASTLE_WALL_REBUILD_COST
  ShroudClearingRange               	= 160

	ArmorSet
		Conditions	                      = None
		Armor		                          = GondorCastleWall            
		DamageFX	                        = MinasWallADamageFX
	End
	

	; *** ENGINEERING Parameters ***  
	KindOf					                    = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR SELECTABLE NOT_AUTOACQUIRABLE MADE_OF_STONE
	RadarPriority			                  = NOT_ON_RADAR
	KeepSelectableWhenDead	            = Yes
	CommandSet				                  = GenericSelfRepairCommandSet
	
	Body				                        = ActiveBody ModuleTag_02
		MaxHealth		                      = M_GONDOR_CASTLE_WALL_HEALTH
	End

	Behavior                          	= SiegeDockingBehavior ModuleTag_SiegeDocking
	End
	
	Behavior                            = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached        = Yes
	End 

 	Behavior                            = GettingBuiltBehavior ModuleTag_GettingBuilt
	  SelfBuildingLoop                	= BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop          = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop          = BuildingConstructionLoop
		SpawnTimer                        = -1.0 ; Negative means no 'autoheal'
		RebuildTimeSeconds                = M_CASTLE_WALL_REBUILD_TIME
	End
	
  Behavior                          	= KeepObjectDie ModuleTag_IWantRubble
  End
	
 	Behavior                          	= AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	                    = Yes ;If no, requires upgrade to turn on.
		BonusName		                      = WallBonus
		RefreshDelay	                    = 2000
		;TargetEnemy		                  = Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

 	Behavior                            = FireWeaponWhenDeadBehavior FireDeadTag1
		DeathTypes					              = ALL
		StartsActive				              = Yes
		ActiveDuringConstruction	        = Yes
		DeathWeapon					              = CastleWallDeath
	End	

 	Behavior                            = FireWeaponWhenDeadBehavior FireDeadTag2
		DeathTypes					              = ALL
		StartsActive				              = Yes
		ActiveDuringConstruction	        = Yes
		DeathWeapon					              = StandardWallDeath
	End	

	Geometry						                = BOX
	GeometryMajorRadius				          = 55.0
	GeometryMinorRadius				          = 30.0
	GeometryHeight					            = 45.0
	
	GeometryContactPoint                =	X:-50			Y:-40				Z:0 Grab
	GeometryContactPoint                =	X:0				Y:-40				Z:40 Grab
	GeometryContactPoint                =	X:50			Y:-40				Z:0 Grab
	GeometryContactPoint                =	X:-50			Y:40				Z:0 Grab
	GeometryContactPoint                =	X:0				Y:40				Z:40 Grab
	GeometryContactPoint                =	X:50			Y:40				Z:0 Grab
	
	GeometryIsSmall					            = No
	Shadow							                = SHADOW_VOLUME
End

;----------------------------------------------------------------------------------------------
Object RivendellCastleWall2
  SelectPortrait                    	= BPRivendellWall
	
	Draw                                = W3DScriptedModelDraw Draw_Wall
	
		OkToChangeModelColor              = Yes

	    WallBoundsMesh                  = WALL_B_W1

		DefaultModelConditionState
			Model                           = ebcastwall2 
		End

		ModelConditionState               = WORLD_BUILDER
  			Model                         = ebcastwall2
  		End

		; -- Base Build State
		ModelConditionState               = BASE_BUILD
  		Model                         	= ebcastwall2 
  	End
		
		AnimationState                    = BASE_BUILD
			Animation
				AnimationName                 = ebcastwall2.ebcastwall2 
				AnimationMode                 = ONCE
				AnimationSpeedFactorRange     = 1.5 2.5 ; keep range wide to avoid lockstep anims
			End
		End    

		; -- Just Built State
		ModelConditionState               = JUST_BUILT
			Model                         	= ebcastwall2 
		End
		
		AnimationState                    = JUST_BUILT
			StateName                       = STATE_None
			Animation
				AnimationName                 = ebcastwall2.ebcastwall2 
				AnimationMode                 = MANUAL
			End
			Flags                           = START_FRAME_FIRST
		End

		; -- Actively Being Constructed State
		ModelConditionState               = ACTIVELY_BEING_CONSTRUCTED
			Model                         	= ebcastwall2 
		End
		
		AnimationState                    = ACTIVELY_BEING_CONSTRUCTED
			Animation
				AnimationName                 = ebcastwall2.ebcastwall2 
				AnimationMode                 = MANUAL
			End
			Flags                           = START_FRAME_FIRST
		End    

		; -- Damage States D1
		ModelConditionState               = DAMAGED
			Model                           = ebcastwall2_d1
		End
	    
		AnimationState                    = DAMAGED
	;      EnteringStateFX              = FX_RohanWallDamaged
		End
		
		; -- Damage States D2
		ModelConditionState               = REALLYDAMAGED
			Model                           = ebcastwall2_d2
		End
		
		AnimationState                    = REALLYDAMAGED
       		Animation				            =	ReallyDamagedanimation
				AnimationName		              =	ebcastwall2_d2.ebcastwall2_d2
				AnimationMode		              =	ONCE
   			End
	;        EnteringStateFX            = FX_RohanWallReallyDamaged
		End
		
		; -- Damage States D3
		ModelConditionState               = RUBBLE
      Model                           = ebcastwall2_d3
      ParticleSysBone NONE BuildingChunkBitsTrail
      ParticleSysBone NONE ExplosiveMineFire02
    End
	    
		AnimationState                    = RUBBLE
			Animation				                =	Death
				AnimationName		              =	ebcastwall2_d3.ebcastwall2_d3
				AnimationMode		              =	ONCE
			End
			EnteringStateFX                 = FX_WallDie
			;EnteringStateFX                = FX_RohanWallRubble
		End      

		ModelConditionState               = POST_RUBBLE
			Model                           = None
		End

		ModelConditionState               = POST_COLLAPSE
			Model                           = None
		End

	End
	
  
	;----------------------- AUDIO -------------------------

	VoiceSelect			                    = Gui_PlotSelect

	SoundOnDamaged			                = BuildingLightDamageStone
	SoundOnReallyDamaged		            = BuildingHeavyDamageStone


	; ***DESIGN parameters ***
	DisplayName		                      = OBJECT:RivendellCastleWall
	EditorSorting	                      = STRUCTURE
	Side			                          = Rivendell
	BuildTime		                        = M_CASTLE_WALL_REBUILD_TIME
	BuildCost		                        = M_CASTLE_WALL_REBUILD_COST
  	ShroudClearingRange               = 160

	ArmorSet
		Conditions	                      = None
		Armor		                          = GondorCastleWall            
		DamageFX	                        = MinasWallADamageFX
	End
	

	; *** ENGINEERING Parameters ***  
	KindOf					                    = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR SELECTABLE NOT_AUTOACQUIRABLE MADE_OF_STONE
	RadarPriority			                  = NOT_ON_RADAR
	KeepSelectableWhenDead	            = Yes
	CommandSet				                  = GenericSelfRepairCommandSet
	
	Body				                        = ActiveBody ModuleTag_02
		MaxHealth		                      = M_GONDOR_CASTLE_WALL_HEALTH
	End

    Behavior                          = SiegeDockingBehavior ModuleTag_SiegeDocking
    End
	
	Behavior                            = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached        = Yes
	End 

 	Behavior                            = GettingBuiltBehavior ModuleTag_GettingBuilt
	    SelfBuildingLoop                = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop          = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop          = BuildingConstructionLoop
		SpawnTimer                        = -1.0 ; Negative means no 'autoheal'
		RebuildTimeSeconds                = M_CASTLE_WALL_REBUILD_TIME
	End

;	Behavior                            = FoundationAIUpdate ModuleTag_foundationAI
;	End
	
    Behavior                          = KeepObjectDie ModuleTag_IWantRubble
    End
	
  	Behavior                          = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	                    = Yes ;If no, requires upgrade to turn on.
		BonusName		                      = WallBonus
		RefreshDelay	                    = 2000
		;TargetEnemy		                  = Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

 	Behavior                            = FireWeaponWhenDeadBehavior FireDeadTag1
		DeathTypes					              = ALL
		StartsActive				              = Yes
		ActiveDuringConstruction	        = Yes
		DeathWeapon					              = CastleWallDeath
	End	

 	Behavior                            = FireWeaponWhenDeadBehavior FireDeadTag2
		DeathTypes					              = ALL
		StartsActive				              = Yes
		ActiveDuringConstruction	        = Yes
		DeathWeapon					              = StandardWallDeath
	End	

	Geometry						                = BOX
	GeometryMajorRadius				          = 55.0
	GeometryMinorRadius				          = 30.0
	GeometryHeight					            = 45.0
	
	GeometryContactPoint                =	X:-50			Y:-40				Z:0 Grab
	GeometryContactPoint                =	X:0				Y:-40				Z:40 Grab
	GeometryContactPoint                =	X:50			Y:-40				Z:0 Grab
	GeometryContactPoint                =	X:-50			Y:40				Z:0 Grab
	GeometryContactPoint                =	X:0				Y:40				Z:40 Grab
	GeometryContactPoint                =	X:50			Y:40				Z:0 Grab
	
	GeometryIsSmall					            = No
	Shadow							                = SHADOW_VOLUME
End

;----------------------------------------------------------------------------------------------
Object RivendellCastleCorner

  SelectPortrait                    	= BPRivendellCastleCorner
	Draw                                = W3DScriptedModelDraw Draw_Wall
	
		OkToChangeModelColor              = Yes

	    WallBoundsMesh                  = WALL_CORN_W1

		DefaultModelConditionState
			Model                           = ebcastcorn 
		End

		ModelConditionState               = WORLD_BUILDER
  			Model                         = ebcastcorn
  		End

		; -- Base Build State
		ModelConditionState               = BASE_BUILD
  			Model                         = ebcastcorn 
  		End
		AnimationState                    = BASE_BUILD
			Animation
				AnimationName                 = ebcastcorn.ebcastcorn 
				AnimationMode                 = ONCE
				AnimationSpeedFactorRange     = 1.5 2.5 ; keep range wide to avoid lockstep anims
			End
		End    
		
		; -- Just Built State
		ModelConditionState               = JUST_BUILT
  			Model                         = ebcastcorn 
  		End
		AnimationState                    = JUST_BUILT
			StateName                       = STATE_None
			Animation
				AnimationName                 = ebcastcorn.ebcastcorn 
				AnimationMode                 = MANUAL
			End
			Flags                           = START_FRAME_FIRST
		End
		
		; -- Actively Being Contructed State
		ModelConditionState               = ACTIVELY_BEING_CONSTRUCTED
  			Model                         = ebcastcorn 
  		End
		AnimationState                    = ACTIVELY_BEING_CONSTRUCTED
			Animation
				AnimationName                 = ebcastcorn.ebcastcorn 
				AnimationMode                 = MANUAL
			End
			Flags                           = START_FRAME_FIRST
		End    

		; -- Damage States D1
		ModelConditionState               = DAMAGED
			Model                           = ebcastcorn_d1
		End
	    
		AnimationState                    = DAMAGED
	;      EnteringStateFX              = FX_RohanWallDamaged
		End
		; -- Damage States D2
		ModelConditionState               = REALLYDAMAGED
			Model                           = ebcastcorn_d2
		End
		AnimationState                    = REALLYDAMAGED
       		Animation				            =	ReallyDamagedanimation
				AnimationName		              =	ebcastcorn_d2.ebcastcorn_d2
				AnimationMode		              =	ONCE
   			End
	;        EnteringStateFX            = FX_RohanWallReallyDamaged
		End
		
		; -- Damage States D3
		ModelConditionState               = RUBBLE
      Model                           = ebcastcorn_d3
      ParticleSysBone NONE BuildingChunkBitsTrail
      ParticleSysBone NONE ExplosiveMineFire02
    End
	    
		AnimationState                    = RUBBLE
			Animation				                =	Death
				AnimationName		              =	ebcastcorn_d3.ebcastcorn_d3
				AnimationMode		              =	ONCE
			End
			EnteringStateFX                 = FX_WallDie
			;EnteringStateFX                = FX_RohanWallRubble
		End      

		ModelConditionState               = POST_RUBBLE
			Model                           = None
		End

		ModelConditionState               = POST_COLLAPSE
			Model                           = None
		End

	End
	
  
	;----------------------- AUDIO -------------------------

	VoiceSelect			                    = Gui_PlotSelect

	SoundOnDamaged			                = BuildingLightDamageStone
	SoundOnReallyDamaged		            = BuildingHeavyDamageStone


	; ***DESIGN parameters ***
	DisplayName		                      = OBJECT:RivendellCastleWall
	EditorSorting	                      = STRUCTURE
	Side			                          = Rivendell
	BuildTime		                        = M_CASTLE_WALL_REBUILD_TIME
	BuildCost		                        = M_CASTLE_WALL_REBUILD_COST
  	ShroudClearingRange               = 160

	ArmorSet
		Conditions	                      = None
		Armor		                          = GondorCastleWall            
		DamageFX	                        = MinasWallADamageFX
	End
	

	; *** ENGINEERING Parameters ***  
	KindOf					                    = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR SELECTABLE NOT_AUTOACQUIRABLE MADE_OF_STONE
	RadarPriority			                  = NOT_ON_RADAR
	KeepSelectableWhenDead	            = Yes
	CommandSet				                  = GenericSelfRepairCommandSet
	
	Body				                        = ActiveBody ModuleTag_02
		MaxHealth		                      = M_GONDOR_CASTLE_WALL_HEALTH
	End

    Behavior                          = SiegeDockingBehavior ModuleTag_SiegeDocking
    End
	
	Behavior                            = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached        = Yes
	End 

 	Behavior                            = GettingBuiltBehavior ModuleTag_GettingBuilt
	    SelfBuildingLoop                = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop          = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop          = BuildingConstructionLoop
		SpawnTimer                        = -1.0 ; Negative means no 'autoheal'
		RebuildTimeSeconds                = M_CASTLE_WALL_REBUILD_TIME
	End

;	Behavior                            = FoundationAIUpdate ModuleTag_foundationAI
;	End
	
    Behavior                          = KeepObjectDie ModuleTag_IWantRubble
    End
	
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		ObjectFilter	= ALL -MACHINE
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

 	Behavior                            = FireWeaponWhenDeadBehavior FireDeadTag1
		DeathTypes					              = ALL
		StartsActive				              = Yes
		ActiveDuringConstruction	        = Yes
		DeathWeapon					              = RivendellCastleCornerWallDeath
	End	

 	Behavior                            = FireWeaponWhenDeadBehavior FireDeadTag2
		DeathTypes					              = ALL
		StartsActive				              = Yes
		ActiveDuringConstruction	        = Yes
		DeathWeapon					              = StandardWallDeath
	End	

	;---------------------- Old Geometry ----------------------------------------

	;Geometry						                = BOX
	;GeometryMajorRadius				          = 55.0
	;GeometryMinorRadius				          = 30.0
	;GeometryHeight					            = 45.0
	
	;GeometryContactPoint                =	X:-50			Y:-40				Z:0 Grab
	;GeometryContactPoint                =	X:0				Y:-40				Z:40 Grab
	;GeometryContactPoint                =	X:50			Y:-40				Z:0 Grab
	;GeometryContactPoint                =	X:-50			Y:40				Z:0 Grab
	;GeometryContactPoint                =	X:0				Y:40				Z:40 Grab
	;GeometryContactPoint                =	X:50			Y:40				Z:0 Grab
	
	;GeometryIsSmall					            = No

	;---------------------- New Geometry ------------------------------------------------

	Geometry						= BOX
	GeometryMajorRadius				= 22.0
	GeometryMinorRadius				= 90.0
	GeometryHeight					= 53.0
	GeometryOffset					= X:-3 Y:0 Z:0
	
	AdditionalGeometry				= CYLINDER
	GeometryMajorRadius				= 26.0
	GeometryMinorRadius				= 0
	GeometryHeight					= 53.0
	GeometryOffset					= X:-10 Y:-80 Z:0
	
	AdditionalGeometry				= CYLINDER
	GeometryMajorRadius				= 26.0
	GeometryMinorRadius				= 0
	GeometryHeight					= 53.0
	GeometryOffset					= X:-10 Y:80 Z:0

	AdditionalGeometry				= BOX
	GeometryMajorRadius				= 18.0
	GeometryMinorRadius				= 1.0
	GeometryHeight					= 53.0
	GeometryOffset					= X:-10 Y: 98 Z:0
	GeometryName					= Bookend
	
	AdditionalGeometry				= BOX
	GeometryMajorRadius				= 18.0
	GeometryMinorRadius				= 1.0
	GeometryHeight					= 53.0
	GeometryOffset					= X:-10 Y:-98 Z:0
	GeometryName					= Bookend
	
	GeometryContactPoint			= X:-29.397		Y:0.326		Z:108.421		Swoop
	GeometryContactPoint			= X: 40 Y:-70 Z:0 Grab
	GeometryContactPoint			= X:-40 Y:-60 Z:0 Grab
	GeometryContactPoint			= X: 23 Y:-40 Z:0 Grab
	GeometryContactPoint			= X:-18 Y:-40 Z:0 Grab
	GeometryContactPoint			= X: 23 Y: 40 Z:0 Grab
	GeometryContactPoint			= X:-40 Y: 40 Z:0 Grab
	GeometryContactPoint			= X: 40 Y: 60 Z:0 Grab
	GeometryContactPoint			= X:-40 Y: 70 Z:0 Grab
	
	
	GeometryIsSmall					= No
	GeometryRotationAnchorOffset	= X:375.0 Y:0.0
	Shadow							= SHADOW_VOLUME

	;-------------------------- End Geometry ----------------------------------------------

End

;----------------------------------------------------------------------------------------------
Object RivendellCastleStair

  SelectPortrait                    	= BPRivendellCastleStairs
	Draw                                = W3DScriptedModelDraw Draw_Wall
	
		OkToChangeModelColor              = Yes

		WallBoundsMesh                    = STAIR_W1
	  RampMesh1                       	= STAIR_R1

		DefaultModelConditionState
			Model                           = ebcaststair 
		End

		ModelConditionState               = WORLD_BUILDER
  		Model                         	= ebcaststair
  	End

		; -- Base Build State
		ModelConditionState               = BASE_BUILD
  		Model                         	= ebcaststair 
  	End
			
		AnimationState                    = BASE_BUILD
			Animation
				AnimationName                 = ebcaststair.ebcaststair 
				AnimationMode                 = ONCE
				AnimationSpeedFactorRange     = 1.5 2.5 ; keep range wide to avoid lockstep anims
			End
		End    

		; -- Just Built State
		ModelConditionState               = JUST_BUILT
  		Model                         	= ebcaststair 
  	End
		
		AnimationState                    = JUST_BUILT
			StateName                       = STATE_None
			Animation
				AnimationName                 = ebcaststair.ebcaststair 
				AnimationMode                 = MANUAL
			End
			Flags                           = START_FRAME_FIRST
		End

		; -- Actively Being Constructed State
		ModelConditionState               = ACTIVELY_BEING_CONSTRUCTED
  		Model                         	= ebcaststair 
  	End
			
		AnimationState                    = ACTIVELY_BEING_CONSTRUCTED
			Animation
				AnimationName                 = ebcaststair.ebcaststair 
				AnimationMode                 = MANUAL
			End
			Flags                           = START_FRAME_FIRST
		End    

		; -- Damage States D1
		ModelConditionState               = DAMAGED
			Model                           = ebcaststair_d
		End
	    
		AnimationState                    = DAMAGED
	;      EnteringStateFX              = FX_RohanWallDamaged
		End
		
		; -- Damage States D2
		ModelConditionState               = REALLYDAMAGED
			Model                           = ebcaststair_d
		End
		
		AnimationState                    = REALLYDAMAGED
       	Animation				            	=	ReallyDamagedanimation
				AnimationName		              =	ebcaststair_d.ebcaststair_d ;RBCastWALL_D2.RBCastWALL_D2
				AnimationMode		              =	ONCE
   			End
	;        EnteringStateFX            = FX_RohanWallReallyDamaged
		End
		
		; -- Damage States D3
		ModelConditionState               = RUBBLE
      Model                           = ebcaststair_d ;RBCastWall_D3
      ParticleSysBone NONE BuildingChunkBitsTrail
      ParticleSysBone NONE ExplosiveMineFire02
    End
	    
		AnimationState                    = RUBBLE
			Animation				                =	Death
				AnimationName		              =	ebcaststair_d.ebcaststair_d ;RBCastWALL_D3.RBCastWALL_D3
				AnimationMode		              =	ONCE
			End
			EnteringStateFX                 = FX_WallDie
			;EnteringStateFX                = FX_RohanWallRubble
		End      

		ModelConditionState               = POST_RUBBLE
			Model                           = None
		End

		ModelConditionState               = POST_COLLAPSE
			Model                           = None
		End

	End
	
	;----------------------- AUDIO -------------------------
	VoiceSelect			                    = Gui_PlotSelect

	SoundOnDamaged			                = BuildingLightDamageStone
	SoundOnReallyDamaged		            = BuildingHeavyDamageStone


	; ***DESIGN parameters ***
	DisplayName		                      = OBJECT:RivendellCastleWall
	EditorSorting	                      = STRUCTURE
	Side			                          = Rivendell
	BuildTime		                        = M_CASTLE_WALL_REBUILD_TIME
	BuildCost		                        = M_CASTLE_WALL_REBUILD_COST
  	ShroudClearingRange               = 160

	ArmorSet
		Conditions	                      = None
		Armor		                          = NoArmor            
	End
	
	; *** ENGINEERING Parameters ***  
	KindOf					                    = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL NOT_AUTOACQUIRABLE UNATTACKABLE
	RadarPriority			                  = NOT_ON_RADAR
	KeepSelectableWhenDead	            = Yes
	CommandSet				                  = GenericSelfRepairCommandSet
	
	Body				                        = ActiveBody ModuleTag_02
		MaxHealth		                      = M_GONDOR_CASTLE_WALL_HEALTH
	End

 	Behavior                            = GettingBuiltBehavior ModuleTag_GettingBuilt
	    SelfBuildingLoop                = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop          = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop          = BuildingConstructionLoop
		SpawnTimer                        = -1.0 ; Negative means no 'autoheal'
		RebuildTimeSeconds                = M_CASTLE_WALL_REBUILD_TIME
	End

;	Behavior                            = FoundationAIUpdate ModuleTag_foundationAI
;	End
	
    Behavior                          = KeepObjectDie ModuleTag_IWantRubble
    End

	Geometry						                = BOX
	GeometryMajorRadius				          = 55.0
	GeometryMinorRadius				          = 30.0
	GeometryHeight					            = 45.0
	
	GeometryContactPoint                =	X:-50			Y:-40				Z:0 Grab
	GeometryContactPoint                =	X:0				Y:-40				Z:40 Grab
	GeometryContactPoint                =	X:50			Y:-40				Z:0 Grab
	GeometryContactPoint                =	X:-50			Y:40				Z:0 Grab
	GeometryContactPoint                =	X:0				Y:40				Z:40 Grab
	GeometryContactPoint                =	X:50			Y:40				Z:0 Grab
	
	GeometryIsSmall					            = No
	Shadow							                = SHADOW_VOLUME
End

;----------------------------------------------------------------------------------------------
Object RivendellCastleGateMiddle

SelectPortrait = BPRivendellGate

	; *** ART Parameters ***
	Draw                                  = W3DScriptedModelDraw ModuleTag_01

		;WallBoundsMesh                     = W1
		RampMesh1                           = GATE_M_R1
		RampMesh2                           = GATE_M_R2
		RaisedWallMesh                      = GATE_M_W1
        
		DefaultModelConditionState
		  Model                             = ebcastgatem
		End

		IdleAnimationState
			Animation
				AnimationName                   = ebcastgatem.ebcastgatem
				AnimationMode                   = MANUAL
				AnimationBlendTime              = 0
			End
			Flags                         		= START_FRAME_LAST
		End    

    ; -- Build Up States
    ModelConditionState                 = BASE_BUILD
      Model                             = ebcastgatem
;      ParticleSysBone	                = NONE BuildingDoughnutCloud
      ParticleSysBone                   = NONE BuildingContructDust
    End
		
		AnimationState		                  = BASE_BUILD
			Animation
				AnimationName                   = ebcastgatem.ebcastgatem
				AnimationMode                   = ONCE
				AnimationSpeedFactorRange       = 2.0 2.5 ; keep range wide to avoid lockstep anims
			End
		End

		; -- Just Built States
		AnimationState		                  = JUST_BUILT
			Animation
				AnimationName                   = ebcastgatem.ebcastgatem
				AnimationMode                   = MANUAL
				AnimationBlendTime              = 0
			End
			Flags                         = START_FRAME_FIRST
		End    
		
		; -- Damage State D1
    ModelConditionState               = DAMAGED
      Model                           = ebcastgatem_d1
;     ParticleSysBone emberBone01 SmokeBuildingLarge
    End
		
    AnimationState                    = DAMAGED
    End
		
		; -- Damage State D2
    ModelConditionState               = REALLYDAMAGED
      Model                           = ebcastgatem_d2
;     ParticleSysBone emberBone01 SmokeBuildingLarge
    End
		
    AnimationState                    = REALLYDAMAGED
      Animation				              		=	ReallyDamagedanimation
				AnimationName		                = ebcastgatem_d2.ebcastgatem_d2
				AnimationMode		                =	ONCE
;           AnimationSpeedFactorRange = 0.5 0.5
   		End
    End	
    
		; -- Actively Being Constructed State
    ModelConditionState               = ACTIVELY_BEING_CONSTRUCTED
      Model                           = ebcastgatem ;RBCastBrdg_D1
;     ParticleSysBone emberBone01 SmokeBuildingLarge
    End
		
    ; -- Damage State D3
    ModelConditionState               = RUBBLE
      Model                           = ebcastgatem_d3 
    End
		
		AnimationState                    = RUBBLE
			Animation				                =	Death
				AnimationName		                =	ebcastgatem_d3.ebcastgatem_d3 
				AnimationMode		                =	ONCE
;     	AnimationSpeedFactorRange = 0.5 0.5
			End
			EnteringStateFX                     = FX_WallDie
    End

  	ModelConditionState               = POST_RUBBLE
			Model                             = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		
		ModelConditionState                 = POST_COLLAPSE
			Model                             = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
  End

	;----------------------- AUDIO -------------------------

	SoundOnDamaged			                = BuildingLightDamageStone
	SoundOnReallyDamaged		            = BuildingHeavyDamageStone


  ; ***DESIGN parameters ***
  DisplayName                         = OBJECT:RivendellCastleGate
  Side                                = Rivendell
  EditorSorting                       = STRUCTURE
; Browser                             = CINEMATICS UNIT

  ArmorSet
    Conditions                        = None
    Armor                             = GondorCastleWall
    DamageFX                          = MinasWallADamageFX
  End

  ; *** ENGINEERING Parameters ***  
;  KindOf                             = STRUCTURE SELECTABLE IMMOBILE
;  RadarPriority                      = STRUCTURE
;  Body                               = ActiveBody ModuleTag_03
;    MaxHealth                        = 2000.0
;  End
	KindOf					                    = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR SELECTABLE NOT_AUTOACQUIRABLE MADE_OF_STONE
	KeepSelectableWhenDead	            = Yes
	
  RadarPriority                       = NOT_ON_RADAR	
	Body					                      = ActiveBody ModuleTag_03
			MaxHealth				                = 6000.0
			MaxHealthDamaged		            = 3000.0
			MaxHealthReallyDamaged          = 1000.0
		GrabObject                        = EntThrownBuildingRock
		GrabFX                            = FX_WallGrab
		GrabDamage                        = 490
		GrabOffset                        = X:16 Y:0
	End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior                           = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay               = 5000
;  End
	Behavior                            = KeepObjectDie ModuleTag_IWantRubble
	End

    Behavior                          = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached        = No  ; Even if walkway over gate is gone, enemy cannot enter castle
    End 


	; These are bunched-up together on purpose
	BuildCost		                        = 0  ; for free, since this serves no purpose
  	CommandSet				                = GenericSelfRepairCommandSet   ;
 	Behavior                            = GettingBuiltBehavior ModuleTag_GettingBuilt
	    SelfBuildingLoop                = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop          = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop          = BuildingConstructionLoop
		SpawnTimer                        = -1.0 ; Negative means no 'autoheal'
		RebuildTimeSeconds	              = 15 ; nice and fast, so we don;t visually block the gateway
	End



  Geometry				                    = BOX
  GeometryMajorRadius                 = 90.0
  GeometryMinorRadius                 = 32.5 
  GeometryHeight                      = 15.0
  GeometryOffset		                  = X:0 Y:10 Z:60  
  
  AdditionalGeometry                  = BOX
  GeometryMajorRadius                 = 20.0
  GeometryMinorRadius                 = 32.5 
  GeometryHeight                      = 75.0
  GeometryOffset		                  = X:70 Y:10 Z:0  
      
  AdditionalGeometry                  = BOX
  GeometryMajorRadius                 = 20.0
  GeometryMinorRadius                 = 32.5 
  GeometryHeight                      = 75.0
  GeometryOffset		                  = X:70 Y:10 Z:0  
 
  GeometryContactPoint                =	X:-50		Y:0				Z:60 
  GeometryContactPoint                =	X:0			Y:0				Z:60
   GeometryContactPoint               =	X:50		Y:0				Z:60
  GeometryContactPoint                =	X:60		Y:-40			Z:0 
  GeometryContactPoint                =	X:67		Y:0				Z:60
  GeometryContactPoint                =	X:75		Y:-40			Z:0 Grab
  GeometryContactPoint                =	X:75		Y:65			Z:0 Grab
  GeometryContactPoint                =	X:60		Y:65			Z:0 
  
  GeometryIsSmall                     = No
  Shadow                              = SHADOW_VOLUME
End

;----------------------------------------------------------------------------------------------
Object RivendellCastleGateLeft

SelectPortrait = BPRivendellGate

	Draw                                = W3DScriptedModelDraw Draw_Wall
	
		OkToChangeModelColor              = Yes

	    WallBoundsMesh                  = GATE_UP_L_W1
;		RampMesh1 	                      = GATE_L_R1
;		WallBoundsMesh                    = GATE_L_W2

		DefaultModelConditionState
			Model                           = ebcastgatelu 
		End

		ModelConditionState               = WORLD_BUILDER
			Model                         = ebcastgatelu
		End

		; -- Base Build State
		ModelConditionState               = BASE_BUILD
			Model                         = ebcastgatelu 
		End
			
		AnimationState                    = BASE_BUILD
			Animation
				AnimationName                 = ebcastgatelu.ebcastgatelu 
				AnimationMode                 = ONCE
				AnimationSpeedFactorRange     = 1.5 2.5 ; keep range wide to avoid lockstep anims
			End
		End    

		; -- Just Built State
		ModelConditionState               = JUST_BUILT
			Model                         = ebcastgatelu 
		End
			
		AnimationState                    = JUST_BUILT
			StateName                       = STATE_None
			Animation
				AnimationName                 = ebcastgatelu.ebcastgatelu 
				AnimationMode                 = MANUAL
			End
			Flags                           = START_FRAME_FIRST
		End

		; -- Actively Being Constructed State
		ModelConditionState               = ACTIVELY_BEING_CONSTRUCTED
			Model                         = ebcastgatelu 
		End
		
		AnimationState                    = ACTIVELY_BEING_CONSTRUCTED
			Animation
				AnimationName                 = ebcastgatelu.ebcastgatelu 
				AnimationMode                 = MANUAL
			End
			Flags                           = START_FRAME_FIRST
		End    

		; -- Damage State D1
		ModelConditionState               = DAMAGED
			Model                           = ebcastgatelu_d1 
		End
	    
		AnimationState                    = DAMAGED
	;      EnteringStateFX              = FX_RohanWallDamaged
		End
		
		; -- Damage State D2
		ModelConditionState               = REALLYDAMAGED
			Model                           = ebcastgatelu_d2 
		End
		
		AnimationState                    = REALLYDAMAGED
       		Animation				            =	ReallyDamagedanimation
				AnimationName		              =	ebcastgatelu_d2.ebcastgatelu_d2 
				AnimationMode		              =	ONCE
   			End
	;        EnteringStateFX            = FX_RohanWallReallyDamaged
		End
		
		; -- Damage State D3
		ModelConditionState               = RUBBLE
      Model                           = ebcastgatelu_d3 
      ParticleSysBone NONE BuildingChunkBitsTrail
      ParticleSysBone NONE ExplosiveMineFire02
    End
	    
		AnimationState                    = RUBBLE
			Animation				                =	Death
				AnimationName		              =	ebcastgatelu_d3.ebcastgatelu_d3
				AnimationMode		              =	ONCE
			End
			EnteringStateFX                 = FX_WallDie
			;EnteringStateFX                = FX_RohanWallRubble
		End      

		ModelConditionState               = POST_RUBBLE
			Model                           = None
		End

		ModelConditionState               = POST_COLLAPSE
			Model                           = None
		End

	End
	
  
	;----------------------- AUDIO -------------------------

	VoiceSelect			                    = Gui_PlotSelect

	SoundOnDamaged			                = BuildingLightDamageStone
	SoundOnReallyDamaged		            = BuildingHeavyDamageStone


	; ***DESIGN parameters ***
	DisplayName		                      = OBJECT:RivendellCastleWall
	EditorSorting	                      = STRUCTURE
	Side			                          = Rivendell
	BuildTime		                        = M_CASTLE_WALL_REBUILD_TIME
	BuildCost		                        = M_CASTLE_WALL_REBUILD_COST
  	ShroudClearingRange               = 160

	ArmorSet
		Conditions	                      = None
		Armor		                          = GondorCastleWall            
		DamageFX	                        = MinasWallADamageFX
	End
	

	; *** ENGINEERING Parameters ***  
	KindOf					                    = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR SELECTABLE NOT_AUTOACQUIRABLE MADE_OF_STONE
	RadarPriority			                  = NOT_ON_RADAR
	KeepSelectableWhenDead	            = Yes
	CommandSet				                  = GenericSelfRepairCommandSet
	
	Body				                        = ActiveBody ModuleTag_02
		MaxHealth		                      = M_GONDOR_CASTLE_WALL_HEALTH
	End

    Behavior                          = SiegeDockingBehavior ModuleTag_SiegeDocking
    End
	
	Behavior                            = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached        = Yes
	End 

 	Behavior                            = GettingBuiltBehavior ModuleTag_GettingBuilt
	    SelfBuildingLoop                = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop          = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop          = BuildingConstructionLoop
		SpawnTimer                        = -1.0 ; Negative means no 'autoheal'
		RebuildTimeSeconds                = M_CASTLE_WALL_REBUILD_TIME
	End

;	Behavior                            = FoundationAIUpdate ModuleTag_foundationAI
;	End
	
    Behavior                          = KeepObjectDie ModuleTag_IWantRubble
    End
	
  	Behavior                          = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	                    = Yes ;If no, requires upgrade to turn on.
		BonusName		                      = WallBonus
		RefreshDelay	                    = 2000
		;TargetEnemy		                  = Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

 	Behavior                            = FireWeaponWhenDeadBehavior FireDeadTag1
		DeathTypes					              = ALL
		StartsActive				              = Yes
		ActiveDuringConstruction	        = Yes
		DeathWeapon					              = CastleWallDeath
	End	

 	Behavior                            = FireWeaponWhenDeadBehavior FireDeadTag2
		DeathTypes					              = ALL
		StartsActive				              = Yes
		ActiveDuringConstruction	        = Yes
		DeathWeapon					              = StandardWallDeath
	End	

	Geometry						                = BOX
	GeometryMajorRadius				          = 55.0
	GeometryMinorRadius				          = 30.0
	GeometryHeight					            = 45.0
	
	GeometryContactPoint                =	X:-50			Y:-40				Z:0 Grab
	GeometryContactPoint                =	X:0				Y:-40				Z:40 Grab
	GeometryContactPoint                =	X:50			Y:-40				Z:0 Grab
	GeometryContactPoint                =	X:-50			Y:40				Z:0 Grab
	GeometryContactPoint                =	X:0				Y:40				Z:40 Grab
	GeometryContactPoint                =	X:50			Y:40				Z:0 Grab
	
	GeometryIsSmall					            = No
	Shadow							                = SHADOW_VOLUME
End

;----------------------------------------------------------------------------------------------
Object RivendellCastleGateLeftWall

SelectPortrait = BPRivendellGate

	Draw                                = W3DScriptedModelDraw Draw_Wall
	
		OkToChangeModelColor              = Yes

	    WallBoundsMesh                  = GATE_L_W1
;		RampMesh1 	                      = GATE_L_R1
;		WallBoundsMesh                    = GATE_L_W2

		DefaultModelConditionState
			Model                           = ebcastgatell 
		End

		ModelConditionState               = WORLD_BUILDER
  			Model                         = ebcastgatell
  		End

		; -- Base Build State
		ModelConditionState               = BASE_BUILD
  			Model                         = ebcastgatell 
  		End
		AnimationState                    = BASE_BUILD
			Animation
				AnimationName                 = ebcastgatell.ebcastgatell 
				AnimationMode                 = ONCE
				AnimationSpeedFactorRange     = 1.5 2.5 ; keep range wide to avoid lockstep anims
			End
		End    

		; -- Just Built State
		ModelConditionState               = JUST_BUILT
  			Model                         = ebcastgatell 
  		End
		AnimationState                    = JUST_BUILT
			StateName                       = STATE_None
			Animation
				AnimationName                 = ebcastgatell.ebcastgatell 
				AnimationMode                 = MANUAL
			End
			Flags                           = START_FRAME_FIRST
		End

		; -- Actively Being Constructed
		ModelConditionState               = ACTIVELY_BEING_CONSTRUCTED
  			Model                         = ebcastgatell 
  		End
		AnimationState                    = ACTIVELY_BEING_CONSTRUCTED
			Animation
				AnimationName                 = ebcastgatell.ebcastgatell 
				AnimationMode                 = MANUAL
			End
			Flags                           = START_FRAME_FIRST
		End    

		; -- Damage State D1
		ModelConditionState               = DAMAGED
			Model                           = ebcastgatell_d1 
		End
	    
		AnimationState                    = DAMAGED
	;      EnteringStateFX              = FX_RohanWallDamaged
		End
		
		; -- Damage State D2
		ModelConditionState               = REALLYDAMAGED
			Model                           = ebcastgatell_d2 
		End
		AnimationState                    = REALLYDAMAGED
       		Animation				            =	ReallyDamagedanimation
				AnimationName		              = ebcastgatell_d2.ebcastgatell_d2 
				AnimationMode		              =	ONCE
   			End
	;        EnteringStateFX            = FX_RohanWallReallyDamaged
		End
		
		; -- Damage State D3
		ModelConditionState               = RUBBLE
      Model                           = ebcastgatell_d3 
      ParticleSysBone NONE BuildingChunkBitsTrail
      ParticleSysBone NONE ExplosiveMineFire02
    End
	    
		AnimationState                    = RUBBLE
			Animation				                =	Death
				AnimationName		              =	ebcastgatell_d3.ebcastgatell_d3
				AnimationMode		              =	ONCE
			End
			EnteringStateFX                 = FX_WallDie
			;EnteringStateFX                = FX_RohanWallRubble
		End      

		ModelConditionState               = POST_RUBBLE
			Model                           = None
		End

		ModelConditionState               = POST_COLLAPSE
			Model                           = None
		End

	End
	
  
	;----------------------- AUDIO -------------------------

	VoiceSelect			                    = Gui_PlotSelect

	SoundOnDamaged			                = BuildingLightDamageStone
	SoundOnReallyDamaged		            = BuildingHeavyDamageStone


	; ***DESIGN parameters ***
	DisplayName		                      = OBJECT:RivendellCastleWall
	EditorSorting	                      = STRUCTURE
	Side			                          = Rivendell
	BuildTime		                        = M_CASTLE_WALL_REBUILD_TIME
	BuildCost		                        = M_CASTLE_WALL_REBUILD_COST
  	ShroudClearingRange               = 160

	ArmorSet
		Conditions	                      = None
		Armor		                          = GondorCastleWall            
		DamageFX	                        = MinasWallADamageFX
	End
	

	; *** ENGINEERING Parameters ***  
	KindOf					                    = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR SELECTABLE NOT_AUTOACQUIRABLE MADE_OF_STONE
	RadarPriority			                  = NOT_ON_RADAR
	KeepSelectableWhenDead	            = Yes
	CommandSet				                  = GenericSelfRepairCommandSet
	
	Body				                        = ActiveBody ModuleTag_02
		MaxHealth		                      = M_GONDOR_CASTLE_WALL_HEALTH
	End

    Behavior                          = SiegeDockingBehavior ModuleTag_SiegeDocking
    End
	
	Behavior                            = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached        = Yes
	End 

 	Behavior                            = GettingBuiltBehavior ModuleTag_GettingBuilt
	    SelfBuildingLoop                = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop          = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop          = BuildingConstructionLoop
		SpawnTimer                        = -1.0 ; Negative means no 'autoheal'
		RebuildTimeSeconds                = M_CASTLE_WALL_REBUILD_TIME
	End

;	Behavior                            = FoundationAIUpdate ModuleTag_foundationAI
;	End
	
    Behavior                          = KeepObjectDie ModuleTag_IWantRubble
    End
	
  	Behavior                          = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	                    = Yes ;If no, requires upgrade to turn on.
		BonusName		                      = WallBonus
		RefreshDelay	                    = 2000
		;TargetEnemy		                  = Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

 	Behavior                            = FireWeaponWhenDeadBehavior FireDeadTag1
		DeathTypes					              = ALL
		StartsActive				              = Yes
		ActiveDuringConstruction	        = Yes
		DeathWeapon					              = CastleWallDeath
	End	

 	Behavior                            = FireWeaponWhenDeadBehavior FireDeadTag2
		DeathTypes					              = ALL
		StartsActive				              = Yes
		ActiveDuringConstruction	        = Yes
		DeathWeapon					              = StandardWallDeath
	End	

	Geometry						                = BOX
	GeometryMajorRadius				          = 55.0
	GeometryMinorRadius				          = 30.0
	GeometryHeight					            = 45.0
	
	GeometryContactPoint                =	X:-50			Y:-40				Z:0 Grab
	GeometryContactPoint                =	X:0				Y:-40				Z:40 Grab
	GeometryContactPoint                =	X:50			Y:-40				Z:0 Grab
	GeometryContactPoint                =	X:-50			Y:40				Z:0 Grab
	GeometryContactPoint                =	X:0				Y:40				Z:40 Grab
	GeometryContactPoint                =	X:50			Y:40				Z:0 Grab
	
	GeometryIsSmall					            = No
	Shadow							                = SHADOW_VOLUME
End

;----------------------------------------------------------------------------------------------
Object RivendellCastleGateLeftRamp

SelectPortrait = BPRivendellGate

	Draw                                = W3DScriptedModelDraw Draw_Wall
	
		OkToChangeModelColor              = Yes

;		WallBoundsMesh                    = STAIR_W1
	    RampMesh1                       = GATE_L_R1

		DefaultModelConditionState
			Model                           = ebcastgatelr 
		End

		ModelConditionState               = WORLD_BUILDER
  			Model                         = ebcastgatelr
  		End

		; -- Base Build State
		ModelConditionState               = BASE_BUILD
			Model                         = ebcastgatelr 
		End
		
		AnimationState                    = BASE_BUILD
			Animation
				AnimationName                 = ebcastgatelr.ebcastgatelr 
				AnimationMode                 = ONCE
				AnimationSpeedFactorRange     = 1.5 2.5 ; keep range wide to avoid lockstep anims
			End
		End    

		; -- Just Built State
		ModelConditionState               = JUST_BUILT
			Model                         = ebcastgatelr 
		End
			
		AnimationState                    = JUST_BUILT
			StateName                       = STATE_None
			Animation
				AnimationName                 = ebcastgatelr.ebcastgatelr 
				AnimationMode                 = MANUAL
			End
			Flags                           = START_FRAME_FIRST
		End

		; -- Actively Being Constructed
		ModelConditionState               = ACTIVELY_BEING_CONSTRUCTED
  			Model                         = ebcastgatelr 
  		End
		AnimationState                    = ACTIVELY_BEING_CONSTRUCTED
			Animation
				AnimationName                 = ebcastgatelr.ebcastgatelr 
				AnimationMode                 = MANUAL
			End
			Flags                           = START_FRAME_FIRST
		End    

		; -- Damage State D1
		ModelConditionState               = DAMAGED
			Model                           = ebcastgatelr_d  
		End
	    
		AnimationState                    = DAMAGED
	;      EnteringStateFX              = FX_RohanWallDamaged
		End
		
		; -- Damage State D2
		ModelConditionState               = REALLYDAMAGED
			Model                           = ebcastgatelr_d 
		End
		AnimationState                    = REALLYDAMAGED
       		Animation				            =	ReallyDamagedanimation
				AnimationName		              =	ebcastgatelr_d.ebcastgatelr_d 
				AnimationMode		              =	ONCE
   			End
	;        EnteringStateFX            = FX_RohanWallReallyDamaged
		End
		
		; -- Damage State D3
		ModelConditionState               = RUBBLE
      Model                           = ebcastgatell_d3
      ParticleSysBone NONE BuildingChunkBitsTrail
      ParticleSysBone NONE ExplosiveMineFire02
    End
	    
		AnimationState                    = RUBBLE
			Animation				                =	Death
				AnimationName		              =	ebcastgatell_d3.ebcastgatell_d3
				AnimationMode		              =	ONCE
			End
			EnteringStateFX                 = FX_WallDie
			;EnteringStateFX                = FX_RohanWallRubble
		End      

		ModelConditionState               = POST_RUBBLE
			Model                           = None
		End

		ModelConditionState               = POST_COLLAPSE
			Model                           = None
		End

	End
	
  
	;----------------------- AUDIO -------------------------

	VoiceSelect			                    = Gui_PlotSelect

	SoundOnDamaged			                = BuildingLightDamageStone
	SoundOnReallyDamaged		            = BuildingHeavyDamageStone


	; ***DESIGN parameters ***
	DisplayName		                      = OBJECT:RivendellCastleWall
	EditorSorting	                      = STRUCTURE
	Side			                          = Rivendell
	BuildTime		                        = M_CASTLE_WALL_REBUILD_TIME
	BuildCost		                        = M_CASTLE_WALL_REBUILD_COST
  	ShroudClearingRange               = 160

	ArmorSet
		Conditions	                      = None
		Armor		                          = NoArmor            
	End
	
	; *** ENGINEERING Parameters ***  
	KindOf					                    = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL NOT_AUTOACQUIRABLE UNATTACKABLE
	RadarPriority			                  = NOT_ON_RADAR
	KeepSelectableWhenDead	            = Yes
	CommandSet				                  = GenericSelfRepairCommandSet
	
	Body				                        = ActiveBody ModuleTag_02
		MaxHealth		                      = M_GONDOR_CASTLE_WALL_HEALTH
	End

 	Behavior                            = GettingBuiltBehavior ModuleTag_GettingBuilt
	    SelfBuildingLoop                = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop          = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop          = BuildingConstructionLoop
		SpawnTimer                        = -1.0 ; Negative means no 'autoheal'
		RebuildTimeSeconds                = M_CASTLE_WALL_REBUILD_TIME
	End

;	Behavior                            = FoundationAIUpdate ModuleTag_foundationAI
;	End
	
    Behavior                          = KeepObjectDie ModuleTag_IWantRubble
    End

	Geometry						                = BOX
	GeometryMajorRadius				          = 55.0
	GeometryMinorRadius				          = 30.0
	GeometryHeight					            = 45.0
	
	GeometryContactPoint                =	X:-50			Y:-40				Z:0 Grab
	GeometryContactPoint                =	X:0				Y:-40				Z:40 Grab
	GeometryContactPoint                =	X:50			Y:-40				Z:0 Grab
	GeometryContactPoint                =	X:-50			Y:40				Z:0 Grab
	GeometryContactPoint                =	X:0				Y:40				Z:40 Grab
	GeometryContactPoint                =	X:50			Y:40				Z:0 Grab
	
	GeometryIsSmall					            = No
	Shadow							                = SHADOW_VOLUME
End

;----------------------------------------------------------------------------------------------
Object RivendellCastleGateRight

SelectPortrait = BPRivendellGate

	Draw                                = W3DScriptedModelDraw Draw_Wall
	
		OkToChangeModelColor              = Yes

	    WallBoundsMesh                  = GATE_R_W1

		DefaultModelConditionState
			Model                           = ebcastgateru
		End

		ModelConditionState               = WORLD_BUILDER
  			Model                         = ebcastgateru
  		End

		; -- Build State
		ModelConditionState               = BASE_BUILD
  			Model                         = ebcastgateru 
  		End
		AnimationState                    = BASE_BUILD
			Animation
				AnimationName                 = ebcastgateru.ebcastgateru 
				AnimationMode                 = ONCE
				AnimationSpeedFactorRange     = 1.5 2.5 ; keep range wide to avoid lockstep anims
			End
		End    

		; -- Just Built State
		ModelConditionState               = JUST_BUILT
  			Model                         = ebcastgateru 
  		End
		AnimationState                    = JUST_BUILT
			StateName                       = STATE_None
			Animation
				AnimationName                 = ebcastgateru.ebcastgateru 
				AnimationMode                 = MANUAL
			End
			Flags                           = START_FRAME_FIRST
		End

		; -- Actively Being Constructed State
		ModelConditionState               = ACTIVELY_BEING_CONSTRUCTED
  			Model                         = ebcastgateru 
  		End
		AnimationState                    = ACTIVELY_BEING_CONSTRUCTED
			Animation
				AnimationName                 = ebcastgateru.ebcastgateru 
				AnimationMode                 = MANUAL
			End
			Flags                           = START_FRAME_FIRST
		End    

		; -- Damage State D1
		ModelConditionState               = DAMAGED
			Model                           = ebcastgateru_d1 
		End
	    
		AnimationState                    = DAMAGED
	;      EnteringStateFX              = FX_RohanWallDamaged
		End
	; -- Damage State D2
		ModelConditionState               = REALLYDAMAGED
			Model                           = ebcastgateru_d2 
		End
		
		AnimationState                    = REALLYDAMAGED
       		Animation				            =	ReallyDamagedanimation
				AnimationName		              =	 ebcastgateru_d2.ebcastgateru_d2 
				AnimationMode		              =	ONCE
   			End
	;        EnteringStateFX            = FX_RohanWallReallyDamaged
		End
		
	; -- Damage State D3
		ModelConditionState               = RUBBLE
      Model                           = ebcastgateru_d3 
      ParticleSysBone NONE BuildingChunkBitsTrail
      ParticleSysBone NONE ExplosiveMineFire02
    End
	    
		AnimationState                    = RUBBLE
			Animation				                =	Death
				AnimationName		              =	ebcastgateru_d3.ebcastgateru_d3
				AnimationMode		              =	ONCE
			End
			EnteringStateFX                 = FX_WallDie
			;EnteringStateFX                = FX_RohanWallRubble
		End      

		ModelConditionState               = POST_RUBBLE
			Model                           = None
		End

		ModelConditionState               = POST_COLLAPSE
			Model                           = None
		End

	End
	
  
	;----------------------- AUDIO -------------------------

	VoiceSelect			                    = Gui_PlotSelect

	SoundOnDamaged			                = BuildingLightDamageStone
	SoundOnReallyDamaged		            = BuildingHeavyDamageStone


	; ***DESIGN parameters ***
	DisplayName		                      = OBJECT:RivendellCastleWall
	EditorSorting	                      = STRUCTURE
	Side			                          = Rivendell
	BuildTime		                        = M_CASTLE_WALL_REBUILD_TIME
	BuildCost		                        = M_CASTLE_WALL_REBUILD_COST
  	ShroudClearingRange               = 160

	ArmorSet
		Conditions	                      = None
		Armor		                          = GondorCastleWall            
		DamageFX	                        = MinasWallADamageFX
	End
	

	; *** ENGINEERING Parameters ***  
	KindOf					                    = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR SELECTABLE NOT_AUTOACQUIRABLE MADE_OF_STONE
	RadarPriority			                  = NOT_ON_RADAR
	KeepSelectableWhenDead	            = Yes
	CommandSet				                  = GenericSelfRepairCommandSet
	
	Body				                        = ActiveBody ModuleTag_02
		MaxHealth		                      = M_GONDOR_CASTLE_WALL_HEALTH
	End

    Behavior                          = SiegeDockingBehavior ModuleTag_SiegeDocking
    End
	
	Behavior                            = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached        = Yes
	End 

 	Behavior                            = GettingBuiltBehavior ModuleTag_GettingBuilt
	    SelfBuildingLoop                = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop          = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop          = BuildingConstructionLoop
		SpawnTimer                        = -1.0 ; Negative means no 'autoheal'
		RebuildTimeSeconds                = M_CASTLE_WALL_REBUILD_TIME
	End

;	Behavior                            = FoundationAIUpdate ModuleTag_foundationAI
;	End
	
    Behavior                          = KeepObjectDie ModuleTag_IWantRubble
    End
	
  	Behavior                          = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	                    = Yes ;If no, requires upgrade to turn on.
		BonusName		                      = WallBonus
		RefreshDelay	                    = 2000
		;TargetEnemy		                  = Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

 	Behavior                            = FireWeaponWhenDeadBehavior FireDeadTag1
		DeathTypes					              = ALL
		StartsActive				              = Yes
		ActiveDuringConstruction	        = Yes
		DeathWeapon					              = CastleWallDeath
	End	

 	Behavior                            = FireWeaponWhenDeadBehavior FireDeadTag2
		DeathTypes					              = ALL
		StartsActive				              = Yes
		ActiveDuringConstruction	        = Yes
		DeathWeapon					              = StandardWallDeath
	End	

	Geometry						                = BOX
	GeometryMajorRadius				          = 55.0
	GeometryMinorRadius				          = 30.0
	GeometryHeight					            = 45.0
	
	GeometryContactPoint                =	X:-50			Y:-40				Z:0 Grab
	GeometryContactPoint                =	X:0				Y:-40				Z:40 Grab
	GeometryContactPoint                =	X:50			Y:-40				Z:0 Grab
	GeometryContactPoint                =	X:-50			Y:40				Z:0 Grab
	GeometryContactPoint                =	X:0				Y:40				Z:40 Grab
	GeometryContactPoint                =	X:50			Y:40				Z:0 Grab
	
	GeometryIsSmall					            = No
	Shadow							                = SHADOW_VOLUME
End

;----------------------------------------------------------------------------------------------
Object RivendellCastleGateRightWall

SelectPortrait = BPRivendellGate

	Draw                                = W3DScriptedModelDraw Draw_Wall
	
		OkToChangeModelColor              = Yes

	    WallBoundsMesh                  = GATE_R_W1
;		RampMesh1 	                      = GATE_L_R1
;		WallBoundsMesh                    = GATE_L_W2

		DefaultModelConditionState
			Model                           = ebcastgaterl 
		End

		ModelConditionState               = WORLD_BUILDER
  			Model                         = ebcastgaterl
  		End

		; -- Base Built State
		ModelConditionState               = BASE_BUILD
  		Model                         = ebcastgaterl 
  	End
			
		AnimationState                    = BASE_BUILD
			Animation
				AnimationName                 = ebcastgaterl.ebcastgaterl 
				AnimationMode                 = ONCE
				AnimationSpeedFactorRange     = 1.5 2.5 ; keep range wide to avoid lockstep anims
			End
		End    

		; -- Just Built State
		ModelConditionState               = JUST_BUILT
			Model                         = ebcastgaterl 
		End
		
		AnimationState                    = JUST_BUILT
			StateName                       = STATE_None
			Animation
				AnimationName                 = ebcastgaterl.ebcastgaterl 
				AnimationMode                 = MANUAL
			End
			Flags                           = START_FRAME_FIRST
		End

		; -- Actively Being Constructed State
		ModelConditionState               = ACTIVELY_BEING_CONSTRUCTED
			Model                         = ebcastgaterl 
		End
			
		AnimationState                    = ACTIVELY_BEING_CONSTRUCTED
			Animation
				AnimationName                 = ebcastgaterl.ebcastgaterl 
				AnimationMode                 = MANUAL
			End
			Flags                           = START_FRAME_FIRST
		End    
		
		; -- Damage State D1		
		ModelConditionState               = DAMAGED
			Model                           = ebcastgaterl_d1 
		End
	    
		AnimationState                    = DAMAGED
	;      EnteringStateFX              = FX_RohanWallDamaged
		End
		
		; -- Damage State D3		
		ModelConditionState               = REALLYDAMAGED
			Model                           = ebcastgaterl_d2
		End
		
		AnimationState                    = REALLYDAMAGED
       		Animation				            =	ReallyDamagedanimation
				AnimationName		              =	ebcastgaterl_d2.ebcastgaterl_d2
				AnimationMode		              =	ONCE
   			End
	;        EnteringStateFX            = FX_RohanWallReallyDamaged
		End
		
		; -- Damage State D3		
		ModelConditionState               = RUBBLE
      Model                           = ebcastgaterl_d3
      ParticleSysBone NONE BuildingChunkBitsTrail
      ParticleSysBone NONE ExplosiveMineFire02
    End
	    
		AnimationState                    = RUBBLE
			Animation				                =	Death
				AnimationName		              =	ebcastgaterl_d3.ebcastgaterl_d3
				AnimationMode		              =	ONCE
			End
			EnteringStateFX                 = FX_WallDie
			;EnteringStateFX                = FX_RohanWallRubble
		End      

		ModelConditionState               = POST_RUBBLE
			Model                           = None
		End

		ModelConditionState               = POST_COLLAPSE
			Model                           = None
		End

	End
	
  
	;----------------------- AUDIO -------------------------

	VoiceSelect			                    = Gui_PlotSelect

	SoundOnDamaged			                = BuildingLightDamageStone
	SoundOnReallyDamaged		            = BuildingHeavyDamageStone


	; ***DESIGN parameters ***
	DisplayName		                      = OBJECT:RivendellCastleWall
	EditorSorting	                      = STRUCTURE
	Side			                          = Rivendell
	BuildTime		                        = M_CASTLE_WALL_REBUILD_TIME
	BuildCost		                        = M_CASTLE_WALL_REBUILD_COST
  	ShroudClearingRange               = 160

	ArmorSet
		Conditions	                      = None
		Armor		                          = GondorCastleWall            
		DamageFX	                        = MinasWallADamageFX
	End
	

	; *** ENGINEERING Parameters ***  
	KindOf					                    = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR SELECTABLE NOT_AUTOACQUIRABLE MADE_OF_STONE
	RadarPriority			                  = NOT_ON_RADAR
	KeepSelectableWhenDead	            = Yes
	CommandSet				                  = GenericSelfRepairCommandSet
	
	Body				                        = ActiveBody ModuleTag_02
		MaxHealth		                      = M_GONDOR_CASTLE_WALL_HEALTH
	End

    Behavior                          = SiegeDockingBehavior ModuleTag_SiegeDocking
    End
	
	Behavior                            = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached        = Yes
	End 

 	Behavior                            = GettingBuiltBehavior ModuleTag_GettingBuilt
	    SelfBuildingLoop                = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop          = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop          = BuildingConstructionLoop
		SpawnTimer                        = -1.0 ; Negative means no 'autoheal'
		RebuildTimeSeconds                = M_CASTLE_WALL_REBUILD_TIME
	End

;	Behavior                            = FoundationAIUpdate ModuleTag_foundationAI
;	End
	
    Behavior                          = KeepObjectDie ModuleTag_IWantRubble
    End
	
  	Behavior                          = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	                    = Yes ;If no, requires upgrade to turn on.
		BonusName		                      = WallBonus
		RefreshDelay	                    = 2000
		;TargetEnemy		                  = Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

 	Behavior                            = FireWeaponWhenDeadBehavior FireDeadTag1
		DeathTypes					              = ALL
		StartsActive				              = Yes
		ActiveDuringConstruction	        = Yes
		DeathWeapon					              = CastleWallDeath
	End	

 	Behavior                            = FireWeaponWhenDeadBehavior FireDeadTag2
		DeathTypes					              = ALL
		StartsActive				              = Yes
		ActiveDuringConstruction	        = Yes
		DeathWeapon					              = StandardWallDeath
	End	

	Geometry						                = BOX
	GeometryMajorRadius				          = 55.0
	GeometryMinorRadius				          = 30.0
	GeometryHeight					            = 45.0
	
	GeometryContactPoint                =	X:-50			Y:-40				Z:0 Grab
	GeometryContactPoint                =	X:0				Y:-40				Z:40 Grab
	GeometryContactPoint                =	X:50			Y:-40				Z:0 Grab
	GeometryContactPoint                =	X:-50			Y:40				Z:0 Grab
	GeometryContactPoint                =	X:0				Y:40				Z:40 Grab
	GeometryContactPoint                =	X:50			Y:40				Z:0 Grab
	
	GeometryIsSmall					            = No
	Shadow							                = SHADOW_VOLUME
End

;/////////////////////////////////////////////////
;////////// TEMP TEMP TEMP ///////////////////////
;/////////////////////////////////////////////////
;----------------------------------------------------------------------------------------------
Object RivendellCastleTempObject

    SelectPortrait                    = BRCastleWall
	Draw                                = W3DScriptedModelDraw Draw_Wall
	
		OkToChangeModelColor              = Yes

		DefaultModelConditionState
			Model                           = EBRIVCASTTEMP
		End

		ModelConditionState               = WORLD_BUILDER
  			Model                         = EBRIVCASTTEMP
  		End

		ModelConditionState               = BASE_BUILD
  			Model                         = EBRIVCASTTEMP 
  		End
		AnimationState                    = BASE_BUILD
			Animation
				AnimationName                 = EBRIVCASTTEMP.EBRIVCASTTEMP 
				AnimationMode                 = ONCE
				AnimationSpeedFactorRange     = 1.5 2.5 ; keep range wide to avoid lockstep anims
			End
		End    

		ModelConditionState               = JUST_BUILT
  			Model                         = EBRIVCASTTEMP 
  		End
		AnimationState                    = JUST_BUILT
			StateName                       = STATE_None
			Animation
				AnimationName                 = EBRIVCASTTEMP.EBRIVCASTTEMP 
				AnimationMode                 = MANUAL
			End
			Flags                           = START_FRAME_FIRST
		End

		ModelConditionState               = ACTIVELY_BEING_CONSTRUCTED
  			Model                         = EBRIVCASTTEMP 
  		End
		AnimationState                    = ACTIVELY_BEING_CONSTRUCTED
			Animation
				AnimationName                 = EBRIVCASTTEMP.EBRIVCASTTEMP 
				AnimationMode                 = MANUAL
			End
			Flags                           = START_FRAME_FIRST
		End    

		
		ModelConditionState               = DAMAGED
			Model                           = EBRIVCASTTEMP ;RBCastWALL_D1  
		End
	    
		AnimationState                    = DAMAGED
	;      EnteringStateFX              = FX_RohanWallDamaged
		End

		ModelConditionState               = REALLYDAMAGED
			Model                           = EBRIVCASTTEMP ;RBCastWALL_D2
		End
		AnimationState                    = REALLYDAMAGED
       		Animation				            =	ReallyDamagedanimation
				AnimationName		              =	 EBRIVCASTTEMP.EBRIVCASTTEMP ;RBCastWALL_D2.RBCastWALL_D2
				AnimationMode		              =	ONCE
   			End
	;        EnteringStateFX            = FX_RohanWallReallyDamaged
		End

		ModelConditionState               = RUBBLE
      Model                           = EBRIVCASTTEMP ;RBCastWall_D3
      ParticleSysBone NONE BuildingChunkBitsTrail
      ParticleSysBone NONE ExplosiveMineFire02
    End
	    
		AnimationState                    = RUBBLE
			Animation				                =	Death
				AnimationName		              =	EBRIVCASTTEMP.EBRIVCASTTEMP ;RBCastWALL_D3.RBCastWALL_D3
				AnimationMode		              =	ONCE
			End
			EnteringStateFX                 = FX_WallDie
			;EnteringStateFX                = FX_RohanWallRubble
		End      

		ModelConditionState               = POST_RUBBLE
			Model                           = None
		End

		ModelConditionState               = POST_COLLAPSE
			Model                           = None
		End

	End
	
  
	;----------------------- AUDIO -------------------------

	VoiceSelect			                    = Gui_PlotSelect

	SoundOnDamaged			                = BuildingLightDamageStone
	SoundOnReallyDamaged		            = BuildingHeavyDamageStone


	; ***DESIGN parameters ***
	DisplayName		                      = OBJECT:RivendellCastleWall
	EditorSorting	                      = STRUCTURE
	Side			                          = Rivendell
	BuildTime		                        = M_CASTLE_WALL_REBUILD_TIME
	BuildCost		                        = M_CASTLE_WALL_REBUILD_COST
  	ShroudClearingRange               = 160

	ArmorSet
		Conditions	                      = None
		Armor		                          = GondorCastleWall            
		DamageFX	                        = MinasWallADamageFX
	End
	

	; *** ENGINEERING Parameters ***  
	KindOf					                    = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR SELECTABLE NOT_AUTOACQUIRABLE
	RadarPriority			                  = NOT_ON_RADAR
	KeepSelectableWhenDead	            = Yes
	CommandSet				                  = GenericSelfRepairCommandSet
	
	Body				                        = ActiveBody ModuleTag_02
		MaxHealth		                      = M_GONDOR_CASTLE_WALL_HEALTH
	End

    Behavior                          = SiegeDockingBehavior ModuleTag_SiegeDocking
    End
	
	Behavior                            = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached        = Yes
	End 

 	Behavior                            = GettingBuiltBehavior ModuleTag_GettingBuilt
	    SelfBuildingLoop                = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop          = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop          = BuildingConstructionLoop
		SpawnTimer                        = -1.0 ; Negative means no 'autoheal'
		RebuildTimeSeconds                = M_CASTLE_WALL_REBUILD_TIME
	End

;	Behavior                            = FoundationAIUpdate ModuleTag_foundationAI
;	End
	
    Behavior                          = KeepObjectDie ModuleTag_IWantRubble
    End
	
  	Behavior                          = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	                    = Yes ;If no, requires upgrade to turn on.
		BonusName		                      = WallBonus
		RefreshDelay	                    = 2000
		;TargetEnemy		                  = Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

 	Behavior                            = FireWeaponWhenDeadBehavior FireDeadTag1
		DeathTypes					              = ALL
		StartsActive				              = Yes
		ActiveDuringConstruction	        = Yes
		DeathWeapon					              = CastleWallDeath
	End	

 	Behavior                            = FireWeaponWhenDeadBehavior FireDeadTag2
		DeathTypes					              = ALL
		StartsActive				              = Yes
		ActiveDuringConstruction	        = Yes
		DeathWeapon					              = StandardWallDeath
	End	

	Geometry						                = BOX
	GeometryMajorRadius				          = 55.0
	GeometryMinorRadius				          = 30.0
	GeometryHeight					            = 45.0
	
	GeometryContactPoint                =	X:-50			Y:-40				Z:0 Grab
	GeometryContactPoint                =	X:0				Y:-40				Z:40 Grab
	GeometryContactPoint                =	X:50			Y:-40				Z:0 Grab
	GeometryContactPoint                =	X:-50			Y:40				Z:0 Grab
	GeometryContactPoint                =	X:0				Y:40				Z:40 Grab
	GeometryContactPoint                =	X:50			Y:40				Z:0 Grab
	
	GeometryIsSmall					            = No
	Shadow							                = SHADOW_VOLUME
End