;------------------------------------------------------------------------------
;
;    Rivendell Reveler Horde.ini
;
;------------------------------------------------------------------------------
Object RivendellRevelerHorde

    ; This is required for garrisoned objects - please put in all objects.
    SelectPortrait                        = uprivreveler
    ButtonImage                           = uirivendellrevelernew

    Draw                                       = W3DScriptedModelDraw ModuleTag_W3DModelDraw
        DependencySharedModelFlags             = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED EMOTION_TERROR EMOTION_LOOK_TO_SKY EMOTION_TAUNTING
        DefaultModelConditionState
            Model                              = None ;InvisHrdeTmp5x2
        End
        ModelConditionState                    = HORDE_EMPTY
            Model                              = None
        End        
        
        ModelConditionState                    = WORLD_BUILDER
            Model                              = HordeMarkGURan
        End
    End
    
    Side                                       = Rivendell
    EditorSorting                              = UNIT
    EmotionRange                               = 240
    DisplayName                                = OBJECT:HordeRivendellReveler
    
    WeaponSet
        Conditions                             = None 
        Weapon                                 = PRIMARY    RevelersWeaponRangeFinder
    End
    
    ; *** AUDIO Parameters ***
    ; Note: Don't put voice parameters here -- they will be ignored. Voice play requests
    ; are always passed through to members
    BuildCost                                  = RIV_REVELERS_BUILDCOST
    BuildTime                                  = RIV_REVELERS_BUILDTIME
    VisionRange                                = RIV_REVELERS_VISIONRANGE
    ShroudClearingRange                        = RIV_REVELERS_SHROUDCLEARNING
    CommandPoints                              = 30
	  CommandSet                                 = RivendellRevelerCommandSet
    
    CrushableLevel                             = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
    CrusherLevel                               = 0

    FormationWidth                             = 2 ; Width it occupies in formations. Current choices are 1 or 2.
    FormationDepth                             = 1 ; Depth it occupies in formations. Current choices are 1 or 2.
    
    TransportSlotCount                         = 1
    KindOf                                     = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE ARCHER ARMY_SUMMARY MELEE_HORDE 
    
    Body                                       = ImmortalBody ModuleTag_ImmortalBody
        MaxHealth                              = 1
    End
    
    Behavior                                   = HordeAIUpdate ModuleTag_HordeAIUpdate
        AutoAcquireEnemiesWhenIdle             = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate                    = 500
        MaxCowerTime                           = 5000
        MinCowerTime                           = 3000
        CanAttackWhileContained                = Yes  ; Can fire out of garrisoned building        
        AILuaEventsList                        = GondorArcherHordeFunctions
        AttackPriority                         = AttackPriority_Archer
    End

    Behavior                                   = HordeContain ModuleTag_HordeContain
        ObjectStatusOfContained                = 
        InitialPayload                         = RivendellReveler 3
        Slots                                  = 3
        PassengerFilter                        = NONE +INFANTRY
        ShowPips                               = No
        ThisFormationIsTheMainFormation        = Yes    ;Used to determine which armorset to use (and anything else we want!)
        RandomOffset                           = X:4 Y:4
        
        ; Banner Carrier info        
        BannerCarriersAllowed                  = RivendellElfBanner                                        ; types of units that are allowed as banner carriers
        BannerCarrierPosition                  = UnitType:RivendellReveler        Pos:X:40.0 Y:0.0        ; (DEFAULT) position of banner carrier
        
        ; Positions for 3
        RankInfo                               = RankNumber:1 UnitType:RivendellReveler Position:X:15 Y:0    Position:X:15 Y:30    Position:X:15 Y:-30
        
        RanksToReleaseWhenAttacking            = 1 
        MeleeAttackLeashDistance               = 25		
        ;AlternateFormation                     = DunedainRangerSwordHorde
    End
    
    Behavior                                   = PhysicsBehavior ModuleTag_PhysicsBehavior
        GravityMult                            = 1.0
    End
    
    Behavior                                   = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance                  = INFANTRY_TAUNT_POINT_RADIUS        ; max distance to taunted/pointed objet
        TauntAndPointUpdateDelay               = 1000    ; how often scan (milliseconds)
        TauntAndPointExcluded                  = NONE
        AfraidOf                               = NONE +GondorGwaihir +RohanTreeBerd +RohanEntFir +RohanEntAsh +RohanEntBirch +MordorBalrog +MordorFellBeast +MordorWitchKingOnFellBeast  +MordorCaveTroll +MordorMountainTroll +MordorDrummerTroll +MordorMumakil ;Must be SCARY kindof as well.
        AlwaysAfraidOf                         = NONE +MordorBalrog +RohanOathbreaker +MordorSauron ;+MordorWitchKing +MordorWitchKingOnFellBeast
        PointAt                                = NONE +MordorFellBeast +MordorWitchKingOnFellBeast 
        HeroScanDistance                       = 150
        FearScanDistance                       = ARCHER_FEAR_SCAN_RADIUS

        AddEmotion	                           = Terror_Base
        AddEmotion	                           = Doom_Base
        AddEmotion	                           = UncontrollableFear_Base
        AddEmotion	                           = FearIdle_Base
        AddEmotion	                           = FearBusy_Base
        AddEmotion	                           = Point_Base 		
        AddEmotion	                           = CheerIdle_Base
        AddEmotion	                           = CheerBusy_Base
        AddEmotion	                           = HeroCheerIdle_Base
        AddEmotion	                           = HeroCheerBusy_Base
        AddEmotion	                           = Alert_Base
        AddEmotion                             = CheerIdle_Base
        AddEmotion                             = CheerBusy_Base
        AddEmotion                             = HeroCheerIdle_Base
        AddEmotion                             = HeroCheerBusy_Base
        AddEmotion                             = Alert_Base
    End    
        
    LocomotorSet
        Locomotor                              = NormalRangedHordeLocomotor
        Condition                              = SET_NORMAL
        Speed                                  = 40 ; NORMAL_GOOD_INFANTRY_HORDE_SPEED
    End

    Behavior                                   = ProductionUpdate ProductionUpdateModuleTag
        GiveNoXP                               = Yes
    End

    ; -- Basic Training
    Behavior                                   = LevelUpUpgrade ModuleTag_BasicTraining
        TriggeredBy                            = Upgrade_RivendellBasicTraining Upgrade_TechnologyRivendellBasicTraining
        RequiresAllTriggers                    = Yes
        LevelsToGain                           = 1
        LevelCap                               = 2
    End
    
    ; -- Rank 1 Story Time
    Behavior                                   = AttributeModifierAuraUpdate ModuleTag_StoryTime
        StartsActive                           = Yes ;If no, requires upgrade to turn on.
        BonusName                              = RevelerStoryTimeLeadership
        RefreshDelay                           = 2000
        Range                                  = 200
        ObjectFilter                           = ANY +INFANTRY +CAVALRY -RivendellRevelerHorde
    End 
    
    ; -- Rank 1 Stay a While and Listen
    Behavior                                   = AttributeModifierAuraUpdate ModuleTag_StayWhile
        StartsActive                           = Yes
        BonusName                              = RevelerNegativeLeadership
        RefreshDelay                           = 2000
        Range                                  = 200
        AllowPowerWhenAttacking                = Yes
        TargetEnemy                            = Yes
        ObjectFilter                           = ANY +INFANTRY +CAVALRY -MONSTER -STRUCTURE -BASE_FOUNDATION -HERO
    End
    
    ; -- Songs of Spring
    Behavior                                  = UnpauseSpecialPowerUpgrade ModuleTag_SongOfSpringEnable
        SpecialPowerTemplate                  = SpecialAbilitySongOfSpring
        TriggeredBy                           = Upgrade_GenericUpgrade1
    End

    Behavior                                  = SpecialPowerModule ModuleTag_SongOfSpringStarter                      
        SpecialPowerTemplate		              = SpecialAbilitySongOfSpring
        UpdateModuleStartsAttack	            = Yes
        StartsPaused				                  = Yes
    End

    Behavior                                  = ArrowStormUpdate ModuleTag_SongOfSpringUpdate                
        SpecialPowerTemplate                  = SpecialAbilitySongOfSpring
        StartAbilityRange                     = 250.0

        UnpackTime                            = 1000	; Pull out arrow
        PreparationTime                       = 200	; Quick shot
        PersistentPrepTime                    = 600	; looping the quick shot
        PackTime                              = 1200	; back to idle
        UnpackingVariation			              = 3		; Use custom variation to not interfere with Archer Training ability.
        ParalyzeDurationWhenCompleted         = 600	;Once the unit SUCCESSFULLY COMPLETES an ability, paralyze unit briefly to deal with animation transitions.
        ParalyzeDurationWhenAborted           = 800	;If the unit ABORTS the ability, paralyze the unit briefly to deal with animation transitions.

        ApproachRequiresLOS                   = Yes ; required so that it doesn't shoot through walls

        AwardXPForTriggering                  = 0

        WeaponTemplate                        = RevelerSongOfSpringWeapon
        TargetRadius                          = 5
        ShotsPerTarget                        = 1
        ShotsPerBurst                         = 1
        MaxShots                              = 1  ; can end sooner if no targets
        CanShootEmptyGround                   = Yes ; ...unless this is set
    End    
    
    ; -- Akallabeth
    Behavior                                  = UnpauseSpecialPowerUpgrade ModuleTag_AkallabethEnable
        SpecialPowerTemplate                  = SpecialAbilityRevelersAkallabeth
        TriggeredBy                           = Upgrade_GenericUpgrade1
    End

    Behavior                                  = SpecialPowerModule ModuleTag_AkallabethStarter                      
        SpecialPowerTemplate		              = SpecialAbilityRevelersAkallabeth
        UpdateModuleStartsAttack	            = Yes
        StartsPaused				                  = Yes
    End

    Behavior                                  = ArrowStormUpdate ModuleTag_AkallabethUpdate                
        SpecialPowerTemplate                  = SpecialAbilityRevelersAkallabeth
        StartAbilityRange                     = 400.0

        UnpackTime                            = 1000	; Pull out arrow
        PreparationTime                       = 200	; Quick shot
        PersistentPrepTime                    = 600	; looping the quick shot
        PackTime                              = 1200	; back to idle
        UnpackingVariation			              = 3		; Use custom variation to not interfere with Archer Training ability.
        ParalyzeDurationWhenCompleted         = 600	;Once the unit SUCCESSFULLY COMPLETES an ability, paralyze unit briefly to deal with animation transitions.
        ParalyzeDurationWhenAborted           = 800	;If the unit ABORTS the ability, paralyze the unit briefly to deal with animation transitions.

        ApproachRequiresLOS                   = Yes ; required so that it doesn't shoot through walls

        AwardXPForTriggering                  = 0

        WeaponTemplate                        = RevelersAkallabethWeapon
        TargetRadius                          = 5
        ShotsPerTarget                        = 1
        ShotsPerBurst                         = 1
        MaxShots                              = 1  ; can end sooner if no targets
        CanShootEmptyGround                   = Yes ; ...unless this is set
    End  
    
    Geometry                                   = BOX
    GeometryMajorRadius                        = 20.0
    GeometryMinorRadius                        = 20.0
    GeometryHeight                             = 10.0
    GeometryIsSmall                            = No
End