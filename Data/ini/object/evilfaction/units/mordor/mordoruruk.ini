;------------------------------------------------------------------------------
Object MordorUruk
  ; *** ART Parameters ***

  ; This is required for garrisoned objects - please put in all objects.
  ButtonImage = UIMordorBlackUruks
  SelectPortrait         = UPMordorBlackUruks
  
  Scale = 0.9
  
  Draw = W3DHordeModelDraw ModuleTag_01

	OkToChangeModelColor = Yes
	  
	StaticModelLODMode 			= 	Yes
	  
	WadingParticleSys = WaterRipplesTrail  ; used when the unit is wading in shallow water.

    DefaultModelConditionState
      Model             = muuruk_skn
      Skeleton		= IUUrukahi_SKL
      Model     = muuruk_skna  ExtraMesh:Yes
    End

    IdleAnimationState
        Animation = IDLB
            AnimationName = IUUrukahi_IDLB
            AnimationMode = ONCE
            AnimationPriority = 20
        End
        Animation = IDLG
            AnimationName = IUUrukahi_IDLG
            AnimationMode = ONCE
            AnimationPriority = 1 ;2
        End
        Animation = IDLD
            AnimationName = IUUrukahi_IDLD
            AnimationMode = ONCE
            AnimationPriority = 2
        End    
        StateName = Idle
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoard") end
        EndScript
    End


    AnimationState                        = PASSENGER
        Animation                        = Falling
            AnimationName                = IUUrukahi_FLLA
            AnimationMode                = LOOP
        End
    End
    
    AnimationState                        = FREEFALL
        Animation                        = FLYA
            AnimationName                = IUUrukahi_FLYA
            AnimationMode                = LOOP
            AnimationSpeedFactorRange    = 0.5    0.5
            AnimationBlendTime            = 5
        End
    End
    
    AnimationState            = STUNNED_FLAILING
        Animation           = StunFlail
            AnimationName   = IUUrukahi_FLYA
            AnimationMode   = LOOP
        End
        Flags                        = MAINTAIN_FRAME_ACROSS_STATES2
    End

    AnimationState            = DYING SPLATTED
        Animation            = Splat
            AnimationName    = IUUrukahi_LNDA
            AnimationMode    = ONCE
        End
    End

    AnimationState = DYING
        Animation = DIEA
            AnimationName = IUUrukahi_DIEA
            AnimationMode = ONCE
            AnimationPriority = 1
            AnimationSpeedFactorRange    =    0.8 1.25
        End
        Animation = DIEB
            AnimationName = IUUrukahi_DIEB
            AnimationMode = ONCE
            AnimationPriority = 3
            AnimationSpeedFactorRange    =    0.8 1.25
        End
        Animation = DIEC
            AnimationName = IUUrukahi_DIEC
            AnimationMode = ONCE
            AnimationPriority = 2
            AnimationSpeedFactorRange    =    0.8 1.25
        End
        Animation = DIEG
            AnimationName = IUUrukahi_DIEG
            AnimationMode = ONCE
            AnimationPriority = 10
            AnimationSpeedFactorRange    =    0.8 1.25
        End
    End    

    AnimationState        = STUNNED
        Animation           = LNDA
            AnimationName     = IUUrukahi_LNDA
            AnimationMode     = ONCE
        End
    End

    AnimationState        = STUNNED_STANDING_UP
        Animation           = GTPA
            AnimationName     = IUUrukahi_GTPA
            AnimationMode     = ONCE
            AnimationSpeedFactorRange = 1.5 1.5
        End
    End    
        
    AnimationState        = THROWN_PROJECTILE
        Animation           = FLYA
            AnimationName     = IUUrukahi_FLYA
            AnimationMode     = LOOP
        End
    End
    
    ; ladder climbing animations
    AnimationState = MOVING CLIMBING BACKING_UP
        Animation = Climbing_Down
            AnimationName = IUUrukahi_CLMA
            AnimationMode = LOOP_BACKWARDS
            AnimationSpeedFactorRange = 2.0 2.0
        End
    End

    AnimationState = MOVING CLIMBING
        Animation = Climbing_Up
            AnimationName = IUUrukahi_CLMA
            AnimationMode = LOOP
            AnimationSpeedFactorRange = 2.0 2.0
        End
    End

    AnimationState = MOVING EMOTION_TERROR
        Animation = TERRORIZED
            AnimationName = IUUrukahi_RUNC
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART
        ParticleSysBone = None InfantryDustTrails
    End
     
    AnimationState = MOVING BACKING_UP
        Animation = BackingUp
            AnimationName = IUUrukahi_BAKA
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART
    End

;    AnimationState = MOVING DAMAGED
;        Animation = Moving
;            AnimationName = IUUrukahi_WLK
;            AnimationMode = LOOP
;        End
;        Flags = RANDOMSTART
;        ParticleSysBone = None InfantryDustTrails
;    End

    AnimationState = MOVING
        Animation = Moving
            AnimationName = IUUrukahi_RUNA
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART
        ParticleSysBone = None InfantryDustTrails
    End

        ; --------- Click and Hit Reactions ------------
        AnimationState = HIT_REACTION HIT_LEVEL_1
            Animation = Hit_Level_1_a
                AnimationName = IUUrukahi_HITC
                AnimationMode = ONCE
            End
            Animation = Hit_Level_1_a
                AnimationName = IUUrukahi_HITE
                AnimationMode = ONCE
            End
        End
        
        AnimationState = HIT_REACTION HIT_LEVEL_2
            Animation = Hit_Level_1_a
                AnimationName = IUUrukahi_HITD
                AnimationMode = ONCE
            End
        End
        
    AnimationState = FIRING_OR_PREATTACK_A
        Animation = ATKA
            AnimationName = IUUrukahi_ATKA
            AnimationMode = ONCE
        End
        Animation = ATKC
            AnimationName = IUUrukahi_ATKC
            AnimationMode = ONCE
            AnimationSpeedFactorRange    =    0.7 0.7
        End
        Animation = ATKB
            AnimationName = IUUrukahi_ATKB
            AnimationMode = ONCE
        End
        ParticleSysBone = None MeleeDust
    End
    
    AnimationState = BETWEEN_FIRING_SHOTS_A
        Animation = Wait
            AnimationName = IUUrukahi_IDLA
            AnimationMode = ONCE
        End
    End

   
    AnimationState = WAR_CHANT
        Animation = Chant
            AnimationName = IUUrukahi_TNTA
            AnimationMode = LOOP
        End
    End
    
    AnimationState                            = EMOTION_UNCONTROLLABLY_AFRAID
        Animation                            = FERA
            AnimationName                    = IUUrukahi_FERA
            AnimationMode                    = LOOP
        End
        Flags = RANDOMSTART
    End

     AnimationState = ATTACKING
        Animation = IdleAllAttacksComeFrom
            AnimationName = IUUrukahi_IDLA
            AnimationMode = LOOP
        End
    End
    
   ;-emotions--
    ; Should be before selected (if uncontrollable..)      
    AnimationState                            = EMOTION_AFRAID
        Animation                            = FERA
            AnimationName                    = IUUrukahi_FERA
            AnimationMode                    = LOOP
        End
        Flags = RANDOMSTART
    End

    AnimationState                            = EMOTION_TAUNTING
        Animation                            = TNTA
            AnimationName                    = IUUrukahi_TNTA
            AnimationMode                    = LOOP
            AnimationBlendTime                = 10
            AnimationSpeedFactorRange        = 0.8 1.2
        End
        Flags                = RESTART_ANIM_WHEN_COMPLETE
    End
    
    AnimationState                            = EMOTION_POINTING
        Animation                            = Pointing1
            AnimationName                    = IUUrukahi_PNTA
            AnimationMode                    = LOOP
        End
    End
    
    AnimationState                            = EMOTION_CELEBRATING
        Animation                            = CHRA
            AnimationName                    = IUUrukahi_CHRA
            AnimationMode                    = ONCE
            AnimationBlendTime                = 10
        End
        Animation                            = CHRB
            AnimationName                    = IUUrukahi_CHRB
            AnimationMode                    = ONCE
            AnimationBlendTime                = 10
        End
        Animation                            = TNTA
            AnimationName                    = IUUrukahi_TNTA
            AnimationMode                    = ONCE
            AnimationBlendTime                = 10
        End
        Flags                = RESTART_ANIM_WHEN_COMPLETE
    End
    
    AnimationState                            = EMOTION_ALERT
        Animation                            = ALERT
            AnimationName                    = IUUrukahi_IDLA
            AnimationMode                    = LOOP
        End
        Flags                                = RESTART_ANIM_WHEN_COMPLETE RANDOMSTART
    End


    AnimationState        = SELECTED
        StateName           = STATE_Selected
        Animation           = ATNB
            AnimationName     = IUUrukahi_ATNB
            AnimationMode     = LOOP
        End
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
        EndScript
    End

    TransitionState       = TRANS_IdleToSelected
        Animation           = ATNA
            AnimationName     = IUUrukahi_ATNA
            AnimationMode     = ONCE
            AnimationSpeedFactorRange = 0.9 1.0
        End
    End

    TransitionState       = TRANS_SelectedToGuard
        Animation           = ATNB
            AnimationName     = IUUrukahi_ATNB
            AnimationMode     = ONCE
            AnimationSpeedFactorRange = 0.9 1.0
        End
    End
        
    TransitionState        = TRANS_SelectedToBoard
        Animation            = ATNC
            AnimationName    = IUUrukahi_ATNC
            AnimationMode    = ONCE
            AnimationSpeedFactorRange = 0.9 1.0
        End
    End

  End

    ; ***DESIGN parameters ***
    Side = Mordor
    EditorSorting = UNIT
        ThreatLevel = 1.0
    ThingClass = HORDE_UNIT
    EmotionRange = 240
    CommandPoints = 2
    CommandSet = MordorUrukCommandSet
    TransportSlotCount = 1

    VisionRange = M_VISION_STANDARD_MELEE
    ShroudClearingRange = M_SHROUD_CLEAR_STANDARD

    BountyValue = M_ISENGARD_URUKFIGHTER_BOUNTY_VALUE
    DisplayName = OBJECT:MordorUruk
    CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
    CrusherLevel = 0 ;What can I crush?: 0 = fluffy bunnies, 1 = infantry, 2 = trees, 3 = vehicles
      CrushRevengeWeapon = BasicInfantryCrushRevenge

    WeaponSet
        Conditions = None 
        Weapon = PRIMARY    IsengardBannerSword
    End

    WeaponSet
		Conditions			= WEAPONSET_TOGGLE_1
		Weapon				= PRIMARY	IsengardBannerSwordSpecial	
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

    ArmorSet
        Conditions      = None
        Armor           = UrukHaiArmor
        DamageFX        = NormalDamageFX
    End

      ; This is required so that the build phase lasts as long as the anim.
    BuildFadeInOnCreateTime = 0 ; 2  ;temporarily set to 0
    

  ; *** AUDIO Parameters ***;

        VoiceAmbushed                = UrukWarriorVoiceAmbushed
    VoiceAttack                    = UrukWarriorVoiceAttack
    VoiceAttack2                = OrcVoiceMove2
    VoiceMove                    = UrukWarriorVoiceMove
    VoiceRetreatToCastle            = UrukPikemanVoiceRetreat
    VoiceMoveToCamp                = UrukWarriorVoiceMoveCamp
    VoiceRetreatToCastle2            = OrcVoiceMove2
    VoiceMoveWhileAttacking            = UrukWarriorVoiceDisengage
    VoiceMoveWhileAttacking2        = OrcVoiceMove2
    VoiceRetreatToCastle            = UrukPikemanVoiceRetreat
    VoiceRetreatToCastle            = OrcVoiceMove2
    VoiceEnterStateAttack            = UrukWarriorVoiceEnterStateAttack
    VoiceAttackStructure            = UrukWarriorVoiceAttackBuilding
    VoiceEnterStateAttackStructure    = UrukWarriorVoiceEnterStateAttackBuilding
    VoiceAttackMachine            = UrukWarriorVoiceAttack
    VoiceEnterStateAttackMachine        = UrukWarriorVoiceEnterStateAttackBuilding
    VoiceAttackCharge                = UrukWarriorVoiceAttackCharge
    VoiceEnterStateAttackCharge        = UrukWarriorVoiceEnterStateAttackCharge
    VoiceCreated                = CampOrcCreateMordorUrukHai
    VoiceFullyCreated             = CampOrcCreateMordorUrukHai
    VoiceEnterStateMove            = UrukWarriorVoiceEnterStateMove
    VoiceEnterStateMoveToCamp        = UrukWarriorVoiceEnterStateMoveCamp
    VoiceEnterStateMoveWhileAttacking    = UrukWarriorVoiceEnterStateDisengage
    VoiceEnterStateRetreatToCastle    = UrukPikemanVoiceEnterStateRetreat
    VoicePriority                = 54
    VoiceSelect                    = UrukWarriorVoiceSelect
    VoiceSelect2                = UrukSwordmanVoiceSelect2
    VoiceSelectBattle             = UrukWarriorVoiceSelectBattle
    VoiceGuard                    = UrukWarriorVoiceMove

    SoundImpact                    = ImpactHorse

    UnitSpecificSounds
        VoiceGarrison            = UrukWarriorVoiceGarrison
        VoiceEnterUnitSlaughterHouse     = UrukWarriorVoiceGarrisonSlaughterHouse
    End

    EvaEventDamagedOwner            = UnitUnderAttack         ;Eva event to trigger when unit is damaged
    ;EvaEventDieOwner = BlackUrukDie        ;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
                            ;For deaths you can respawn from, use the DeathFX

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU    ;Tie into LargeGroupAudio system
        Key = Orc_Infantry UrukHai_Swordman
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:BodyFallOrc            Animation:IUUrukahi_SKL.IUUrukahi_DIEA    Frames:18
        AnimationSound = Sound:BodyFallOrc            Animation:IUUrukahi_SKL.IUUrukahi_DIEB    Frames:30
        AnimationSound = Sound:BodyFallOrc            Animation:IUUrukahi_SKL.IUUrukahi_DIEC    Frames:28
        AnimationSound = Sound:BodyFallGeneric2        Animation:IUUrukahi_SKL.IUUrukahi_DIEG    Frames:115
        AnimationSound = Sound:BodyFallOrc            Animation:IUUrukahi_SKL.IUUrukahi_LNDA    Frames:2
        AnimationSound = Sound:BodyFallGeneric2        Animation:IUUrukahi_SKL.IUUrukahi_LNDA    Frames:37
    End


    ; *** ENGINEERING Parameters ***
    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE CAN_USE_SIEGE_TOWER URUK GRAB_AND_DROP
     
    Body = ActiveBody ModuleTag_02
        CheerRadius     = M_EMOTION_CHEER_RADIUS
        MaxHealth             = M_ISENGARD_URUKFIGHTER_HEALTH                ;BALANCE Uruk Hai Health
        MaxHealthDamaged      = M_ISENGARD_URUKFIGHTER_HEALTH_DAMAGED        
        ;RecoveryTime      = M_ISENGARD_URUKFIGHTER_HEALTH_RECOVERY_TIME    
        
        CheerRadius = M_EMOTION_CHEER_RADIUS
    End

    ;-----------------------------------------------------------------------------
	;	Rank 2 Ability
	;-----------------------------------------------------------------------------	
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_MordhauGripEnabler
		SpecialPowerTemplate 		= SpecialAbilityRank2
		TriggeredBy 				= Upgrade_GenericUpgrade2
	End	
	Behavior = SpecialPowerModule ModuleTag_MordhauGripSpecialPower                      
		SpecialPowerTemplate		= SpecialAbilityRank2
		StartsPaused				= Yes
	End
	Behavior = WeaponModeSpecialPowerUpdate ModuleTag_MordhauGripUpdate
		SpecialPowerTemplate		= SpecialAbilityRank2
		Duration					= 30000
		WeaponSetFlags				= WEAPONSET_TOGGLE_1
		StartsPaused				= Yes
		AttributeModifier			= MordorUrukRank2
	End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
    AILuaEventsList               = MordorUrukFunctions
    MoodAttackCheckRate        = 500
    AttackPriority                =     AttackPriority_Infantry
  End
  
;  Behavior = StealthUpdate ModuleTag_Stealth
;    StealthDelay                = 0 ; msec
;    StealthForbiddenConditions  = ATTACKING
;    HintDetectableConditions    = IS_FIRING_WEAPON 
;    FriendlyOpacityMin          = 10.0%
;    FriendlyOpacityMax          = 60.0%
;    PulseFrequency              = 750   ; msec
;    OrderIdleEnemiesToAttackMeUponReveal  = Yes
;    StartsActive                = No
;    InnateStealth                = No
;  End

  LocomotorSet
    Locomotor     = HumanLocomotor
    Condition     = SET_NORMAL
    Speed         = M_NORMAL_EVIL_FAST_MEMBER_SPEED        
  End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
    ShockStandingTime        = 2533    ;msec
  End
 
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -FADED
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL UrukVoiceDie
  End

  Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 8000
        DestructionDelay = 8000
        DeathFlags = DEATH_2
        FX = INITIAL FX_RohirrimAlliesUnsummon
   End

  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End
  
  Behavior = HordeMemberCollide ModuleTag_HMC
    ;nothing
  End
 
    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 2860 ; level 1 (light  damage)  hit reaction animations in ms
        HitReactionLifeTimer2 = 3000 ; level 2 (medium damage)  hit reaction animations in ms

        HitReactionThreshold1 = 0.0   ; level 1 (light  damage) threshold trigger
        HitReactionThreshold2 = 50.0  ; level 2 (medium damage) threshold trigger
    End
  
  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes

  Shadow = SHADOW_DECAL
  ShadowSizeX = 21;
  ShadowSizeY = 21;
  ShadowTexture = ShadowI;
End
ChildObject MordorUruk_Summoned MordorUruk
    IsTrainable = No
    CommandPoints = 0
    EquivalentTo = MordorUruk
    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = 75000
        MaxLifetime        = 75000
        DeathType        = FADED
    End 
End