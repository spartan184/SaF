;------------------------------------------------------------------------------
; aka Uruk Hai, IsengardUrukHai, FighterIsengard, UrukWarrior, UrukFighter, UrukHaiWarrior, UrukHaiFighter, UrukSwordman
Object IsengardDunlandAxeman
  ; *** ART Parameters ***

  ; This is required for garrisoned objects - please put in all objects.
  SelectPortrait  =  UPDunlendingAxemen
	ButtonImage = UIDunlendingAxemen
	Draw = W3DHordeModelDraw ModuleTag_01
		StaticModelLODMode		= Yes ; Will append M or L to the skin name depending on GameLOD
		OkToChangeModelColor	= Yes		
		LodOptions							= LOW
			AllowMultipleModels				= ALLOW_MULTIPLE_MODELS_LOW
			MaxRandomTextures				= MAX_RANDOM_TEXTURES_LOW
			MaxRandomAnimations				= MAX_RANDOM_ANIMATIONS_LOW
			MaxAnimFrameDelta				= MAX_ANIM_FRAME_DELTA_LOW
		End		
		LodOptions							= MEDIUM
			AllowMultipleModels				= ALLOW_MULTIPLE_MODELS_MED
			MaxRandomTextures				= MAX_RANDOM_TEXTURES_MED
			MaxRandomAnimations				= MAX_RANDOM_ANIMATIONS_MED
			MaxAnimFrameDelta				= MAX_ANIM_FRAME_DELTA_MED
		End
		
		LodOptions							= HIGH
			AllowMultipleModels				= ALLOW_MULTIPLE_MODELS_HIGH
			MaxRandomTextures				= MAX_RANDOM_TEXTURES_HIGH
			MaxRandomAnimations				= MAX_RANDOM_ANIMATIONS_HIGH
			MaxAnimFrameDelta				= MAX_ANIM_FRAME_DELTA_HIGH
		End

		RandomTexture = iuNaxemanA.tga 0 iuNaxemanA.tga
		RandomTexture = iuNaxemanB.tga 0 iuNaxemanA.tga

		WadingParticleSys = WaterRipplesTrail  ; used when the unit is wading in shallow water.
		DefaultModelConditionState
			Model = iuNaxemanA_skn
			Skeleton = RUTheoden_SKL
			WeaponLaunchBone = PRIMARY ARRROW
			WeaponLaunchBone = TERTIARY ARRROW
		End
		;;;================== ANIMATIONS =================================================================

		IdleAnimationState
			StateName				=	BORED
			Animation				=	IDLB
				AnimationName		=	duolddain_idlb
				AnimationMode		=	ONCE
				AnimationPriority	=	1
			End
			Animation				=	IDLC
				AnimationName		=	duolddain_idlc
				AnimationMode		=	ONCE
				AnimationPriority	=	10
			End
			Animation				=	IDLD
				AnimationName		=	duolddain_idld
				AnimationMode		=	ONCE
				AnimationPriority	=	1
			End
			Animation				=	IDLE
				AnimationName		=	duolddain_idle
				AnimationMode		=	ONCE
				AnimationPriority	=	1
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "SELECTED"	then CurDrawableSetTransitionAnimState("Transition_SelectedToBored") end
				if Prev == "READY"		then CurDrawableSetTransitionAnimState("Transition_ReadyToBored") end
			EndScript
		End
		AnimationState				=	FREEFALL 
			Animation				=	freefall
				AnimationName		=	RUTheoden_FLYA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState						=	STUNNED_FLAILING 
			Flags							=	RANDOMSTART
			Animation						=	RUTheoden_FLYA
				AnimationName				=	RUTheoden_FLYA
				AnimationMode				=	LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
		End
		AnimationState						=	DYING DEATH_2
			Animation						=	duolddain_idla
				AnimationName				=	duolddain_idla
				AnimationMode				=	ONCE
			End
		End
		AnimationState						=	DYING SPLATTED
			Animation						=	RUTheoden_LNDA
				AnimationName				=	RUTheoden_LNDA
				AnimationMode				=	ONCE
			End
		End
		AnimationState						=	DYING
			Animation						=	RUTheoden_DIEA
				AnimationName				=	RUTheoden_DIEA
				AnimationMode				=	ONCE
			End
			Animation						=	RUTheoden_DIEB
				AnimationName				=	RUTheoden_DIEB
				AnimationMode				=	ONCE
			End
		End
		AnimationState						=	STUNNED_STANDING_UP
			Animation						=	RUTheoden_GTPA
				AnimationName				=	RUTheoden_GTPA
				AnimationMode				=	ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		AnimationState						=	STUNNED 
			Animation						=	RUTheoden_LNDA
				AnimationName				=	RUTheoden_LNDA
				AnimationMode				=	ONCE
			End
		End
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = RUTheoden_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End
		AnimationState						=	FIRING_OR_PREATTACK_A
			Animation						=	ATKA
				AnimationName				=	RUTheoden_ATKA
				AnimationMode				=	ONCE
				UseWeaponTiming				=	Yes
			End
			Animation						=	ATKB
				AnimationName				=	RUTheoden_ATKB
				AnimationMode				=	ONCE
			End
			Animation						=	ATKC
				AnimationName				=	RUTheoden_ATKC
				AnimationMode				=	ONCE
				UseWeaponTiming				=	Yes
			End
			Animation						=	ATKD
				AnimationName				=	RUTheoden_ATKD
				AnimationMode				=	ONCE
				UseWeaponTiming				=	Yes
			End
		End
		AnimationState						=	MOVING ATTACKING
			Animation						=	RUTheoden_RUNB
				AnimationName				=	RUTheoden_RUNB
				AnimationSpeedFactorRange	=	0.4 0.4
				AnimationMode				=	LOOP
				AnimationBlendTime			=   10
				Distance					=	30
			End
		End	
		AnimationState						=	MOVING 
			Animation						=	duolddain_runa
				AnimationName				=	duolddain_runa
				AnimationMode				=	LOOP
				Distance					=	30
			End
		End
		AnimationState						=	PACKING_TYPE_2
			StateName						=	SPELL
			Animation						=	SPCC
				AnimationName				=	RUTheoden_SPCB
				AnimationSpeedFactorRange	=	1.1666 1.1666
				AnimationMode				=	ONCE
				AnimationBlendTime	=	20
			End
			Animation						=	SPCD
				AnimationName				=	RUTheoden_SPCC
				AnimationMode				=	ONCE
				AnimationBlendTime	=	20
			End
		End
		AnimationState						= HIT_REACTION HIT_LEVEL_1
			Animation						= Hit_Level_1_a
				AnimationName				= RUTheoden_HITA
				AnimationMode				= ONCE
			End
		End
		AnimationState				= LEVELED
			Animation				= LevelUp
				AnimationName		= RUTheoden_CHRB
				AnimationMode		= ONCE
			End
		End
		AnimationState				=	EMOTION_CELEBRATING
			Animation				=	CHRA
				AnimationName		=	RUTheoden_CHRA
				AnimationMode		=	ONCE
			End
			Animation				=	CHRB
				AnimationName		=	RUTheoden_CHRB
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState				=	EMOTION_TAUNTING
			Animation				=	CHRB
				AnimationName		=	RUTheoden_CHRB
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState				=	EMOTION_ALERT
			StateName				=	READY
			Animation				=	ready
				AnimationName		=	duolddain_idla
				AnimationMode		=	LOOP
				AnimationBlendTime	=	20
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "BORED"		then CurDrawableSetTransitionAnimState("Transition_BoredToReady") end
				if Prev == "SELECTED"	then CurDrawableSetTransitionAnimState("Transition_SelectedToReady") end
			EndScript
		End
		AnimationState				=	SELECTED 
			StateName				=	SELECTED
			Animation				=	ATNB
				AnimationName		=	RUTheoden_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "BORED" then CurDrawableSetTransitionAnimState("Transition_BoredToSelected") end
				if Prev == "READY" then CurDrawableSetTransitionAnimState("Transition_ReadyToSelected") end
				if Prev == "SPELL" then CurDrawableSetTransitionAnimState("Transition_ReadyToSelected") end
			EndScript
		End		
		TransitionState Transition_BoredToReady
			Animation				=	ready
				AnimationName		=	duolddain_idla
				AnimationMode		=	LOOP
				AnimationBlendTime	=	20
			End
		End
		TransitionState Transition_ReadyToBored
			Animation				=	IDLC
				AnimationName		=	duolddain_idlc
				AnimationMode		=	ONCE
				AnimationBlendTime	=	20
			End
		End
		TransitionState Transition_BoredToSelected
			Animation				=	ATNA
				AnimationName		=	RUTheoden_ATNA
				AnimationMode		=	ONCE
			End
		End
		TransitionState Transition_SelectedToBored
			Animation				=	ATNE
				AnimationName		=	RUTheoden_ATNE
				AnimationMode		=	ONCE
			End
		End
		TransitionState Transition_SelectedToReady
			Animation				=	ATNC
				AnimationName		=	RUTheoden_ATNA
				AnimationMode		=	ONCE
			End
		End
		TransitionState Transition_ReadyToSelected
			Animation				=	ATNC
				AnimationName		=	RUTheoden_ATNA
				AnimationMode		=	ONCE_BACKWARDS
			End
			Flags = START_FRAME_LAST
		End
	End

    ; ***DESIGN parameters ***
    Side = Isengard
    EditorSorting = UNIT
        ThreatLevel = 1.0
    ThingClass = HORDE_UNIT
    EmotionRange = 240
    CommandPoints = 2
    CommandSet = IsengardFighterCommandSet
    TransportSlotCount = 1

    VisionRange = M_VISION_STANDARD_MELEE
    ShroudClearingRange = M_SHROUD_CLEAR_STANDARD

    BountyValue = M_ISENGARD_URUKFIGHTER_BOUNTY_VALUE
    DisplayName = OBJECT:IsengardFighter
    CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
    CrusherLevel = 0 ;What can I crush?: 0 = fluffy bunnies, 1 = infantry, 2 = trees, 3 = vehicles
      CrushRevengeWeapon = BasicInfantryCrushRevenge

    WeaponSet
        Conditions = None 
        Weapon = PRIMARY    IsengardBannerSword
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End
    WeaponSet
        Conditions = PLAYER_UPGRADE
        Weapon = PRIMARY    IsengardBannerSwordUpgrade
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End
    ArmorSet
        Conditions      = None
        Armor           = UrukHaiArmor
        DamageFX        = NormalDamageFX
    End
    ArmorSet
        Conditions        = PLAYER_UPGRADE
        Armor            = UrukHaiHeavyArmor
        DamageFX        = NormalDamageFX
    End

      ; This is required so that the build phase lasts as long as the anim.
    BuildFadeInOnCreateTime = 0 ; 2  ;temporarily set to 0
    

  ; *** AUDIO Parameters ***;

        VoiceAmbushed                = UrukWarriorVoiceAmbushed
    VoiceAttack                    = UrukWarriorVoiceAttack
    VoiceAttack2                = OrcVoiceMove2
    VoiceMove                    = UrukWarriorVoiceMove
    VoiceRetreatToCastle            = UrukPikemanVoiceRetreat
    VoiceMoveToCamp                = UrukWarriorVoiceMoveCamp
    VoiceRetreatToCastle2            = OrcVoiceMove2
    VoiceMoveWhileAttacking            = UrukWarriorVoiceDisengage
    VoiceMoveWhileAttacking2        = OrcVoiceMove2
    VoiceRetreatToCastle            = UrukPikemanVoiceRetreat
    VoiceRetreatToCastle            = OrcVoiceMove2
    VoiceEnterStateAttack            = UrukWarriorVoiceEnterStateAttack
    VoiceAttackStructure            = UrukWarriorVoiceAttackBuilding
    VoiceEnterStateAttackStructure    = UrukWarriorVoiceEnterStateAttackBuilding
    VoiceAttackMachine            = UrukWarriorVoiceAttack
    VoiceEnterStateAttackMachine        = UrukWarriorVoiceEnterStateAttackBuilding
    VoiceAttackCharge                = UrukWarriorVoiceAttackCharge
    VoiceEnterStateAttackCharge        = UrukWarriorVoiceEnterStateAttackCharge
    VoiceCreated                = CampOrcCreateUrukHai
    VoiceFullyCreated             = CampOrcCreateUrukHai
    VoiceEnterStateMove            = UrukWarriorVoiceEnterStateMove
    VoiceEnterStateMoveToCamp        = UrukWarriorVoiceEnterStateMoveCamp
    VoiceEnterStateMoveWhileAttacking    = UrukWarriorVoiceEnterStateDisengage
    VoiceEnterStateRetreatToCastle    = UrukPikemanVoiceEnterStateRetreat
    VoicePriority                = 54
    VoiceSelect                    = UrukWarriorVoiceSelect
    VoiceSelect2                = UrukSwordmanVoiceSelect2
    VoiceSelectBattle             = UrukWarriorVoiceSelectBattle
    VoiceGuard                    = UrukWarriorVoiceMove

    SoundImpact                    = ImpactHorse

    UnitSpecificSounds
        VoiceGarrison            = UrukWarriorVoiceGarrison
        VoiceEnterUnitSlaughterHouse     = UrukWarriorVoiceGarrisonSlaughterHouse
    End

    EvaEventDamagedOwner            = UnitUnderAttack         ;Eva event to trigger when unit is damaged
    ;EvaEventDieOwner = GroupUrukWarriorDie        ;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
                            ;For deaths you can respawn from, use the DeathFX

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU    ;Tie into LargeGroupAudio system
        Key = Orc_Infantry UrukHai_Swordman
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:BodyFallOrc            Animation:IUUrukahi_SKL.IUUrukahi_DIEA    Frames:18
        AnimationSound = Sound:BodyFallOrc            Animation:IUUrukahi_SKL.IUUrukahi_DIEB    Frames:30
        AnimationSound = Sound:BodyFallOrc            Animation:IUUrukahi_SKL.IUUrukahi_DIEC    Frames:28
        AnimationSound = Sound:BodyFallGeneric2        Animation:IUUrukahi_SKL.IUUrukahi_DIEG    Frames:115
        AnimationSound = Sound:BodyFallOrc            Animation:IUUrukahi_SKL.IUUrukahi_LNDA    Frames:2
        AnimationSound = Sound:BodyFallGeneric2        Animation:IUUrukahi_SKL.IUUrukahi_LNDA    Frames:37
    End


    ; *** ENGINEERING Parameters ***
    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE CAN_USE_SIEGE_TOWER URUK GRAB_AND_DROP
     
    Body = ActiveBody ModuleTag_02
        CheerRadius     = M_EMOTION_CHEER_RADIUS
        MaxHealth             = M_ISENGARD_URUKFIGHTER_HEALTH                ;BALANCE Uruk Hai Health
        MaxHealthDamaged      = M_ISENGARD_URUKFIGHTER_HEALTH_DAMAGED        
        ;RecoveryTime      = M_ISENGARD_URUKFIGHTER_HEALTH_RECOVERY_TIME    
        
        CheerRadius = M_EMOTION_CHEER_RADIUS
    End

     ;Heavy Armor
    Behavior = ArmorUpgrade ArmorUpgradeModuleTag
        TriggeredBy        = Upgrade_IsengardHeavyArmor
        ArmorSetFlag            = PLAYER_UPGRADE
    End

    Behavior = SubObjectsUpgrade Armor_Upgrade
        TriggeredBy        = Upgrade_IsengardHeavyArmor
		ShowSubObjects	= HA
        RecolorHouse            = Yes
        ExcludeSubobjects        = Forged_Blade
    End
        
  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
    AILuaEventsList               = IsengardDunlandAxemanFunctions
    MoodAttackCheckRate        = 500
    AttackPriority                =     AttackPriority_Infantry
  End
  
;  Behavior = StealthUpdate ModuleTag_Stealth
;    StealthDelay                = 0 ; msec
;    StealthForbiddenConditions  = ATTACKING
;    HintDetectableConditions    = IS_FIRING_WEAPON 
;    FriendlyOpacityMin          = 10.0%
;    FriendlyOpacityMax          = 60.0%
;    PulseFrequency              = 750   ; msec
;    OrderIdleEnemiesToAttackMeUponReveal  = Yes
;    StartsActive                = No
;    InnateStealth                = No
;  End

  LocomotorSet
    Locomotor     = HumanLocomotor
    Condition     = SET_NORMAL
    Speed         = M_NORMAL_EVIL_FAST_MEMBER_SPEED        
  End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
    ShockStandingTime        = 2533    ;msec
  End
 
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL 
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL UrukVoiceDie
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End
  
  Behavior = HordeMemberCollide ModuleTag_HMC
    ;nothing
  End
 
    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 2860 ; level 1 (light  damage)  hit reaction animations in ms
        HitReactionLifeTimer2 = 3000 ; level 2 (medium damage)  hit reaction animations in ms

        HitReactionThreshold1 = 0.0   ; level 1 (light  damage) threshold trigger
        HitReactionThreshold2 = 50.0  ; level 2 (medium damage) threshold trigger
    End
  
  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes

  Shadow = SHADOW_DECAL
  ShadowSizeX = 21;
  ShadowSizeY = 21;
  ShadowTexture = ShadowI;
End

 