;------------------------------------------------------------------------------
; aka Uruk Hai, IsengardUrukHai, FighterIsengard, UrukWarrior, UrukFighter, UrukHaiWarrior, UrukHaiFighter, UrukSwordman
Object IsengardDunlandAxeman
  ; *** ART Parameters ***

  ; This is required for garrisoned objects - please put in all objects.
  SelectPortrait                          =  UPDunlendingAxemen
	ButtonImage                             = UIDunlendingAxemen
  
	Draw                                    = W3DHordeModelDraw ModuleTag_01
		OkToChangeModelColor	                = Yes		
    
		RandomTexture                         = iuNaxemanA.tga 0 iuNaxemanA.tga
		RandomTexture                         = iuNaxemanB.tga 0 iuNaxemanA.tga

		WadingParticleSys                     = WaterRipplesTrail  ; used when the unit is wading in shallow water.
		DefaultModelConditionState
			Model                               = iuNaxemanA_skn
			Skeleton                            = RUTheoden_SKL
			WeaponLaunchBone                    = PRIMARY ARRROW
			WeaponLaunchBone                    = TERTIARY ARRROW
		End
		;;;                                   ================== ANIMATIONS =================================================================

		IdleAnimationState
			StateName				                    =	BORED
			Animation				                    =	IDLB
				AnimationName		                  =	duolddain_idlb
				AnimationMode		                  =	ONCE
				AnimationPriority	                =	1
			End
			Animation				                    =	IDLC
				AnimationName		                  =	duolddain_idlc
				AnimationMode		                  =	ONCE
				AnimationPriority	                =	10
			End
			Animation				                    =	IDLD
				AnimationName		                  =	duolddain_idld
				AnimationMode		                  =	ONCE
				AnimationPriority	                =	1
			End
			Animation				                    =	IDLE
				AnimationName		                  =	duolddain_idle
				AnimationMode		                  =	ONCE
				AnimationPriority	                =	1
			End
			Flags				                        =	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev                              = CurDrawablePrevAnimationState()
				if Prev                           == "SELECTED"	then CurDrawableSetTransitionAnimState("Transition_SelectedToBored") end
				if Prev                           == "READY"		then CurDrawableSetTransitionAnimState("Transition_ReadyToBored") end
			EndScript
		End
		AnimationState				                =	FREEFALL 
			Animation				                    =	freefall
				AnimationName		                  =	RUTheoden_FLYA
				AnimationMode		                  =	LOOP
			End
			Flags					                      =	RANDOMSTART
		End
		AnimationState						            =	STUNNED_FLAILING 
			Flags							                  =	RANDOMSTART
			Animation						                =	RUTheoden_FLYA
				AnimationName				              =	RUTheoden_FLYA
				AnimationMode				              =	LOOP
				AnimationSpeedFactorRange	        = 0.4 0.6
			End
		End
		AnimationState						            =	DYING DEATH_2
			Animation						                =	duolddain_idla
				AnimationName				              =	duolddain_idla
				AnimationMode				              =	ONCE
			End
		End
		AnimationState						            =	DYING SPLATTED
			Animation						                =	RUTheoden_LNDA
				AnimationName				              =	RUTheoden_LNDA
				AnimationMode				              =	ONCE
			End
		End
		AnimationState						            =	DYING
			Animation						                =	RUTheoden_DIEA
				AnimationName				              =	RUTheoden_DIEA
				AnimationMode				              =	ONCE
			End
			Animation						                =	RUTheoden_DIEB
				AnimationName				              =	RUTheoden_DIEB
				AnimationMode				              =	ONCE
			End
		End
		AnimationState						            =	STUNNED_STANDING_UP
			Animation						                =	RUTheoden_GTPA
				AnimationName				              =	RUTheoden_GTPA
				AnimationMode				              =	ONCE
				AnimationSpeedFactorRange         = 1.5 1.5
			End
		End
		AnimationState						            =	STUNNED 
			Animation						                =	RUTheoden_LNDA
				AnimationName				              =	RUTheoden_LNDA
				AnimationMode				              =	ONCE
			End
		End
		AnimationState                        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		                  = Yes
			Animation                           = RunAndFire
				AnimationName                     = RUTheoden_ATRA
				AnimationMode                     = LOOP
			End
			Flags                               = RANDOMSTART 
		End
		AnimationState						            =	FIRING_OR_PREATTACK_A
			Animation						                =	ATKA
				AnimationName				              =	RUTheoden_ATKA
				AnimationMode				              =	ONCE
				UseWeaponTiming				            =	Yes
			End
			Animation						                =	ATKB
				AnimationName				              =	RUTheoden_ATKB
				AnimationMode				              =	ONCE
			End
			Animation						                =	ATKC
				AnimationName				              =	RUTheoden_ATKC
				AnimationMode				              =	ONCE
				UseWeaponTiming				            =	Yes
			End
			Animation						                =	ATKD
				AnimationName				              =	RUTheoden_ATKD
				AnimationMode				              =	ONCE
				UseWeaponTiming				            =	Yes
			End
		End
		AnimationState						            =	MOVING ATTACKING
			Animation						                =	RUTheoden_RUNB
				AnimationName				              =	RUTheoden_RUNB
				AnimationSpeedFactorRange	        =	0.4 0.4
				AnimationMode				              =	LOOP
				AnimationBlendTime			          =   10
				Distance					                =	30
			End
		End	
		AnimationState						            =	MOVING 
			Animation						                =	duolddain_runa
				AnimationName				              =	duolddain_runa
				AnimationMode				              =	LOOP
				Distance					                =	30
			End
		End
		AnimationState						            =	PACKING_TYPE_2
			StateName						                =	SPELL
			Animation						                =	SPCC
				AnimationName				              =	RUTheoden_SPCB
				AnimationSpeedFactorRange	        =	1.1666 1.1666
				AnimationMode				              =	ONCE
				AnimationBlendTime	              =	20
			End
			Animation						                =	SPCD
				AnimationName				              =	RUTheoden_SPCC
				AnimationMode				              =	ONCE
				AnimationBlendTime	              =	20
			End
		End
		AnimationState						            = HIT_REACTION HIT_LEVEL_1
			Animation						                = Hit_Level_1_a
				AnimationName				              = RUTheoden_HITA
				AnimationMode				              = ONCE
			End
		End
		AnimationState				                = LEVELED
			Animation				                    = LevelUp
				AnimationName		                  = RUTheoden_CHRB
				AnimationMode		                  = ONCE
			End
		End
		AnimationState				                =	EMOTION_CELEBRATING
			Animation				                    =	CHRA
				AnimationName		                  =	RUTheoden_CHRA
				AnimationMode		                  =	ONCE
			End
			Animation				                    =	CHRB
				AnimationName		                  =	RUTheoden_CHRB
				AnimationMode		                  =	ONCE
			End
			Flags					                      =	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState				                =	EMOTION_TAUNTING
			Animation				                    =	CHRB
				AnimationName		                  =	RUTheoden_CHRB
				AnimationMode		                  =	ONCE
			End
			Flags					                      =	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState				                =	EMOTION_ALERT
			StateName				                    =	READY
			Animation				                    =	ready
				AnimationName		                  =	duolddain_idla
				AnimationMode		                  =	LOOP
				AnimationBlendTime	              =	20
			End
			BeginScript
				Prev                              = CurDrawablePrevAnimationState()
				if Prev                           == "BORED"		then CurDrawableSetTransitionAnimState("Transition_BoredToReady") end
				if Prev                           == "SELECTED"	then CurDrawableSetTransitionAnimState("Transition_SelectedToReady") end
			EndScript
		End
		AnimationState				                =	SELECTED 
			StateName				                    =	SELECTED
			Animation				                    =	ATNB
				AnimationName		                  =	RUTheoden_ATNB
				AnimationMode		                  =	LOOP
			End
			BeginScript
				Prev                              = CurDrawablePrevAnimationState()
				if Prev                           == "BORED" then CurDrawableSetTransitionAnimState("Transition_BoredToSelected") end
				if Prev                           == "READY" then CurDrawableSetTransitionAnimState("Transition_ReadyToSelected") end
				if Prev                           == "SPELL" then CurDrawableSetTransitionAnimState("Transition_ReadyToSelected") end
			EndScript
		End		
		TransitionState Transition_BoredToReady
			Animation				                    =	ready
				AnimationName		                  =	duolddain_idla
				AnimationMode		                  =	LOOP
				AnimationBlendTime	              =	20
			End
		End
		TransitionState Transition_ReadyToBored
			Animation				                    =	IDLC
				AnimationName		                  =	duolddain_idlc
				AnimationMode		                  =	ONCE
				AnimationBlendTime	              =	20
			End
		End
		TransitionState Transition_BoredToSelected
			Animation				                    =	ATNA
				AnimationName		                  =	RUTheoden_ATNA
				AnimationMode		                  =	ONCE
			End
		End
		TransitionState Transition_SelectedToBored
			Animation				                    =	ATNE
				AnimationName		                  =	RUTheoden_ATNE
				AnimationMode		                  =	ONCE
			End
		End
		TransitionState Transition_SelectedToReady
			Animation				                    =	ATNC
				AnimationName		                  =	RUTheoden_ATNA
				AnimationMode		                  =	ONCE
			End
		End
		TransitionState Transition_ReadyToSelected
			Animation				                    =	ATNC
				AnimationName		                  =	RUTheoden_ATNA
				AnimationMode		                  =	ONCE_BACKWARDS
			End
			Flags                               = START_FRAME_LAST
		End
	End

    ; ***DESIGN parameters ***
    Side                                  = Isengard
    EditorSorting                         = UNIT
    ThreatLevel                           = 1.0
    ThingClass                            = HORDE_UNIT
    EmotionRange                          = 240
    CommandPoints                         = 2
    CommandSet                            = IsengardFighterCommandSet
    TransportSlotCount                    = 1
    VisionRange                           = M_VISION_STANDARD_MELEE
    ShroudClearingRange                   = M_SHROUD_CLEAR_STANDARD
    BountyValue                           = M_ISENGARD_DUNLAND_AXEMAN_BOUNTY_VALUE
    DisplayName                           = OBJECT:IsengardDunlandAxeman
    CrushableLevel                        = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
    CrusherLevel                          = 0 ;What can I crush?: 0 = fluffy bunnies, 1 = infantry, 2 = trees, 3 = vehicles
    CrushRevengeWeapon                    = BasicInfantryCrushRevenge

    WeaponSet
      Conditions 	                        = None 
      Weapon 		                          = PRIMARY    DunlendingAxe
      AutoChooseSources	                  = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI			; Not AI.
    End	
    
    WeaponSet
      Conditions                          = PLAYER_UPGRADE
      Weapon                              = PRIMARY    DunlendingAxeUpgrade
      AutoChooseSources                   = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End   
    
    ArmorSet
      Conditions                          = None
      Armor                               = DunlendingAxeArmor
      DamageFX                            = NormalDamageFX
    End
    
    ArmorSet
      Conditions		                      = PLAYER_UPGRADE
      Armor			                          = DunlendingAxeHeavyArmor	
      DamageFX		                        = NormalDamageFX
    End

      ; This is required so that the build phase lasts as long as the anim.
    BuildFadeInOnCreateTime               = 0 ; 2  ;temporarily set to 0
    
    ; *** AUDIO Parameters ***;
    VoiceAttack								            = DunlandAxeVoiceAttack	
    VoiceAttackCharge						          = DunlandAxeVoiceAttackCharge	
    VoiceAttackMachine						        = DunlandAxeVoiceAttack	
    VoiceAttackStructure					        = DunlandAxeVoiceAttackBuilding	
    VoiceCreated							            = DunlandAxeVoiceSalute	
    VoiceFullyCreated 						        = DunlandAxeVoiceSalute	
    VoiceGuard								            = DunlandAxeVoiceMove	
    VoiceMove								              = DunlandAxeVoiceMove	
    VoiceMoveToCamp							          = DunlandAxeVoiceMoveCamp	
    VoiceMoveWhileAttacking					      = DunlandAxeVoiceDisengage	
    VoicePriority							            = 32
    VoiceRetreatToCastle					        = DunlandAxeVoiceRetreat	
    VoiceSelect								            = DunlandAxeVoiceSelect	
    VoiceSelectBattle 						        = DunlandAxeVoiceSelectBattle				
    VoiceAmbushed                         = DunlendingVoiceAmbushed
    VoiceEnterStateAttack					        = DunlandAxeVoiceEnterStateAttack
    VoiceEnterStateAttackCharge				    = DunlandAxeVoiceEnterStateAttackCharge
    VoiceEnterStateAttackMachine			    = DunlandAxeVoiceEnterStateAttack
    VoiceEnterStateAttackStructure			  = DunlandAxeVoiceEnterStateAttackBuilding
    VoiceEnterStateMove						        = DunlandAxeVoiceEnterStateMove	
    VoiceEnterStateMoveToCamp				      = DunlandAxeVoiceEnterStateMoveCamp
    VoiceEnterStateMoveWhileAttacking		  = DunlandAxeVoiceEnterStateDisengage
    VoiceEnterStateRetreatToCastle			  = DunlandAxeVoiceEnterStateRetreat

    SoundImpact                           = ImpactHorse

    UnitSpecificSounds
        VoiceGarrison                     = DunlandAxeVoiceGarrison
        ;VoiceEnterUnitSlaughterHouse     = UrukWarriorVoiceGarrisonSlaughterHouse
    End

    EvaEventDamagedOwner                  = UnitUnderAttack         ;Eva event to trigger when unit is damaged
    ;EvaEventDieOwner                     = GroupUrukWarriorDie        ;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
                            ;For deaths you can respawn from, use the DeathFX

    Behavior                              = LargeGroupAudioUpdate ModuleTag_LGAU    ;Tie into LargeGroupAudio system
        Key                               = Human Unit ;Easterling_Infantry ;UrukHai_Swordman
    End

    ClientBehavior                        = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap                     = 800
		AnimationSound                        = Sound:FootstepDirtA		Animation:GUFaramir_SKL.GUFaramir_RUNA		Frames:2 12
		AnimationSound                        = Sound:FootstepDirtA		Animation:GUFaramir_SKL.iudunarch_runa		Frames:2 12
		AnimationSound                        = Sound:FootstepDirtA		Animation:GUFaramir_SKL.GUFaramir_RUNB		Frames:2 12
		AnimationSound                        = Sound:WeaponSwitchBow		Animation:GUFaramir_SKL.GUFaramir_ATKC		Frames:18
		AnimationSound                        = Sound:SwordShingClean1		Animation:GUFaramir_SKL.GUFaramir_STHA		Frames:21
		AnimationSound                        = Sound:SwordIntoScabbard1		Animation:GUFaramir_SKL.GUFaramir_STHB		Frames:11
		AnimationSound                        = Sound:WeaponSwitchBow		Animation:GUFaramir_SKL.GUFaramir_STHB		Frames:28
		AnimationSound                        = Sound:SwordIntoScabbard1		Animation:GUFaramir_SKL.GUFaramir_STHC		Frames:2
		AnimationSound                        = Sound:WeaponSwitchBow		Animation:GUFaramir_SKL.GUFaramir_STHC		Frames:3
		AnimationSound                        = Sound:SwordShingClean1		Animation:GUFaramir_SKL.GUFaramir_STHD		Frames:6
		AnimationSound                        = Sound:BodyFallGenericNoArmor	Animation:GUFaramir_SKL.GUFaramir_DIEA		Frames:88
		AnimationSound                        = Sound:BodyFallGenericNoArmor	Animation:GUFaramir_SKL.GUFaramir_DIEB		Frames:85
		AnimationSound                        = Sound:BodyFallGenericNoArmor	Animation:GUFaramir_SKL.GUFaramir_DIEC		Frames:49
		AnimationSound                        = Sound:BodyFallSoldier		Animation:GUFaramir_SKL.GUFaramir_LNDA		Frames:3
		AnimationSound                        = Sound:BodyFallSoldier		Animation:GUFaramir_SKL.GUFaramir_LNDB		Frames:2
	End

    ; *** ENGINEERING Parameters ***
    RadarPriority                         = UNIT
    KindOf                                = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE CAN_USE_SIEGE_TOWER GRAB_AND_DROP
     
    Body                                  = ActiveBody ModuleTag_02
      CheerRadius                         = M_EMOTION_CHEER_RADIUS
      MaxHealth                           = M_ISENGARD_DUNLAND_AXEMAN_HEALTH                ;BALANCE Uruk Hai Health
      MaxHealthDamaged                    = M_ISENGARD_DUNLAND_AXEMAN_HEALTH_DAMAGED        
      ;RecoveryTime                       = M_ISENGARD_DUNLAND_AXEMAN_HEALTH_RECOVERY_TIME    
      CheerRadius                         = M_EMOTION_CHEER_RADIUS
    End
    
    Behavior                              = AIUpdateInterface ModuleTag_03
      AutoAcquireEnemiesWhenIdle          = Yes ATTACK_BUILDINGS
      AILuaEventsList                     = IsengardDunlandAxemanFunctions
      MoodAttackCheckRate                 = 500
      AttackPriority                      =     AttackPriority_Infantry
    End
    
    LocomotorSet
      Locomotor                           = HumanLocomotor
      Condition                           = SET_NORMAL
      Speed                               = M_NORMAL_EVIL_FAST_MEMBER_SPEED        
    End

    Behavior                              = PhysicsBehavior ModuleTag_04
      GravityMult                         = 1.0
      ShockStandingTime                   = 2533    ;msec
    End
   
    Behavior                              = SlowDeathBehavior ModuleTag_05
      DeathTypes                          = ALL 
      SinkDelay                           = 3000
      SinkRate                            = 0.40     ; in Dist/Sec
      DestructionDelay                    = 8000
      Sound                               = INITIAL DunlendingVoiceDie
    End
    
    Behavior                              = SlowDeathBehavior ModuleTag_07
      ; Same as normal death, but no sound (sound already played by SoundImpact ... )
      DeathTypes                          = NONE +KNOCKBACK
      SinkDelay                           = 3000
      SinkRate                            = 1.40     ; in Dist/Sec
      DestructionDelay                    = 8000
      ;Sound                              = INITIAL UrukVoiceDie
    End
   
    Behavior                              = SquishCollide ModuleTag_06
      ;nothing
    End
    
    Behavior                              = HordeMemberCollide ModuleTag_HMC
      ;nothing
    End
 
    Behavior                              = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1             = 2860 ; level 1 (light  damage)  hit reaction animations in ms
        HitReactionLifeTimer2             = 3000 ; level 2 (medium damage)  hit reaction animations in ms

        HitReactionThreshold1             = 0.0   ; level 1 (light  damage) threshold trigger
        HitReactionThreshold2             = 50.0  ; level 2 (medium damage) threshold trigger
    End
    
    ; -- Forged Blades
    Behavior                              = WeaponSetUpgrade WeaponSetUpgradeModuleTag
        TriggeredBy                       = Upgrade_IsengardForgedBlades
    End

    Behavior                              = SubObjectsUpgrade ForgedBlades_Upgrade
        TriggeredBy                       = Upgrade_IsengardForgedBlades
        ShowSubObjects                    = Forged_Blade
    End    
    
    ;Heavy Armor
    Behavior                              = ArmorUpgrade ArmorUpgradeModuleTag
      TriggeredBy                         = Upgrade_IsengardHeavyArmor
      ArmorSetFlag                        = PLAYER_UPGRADE
    End

    Behavior                              = SubObjectsUpgrade Armor_Upgrade
      TriggeredBy                         = Upgrade_IsengardHeavyArmor
      ShowSubObjects	                    = HA
      RecolorHouse                        = Yes
      ExcludeSubobjects                   = Forged_Blade
    End  
    
    Geometry                              = CYLINDER
    GeometryMajorRadius                   = 8.0
    GeometryMinorRadius                   = 8.0
    GeometryHeight                        = 19.2
    GeometryIsSmall                       = Yes

    Shadow                                = SHADOW_DECAL
    ShadowSizeX                           = 21;
    ShadowSizeY                           = 21;
    ShadowTexture                         = ShadowI
End

 