;------------------------------------------------------------------------------
; IsengardGrishnakh,
Object IsengardGrishnakhSummon
  ; *** ART Parameters ***

  ; This is required for garrisoned objects - please put in all objects.
  ButtonImage                               = HIGrishnakh
  SelectPortrait                            = HPGrishnakh
  
  Draw                                      = W3DScriptedModelDraw ModuleTag_01

      OkToChangeModelColor                  = Yes
      
    DefaultModelConditionState
      Model                                 = iugrish_skn
      Skeleton	                            = IUOvrseer_SKL
    End

	IdleAnimationState
		Animation                               = IDLB
	    		AnimationName                     = IUOvrseer_IDLB
	    		AnimationMode                     = ONCE
			AnimationPriority                     = 15
		End
		Animation                               = IDLC
	    		AnimationName                     = IUOvrseer_IDLC
	    		AnimationMode                     = ONCE
			AnimationPriority                     = 15
		End
		Animation                               = IDLD
	    		AnimationName                     = IUOvrseer_IDLD
	    		AnimationMode                     = ONCE
			AnimationPriority                     = 15
		End
		StateName                               = Idle
	End	
 
		AnimationState                          = DYING DEATH_2
			Animation
				AnimationName                       = IUOvrseer_IDLA
				AnimationMode                       = LOOP
			End
		End 
 
		AnimationState				                  =	DYING 
			Animation
				AnimationName		                    =	IUOvrseer_DIEA
				AnimationMode		                    =	ONCE
				AnimationBlendTime	                =	10
			End
			Animation
				AnimationName		                    =	IUOvrseer_DIEB
				AnimationMode		                    =	ONCE
				AnimationBlendTime	                =	10
			End
			Animation
				AnimationName		                    =	IUOvrseer_DIEC
				AnimationMode		                    =	ONCE
				AnimationBlendTime	                =	10
			End
		End
		

		AnimationState                          = DYING
			Animation
				AnimationName                       = IUOvrseer_DIEA
				AnimationMode                       = ONCE
			End
			Animation
				AnimationName		                    =	IUOvrseer_DIEB
				AnimationMode		                    =	ONCE
				AnimationBlendTime	                =	10
			End
			Animation
				AnimationName		                    =	IUOvrseer_DIEC
				AnimationMode		                    =	ONCE
				AnimationBlendTime	                =	10
			End
		End

		AnimationState			                    = DYING SPLATTED
			Animation
				AnimationName	                      = IUOvrseer_LNDA
				AnimationMode	                      = ONCE
			End
		End

		AnimationState                          = FREEFALL
			Animation
				AnimationName                       = IUOvrseer_FLYA
				AnimationMode                       = LOOP
			End
			Flags                                 = RANDOMSTART
		End
		
		AnimationState                          = STUNNED_FLAILING
			Animation
				AnimationName                       = IUOvrseer_FLYA
				AnimationMode                       = LOOP
				AnimationSpeedFactorRange	          = 0.4 0.6
			End
			Flags                                 = RANDOMSTART
		End
		
		AnimationState                          = STUNNED_STANDING_UP
			Animation
				AnimationName                       = IUOvrseer_GTPA
				AnimationMode                       = ONCE
			End
		End		

		AnimationState                          = MOVING ATTACKING
			Animation
				AnimationName                       = MUGorbag_RUNB
				AnimationMode                       = LOOP
			End
			
			Flags                                 = RESTART_ANIM_WHEN_COMPLETE
		End		
		
		AnimationState                          = MOVING FIRING_OR_PREATTACK_A
			Animation
				AnimationName                       = MUGorbag_RUNB
				AnimationMode                       = LOOP
			End
			
			Flags                                 = RESTART_ANIM_WHEN_COMPLETE
		End
				
		AnimationState                          = FIRING_OR_PREATTACK_A
			Animation
				AnimationName                       = IUOvrseer_ATKA
				AnimationMode                       = ONCE
			End
			Animation
				AnimationName                       = IUOvrseer_ATKB
				AnimationMode                       = ONCE
			End
			Animation
				AnimationName                       = IUOvrseer_ATKC
				AnimationMode                       = ONCE
			End
		End
		
		AnimationState                          = SPECIAL_WEAPON_ONE
			Animation
				AnimationName                       = IUOvrseer_ATKA
				AnimationMode                       = ONCE
			End
			Animation
				AnimationName                       = IUOvrseer_ATKB
				AnimationMode                       = ONCE
			End
			Animation
				AnimationName                       = IUOvrseer_ATKC
				AnimationMode                       = ONCE
			End			
			Animation
				AnimationName                       = IUOvrseer_KICK
				AnimationMode                       = ONCE
			End				
		End

		AnimationState                          = SPECIAL_WEAPON_TWO	
			Animation
				AnimationName                       = IUOvrseer_KICK
				AnimationMode                       = ONCE
			End				
		End

		AnimationState                          = SPECIAL_WEAPON_THREE
			Animation
				AnimationName                       = IUOvrseer_ATKC
				AnimationMode                       = ONCE
			End				
		End

		AnimationState			                    = SPECIAL_POWER_1
			Animation			
				AnimationName	                      = IUOvrseer_SPCA
				AnimationMode                       = ONCE
			End
		End

		AnimationState			                    = SPECIAL_POWER_2
			Animation			
				AnimationName	                      = IUOvrseer_SPCB
				AnimationMode                       = ONCE
			End
		End

		AnimationState                          = MOVING
			Animation
				AnimationName                       = MUGorbag_RUNA
				AnimationMode                       = LOOP
			End
			Flags                                 = RESTART_ANIM_WHEN_COMPLETE
		End

		; --------- Click and Hit Reactions ------------
		AnimationState                          = HIT_REACTION HIT_LEVEL_1
			Animation                             = Hit_Level_1_a
				AnimationName                       = IUOvrseer_HITA
				AnimationMode                       = ONCE
			End
		End	
			
		AnimationState                          = LEVELED
			Animation                             = Hit_Level_1_a
				AnimationName                       = IUOvrseer_LVLA
				AnimationMode                       = ONCE
			End
		End			
		
		AnimationState                          = EMOTION_CELEBRATING
			Animation
				AnimationName                       = IUOvrseer_CHRA
				AnimationMode                       = LOOP
			End
			Animation
				AnimationName                       = IUOvrseer_CHRB
				AnimationMode                       = LOOP
			End
		End
		
		AnimationState							            = EMOTION_TAUNTING
			Animation							                = TNTA
				AnimationName					              = IUOvrseer_TNTA
				AnimationMode					              = ONCE
;				AnimationSpeedFactorRange		        = 0.8 1.2
			End
			Animation							                = TNTB
				AnimationName					              = IUOvrseer_TNTB
				AnimationMode					              = ONCE
;				AnimationSpeedFactorRange		        = 0.8 1.2
			End
		End

		AnimationState                          = PACKING_TYPE_2
			Animation
				AnimationName                       = IUOvrseer_CHRA
				AnimationMode                       = ONCE
			End
		End

		AnimationState                          = SELECTED
			Animation
				AnimationName                       = IUOvrseer_ATNB
				AnimationMode                       = LOOP
			End
			BeginScript
				Prev                                = CurDrawablePrevAnimationState()
				if Prev                             == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
			EndScript			
		End
		
		AnimationState                          = USER_2
			Animation                             = ReactToTrollPoke
				AnimationName                       = IUOvrseer_HITA
				AnimationMode                       = ONCE			
			End
		End
		
    TransitionState                         = TRANS_Idle_to_Selected
		Animation                               = ATNA
			AnimationName		                      = IUOvrseer_ATNA
			AnimationMode		                      = ONCE
			AnimationBlendTime	                  = 10
		End
    End
    
    TransitionState                         = TRANS_Selected_to_Idle
		Animation                               = ATNF
			AnimationName		                      = IUOvrseer_ATNC
			AnimationMode		                      = ONCE
			AnimationBlendTime	                  = 10
		End
    End
    		
End

    ; ***DESIGN parameters ***
    Side                                    = Isengard
    EditorSorting                           = UNIT
    ThreatLevel                             = 4.0
    ThingClass                              = CHARACTER_UNIT
    TransportSlotCount                      = 1
    BuildCost                               = M_GRIMA_BUILDCOST                
    BuildTime                               = M_GRIMA_BUILDTIME
    DisplayMeleeDamage                      = M_GRIMA_DAMAGE             

    
    HeroSortOrder                           = 90

    WeaponSet
        Conditions                          = None 
        Weapon                              = PRIMARY    GrimaWeapon
    End
    
    ArmorSet
        Conditions                          = None
        Armor                               = HeroArmor
        DamageFX                            = NormalDamageFX
    End

    VisionRange                             = M_VISION_STANDARD_MELEE                
    ShroudClearingRange                     = M_SHROUD_CLEAR_STANDARD

    BountyValue                             = M_ROHAN_PIPPIN_BOUNTY_VALUE
    DisplayName                             = OBJECT:IsengardGrishnakh
    Hotkey                                  = CONTROLBAR:IsengardGrishnakhHotkey
    CrushableLevel                          = 2

    CommandSet                              = IsengardGrishnakhSummonedCommandSet 
    CommandPoints                           = 0

    ; *** AUDIO Parameters ***;

	VoiceAttack							                  = OrcLaborerVoiceAttack
	VoiceAttackCharge					                = OrcFighterVoiceAttackCharge
	VoiceAttackMachine					              = OrcLaborerVoiceAttack
	VoiceAttackStructure				              = OrcLaborerVoiceAttackBuilding
	VoiceFear							                    = NoSound
	VoiceGuard							                  = OrcLaborerVoiceMove
	VoiceMove							                    = OrcLaborerVoiceMove
	VoiceMoveToCamp						                = OrcLaborerVoiceMoveCamp
	VoiceMoveWhileAttacking				            = NoSound
	VoicePriority						                  = 92
	VoiceRetreatToCastle				              = OrcLaborerVoiceRetreat
	VoiceSelect							                  = OrcLaborerVoiceSelect
	VoiceSelectBattle 					              = OrcLaborerVoiceSelectBattle
    
	SoundImpact							                  = ImpactHorse
	
	UnitSpecificSounds
		VoiceGarrison						                = OrcLaborerVoiceMoveGarrison
	End

    EvaEventDamagedOwner                    = UnitUnderAttack                 
    EvaEventDieOwner                        = GenericEvilDie                        

    ClientBehavior                          = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap                   = 800
        AnimationSound                      = Sound:BodyFallGenericNoArmor    Animation:RUPsnt_4_SKL.RUPsnt_4_DIEA    Frames:47
        AnimationSound                      = Sound:BodyFallGenericNoArmor    Animation:RUPsnt_4_SKL.RUPsnt_4_DIEB    Frames:43
        AnimationSound                      = Sound:BodyFallGenericNoArmor    Animation:RUPsnt_4_SKL.RUPsnt_4_DIEC    Frames:34
        AnimationSound                      = Sound:BodyFallGeneric1        Animation:RUPsnt_4_SKL.RUPsnt_4_LNDA    Frames:1
    End

    Behavior                                = LargeGroupAudioUpdate ModuleTag_LGAU1           
        Key                                 = Human Unit Infantry Hero
        UnitWeight                          = 2
    End


    ; *** ENGINEERING Parameters ***

    RadarPriority                           = UNIT
    KindOf                                  = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT HERO ARMY_SUMMARY ATTACK_NEEDS_LINE_OF_SIGHT
    
    Body                                    = ActiveBody ModuleTag_ActiveBody
        CheerRadius                         = M_EMOTION_CHEER_RADIUS
        MaxHealth                           = M_GRIMA_HEALTH
    End
    Behavior                                = AutoHealBehavior ModuleTag_PippinHealing
        StartsActive                        = Yes
        HealingAmount                       = M_HERO_HEAL_AMOUNT
        HealingDelay                        = 1000
        StartHealingDelay                   = M_HERO_HEAL_DELAY
        HealOnlyIfNotInCombat               = Yes
    End

    Behavior                                = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance               =    300        ; max distance to taunted/pointed objet
         TauntAndPointUpdateDelay           =    1000    ; how often scan (milliseconds)
         
        AddEmotion                          =    Alert_Base
     End    
    
    Behavior                                = AIUpdateInterface ModuleTag_AIUpdateInterface
        AutoAcquireEnemiesWhenIdle          = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate                 = 500
        HoldGroundCloseRangeDistance        = 40
		AttackPriority                          =     AttackPriority_Infantry
    End

    LocomotorSet
        Locomotor                           = HeroHumanLocomotor
        Condition                           = SET_NORMAL 
        Speed                               = M_NORMAL_GOOD_HOBBIT_SPEED        
    End
    
    LocomotorSet
        Locomotor                           = HumanContainedLocomotor
        Condition                           = SET_CONTAINED
        Speed                               = 0.0
    End
    
    Behavior                                = PhysicsBehavior ModuleTag_04
        GravityMult                         = 1.0
        ShockStandingTime                   = 3000    ;msec
    End
    
    Behavior                                = SquishCollide ModuleTag_06
        ;nothing
    End
    
    Behavior                                = SlowDeathBehavior ModuleTag_05
        DeathTypes                          = ALL -KNOCKBACK -FADED 
        SinkDelay                           = 3000
        SinkRate                            = 0.40     ; in Dist/Sec
        DestructionDelay                    = 8000
        Sound                               = INITIAL MordorBannerOrcVoiceDie
    End
    
    Behavior                                = SlowDeathBehavior ModuleTag_07
        ; Same as normal death, but no sound (sound already played by SoundImpact ... )
        DeathTypes                          = NONE +KNOCKBACK
        SinkDelay                           = 3000
        SinkRate                            = 0.40     ; in Dist/Sec
        DestructionDelay                    = 8000
    End
    
    Behavior                                = SlowDeathBehavior ModuleTag_FadeDeath
      DeathTypes                            = NONE +FADED
      FadeDelay                             = 0
      FadeTime                              = 8000
      DestructionDelay                      = 8000
      FX                                    = INITIAL FX_RohirimSummon ;-- Include an FX if you want.
    End
    
    Behavior                                = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
        ; 
        FirstHeight                         = 24  ; Height of Bezier control points above highest intervening terrain
        SecondHeight                        = 24
        FirstPercentIndent                  = 30% ; Percentage of shot distance control points are placed
        SecondPercentIndent                 = 70%
        TumbleRandomly                      = No
        OrientToFlightPath                  =No

        CrushStyle                          = Yes ; I don't detonate, I just hit
        DieOnImpact                         = No
        BounceCount                         = 0   ; When I hit the ground, I'll arc again
        BounceDistance                      = 40 ; this far
        BounceFirstHeight                   = 24  ; Height of Bezier control points above highest intervening terrain
        BounceSecondHeight                  = 24
        BounceFirstPercentIndent            = 20% ; Percentage of shot distance control points are placed
        BounceSecondPercentIndent           = 80%

        GroundHitFX                         = FX_ThrownRockGroundHit
        GroundBounceFX                      = FX_ThrownRockBounceHit
    End

    Behavior                                = StealthUpdate ModuleTag_StealthForCloak
      StealthDelay                          = 350         ; msec
      FriendlyOpacityMin                    = M_STEALTH_FRIENDLY_OPACITY_MIN
      FriendlyOpacityMax                    = M_STEALTH_FRIENDLY_OPACITY_MAX
      PulseFrequency                        = 750   ; msec
      InnateStealth                         = No    ;I do not go stealthed just when standing around, I must be told through a command to go stealthed
      OrderIdleEnemiesToAttackMeUponReveal  = Yes
      BecomeStealthedFX                     = FX_ElvenCloakOn
      ExitStealthFX                         = FX_ElvenCloakOff
    End
    ; ---------------- Cloak -------------
    Behavior                                = SpecialPowerModule ModuleTag_GrimaCloakStarter
        SpecialPowerTemplate                = SpecialAbilityElfCloak
        UpdateModuleStartsAttack            = Yes
    End
    Behavior                                = ToggleHiddenSpecialAbilityUpdate ModuleTag_GrimaCloakUpdate   
        SpecialPowerTemplate                = SpecialAbilityElfCloak
        AwardXPForTriggering                = 0
    End   

    ; ---------------- Orcish Tenacity ----------------
    Behavior                                = UnpauseSpecialPowerUpgrade ModuleTag_OrcishTenacity 
        SpecialPowerTemplate                = SpecialAbilityFakeLeadership
        TriggeredBy                         = Upgrade_GenericUpgrade1
    End 
    ; -------------------------------------------------
    Behavior                                = AttributeModifierUpgrade ModuleTag_OrcishTenacityBonus
        TriggeredBy                         = Upgrade_GenericUpgrade1
        AttributeModifier                   = OrcishTenacityBonus ;
    End 

    Behavior                                = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1               = 7 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
        HitReactionLifeTimer2               = 15 ; level 2 (medium damage)  hit reaction animations in frames (5 per sec)
        HitReactionLifeTimer3               = 10 ; level 3 (heavy  damage)  hit reaction animations in frames (5 per sec)

        HitReactionThreshold1               = 0.0   ; level 1 (light  damage) threshold trigger
        HitReactionThreshold2               = 25.0  ; level 2 (medium damage) threshold trigger
        HitReactionThreshold3               = 50.0  ; level 3 (heavy  damage) threshold trigger
    End
    
    Behavior                                = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime                         = 75000
        MaxLifetime                         = 75000
        DeathType                           = FADED
    End
    
    Behavior                                = ExperienceLevelCreate ModuleTag_MPLevelBonus
        LevelToGrant                        = 3
        MPOnly                              = Yes
    End
    
    Geometry                                = CYLINDER
    GeometryMajorRadius                     = 8.0
    GeometryMinorRadius                     = 8.0
    GeometryHeight                          = 19.2
    GeometryIsSmall                         = Yes
    Shadow                                  = SHADOW_DECAL
    ShadowSizeX                             = 18;
    ShadowSizeY                             = 18;
    ShadowTexture                           = ShadowI;
End