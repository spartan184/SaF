Object IsengardFighterScout_Banner
  ; *** ART Parameters ***
  ; This is required for garrisoned objects - please put in all objects.
	ButtonImage = UIIsengard_UrukScout
	SelectPortrait = UPIsengard_UrukScout

  Draw = W3DHordeModelDraw ModuleTag_01

    OkToChangeModelColor = Yes
      
    StaticModelLODMode = Yes
	
    LodOptions    = LOW
        AllowMultipleModels        =    ALLOW_MULTIPLE_MODELS_LOW
        MaxRandomTextures        =    MAX_RANDOM_TEXTURES_LOW
        MaxRandomAnimations        =    MAX_RANDOM_ANIMATIONS_LOW
        MaxAnimFrameDelta        =    MAX_ANIM_FRAME_DELTA_LOW
    End
    
    LodOptions    = MEDIUM
        AllowMultipleModels        =    ALLOW_MULTIPLE_MODELS_MED
        MaxRandomTextures        =    MAX_RANDOM_TEXTURES_MED
        MaxRandomAnimations        =    MAX_RANDOM_ANIMATIONS_MED
        MaxAnimFrameDelta        =    MAX_ANIM_FRAME_DELTA_MED
    End
    
    LodOptions    = HIGH
        AllowMultipleModels        =    ALLOW_MULTIPLE_MODELS_HIGH
        MaxRandomTextures        =    MAX_RANDOM_TEXTURES_HIGH
        MaxRandomAnimations        =    MAX_RANDOM_ANIMATIONS_HIGH
        MaxAnimFrameDelta        =    MAX_ANIM_FRAME_DELTA_HIGH
    End
	
    DefaultModelConditionState
		Model = iuscoutaxe_skn
		Skeleton = IUUrukahi_SKL
    End

    ModelConditionState WEAPONSET_PLAYER_UPGRADE
		Model = iuscoutaxe_skn
		Skeleton = IUUrukahi_SKL
    End

    IdleAnimationState
        Animation = IDLB
            AnimationName = IUUrukahi_IDLB
            AnimationMode = ONCE
            AnimationPriority = 20
        End
        Animation = IDLG
            AnimationName = IUUrukahi_IDLG
            AnimationMode = ONCE
            AnimationPriority = 1 ;2
        End
        Animation = IDLD
            AnimationName = IUUrukahi_IDLD
            AnimationMode = ONCE
            AnimationPriority = 2
        End    
        StateName = Idle
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoard") end
        EndScript
    End


    AnimationState                        = PASSENGER
        Animation                        = Falling
            AnimationName                = IUUrukahi_FLLA
            AnimationMode                = LOOP
        End
    End
    
    AnimationState                        = FREEFALL
        Animation                        = FLYA
            AnimationName                = IUUrukahi_FLYA
            AnimationMode                = LOOP
            AnimationSpeedFactorRange    = 0.5    0.5
            AnimationBlendTime            = 5
        End
    End
    
    AnimationState            = STUNNED_FLAILING
        Animation           = StunFlail
            AnimationName   = IUUrukahi_FLYA
            AnimationMode   = LOOP
        End
        Flags                        = MAINTAIN_FRAME_ACROSS_STATES2
    End

    AnimationState            = DYING SPLATTED
        Animation            = Splat
            AnimationName    = IUUrukahi_LNDA
            AnimationMode    = ONCE
        End
    End

    AnimationState = DYING
        Animation = DIEA
            AnimationName = IUUrukahi_DIEA
            AnimationMode = ONCE
            AnimationPriority = 1
            AnimationSpeedFactorRange    =    0.8 1.25
        End
        Animation = DIEB
            AnimationName = IUUrukahi_DIEB
            AnimationMode = ONCE
            AnimationPriority = 3
            AnimationSpeedFactorRange    =    0.8 1.25
        End
        Animation = DIEC
            AnimationName = IUUrukahi_DIEC
            AnimationMode = ONCE
            AnimationPriority = 2
            AnimationSpeedFactorRange    =    0.8 1.25
        End
        Animation = DIEG
            AnimationName = IUUrukahi_DIEG
            AnimationMode = ONCE
            AnimationPriority = 10
            AnimationSpeedFactorRange    =    0.8 1.25
        End
    End    

    AnimationState        = STUNNED
        Animation           = LNDA
            AnimationName     = IUUrukahi_LNDA
            AnimationMode     = ONCE
        End
    End

    AnimationState        = STUNNED_STANDING_UP
        Animation           = GTPA
            AnimationName     = IUUrukahi_GTPA
            AnimationMode     = ONCE
            AnimationSpeedFactorRange = 1.5 1.5
        End
    End    
        
    AnimationState        = THROWN_PROJECTILE
        Animation           = FLYA
            AnimationName     = IUUrukahi_FLYA
            AnimationMode     = LOOP
        End
    End

    AnimationState = MOVING FIRING_OR_PREATTACK_A
        Animation = TrotAndFire
            AnimationName = IUUrukahi_ATRA
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART
        ParticleSysBone = None InfantryDustTrails
    End
    
    ; ladder climbing animations
    AnimationState = MOVING CLIMBING BACKING_UP
        Animation = Climbing_Down
            AnimationName = IUUrukahi_CLMA
            AnimationMode = LOOP_BACKWARDS
            AnimationSpeedFactorRange = 2.0 2.0
        End
    End

    AnimationState = MOVING CLIMBING
        Animation = Climbing_Up
            AnimationName = IUUrukahi_CLMA
            AnimationMode = LOOP
            AnimationSpeedFactorRange = 2.0 2.0
        End
    End

    AnimationState = MOVING EMOTION_TERROR
        Animation = TERRORIZED
            AnimationName = IUUrukahi_RUNC
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART
        ParticleSysBone = None InfantryDustTrails
    End
     
    AnimationState = MOVING BACKING_UP
        Animation = BackingUp
            AnimationName = IUUrukahi_BAKA
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART
    End

    AnimationState = MOVING
        Animation = Moving
            AnimationName = IUUrukahi_RUNA
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART
        ParticleSysBone = None InfantryDustTrails
    End

        ; --------- Click and Hit Reactions ------------
        AnimationState = HIT_REACTION HIT_LEVEL_1
            Animation = Hit_Level_1_a
                AnimationName = IUUrukahi_HITC
                AnimationMode = ONCE
            End
            Animation = Hit_Level_1_a
                AnimationName = IUUrukahi_HITE
                AnimationMode = ONCE
            End
        End
        
        AnimationState = HIT_REACTION HIT_LEVEL_2
            Animation = Hit_Level_1_a
                AnimationName = IUUrukahi_HITD
                AnimationMode = ONCE
            End
        End
        
    AnimationState = FIRING_OR_PREATTACK_A
        Animation = ATKA
            AnimationName = IUUrukahi_ATKA
            AnimationMode = ONCE
        End
        Animation = ATKC
            AnimationName = IUUrukahi_ATKC
            AnimationMode = ONCE
            AnimationSpeedFactorRange    =    0.7 0.7
        End
        Animation = ATKB
            AnimationName = IUUrukahi_ATKB
            AnimationMode = ONCE
        End
        ParticleSysBone = None MeleeDust
    End
    
    AnimationState = BETWEEN_FIRING_SHOTS_A
        Animation = Wait
            AnimationName = IUUrukahi_IDLA
            AnimationMode = ONCE
        End
    End

   
    AnimationState = WAR_CHANT
        Animation = Chant
            AnimationName = IUUrukahi_TNTA
            AnimationMode = LOOP
        End
    End
    
    AnimationState                            = EMOTION_UNCONTROLLABLY_AFRAID
        Animation                            = FERA
            AnimationName                    = IUUrukahi_FERA
            AnimationMode                    = LOOP
        End
        Flags = RANDOMSTART
    End

     AnimationState = ATTACKING
        Animation = IdleAllAttacksComeFrom
            AnimationName = IUUrukahi_IDLA
            AnimationMode = LOOP
        End
    End
    
   ;-emotions--
    ; Should be before selected (if uncontrollable..)      
    AnimationState                            = EMOTION_AFRAID
        Animation                            = FERA
            AnimationName                    = IUUrukahi_FERA
            AnimationMode                    = LOOP
        End
        Flags = RANDOMSTART
    End

    AnimationState                            = EMOTION_TAUNTING
        Animation                            = TNTA
            AnimationName                    = IUUrukahi_TNTA
            AnimationMode                    = LOOP
            AnimationBlendTime                = 10
            AnimationSpeedFactorRange        = 0.8 1.2
        End
        Flags                = RESTART_ANIM_WHEN_COMPLETE
    End
    
    AnimationState                            = EMOTION_POINTING
        Animation                            = Pointing1
            AnimationName                    = IUUrukahi_PNTA
            AnimationMode                    = LOOP
        End
    End
    
    AnimationState                            = EMOTION_CELEBRATING
        Animation                            = CHRA
            AnimationName                    = IUUrukahi_CHRA
            AnimationMode                    = ONCE
            AnimationBlendTime                = 10
        End
        Animation                            = CHRB
            AnimationName                    = IUUrukahi_CHRB
            AnimationMode                    = ONCE
            AnimationBlendTime                = 10
        End
        Animation                            = TNTA
            AnimationName                    = IUUrukahi_TNTA
            AnimationMode                    = ONCE
            AnimationBlendTime                = 10
        End
        Flags                = RESTART_ANIM_WHEN_COMPLETE
    End
    
    AnimationState                            = EMOTION_ALERT
        Animation                            = ALERT
            AnimationName                    = IUUrukahi_IDLA
            AnimationMode                    = LOOP
        End
        Flags                                = RESTART_ANIM_WHEN_COMPLETE RANDOMSTART
    End

    AnimationState        = SELECTED
        StateName           = STATE_Selected
        Animation           = ATNB
            AnimationName     = IUUrukahi_ATNB
            AnimationMode     = LOOP
        End
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
        EndScript
    End

    TransitionState       = TRANS_IdleToSelected
        Animation           = ATNA
            AnimationName     = IUUrukahi_ATNA
            AnimationMode     = ONCE
            AnimationSpeedFactorRange = 0.9 1.0
        End
    End

    TransitionState       = TRANS_SelectedToGuard
        Animation           = ATNB
            AnimationName     = IUUrukahi_ATNB
            AnimationMode     = ONCE
            AnimationSpeedFactorRange = 0.9 1.0
        End
    End
        
    TransitionState        = TRANS_SelectedToBoard
        Animation            = ATNC
            AnimationName    = IUUrukahi_ATNC
            AnimationMode    = ONCE
            AnimationSpeedFactorRange = 0.9 1.0
        End
    End    
    
  End
 
  ; ***DESIGN parameters ***
  Side = Isengard
  EditorSorting = UNIT
    ThreatLevel = 1.0
  TransportSlotCount = 1
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY    IsengardBannerSword
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End
  WeaponSet
    Conditions = CLOSE_RANGE CONTESTING_BUILDING
    Weapon = PRIMARY    IsengardBannerSword
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End

  ArmorSet
    Conditions      = None
    Armor           = NoArmor
    DamageFX        = NormalDamageFX
  End

  VisionRange = M_VISION_STANDARD_MELEE
  ShroudClearingRange = M_SHROUD_CLEAR_STANDARD

  BountyValue = M_ISENGARD_BANNER_BOUNTY_VALUE             
  DisplayName = OBJECT:IsengardBanner
    CrusherLevel = 0            ;Can I crush anything?
    CrushableLevel = 0            ;What am I?:        0 = for infantry, 1 = for trees, 2 = cavalry/heroes
    MountedCrusherLevel = 1        ;Crush level when mounted.
    MountedCrushableLevel = 3    ;Crusable level when mounted.
     CrushRevengeWeapon = BasicInfantryCrushRevenge
     CrushWeapon = WargCrush

  CommandSet = IsengardBannerOrcCommandSet
  CommandPoints = 0


; *** AUDIO Parameters ***;

    VoiceAttack            = UrukWarriorVoiceAttack
    VoiceAttack2            = OrcVoiceAttack2
    VoiceCombineWithHorde         = IsengardBannerVoiceJoin
    VoiceCreated            = CampOrcCreateWhiteHandBanner
    VoiceFullyCreated         = CampOrcCreateWhiteHandBanner
    VoiceMove            = IsengardBannerVoiceMove
    VoiceMove2            = OrcVoiceMove2
    VoicePriority            = 7
    VoiceSelect            = IsengardBannerVoiceSelect
    VoiceSelect2            = GondorBannerVoiceSelect2
    VoiceGuard            = IsengardBannerVoiceMove
    

    SoundImpact             = ImpactHorse

    EvaEventDamagedOwner        = UnitUnderAttack         ;Eva event to trigger when unit is damaged

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU            ;Tie into LargeGroupAudio system
        Key = Orc_Infantry UrukHai_Banner
    End


  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT BANNER GRAB_AND_DROP IGNORES_SELECT_ALL

    BuildCost           = M_ISENGARD_BANNER_BUILDCOST
    BuildTime           = M_ISENGARD_BANNER_BUILDTIME
 
  Body = ActiveBody ModuleTag_02
    MaxHealth         = M_ISENGARD_BANNER_HEALTH                ;BALANCE Ranger Health
    MaxHealthDamaged  = M_ISENGARD_BANNER_HEALTH_DAMAGED            
  End
 
  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = No 
    MoodAttackCheckRate        = 500
    HoldGroundCloseRangeDistance = 40
    AttackPriority                =     AttackPriority_Infantry
    AILuaEventsList                =    IsengardFighterFunctions
    FadeOnPortals                = Yes
  End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance        =    350        ; max distance to taunted/pointed objet
        TauntAndPointUpdateDelay    =    1000    ; how often scan (milliseconds)
        TauntAndPointExcluded        =    NONE
        AfraidOf                    =    NONE +RohanTreeBerd +GondorGwaihir +RohanEntFir +RohanEntAsh +RohanEntBirch +MordorCaveTroll +MordorMountainTroll +MordorDrummerTroll +MordorFellBeast +MordorMumakil;Must be SCARY kindof as well.
        AlwaysAfraidOf                =    NONE +MordorBalrog +RohanOathbreaker ;+MordorWitchKing +MordorWitchKingOnFellBeast 
        PointAt                        =    NONE +GondorGwaihir 
        HeroScanDistance            =    150
        FearScanDistance            =    250
        AddEmotion    =    Terror_Base
        AddEmotion    =    Doom_Base
        AddEmotion    =    UncontrollableFear_Base_Evil
        AddEmotion    =    FearIdle_Base
        AddEmotion    =    FearBusy_Base
        AddEmotion    =    Point_Base
        AddEmotion    =    Taunt_Base    
        AddEmotion    =    CheerIdle_Base
        AddEmotion    =    CheerBusy_Base
        AddEmotion    =    HeroCheerIdle_Base
        AddEmotion    =    HeroCheerBusy_Base
        AddEmotion    =    Alert_Base
    End    
    
  LocomotorSet
    Locomotor     = HumanLocomotor
    Condition     = SET_NORMAL
    Speed         = M_NORMAL_EVIL_FAST_MEMBER_SPEED
  End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
    ShockStunnedTimeLow        = 1400    ;msec
    ShockStunnedTimeHigh    = 2400    ;msec
    ShockStandingTime        = 2133    ;msec
  End
 
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL UrukVoiceDie            
  End
 
  Behavior = SquishCollide ModuleTag_06
  End
 
  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL UrukVoiceDie
  End

  Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
    FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
    SecondHeight = 24
    FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
    SecondPercentIndent = 70%
    TumbleRandomly = Yes
    CrushStyle = Yes ; I don't detonate, I just hit
    DieOnImpact = Yes
    BounceCount = 1   ; When I hit the ground, I'll arc again
    BounceDistance = 40 ; this far
    BounceFirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
    BounceSecondHeight = 24
    BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
    BounceSecondPercentIndent = 80%
    GroundHitFX       = FX_ThrownRockGroundHit
    GroundBounceFX    = FX_ThrownRockBounceHit
  End

    ;/////////////////////////////////////////////////////////
    ;// BannerCarrierUpdate module
    ;/////////////////////////////////////////////////////////
    Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
        IdleSpawnRate            = 10000                            ; spawn a new member every n seconds when idle (in miliseconds)
        MeleeFreeUnitSpawnTime        = 20000                            ; n miliseconds units must not have been fighting to be able to spawn units when idle (in miliseconds)
        DiedRespawnTime            = 10000                            ; how much time must pass after Banner Carrier dies before horde can spawn another
        MeleeFreeBannerReSpawnTime    = 20000                            ; how much time since horde has been fighting before a new Banner Carrier can be respawned
        BannerMorphFX        = FX_BannerCarrierMorph                    ; name of particle FX to use when the BannerCarrier morphs into the dest unit type
        UnitSpawnFX            = FX_BannerCarrierSpawnUnit                ; name of particle FX to use when the BannerCarrier spawns a new unit
    End
    
  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End