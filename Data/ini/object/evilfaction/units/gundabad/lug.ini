Object GundabadLug
    ; *** ART Parameters ***
    Scale                                = 1.15
    SelectPortrait                       = UPLugtheMauled
    ButtonImage                          = uilugthemauled
    
    Draw                                 = W3DScriptedModelDraw ModuleTag_DRAW
        WadingParticleSys                = EntRipples
        OkToChangeModelColor             = Yes
        
        ; -- Models -- ;
        DefaultModelConditionState
          Model					                 = wulugCaHM_skn
          Skeleton				               = chss_gb_u_skl
        End
        
        ModelConditionState 		         = WEAPONSET_TOGGLE_1
          Model					                 = wulugCaHR_skn
                Skeleton            	   = chss_gb_u_skl
                WeaponLaunchBone    	   = PRIMARY B_HAND_R		
        End
        
        ; -- Animations -- ;
        AnimationState					         = BETWEEN_FIRING_SHOTS_A WEAPONSET_TOGGLE_1
          Animation					             = IDLA
            AnimationName			           = chss_gb_u_idla
            AnimationMode			           = LOOP
            AnimationBlendTime		       = 10
          End
        End
        
        AnimationState					         = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
          Animation					             = THRA
            AnimationName			           = wulugCaH_Ratka
            AnimationMode			           = ONCE
            UseWeaponTiming			         = Yes
          End
          FrameForPristineBonePositions  = 45
          Flags						               = RESTART_ANIM_WHEN_COMPLETE
        End		
        
        AnimationState                   = MOVING WEAPONSET_TOGGLE_1
          Animation
            AnimationName                = chss_gb_u_runb
            AnimationMode                = LOOP
          End
          Flags                          = RANDOMSTART
    ;			ParticleSysBone                = None InfantryDustTrails
        End		
        
        AnimationState                   = SELECTED WEAPONSET_TOGGLE_1
          StateName                      = STATE_Selected_Knife
          Animation
            AnimationName                = chss_gb_u_atnb
            AnimationMode                = LOOP
          End
          BeginScript
            Prev                         = CurDrawablePrevAnimationState()
            if Prev                      == "STATE_PlantingTotem" then
              CurDrawableSetTransitionAnimState("TRANS_TotemToIdle")
            if Prev                      == "STATE_Selected" then 
              CurDrawableSetTransitionAnimState("TRANS_SwitchWeapon") end	
            elseif Prev ~                = "STATE_Selected_Knife" and Prev ~= "TRANS_IdleToSelected" then
              CurDrawableSetTransitionAnimState("TRANS_IdleToSelected")
            end
          EndScript
        End		

        AnimationState						       = PASSENGER
          Animation
            AnimationName				         = chss_gb_u_flya
            AnimationMode				         = LOOP
          End
        End
        AnimationState						       = FREEFALL
          Animation
            AnimationName				         = chss_gb_u_flya
            AnimationMode				         = LOOP
            AnimationSpeedFactorRange	   = 0.5	0.5
            AnimationBlendTime			     = 5
          End
        End
        AnimationState			             = STUNNED_FLAILING
          Animation
            AnimationName                = chss_gb_u_flya
            AnimationMode                = LOOP
            AnimationSpeedFactorRange	   = 0.4 0.6
          End
        End
        AnimationState			             = DYING SPLATTED
          Animation
            AnimationName	               = chss_gb_u_lnda
            AnimationMode	               = ONCE
          End
        End
        AnimationState                   = DYING
          Animation
            AnimationName                = chss_gb_u_diea
            AnimationMode                = ONCE
          End
        End    
        AnimationState                   = STUNNED
          Animation
            AnimationName                = chss_gb_u_lnda
            AnimationMode                = ONCE
          End
        End
        AnimationState                   = STUNNED_STANDING_UP
          Animation
            AnimationName                = chss_gb_u_gtpa
            AnimationMode                = ONCE
          End
        End	
        AnimationState                   = THROWN_PROJECTILE
          Animation
            AnimationName                = chss_gb_u_flya
            AnimationMode                = LOOP
          End
        End
        AnimationState                   = MOVING WANDER
          Animation
            AnimationName                = chss_gb_u_wlka
            AnimationMode                = LOOP
          End
        End
        AnimationState                   = MOVING DAMAGED AFLAME
          Animation
            AnimationName                = chss_gb_u_mfda
            AnimationMode                = LOOP
          End
          Flags                          = RANDOMSTART
        End
        AnimationState                   = MOVING ATTACKING
          Animation
            AnimationName                = chss_gb_u_runb
            AnimationMode                = LOOP
          End
          Flags                          = RANDOMSTART
    ;			ParticleSysBone                = None InfantryDustTrails
        End
        AnimationState                   = MOVING WALKING
          Animation
            AnimationName                = chss_gb_u_wlka
            AnimationMode                = LOOP
          End
          Flags                          = RANDOMSTART
    ;			ParticleSysBone                = None InfantryDustTrails
        End
        AnimationState                   = MOVING
          Animation
            AnimationName                = chss_gb_u_runb  ;chss_gb_u_runa
            AnimationMode                = LOOP
          End
          Flags                          = RANDOMSTART
    ;			ParticleSysBone                = None InfantryDustTrails
        End
        
        ; -- Special Ability Anims
        AnimationState                   = PACKING_TYPE_1
          StateName                      = STATE_PlantingTotem
          Animation
            AnimationName                = chss_gb_u_spca
            AnimationMode                = ONCE
          End
        End
        
        AnimationState                   = SPECIAL_WEAPON_ONE
          StateName                      = STATE_Flameo
          Animation
            AnimationName                = chss_gb_u_spcb
            AnimationMode                = ONCE
          End
        End
        
        AnimationState				           = USER_1
          Animation
            AnimationName		             = chss_gb_u_spca
            AnimationMode		             = ONCE
          End
        End
        
        AnimationState				           = USER_2
          Animation
            AnimationName		             = chss_gb_u_spcb
            AnimationMode		             = ONCE
          End
        End
        
        ; -- End Special Ability ANims
        
        AnimationState                   = HIT_REACTION 
          Animation
            AnimationName                = chss_gb_u_hita
            AnimationMode                = LOOP
          End
        End
        AnimationState                   = FIRING_OR_PREATTACK_A
          Animation
            AnimationName                = chss_gb_u_atka
            AnimationMode                = ONCE
            UseWeaponTiming		           =	Yes
          End
          Animation
            AnimationName                = chss_gb_u_atkb
            AnimationMode                = ONCE
            UseWeaponTiming		           =	Yes
          End
          Animation
            AnimationName                = chss_gb_u_atkc
            AnimationMode                = ONCE
            UseWeaponTiming		           =	Yes
          End			
        End
        AnimationState                   = FIRING_OR_PREATTACK_B
          Animation
            AnimationName                = chss_gb_u_atka
            AnimationMode                = ONCE
            UseWeaponTiming		           =	Yes
          End
          Animation
            AnimationName                = chss_gb_u_atkb
            AnimationMode                = ONCE
            UseWeaponTiming		           =	Yes
          End
          Animation
            AnimationName                = chss_gb_u_atkc
            AnimationMode                = ONCE
            UseWeaponTiming		           =	Yes
          End
        End
        AnimationState                   = BETWEEN_FIRING_SHOTS_A
          Animation
            AnimationName                = chss_gb_u_idla
            AnimationMode                = ONCE
          End
        End
        AnimationState                   = ATTACKING
          Animation
            AnimationName                = chss_gb_u_atka
            AnimationMode                = LOOP
          End
        End
        AnimationState							     = EMOTION_TAUNTING
          Animation
            AnimationName					       = chss_gb_u_tnta
            AnimationMode					       = LOOP
            AnimationBlendTime				   = 10
          End
          Flags				                   = RESTART_ANIM_WHEN_COMPLETE
        End
        AnimationState							     = EMOTION_CELEBRATING
          Animation
            AnimationName					       = chss_gb_u_chra
            AnimationMode					       = ONCE
            AnimationBlendTime				   = 10
          End
          Flags				                   = RESTART_ANIM_WHEN_COMPLETE
        End
        AnimationState				           = LEVELED
          Animation				               = LevelUp
            AnimationName		             = chss_gb_u_lvla
            AnimationMode		             = ONCE
          End
        End
        AnimationState                   = SELECTED
          StateName                      = STATE_Selected
          Animation
            AnimationName                = chss_gb_u_atnb
            AnimationMode                = LOOP
          End
          BeginScript
            Prev                         = CurDrawablePrevAnimationState()
            if Prev                      == "STATE_PlantingTotem" then
              CurDrawableSetTransitionAnimState("TRANS_TotemToIdle")
            if Prev                      == "STATE_Selected_Knife" then 
              CurDrawableSetTransitionAnimState("TRANS_SwitchWeapon") end	
            elseif Prev ~                = "STATE_Selected" and Prev ~= "TRANS_IdleToSelected" then
              CurDrawableSetTransitionAnimState("TRANS_IdleToSelected")
            end
          EndScript
        End
        TransitionState                  = TRANS_SwitchWeapon
          Animation
            AnimationName                = wulugCaH_togA
            AnimationMode                = ONCE
          End
        End	
        TransitionState                  = TRANS_IdleToSelected
          Animation
            AnimationName                = chss_gb_u_atna
            AnimationMode                = ONCE
          End
        End
        TransitionState		               = TRANS_SelectedToBored
          Animation
            AnimationName	               = chss_gb_u_atnc
            AnimationMode	               = ONCE
          End
        End
        TransitionState		               = TRANS_TotemToIdle
          Animation
            AnimationName		             = chss_gb_u_idla
            AnimationMode		             = ONCE
            AnimationBlendTime	         = 0
          End
        End
        IdleAnimationState
          Animation
            AnimationName                = chss_gb_u_idla
            AnimationMode                = ONCE
            AnimationPriority            = 10
          End
          Animation
            AnimationName                = chss_gb_u_idlb
            AnimationMode                = ONCE
            AnimationPriority            = 10
          End
          StateName                      = Idle
          BeginScript
            Prev                         = CurDrawablePrevAnimationState()
            if Prev                      == "STATE_PlantingTotem" then
              CurDrawableSetTransitionAnimState("TRANS_TotemToIdle")
            elseif Prev                  == "STATE_Selected" then
              CurDrawableSetTransitionAnimState("TRANS_SelectedToBored")
            end
          EndScript
        End		
      End
      
      Draw                               = W3DScriptedModelDraw DustEffects
          DefaultModelConditionState
            Model                        = None
          End
          IdleAnimationState
          End
      End


    ; ***DESIGN parameters ***
    Side                                 = Gundabad
    EditorSorting                        = UNIT
    ThreatLevel                          = 4.0
    ImmuneToShockwave                    = Yes
    ThingClass                           = CHARACTER_UNIT
    BuildCost                            = SAF_LUG_BUILDCOST
    BuildTime                            = SAF_LUG_BUILDTIME
    DisplayMeleeDamage                   = SAF_LUG_DAMAGE
    DisplayRangedDamage                  = SAF_LUG_BOW_DAMAGE
    TransportSlotCount                   = 1

    WeaponSet
        Conditions                       = None
        Weapon                           = PRIMARY    LugTheMauledWeapon
    End
    
    WeaponSet
        Conditions                       = WEAPONSET_TOGGLE_1 CLOSE_RANGE
        Weapon                           = PRIMARY    IsenguardLurtzBow
    End
    
    WeaponSet
        Conditions                       = CLOSE_RANGE
        Weapon                           = PRIMARY    LugTheMauledWeapon 
        Weapon                           = SECONDARY  IsenguardLurtzBowMelee
        OnlyAgainst                      = PRIMARY STRUCTURE
    End
    
    WeaponSet
        Conditions                       = WEAPONSET_TOGGLE_1
        Weapon                           = PRIMARY    IsenguardLurtzBow
    End
    
    ;;; SPECIAL CARNAGE MODE, MAKE SURE IT"S THE CARNAGE WEAPON NO MATTER WHAT ;;;
    WeaponSet
        Conditions                       = WEAPONSET_HERO_MODE
        Weapon                           = PRIMARY    LurtzCarnageWeapon
    End
    
    WeaponSet
        Conditions                       = WEAPONSET_HERO_MODE CLOSE_RANGE
        Weapon                           = PRIMARY    LurtzCarnageWeapon
    End
    
    WeaponSet
        Conditions                       = WEAPONSET_HERO_MODE WEAPONSET_TOGGLE_1
        Weapon                           = PRIMARY    LurtzCarnageWeapon
    End
    
    WeaponSet
        Conditions                       = WEAPONSET_HERO_MODE WEAPONSET_TOGGLE_1 CLOSE_RANGE
        Weapon                           = PRIMARY    LurtzCarnageWeapon
    End
    
    ;HERO
    ArmorSet
        Conditions                       = None
        Armor                            = HeroArmor
        DamageFX                         = NormalDamageFX
    End    

    VisionRange                          = M_VISION_STANDARD_HORSE                
    ShroudClearingRange                  = M_SHROUD_CLEAR_HERO                
    BountyValue                          = SAF_BOLG_BOUNTY_VALUE
    DisplayName                          = OBJECT:GundabadLug
    RecruitText                          = CONTROLBAR:GundabadLugRecruit
    ReviveText                           = CONTROLBAR:GundabadLugRevive
    Hotkey                               = CONTROLBAR:GundabadLugHotkey
    CrushableLevel                       = 2
    CrusherLevel                         = 0

    CommandSet                           = GundabadLugtheMauledCommandSet
    CommandPoints                        = 0


    ; *** AUDIO Parameters ***;
    VoiceAttack                          = LugVoiceAttack
    VoiceAttackCharge                    = LugVoiceAttackCharge
    VoiceAttackMachine                   = LugVoiceAttack
    VoiceAttackStructure                 = LugVoiceAttackBuilding
    VoiceFear                            = LugVoiceHelpMe
    VoiceGuard                           = LugVoiceMove
    VoiceMove                            = LugVoiceMove
    VoiceMoveToCamp                      = LugVoiceMoveCamp
    VoiceMoveWhileAttacking              = LugVoiceDisengage
    VoicePriority                        = 66
    VoiceRetreatToCastle                 = LugVoiceRetreat
    VoiceSelect                          = LugVoiceSelect
    VoiceSelectBattle                    = LugVoiceSelectBattle
    SoundImpact                          = ImpactHorse

    EvaEventDamagedOwner                 = UnitUnderAttack
    EvaEventDieOwner                     = LugDie

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:FootstepDirtA			Animation:chss_gb_u_skl.chss_gb_u_runa			Frames:8 17 24 31 40 46 54 61 69 74 84 90
        AnimationSound = Sound:FootstepDirtA			Animation:chss_gb_u_skl.chss_gb_u_runb			Frames:4 17 26 39
        AnimationSound = Sound:BodyFallOrc						Animation:chss_gb_u_skl.chss_gb_u_diea	Frames:73
        AnimationSound = Sound:BodyFallOrc						Animation:chss_gb_u_skl.chss_gb_u_lnda	Frames:5
    End

    Behavior                             = LargeGroupAudioUpdate ModuleTag_LGAU
        Key                              = Human Unit Infantry Hero
        UnitWeight                       = 2
    End

    ; *** ENGINEERING Parameters ***
    RadarPriority                        = UNIT
    KindOf                               = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ARMY_SUMMARY ARCHER CAN_USE_SIEGE_TOWER ATTACK_NEEDS_LINE_OF_SIGHT ORC
    PathfindDiameter                     = 40.0

    Body                                 = RespawnBody ModuleTag_RespawnBody
        CheerRadius                      = M_EMOTION_CHEER_RADIUS
        MaxHealth                        = SAF_LUG_HEALTH
        PermanentlyKilledByFilter        = NONE
        DodgePercent                     = M_HERO_DODGE_PERCENT
    End

    Behavior                             = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                        = DYING
        DeathFX                          = FX_LugDieToRespawn
        DeathAnimationTime               = 4000
        InitialSpawnFX                   = FX_LugInitialSpawn
        RespawnAnim                      = LEVELED
        RespawnFX                        = FX_GenericEvilInitialSpawn
        RespawnAnimationTime             = 4000
        AutoRespawnAtObjectFilter        = NONE +CASTLE_KEEP
        ButtonImage                      = uilugthemauled
        RespawnRules                     = AutoSpawn:No    Cost:600        Time:90000        Health:100%
        RespawnEntry                     = Level:2            Cost:700     Time:90000
        RespawnEntry                     = Level:3            Cost:800     Time:90000
        RespawnEntry                     = Level:4            Cost:900     Time:90000
        RespawnEntry                     = Level:5            Cost:1000    Time:120000
        RespawnEntry                     = Level:6            Cost:1100    Time:120000
        RespawnEntry                     = Level:7            Cost:1200    Time:120000
        RespawnEntry                     = Level:8            Cost:1300    Time:120000
        RespawnEntry                     = Level:9            Cost:1400    Time:120000
        RespawnEntry                     = Level:10           Cost:1500    Time:120000
    End

    Behavior                             = AutoAbilityBehavior ModuleTag_AutoAbilityBehavior
    End        

    Behavior                             = AutoHealBehavior ModuleTag_TheodenHealing
        StartsActive                     = Yes
        HealingAmount                    = M_HERO_HEAL_AMOUNT
        HealingDelay                     = 1000
        StartHealingDelay                = M_HERO_HEAL_DELAY
        HealOnlyIfNotInCombat            = Yes
    End
    
    Behavior                             = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance            = 300
         TauntAndPointUpdateDelay        = 1000
        AddEmotion                       = Alert_Base
     End    
    
    Behavior                             = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle       = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate              = 500
        HoldGroundCloseRangeDistance     = 40
        AILuaEventsList                  = LugtheMauledFunctions
    End

    LocomotorSet
        Locomotor                        = IsengardLurtzLocomotor
        Condition                        = SET_NORMAL 
        Speed                            = M_NORMAL_EVIL_HERO_SPEED
    End

    Behavior                             = PhysicsBehavior ModuleTag_04
        GravityMult                      = 1.0
    End

    Behavior                             = SlowDeathBehavior ModuleTag_05
        DeathTypes                       = ALL 
        SinkDelay                        = 3000
        SinkRate                         = 0.40
        DestructionDelay                 = 8000
        Sound                            = INITIAL LugVoiceDie
    End
    
    Behavior                             = SquishCollide ModuleTag_06
    End
    
    Behavior                             = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1            = 7
        HitReactionLifeTimer2            = 15
        HitReactionLifeTimer3            = 10

        HitReactionThreshold1            = 0.0
        HitReactionThreshold2            = 25.0
        HitReactionThreshold3            = 50.0
    End

  Geometry                               = CYLINDER
  GeometryMajorRadius                    = 8.0
  GeometryMinorRadius                    = 8.0
  GeometryHeight                         = 19.2
  GeometryIsSmall                        = Yes
  Shadow                                 = SHADOW_DECAL
  ShadowSizeX                            = 19;
  ShadowSizeY                            = 19;
  ShadowTexture                          = ShadowI;
End
