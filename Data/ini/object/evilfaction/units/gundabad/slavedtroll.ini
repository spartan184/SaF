
Object GoblinCaveTroll_Slaved
    ; *** ART Parameters ***
Scale = .90

    Draw = W3DScriptedModelDraw ModuleTag_01
	
	    OkToChangeModelColor = Yes

	    ExtraPublicBone				= TRUNK01
        ExtraPublicBone				= FIREPOINT01
        ExtraPublicBone             = ROCK

	    DefaultModelConditionState
		    Model = MuCavTroll_SKN
		    WeaponLaunchBone = PRIMARY FIREPOINT01
	    End
        IdleAnimationState
            StateName = STATE_Idle
            Animation = Breathe
                AnimationName = MuCavTroll_SKL.MuCavTroll_IDLB 
                AnimationMode = ONCE
                AnimationBlendTime = 10
                AnimationPriority = 40
            End
            Animation = BellyScratch
                AnimationName = MuCavTroll_SKL.MuCavTroll_IDLG 
                AnimationMode = ONCE
                AnimationBlendTime = 10
                AnimationPriority = 10
            End
            Animation = RubHead
                AnimationName = MuCavTroll_SKL.MuCavTroll_IDLF 
                AnimationMode = ONCE
                AnimationBlendTime = 10
                AnimationPriority = 10
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE        
        End
        AnimationState = DYING
            Animation
                AnimationName     =  MuCavTroll_SKL.MuCavTroll_DIEC
                AnimationMode     = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TrollSplatDust1
            ParticleSysBone = BAT_HEAD TrollSplatDust1
        End
        AnimationState = FIRING_OR_PREATTACK_A			; throw rock
			StateName = Throw
			Animation
				AnimationName		= MuCavTroll_SKL.MuCavTroll_THRA
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
                ;AnimationSpeedFactorRange = 0.5 0.5
			End
			FrameForPristineBonePositions = 10 ;21 ;24
		End
		AnimationState = RELOADING_A					; Pickup rock.
			Animation
				AnimationName		= MuCavTroll_SKL.mucavtroll_rlda
				AnimationMode		= ONCE
			End
			FXEvent	= Frame:21	Name: FX_CaveTrollRockGrab
			FXEvent	= Frame:38	Name: FX_CaveTrollRockYank
		End
    AnimationState                    = CONTINUOUS_FIRE_MEAN
        StateName                    =    STATE_Coasting
        Animation                    =    HangFrameWhileCoasting
            AnimationName            =    MuCavTroll_SKL.MuCavTroll_THRA
            AnimationMode            =    MANUAL
        End
    End
        AnimationState = ENGAGED
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_IDLB
                AnimationMode = LOOP
            End
        End
    ;------------------ Troll Rock Transitions ------------------------
        TransitionState       = TRANS_IdleToSelected
            Animation           = ATNA
                AnimationName     = MuCavTroll_SKL.MuCavTroll_IDLM
                AnimationMode     = ONCE  
            End
        End
        TransitionState       = TRANS_SelectedToRock
            Animation
				AnimationName		= MuCavTroll_SKL.mucavtroll_rlda
				AnimationMode		= ONCE
			End
			FXEvent	= Frame:21	Name: FX_CaveTrollRockGrab
			FXEvent	= Frame:38	Name: FX_CaveTrollRockYank
        End
        TransitionState       = TRANS_RockToSelected
            Animation           = ATNA
                AnimationName     = MuCavTroll_SKL.MuCavTroll_IDLF
                AnimationMode     = ONCE
            End
        End
        AnimationState        = SELECTED
            StateName           = STATE_Rock
            Animation           = ATNB
                AnimationName     = MuCavTroll_SKL.MuCavTroll_IDLB
                AnimationMode     = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToRock") end
            EndScript
        End
        AnimationState        = SELECTED
            StateName           = STATE_Selected
            Animation           = ATNB
                AnimationName     = MuCavTroll_SKL.MuCavTroll_IDLA
                AnimationMode     = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
                if Prev == "STATE_Rock" then CurDrawableSetTransitionAnimState("TRANS_RockToSelected") end
            EndScript
        End
    End

    ; ***DESIGN parameters ***
    Side = Gundabad
    EditorSorting = UNIT
    CommandPoints = 0
    TransportSlotCount = 1
    WeaponSet
        Conditions          =  NONE
        Weapon              =  PRIMARY    CaveTrollRockFromThinAir
        AutoChooseSources   = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ShroudClearingRange = 380
    VisionRange = 360


    ; *** ENGINEERING Parameters ***
    RadarPriority = NOT_ON_RADAR
    KindOf = PRELOAD NOT_AUTOACQUIRABLE UNATTACKABLE CAN_ATTACK IGNORES_SELECT_ALL IGNORED_IN_GUI IMMOBILE;PRELOAD ATTACK_NEEDS_LINE_OF_SIGHT UNATTACKABLE NOT_AUTOACQUIRABLE CAN_ATTACK IGNORED_IN_GUI ;IMMOBILE

    ImmuneToShockwave = yes
     
    Body = ActiveBody ModuleTag_02
        MaxHealth             = 1.0
    End 
    Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes
		AILuaEventsList = GundabadCaveTrollFunctions

	End    
    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 1200    ;msec
    End 
	Behavior = SlowDeathBehavior ModuleTag_50
        DeathTypes = ALL
        DestructionDelay = 25000
        DecayBeginTime = 1000
        SinkDelay = 500
        SinkRate = 1.5     ; in Dist/Sec
        Sound = INITIAL TrollDie
        ProbabilityModifier = 50

    End
	LocomotorSet
		Locomotor   = SaFTrollSlavedLocomotor
		Condition   = SET_NORMAL
		Speed       = 0
	End

 
    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes

    Shadow = SHADOW_DECAL
    ShadowSizeX = 21;
    ShadowSizeY = 21;
    ShadowTexture = ShadowI;
End